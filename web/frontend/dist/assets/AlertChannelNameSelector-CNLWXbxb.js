import{G as L,S as z}from"./SearchForm-C0DQDEEE.js";import{G as B}from"./GModal-xYfXS7HF.js";import{G as x}from"./GPane-w_mkAzRd.js";import{d as k,r as p,a7 as b,av as M,g as R,o as I,w as t,f as U,e as a,b as o,am as S,aO as _,K as C,t as y,_ as w,c as E,G as Y,J as O,i as q,aQ as D}from"./index-DVVs4J_g.js";import"./GPagination.vue_vue_type_style_index_0_scoped_2c35df38_lang-rwsE82tp.js";import{u as H,C as J}from"./AlertChannelNameSelector.vue_vue_type_style_index_0_scoped_90f3078b_lang-CKIbgiMI.js";import{E as K}from"./EllipsisHorizontalOutline-Cb0kM4Ef.js";import{N as Q}from"./InputGroup-S4SNSUhT.js";const W=["id"],$=k({name:"AlertChannelListModal",__name:"AlertChannelListModal",props:{visible:{type:Boolean,default:!1},title:{default:""},width:{default:1200},to:{default:void 0},modelValue:{default:""}},emits:["update:visible","after-leave","select","update:modelValue"],setup(h,{emit:v}){const s=h,r=v,u=p(),i=p(),m=p(s.visible),g=b(()=>s.visible,e=>{m.value=e,e&&N()}),{service:l,handleSearch:c,handlePageChange:f}=H(i,u),A=e=>{const d=J.find(n=>n.value===e);return(d==null?void 0:d.label)||e},F=e=>({email:"primary",qq:"info",wechat_work:"success",dingtalk:"warning",webhook:"default",sms:"error"})[e]||"default",V=e=>{m.value=e,r("update:visible",e)},T=()=>{r("after-leave")},N=async()=>{await c()},G=async({currentPage:e,pageSize:d})=>{await f({currentPage:e,pageSize:d})},P=({row:e})=>{e&&e.channelName&&(r("update:modelValue",e.channelName),r("select",e),V(!1))};return M(()=>{g()}),(e,d)=>(I(),R(a(B),{visible:m.value,title:s.title||"选择告警渠道",width:s.width||1200,to:s.to,"show-footer":!1,"onUpdate:visible":V,onAfterLeave:T},{default:t(()=>[U("div",{class:"alert-channel-list-modal",id:a(l).model.moduleId},[o(a(x),{direction:"vertical","no-resize":!0},{1:t(()=>[o(z,S({ref_key:"searchFormRef",ref:u,"module-id":a(l).model.moduleId},a(l).model.searchFormConfig,{onSearch:N}),null,16,["module-id"])]),2:t(()=>[o(a(L),S({ref_key:"gridRef",ref:i,"module-id":a(l).model.moduleId,data:a(l).model.configList,loading:a(l).model.loading},a(l).model.gridConfig,{onPageChange:G,onRowClick:P}),{channelType:t(({row:n})=>[o(a(_),{size:"small",type:F(n.channelType)},{default:t(()=>[C(y(A(n.channelType)),1)]),_:2},1032,["type"])]),activeFlag:t(({row:n})=>[o(a(_),{size:"small",type:n.activeFlag==="Y"?"success":"default"},{default:t(()=>[C(y(n.activeFlag==="Y"?"启用":"禁用"),1)]),_:2},1032,["type"])]),defaultFlag:t(({row:n})=>[o(a(_),{size:"small",type:n.defaultFlag==="Y"?"warning":"default"},{default:t(()=>[C(y(n.defaultFlag==="Y"?"默认":"-"),1)]),_:2},1032,["type"])]),_:1},16,["module-id","data","loading"])]),_:1})],8,W)]),_:1},8,["visible","title","width","to"]))}}),j=w($,[["__scopeId","data-v-0f0a6989"]]),X=k({name:"AlertChannelNameSelector",__name:"AlertChannelNameSelector",props:{modelValue:{default:""}},emits:["update:modelValue"],setup(h,{emit:v}){const s=h,r=v,u=p(!1),i=p(s.modelValue);b(()=>s.modelValue,l=>{i.value=l}),b(i,l=>{r("update:modelValue",l)});const m=l=>{i.value=l},g=()=>{u.value=!0};return(l,c)=>(I(),E(D,null,[o(a(Q),null,{default:t(()=>[o(a(Y),{value:h.modelValue,placeholder:"请输入告警渠道名称或点击选择",clearable:"",size:"small","onUpdate:value":m},null,8,["value"]),o(a(O),{type:"primary",size:"small",onClick:g},{icon:t(()=>[o(a(q),null,{default:t(()=>[o(a(K))]),_:1})]),_:1})]),_:1}),o(j,{visible:u.value,"onUpdate:visible":c[0]||(c[0]=f=>u.value=f),"model-value":i.value,"onUpdate:modelValue":c[1]||(c[1]=f=>i.value=f),title:"选择告警渠道",width:1200},null,8,["visible","model-value"])],64))}}),ie=w(X,[["__scopeId","data-v-90f3078b"]]);export{ie as A};
