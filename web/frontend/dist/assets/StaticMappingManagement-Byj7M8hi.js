import{d as E,a8 as h,at as J,aq as ee,ar as L,ao as ke,aA as _e,aC as he,dk as Ce,aB as we,g as U,aH as xe,c as Z,a as A,o as D,$ as Se,bP as le,cO as Te,m as r,n as e,w as n,aO as Pe,bU as Ne,q as F,V as me,p as ze,v as V,x as z,_ as re,aM as K,I as M,bR as Y,b as ue,cT as Ue,r as w,f as Ae,a0 as O,h as ve,E as I,cU as De,t as Q,J as R,a1 as oe,R as ce,M as Ie,A as G,C as g,B as Be,co as Re,a2 as te,cZ as Me}from"./index-Bm8WTrgo.js";import{C as $e}from"./CheckmarkCircleOutline-zm_tlaJ3.js";import{C as Oe}from"./CloseCircleOutline-DFAgdDO-.js";import{A as He}from"./AlertCircleOutline-MDG2uuCN.js";import{L as qe}from"./LinkOutline-B3obbmwD.js";import{a as Fe,_ as Ee}from"./Grid-BszSwIPR.js";import{N as Ke}from"./Popconfirm-Doj4hVEv.js";import{A as Ve}from"./AddOutline-Crq49hC7.js";import{T as Ye}from"./TrashOutline-lFSebtJX.js";import{_ as W,b as je,a as de}from"./RadioGroup-DeGnoaYt.js";import{_ as Je}from"./DataTable-C88L71Mp.js";import{f as Le}from"./index-Bkn5030q.js";import{N as ae}from"./InputNumber-Da0ADIUs.js";import{N as pe}from"./Switch-Bksdye9l.js";import{R as Ge}from"./RefreshOutline-BMOJJPWL.js";const Qe=E({name:"ArrowBack",render(){return h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},h("path",{d:"M0 0h24v24H0V0z",fill:"none"}),h("path",{d:"M19 11H7.83l4.88-4.88c.39-.39.39-1.03 0-1.42-.39-.39-1.02-.39-1.41 0l-6.59 6.59c-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L7.83 13H19c.55 0 1-.45 1-1s-.45-1-1-1z"}))}}),We=J([ee("page-header-header",`
 margin-bottom: 20px;
 `),ee("page-header",`
 display: flex;
 align-items: center;
 justify-content: space-between;
 line-height: 1.5;
 font-size: var(--n-font-size);
 `,[L("main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 `),L("back",`
 display: flex;
 margin-right: 16px;
 font-size: var(--n-back-size);
 cursor: pointer;
 color: var(--n-back-color);
 transition: color .3s var(--n-bezier);
 `,[J("&:hover","color: var(--n-back-color-hover);"),J("&:active","color: var(--n-back-color-pressed);")]),L("avatar",`
 display: flex;
 margin-right: 12px
 `),L("title",`
 margin-right: 16px;
 transition: color .3s var(--n-bezier);
 font-size: var(--n-title-font-size);
 font-weight: var(--n-title-font-weight);
 color: var(--n-title-text-color);
 `),L("subtitle",`
 font-size: 14px;
 transition: color .3s var(--n-bezier);
 color: var(--n-subtitle-text-color);
 `)]),ee("page-header-content",`
 font-size: var(--n-font-size);
 `,[J("&:not(:first-child)","margin-top: 20px;")]),ee("page-header-footer",`
 font-size: var(--n-font-size);
 `,[J("&:not(:first-child)","margin-top: 20px;")])]),Ze=Object.assign(Object.assign({},he.props),{title:String,subtitle:String,extra:String,onBack:Function}),Xe=E({name:"PageHeader",props:Ze,slots:Object,setup(u){const{mergedClsPrefixRef:c,mergedRtlRef:d,inlineThemeDisabled:f}=_e(u),t=he("PageHeader","-page-header",We,Ce,u,c),a=we("PageHeader",d,c),y=U(()=>{const{self:{titleTextColor:_,subtitleTextColor:l,backColor:S,fontSize:T,titleFontSize:P,backSize:v,titleFontWeight:k,backColorHover:C,backColorPressed:B},common:{cubicBezierEaseInOut:$}}=t.value;return{"--n-title-text-color":_,"--n-title-font-size":P,"--n-title-font-weight":k,"--n-font-size":T,"--n-back-size":v,"--n-subtitle-text-color":l,"--n-back-color":S,"--n-back-color-hover":C,"--n-back-color-pressed":B,"--n-bezier":$}}),p=f?xe("page-header",void 0,y,u):void 0;return{rtlEnabled:a,mergedClsPrefix:c,cssVars:f?void 0:y,themeClass:p==null?void 0:p.themeClass,onRender:p==null?void 0:p.onRender}},render(){var u;const{onBack:c,title:d,subtitle:f,extra:t,mergedClsPrefix:a,cssVars:y,$slots:p}=this;(u=this.onRender)===null||u===void 0||u.call(this);const{title:_,subtitle:l,extra:S,default:T,header:P,avatar:v,footer:k,back:C}=p,B=c,$=d||_,x=f||l,q=t||S;return h("div",{style:y,class:[`${a}-page-header-wrapper`,this.themeClass,this.rtlEnabled&&`${a}-page-header-wrapper--rtl`]},P?h("div",{class:`${a}-page-header-header`,key:"breadcrumb"},P()):null,(B||v||$||x||q)&&h("div",{class:`${a}-page-header`,key:"header"},h("div",{class:`${a}-page-header__main`,key:"back"},B?h("div",{class:`${a}-page-header__back`,onClick:c},C?C():h(ke,{clsPrefix:a},{default:()=>h(Qe,null)})):null,v?h("div",{class:`${a}-page-header__avatar`},v()):null,$?h("div",{class:`${a}-page-header__title`,key:"title"},d||_()):null,x?h("div",{class:`${a}-page-header__subtitle`,key:"subtitle"},f||l()):null),q?h("div",{class:`${a}-page-header__extra`},t||S()):null),T?h("div",{class:`${a}-page-header-content`,key:"content"},T()):null,k?h("div",{class:`${a}-page-header-footer`,key:"footer"},k()):null)}}),et={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},tt=E({name:"CloudDownloadOutline",render:function(c,d){return D(),Z("svg",et,d[0]||(d[0]=[A("path",{d:"M320 336h76c55 0 100-21.21 100-75.6s-53-73.47-96-75.6C391.11 99.74 329 48 256 48c-69 0-113.44 45.79-128 91.2c-60 5.7-112 35.88-112 98.4S70 336 136 336h56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),A("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M192 400.1l64 63.9l64-63.9"},null,-1),A("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 224v224.03"},null,-1)]))}}),H=Se("/gateway/hub0061"),at=async u=>H.post("/queryServerNodes",u),ot=async u=>H.post("/createServerNode",u),lt=async u=>H.post("/updateServerNode",u),fe=async u=>H.post("/deleteServerNode",{serverNodeId:u}),rt=async u=>H.post("/checkPortConflict",u),st=async u=>H.post("/getNodeStats",{tunnelServerId:u}),nt=async u=>H.post("/enableServerNode",{serverNodeId:u}),it=async u=>H.post("/disableServerNode",{serverNodeId:u}),ut=async u=>Promise.all(u.map(c=>fe(c))),ct={class:"server-node-stats"},dt={class:"stat-content"},pt={class:"stat-icon"},ht={class:"stat-info"},mt={class:"stat-value"},vt={class:"stat-label"},ft=E({__name:"ServerNodeStats",props:{statistics:{}},setup(u){const c=u,{t:d}=le(),f=a=>{if(a===0)return"0 B";const y=1024,p=["B","KB","MB","GB","TB"],_=Math.floor(Math.log(a)/Math.log(y));return Math.round(a/Math.pow(y,_)*100)/100+" "+p[_]},t=U(()=>[{key:"total",label:d("hub0061.stats.totalNodes"),value:c.statistics.totalNodes,icon:Te,type:"primary"},{key:"active",label:d("hub0061.stats.activeNodes"),value:c.statistics.activeNodes,icon:$e,type:"success"},{key:"inactive",label:d("hub0061.stats.inactiveNodes"),value:c.statistics.inactiveNodes,icon:Oe,type:"warning"},{key:"error",label:d("hub0061.stats.errorNodes"),value:c.statistics.errorNodes,icon:He,type:"error"},{key:"connections",label:d("hub0061.stats.totalConnections"),value:c.statistics.totalConnections,icon:qe,type:"info"},{key:"traffic",label:d("hub0061.stats.totalTraffic"),value:f(c.statistics.totalTraffic),icon:tt,type:"info"}]);return(a,y)=>(D(),Z("div",ct,[r(e(Ee),{cols:6,"x-gap":16,"y-gap":16,responsive:"screen"},{default:n(()=>[(D(!0),Z(Pe,null,Ne(t.value,p=>(D(),F(e(Fe),{key:p.key},{default:n(()=>[r(e(me),{bordered:!1,class:ze(["stat-card",`stat-card-${p.type}`])},{default:n(()=>[A("div",dt,[A("div",pt,[r(e(V),{component:p.icon,size:32},null,8,["component"])]),A("div",ht,[A("div",mt,z(p.value),1),A("div",vt,z(p.label),1)])])]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})]))}}),bt=re(ft,[["__scopeId","data-v-ac1eab0e"]]),yt=u=>({active:"success",inactive:"warning",error:"error"})[u]||"default",gt=u=>({tcp:"info",udp:"success",http:"warning",https:"error",stcp:"info",sudp:"success"})[u]||"default",kt=u=>{if(u===0)return"0 B";const c=1024,d=["B","KB","MB","GB","TB"],f=Math.floor(Math.log(u)/Math.log(c));return Math.round(u/Math.pow(c,f)*100)/100+" "+d[f]},_t=(u,c,d,f,t)=>[{type:"selection",fixed:"left"},{title:t("hub0061.table.nodeName"),key:"nodeName",width:180,fixed:"left",ellipsis:{tooltip:!0}},{title:t("hub0061.table.nodeType"),key:"nodeType",width:100,render:a=>h(K,{type:a.nodeType==="static"?"info":"success",size:"small"},{default:()=>t(`hub0061.nodeType.${a.nodeType}`)})},{title:t("hub0061.table.proxyType"),key:"proxyType",width:100,render:a=>h(K,{type:gt(a.proxyType),size:"small"},{default:()=>a.proxyType.toUpperCase()})},{title:t("hub0061.table.listenPort"),key:"listenPort",width:120,render:a=>`${a.listenAddress}:${a.listenPort}`},{title:t("hub0061.table.targetPort"),key:"targetPort",width:180,render:a=>`${a.targetAddress}:${a.targetPort}`},{title:t("hub0061.table.nodeStatus"),key:"nodeStatus",width:100,render:a=>h(K,{type:yt(a.nodeStatus),size:"small"},{default:()=>t(`hub0061.nodeStatus.${a.nodeStatus}`)})},{title:t("hub0061.table.connectionCount"),key:"connectionCount",width:120,align:"right"},{title:t("hub0061.table.totalConnections"),key:"totalConnections",width:120,align:"right"},{title:t("hub0061.table.totalBytes"),key:"totalBytes",width:120,align:"right",render:a=>kt(a.totalBytes)},{title:t("hub0061.table.maxConnections"),key:"maxConnections",width:120,align:"right"},{title:t("hub0061.table.compression"),key:"compression",width:80,render:a=>h(K,{type:a.compression==="Y"?"success":"default",size:"small"},{default:()=>a.compression==="Y"?t("common.yes"):t("common.no")})},{title:t("hub0061.table.encryption"),key:"encryption",width:80,render:a=>h(K,{type:a.encryption==="Y"?"success":"default",size:"small"},{default:()=>a.encryption==="Y"?t("common.yes"):t("common.no")})},{title:t("hub0061.table.healthCheckType"),key:"healthCheckType",width:120,render:a=>a.healthCheckType?h(K,{type:"info",size:"small"},{default:()=>a.healthCheckType.toUpperCase()}):"-"},{title:t("hub0061.table.lastHealthCheck"),key:"lastHealthCheck",width:180,render:a=>a.lastHealthCheck||"-"},{title:t("hub0061.table.createdTime"),key:"createdTime",width:180},{title:t("common.actions"),key:"actions",width:280,fixed:"right",render:a=>h(Y,{size:"small"},{default:()=>[h(M,{size:"small",type:"primary",onClick:()=>u(a)},{default:()=>t("common.edit")}),a.nodeStatus==="active"?h(M,{size:"small",type:"warning",onClick:()=>f(a)},{default:()=>t("common.disable")}):h(M,{size:"small",type:"success",onClick:()=>d(a)},{default:()=>t("common.enable")}),h(Ke,{onPositiveClick:()=>c(a)},{default:()=>t("common.confirmDelete"),trigger:()=>h(M,{size:"small",type:"error"},{default:()=>t("common.delete")})})]})}],Ct={class:"server-node-table"},wt={class:"table-toolbar"},xt=E({__name:"ServerNodeTable",emits:["create","edit"],setup(u,{expose:c,emit:d}){const f=d,{t}=le(),a=ue(),y=Ue(),p=w([]),_=w(!1),l=w([]),S=w(""),T=w(null),P=w(null),v=Ae({page:1,pageSize:20,itemCount:0,showSizePicker:!0,pageSizes:[10,20,50,100],prefix:b=>t("common.totalItems",{count:b.itemCount})}),k=U(()=>[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"},{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"},{label:"STCP",value:"stcp"},{label:"SUDP",value:"sudp"}]),C=U(()=>[{label:t("hub0061.nodeStatus.active"),value:"active"},{label:t("hub0061.nodeStatus.inactive"),value:"inactive"},{label:t("hub0061.nodeStatus.error"),value:"error"}]),B=U(()=>_t(ie,i,o,s,t)),$=()=>({keyword:S.value||void 0,proxyType:T.value||void 0,nodeStatus:P.value||void 0,pageIndex:v.page||1,pageSize:v.pageSize||20}),x=async()=>{var b;_.value=!0;try{const m=$(),N=await at(m);O(N)?(p.value=oe(N,[]),v.itemCount=((b=N.pageInfo)==null?void 0:b.totalCount)||0):a.error(N.message||t("common.loadFailed"))}catch(m){console.error("加载静态端口映射列表失败:",m),a.error(t("common.loadFailed"))}finally{_.value=!1}},q=async()=>{await x()},se=()=>{v.page=1,x()},X=()=>{v.page=1,x()},ne=()=>{f("create")},ie=b=>{f("edit",b)},i=async b=>{try{const m=await fe(b.serverNodeId);O(m)?(a.success(t("common.deleteSuccess")),await x()):a.error(m.message||t("common.deleteFailed"))}catch(m){console.error("删除静态端口映射失败:",m),a.error(t("common.deleteFailed"))}},o=async b=>{try{const m=await nt(b.serverNodeId);O(m)?(a.success(t("common.operationSuccess")),await x()):a.error(m.message||t("common.operationFailed"))}catch(m){console.error("启用静态端口映射失败:",m),a.error(t("common.operationFailed"))}},s=async b=>{try{const m=await it(b.serverNodeId);O(m)?(a.success(t("common.operationSuccess")),await x()):a.error(m.message||t("common.operationFailed"))}catch(m){console.error("禁用静态端口映射失败:",m),a.error(t("common.operationFailed"))}},j=()=>{y.warning({title:t("common.confirmDelete"),content:t("common.confirmBatchDelete",{count:l.value.length}),positiveText:t("common.confirm"),negativeText:t("common.cancel"),onPositiveClick:async()=>{try{await ut(l.value),a.success(t("common.deleteSuccess")),l.value=[],await x()}catch(b){console.error("批量删除失败:",b),a.error(t("common.deleteFailed"))}}})},be=b=>{l.value=b},ye=b=>{v.page=b,x()},ge=b=>{v.pageSize=b,v.page=1,x()};return c({initialize:q,loadData:x}),ve(()=>{q()}),(b,m)=>(D(),Z("div",Ct,[A("div",wt,[r(e(Y),{size:16},{default:n(()=>[r(e(I),{value:S.value,"onUpdate:value":[m[0]||(m[0]=N=>S.value=N),se],placeholder:e(t)("common.searchPlaceholder"),clearable:"",style:{width:"300px"}},{prefix:n(()=>[r(e(V),{component:e(De)},null,8,["component"])]),_:1},8,["value","placeholder"]),r(e(W),{value:T.value,"onUpdate:value":[m[1]||(m[1]=N=>T.value=N),X],placeholder:e(t)("hub0061.filter.proxyType"),options:k.value,clearable:"",style:{width:"150px"}},null,8,["value","placeholder","options"]),r(e(W),{value:P.value,"onUpdate:value":[m[2]||(m[2]=N=>P.value=N),X],placeholder:e(t)("hub0061.filter.nodeStatus"),options:C.value,clearable:"",style:{width:"150px"}},null,8,["value","placeholder","options"])]),_:1}),r(e(Y),{size:16},{default:n(()=>[r(e(M),{type:"primary",onClick:ne},{icon:n(()=>[r(e(V),{component:e(Ve)},null,8,["component"])]),default:n(()=>[R(" "+z(e(t)("common.create")),1)]),_:1}),l.value.length>0?(D(),F(e(M),{key:0,type:"error",onClick:j},{icon:n(()=>[r(e(V),{component:e(Ye)},null,8,["component"])]),default:n(()=>[R(" "+z(e(t)("common.batchDelete"))+" ("+z(l.value.length)+") ",1)]),_:1})):Q("",!0)]),_:1})]),r(e(Je),{columns:B.value,data:p.value,loading:_.value,pagination:v,"row-key":N=>N.serverNodeId,"checked-row-keys":l.value,"scroll-x":2400,"max-height":600,"onUpdate:checkedRowKeys":m[3]||(m[3]=N=>be(N)),"onUpdate:page":ye,"onUpdate:pageSize":ge},null,8,["columns","data","loading","pagination","row-key","checked-row-keys"])]))}}),St=re(xt,[["__scopeId","data-v-c1c2c66e"]]),Tt=E({__name:"ServerNodeDialog",props:{show:{type:Boolean},editData:{default:null}},emits:["update:show","success"],setup(u,{emit:c}){const d=u,f=c,{t}=le(),a=ue(),y=w(null),p=U({get:()=>d.show,set:i=>f("update:show",i)}),_=U(()=>!!d.editData),l=w({tunnelServerId:"",nodeName:"",nodeType:"static",proxyType:"tcp",listenAddress:"0.0.0.0",listenPort:0,targetAddress:"",targetPort:0,compression:"Y",encryption:"N",maxConnections:100,healthCheckInterval:60}),S=w(!1),T=w(!1),P=U({get:()=>l.value.compression==="Y",set:i=>l.value.compression=i?"Y":"N"}),v=U({get:()=>l.value.encryption==="Y",set:i=>l.value.encryption=i?"Y":"N"}),k=U(()=>l.value.proxyType==="http"||l.value.proxyType==="https"),C=w([]),B=U(()=>[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"},{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"},{label:"STCP",value:"stcp"},{label:"SUDP",value:"sudp"}]),$=U(()=>[{label:"TCP",value:"tcp"},{label:"HTTP",value:"http"}]),x={tunnelServerId:[{required:!0,message:t("hub0061.form.tunnelServerIdRequired"),trigger:"change"}],nodeName:[{required:!0,message:t("hub0061.form.nodeNameRequired"),trigger:"blur"},{min:2,max:100,message:t("hub0061.form.nodeNameLength"),trigger:"blur"}],nodeType:[{required:!0,message:t("hub0061.form.nodeTypeRequired"),trigger:"change"}],proxyType:[{required:!0,message:t("hub0061.form.proxyTypeRequired"),trigger:"change"}],listenAddress:[{required:!0,message:t("hub0061.form.listenAddressRequired"),trigger:"blur"}],listenPort:[{required:!0,type:"number",message:t("hub0061.form.listenPortRequired"),trigger:"blur"}],targetAddress:[{required:!0,message:t("hub0061.form.targetAddressRequired"),trigger:"blur"}],targetPort:[{required:!0,type:"number",message:t("hub0061.form.targetPortRequired"),trigger:"blur"}]},q=async()=>{T.value=!0;try{const i=await Le();if(O(i)){const o=oe(i,[]);C.value=o.map(s=>({label:s.serverName,value:s.tunnelServerId}))}else{const o=te(i,"加载隧道服务器列表失败");a.error(o)}}catch(i){console.error("加载隧道服务器列表失败:",i),a.error("加载隧道服务器列表失败")}finally{T.value=!1}},se=async()=>{var i;if(l.value.listenPort&&l.value.listenAddress&&l.value.proxyType)try{const o=await rt({listenAddress:l.value.listenAddress,listenPort:l.value.listenPort,proxyType:l.value.proxyType,serverNodeId:_.value?(i=d.editData)==null?void 0:i.serverNodeId:void 0});if(O(o)){const s=oe(o,{});s!=null&&s.hasConflict&&a.warning(t("hub0061.message.portConflict"))}else{const s=te(o,"检查端口冲突失败");console.error("检查端口冲突失败:",s)}}catch(o){console.error("检查端口冲突失败:",o)}},X=async()=>{var i;try{await((i=y.value)==null?void 0:i.validate()),S.value=!0;const o={...l.value};o.customDomains&&Array.isArray(o.customDomains)&&(o.customDomains=JSON.stringify(o.customDomains)),o.headers&&typeof o.headers=="object"&&(o.headers=JSON.stringify(o.headers)),o.locations&&Array.isArray(o.locations)&&(o.locations=JSON.stringify(o.locations));let s;if(_.value&&d.editData?s=await lt({...o,serverNodeId:d.editData.serverNodeId}):s=await ot(o),O(s)){const j=te(s,t(_.value?"common.updateSuccess":"common.createSuccess"));a.success(j),f("success"),p.value=!1}else{const j=te(s,t("common.operationFailed"));a.error(j)}}catch(o){if(o!=null&&o.errors)return;console.error("提交失败:",o),a.error(t("common.operationFailed"))}finally{S.value=!1}},ne=()=>{p.value=!1},ie=()=>{var i;(i=y.value)==null||i.restoreValidation(),l.value={tunnelServerId:"",nodeName:"",nodeType:"static",proxyType:"tcp",listenAddress:"0.0.0.0",listenPort:0,targetAddress:"",targetPort:0,compression:"Y",encryption:"N",maxConnections:100,healthCheckInterval:60}};return ce(()=>d.editData,i=>{if(i){l.value={tunnelServerId:i.tunnelServerId,nodeName:i.nodeName,nodeType:i.nodeType,proxyType:i.proxyType,listenAddress:i.listenAddress,listenPort:i.listenPort,targetAddress:i.targetAddress,targetPort:i.targetPort,subDomain:i.subDomain,httpUser:i.httpUser,httpPassword:i.httpPassword,hostHeaderRewrite:i.hostHeaderRewrite,compression:i.compression,encryption:i.encryption,secretKey:i.secretKey,healthCheckType:i.healthCheckType,healthCheckUrl:i.healthCheckUrl,healthCheckInterval:i.healthCheckInterval,maxConnections:i.maxConnections,noteText:i.noteText};try{i.customDomains&&(l.value.customDomains=JSON.parse(i.customDomains)),i.headers&&(l.value.headers=JSON.parse(i.headers)),i.locations&&(l.value.locations=JSON.parse(i.locations))}catch(o){console.error("解析JSON字段失败:",o)}}},{immediate:!0}),ce(()=>d.show,i=>{i&&q()}),(i,o)=>(D(),F(e(Re),{show:p.value,"onUpdate:show":o[20]||(o[20]=s=>p.value=s),"mask-closable":!1,preset:"card",title:_.value?e(t)("hub0061.dialog.editTitle"):e(t)("hub0061.dialog.createTitle"),style:{width:"800px"},onAfterLeave:ie},{footer:n(()=>[r(e(Y),{justify:"end"},{default:n(()=>[r(e(M),{onClick:ne},{default:n(()=>[R(z(e(t)("common.cancel")),1)]),_:1}),r(e(M),{type:"primary",loading:S.value,onClick:X},{default:n(()=>[R(z(e(t)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:n(()=>[r(e(Be),{ref_key:"formRef",ref:y,model:l.value,rules:x,"label-placement":"left","label-width":"140px","require-mark-placement":"right-hanging"},{default:n(()=>[r(e(Ie),{type:"line",animated:""},{default:n(()=>[r(e(G),{name:"basic",tab:e(t)("hub0061.dialog.tabs.basic")},{default:n(()=>[r(e(g),{label:e(t)("hub0061.form.tunnelServerId"),path:"tunnelServerId"},{default:n(()=>[r(e(W),{value:l.value.tunnelServerId,"onUpdate:value":o[0]||(o[0]=s=>l.value.tunnelServerId=s),placeholder:e(t)("hub0061.form.tunnelServerIdPlaceholder"),options:C.value,loading:T.value,filterable:""},null,8,["value","placeholder","options","loading"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.nodeName"),path:"nodeName"},{default:n(()=>[r(e(I),{value:l.value.nodeName,"onUpdate:value":o[1]||(o[1]=s=>l.value.nodeName=s),placeholder:e(t)("hub0061.form.nodeNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.nodeType"),path:"nodeType"},{default:n(()=>[r(e(je),{value:l.value.nodeType,"onUpdate:value":o[2]||(o[2]=s=>l.value.nodeType=s)},{default:n(()=>[r(e(de),{value:"static"},{default:n(()=>[R(z(e(t)("hub0061.nodeType.static")),1)]),_:1}),r(e(de),{value:"dynamic"},{default:n(()=>[R(z(e(t)("hub0061.nodeType.dynamic")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.proxyType"),path:"proxyType"},{default:n(()=>[r(e(W),{value:l.value.proxyType,"onUpdate:value":o[3]||(o[3]=s=>l.value.proxyType=s),placeholder:e(t)("hub0061.form.proxyTypePlaceholder"),options:B.value},null,8,["value","placeholder","options"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.listenAddress"),path:"listenAddress"},{default:n(()=>[r(e(I),{value:l.value.listenAddress,"onUpdate:value":o[4]||(o[4]=s=>l.value.listenAddress=s),placeholder:e(t)("hub0061.form.listenAddressPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.listenPort"),path:"listenPort"},{default:n(()=>[r(e(ae),{value:l.value.listenPort,"onUpdate:value":o[5]||(o[5]=s=>l.value.listenPort=s),placeholder:e(t)("hub0061.form.listenPortPlaceholder"),min:1,max:65535,style:{width:"100%"},onBlur:se},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.targetAddress"),path:"targetAddress"},{default:n(()=>[r(e(I),{value:l.value.targetAddress,"onUpdate:value":o[6]||(o[6]=s=>l.value.targetAddress=s),placeholder:e(t)("hub0061.form.targetAddressPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.targetPort"),path:"targetPort"},{default:n(()=>[r(e(ae),{value:l.value.targetPort,"onUpdate:value":o[7]||(o[7]=s=>l.value.targetPort=s),placeholder:e(t)("hub0061.form.targetPortPlaceholder"),min:1,max:65535,style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["tab"]),r(e(G),{name:"advanced",tab:e(t)("hub0061.dialog.tabs.advanced")},{default:n(()=>[r(e(g),{label:e(t)("hub0061.form.maxConnections"),path:"maxConnections"},{default:n(()=>[r(e(ae),{value:l.value.maxConnections,"onUpdate:value":o[8]||(o[8]=s=>l.value.maxConnections=s),placeholder:e(t)("hub0061.form.maxConnectionsPlaceholder"),min:1,max:1e4,style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.compression"),path:"compression"},{default:n(()=>[r(e(pe),{value:P.value,"onUpdate:value":o[9]||(o[9]=s=>P.value=s)},null,8,["value"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.encryption"),path:"encryption"},{default:n(()=>[r(e(pe),{value:v.value,"onUpdate:value":o[10]||(o[10]=s=>v.value=s)},null,8,["value"])]),_:1},8,["label"]),v.value?(D(),F(e(g),{key:0,label:e(t)("hub0061.form.secretKey"),path:"secretKey"},{default:n(()=>[r(e(I),{value:l.value.secretKey,"onUpdate:value":o[11]||(o[11]=s=>l.value.secretKey=s),placeholder:e(t)("hub0061.form.secretKeyPlaceholder"),type:"password","show-password-on":"click"},null,8,["value","placeholder"])]),_:1},8,["label"])):Q("",!0)]),_:1},8,["tab"]),r(e(G),{name:"health",tab:e(t)("hub0061.dialog.tabs.health")},{default:n(()=>[r(e(g),{label:e(t)("hub0061.form.healthCheckType"),path:"healthCheckType"},{default:n(()=>[r(e(W),{value:l.value.healthCheckType,"onUpdate:value":o[12]||(o[12]=s=>l.value.healthCheckType=s),placeholder:e(t)("hub0061.form.healthCheckTypePlaceholder"),options:$.value,clearable:""},null,8,["value","placeholder","options"])]),_:1},8,["label"]),l.value.healthCheckType==="http"?(D(),F(e(g),{key:0,label:e(t)("hub0061.form.healthCheckUrl"),path:"healthCheckUrl"},{default:n(()=>[r(e(I),{value:l.value.healthCheckUrl,"onUpdate:value":o[13]||(o[13]=s=>l.value.healthCheckUrl=s),placeholder:e(t)("hub0061.form.healthCheckUrlPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])):Q("",!0),l.value.healthCheckType?(D(),F(e(g),{key:1,label:e(t)("hub0061.form.healthCheckInterval"),path:"healthCheckInterval"},{default:n(()=>[r(e(ae),{value:l.value.healthCheckInterval,"onUpdate:value":o[14]||(o[14]=s=>l.value.healthCheckInterval=s),placeholder:e(t)("hub0061.form.healthCheckIntervalPlaceholder"),min:10,max:3600,style:{width:"100%"}},{suffix:n(()=>[R(z(e(t)("common.seconds")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])):Q("",!0)]),_:1},8,["tab"]),k.value?(D(),F(e(G),{key:0,name:"http",tab:e(t)("hub0061.dialog.tabs.http")},{default:n(()=>[r(e(g),{label:e(t)("hub0061.form.subDomain"),path:"subDomain"},{default:n(()=>[r(e(I),{value:l.value.subDomain,"onUpdate:value":o[15]||(o[15]=s=>l.value.subDomain=s),placeholder:e(t)("hub0061.form.subDomainPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.httpUser"),path:"httpUser"},{default:n(()=>[r(e(I),{value:l.value.httpUser,"onUpdate:value":o[16]||(o[16]=s=>l.value.httpUser=s),placeholder:e(t)("hub0061.form.httpUserPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.httpPassword"),path:"httpPassword"},{default:n(()=>[r(e(I),{value:l.value.httpPassword,"onUpdate:value":o[17]||(o[17]=s=>l.value.httpPassword=s),placeholder:e(t)("hub0061.form.httpPasswordPlaceholder"),type:"password","show-password-on":"click"},null,8,["value","placeholder"])]),_:1},8,["label"]),r(e(g),{label:e(t)("hub0061.form.hostHeaderRewrite"),path:"hostHeaderRewrite"},{default:n(()=>[r(e(I),{value:l.value.hostHeaderRewrite,"onUpdate:value":o[18]||(o[18]=s=>l.value.hostHeaderRewrite=s),placeholder:e(t)("hub0061.form.hostHeaderRewritePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["tab"])):Q("",!0),r(e(G),{name:"note",tab:e(t)("hub0061.dialog.tabs.note")},{default:n(()=>[r(e(g),{label:e(t)("hub0061.form.noteText"),path:"noteText"},{default:n(()=>[r(e(I),{value:l.value.noteText,"onUpdate:value":o[19]||(o[19]=s=>l.value.noteText=s),type:"textarea",placeholder:e(t)("hub0061.form.noteTextPlaceholder"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["tab"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"]))}}),Pt=re(Tt,[["__scopeId","data-v-88c2214b"]]),Nt={class:"static-mapping-management"},zt={class:"stats-section"},Ut={class:"main-content"},At=E({__name:"StaticMappingManagement",setup(u){const{t:c}=le(),d=ue(),f=w(null),t=w(!1),a=w({totalNodes:0,activeNodes:0,inactiveNodes:0,errorNodes:0,totalConnections:0,totalTraffic:0}),y=w(!1),p=w(null),_=async()=>{try{const k=await st();if(O(k)){const C=oe(k,{totalNodes:0,activeNodes:0,inactiveNodes:0,errorNodes:0,totalConnections:0,totalTraffic:0});a.value=C}}catch(k){console.error("获取统计信息失败:",k)}},l=()=>{p.value=null,y.value=!0},S=k=>{p.value=k,y.value=!0},T=()=>{p.value=null,y.value=!1,v()},P=async()=>{var k;t.value=!0;try{await Promise.all([_(),(k=f.value)==null?void 0:k.initialize()]),d.success(c("common.refreshSuccess"))}catch(C){console.error("刷新数据失败:",C),d.error(c("common.refreshFailed"))}finally{t.value=!1}},v=async()=>{await P()};return ve(()=>{v()}),(k,C)=>(D(),Z("div",Nt,[r(e(Xe),{class:"page-header"},{title:n(()=>[r(e(Y),{align:"center",size:12},{default:n(()=>[r(e(V),{component:e(Me),size:24},null,8,["component"]),A("span",null,z(e(c)("hub0061.title")),1)]),_:1})]),subtitle:n(()=>[R(z(e(c)("hub0061.subtitle")),1)]),extra:n(()=>[r(e(Y),{size:12},{default:n(()=>[r(e(M),{onClick:P,loading:t.value,secondary:""},{icon:n(()=>[r(e(V),{component:e(Ge)},null,8,["component"])]),default:n(()=>[R(" "+z(e(c)("common.refresh")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),A("div",zt,[r(bt,{statistics:a.value},null,8,["statistics"])]),A("div",Ut,[r(e(me),{bordered:!1,class:"content-card"},{default:n(()=>[r(St,{ref_key:"tableRef",ref:f,onCreate:l,onEdit:S},null,512)]),_:1})]),r(Pt,{show:y.value,"onUpdate:show":C[0]||(C[0]=B=>y.value=B),"edit-data":p.value,onSuccess:T},null,8,["show","edit-data"])]))}}),Jt=re(At,[["__scopeId","data-v-071c1210"]]);export{Jt as default};
