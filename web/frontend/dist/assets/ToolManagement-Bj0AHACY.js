import{d as R,c as x,o as m,a as e,b as Q,r as w,g as B,Y as he,av as Ce,aw as ye,a9 as d,aj as $,H,au as se,h as q,m as i,n,E as me,w as r,v as z,I as L,ae as we,a5 as F,a6 as G,T as U,q as N,a2 as J,am as oe,x as P,_ as j,aa as ae,J as be,A as Z}from"./index-BWGkTP3E.js";import{T as c,S as Te}from"./SftpConfigDialog-BjRgZWvH.js";import{G as ke,N as ne}from"./GlobeOutline-D7xlEQYD.js";import{a as le,_ as re}from"./DataTable-Wmy4yEx3.js";import"./FormItemGridItem-B0Vyz3vV.js";import"./Switch-DV7n8EG8.js";import"./Refresh-sAc_e4OP.js";import"./DynamicTags-BRHRNNvN.js";const Se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Me=R({name:"ChatbubbleOutline",render:function(g,o){return m(),x("svg",Se,o[0]||(o[0]=[e("path",{d:"M87.49 380c1.19-4.38-1.44-10.47-3.95-14.86a44.86 44.86 0 0 0-2.54-3.8a199.81 199.81 0 0 1-33-110C47.65 139.09 140.73 48 255.83 48C356.21 48 440 117.54 459.58 209.85a199 199 0 0 1 4.42 41.64c0 112.41-89.49 204.93-204.59 204.93c-18.3 0-43-4.6-56.47-8.37s-26.92-8.77-30.39-10.11a31.09 31.09 0 0 0-11.12-2.07a30.71 30.71 0 0 0-12.09 2.43l-67.83 24.48a16 16 0 0 1-4.67 1.22a9.6 9.6 0 0 1-9.57-9.74a15.85 15.85 0 0 1 .6-3.29z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),Ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ae=R({name:"CloudUploadOutline",render:function(g,o){return m(),x("svg",Ee,o[0]||(o[0]=[e("path",{d:"M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8c-69 0-113.44 45.79-128 91.2c-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 255.79l-64-64l-64 64"},null,-1),e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 448.21V207.79"},null,-1)]))}}),xe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},He=R({name:"FolderOutline",render:function(g,o){return m(),x("svg",xe,o[0]||(o[0]=[e("path",{d:"M440 432H72a40 40 0 0 1-40-40V120a40 40 0 0 1 40-40h75.89a40 40 0 0 1 22.19 6.72l27.84 18.56a40 40 0 0 0 22.19 6.72H440a40 40 0 0 1 40 40v240a40 40 0 0 1-40 40z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M32 192h448"},null,-1)]))}}),Le={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ze=R({name:"MailOutline",render:function(g,o){return m(),x("svg",Le,o[0]||(o[0]=[e("rect",{x:"48",y:"96",width:"416",height:"320",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M112 160l144 112l144-112"},null,-1)]))}}),Pe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Re=R({name:"TerminalOutline",render:function(g,o){return m(),x("svg",Pe,o[0]||(o[0]=[e("rect",{x:"32",y:"48",width:"448",height:"416",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M96 112l80 64l-80 64"},null,-1),e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M192 240h64"},null,-1)]))}});function X(){const u=Q(),g=he("/gateway/hubplugin/common"),o=w(!1),b=w(null),h=w([]),v=w([]),_=B(()=>[{key:"total",label:"总配置数",value:h.value.length,color:"#1890ff",icon:"total"},{key:"enabled",label:"已启用",value:h.value.filter(s=>s.configStatus==="Y").length,color:"#52c41a",icon:"enabled"},{key:"disabled",label:"已禁用",value:h.value.filter(s=>s.configStatus==="N").length,color:"#faad14",icon:"disabled"},{key:"groups",label:"配置分组",value:v.value.length,color:"#722ed1",icon:"groups"}]),T=async()=>{await Promise.all([S(),E()])},S=async()=>{try{o.value=!0,b.value=null;const s=await g.post("/query",{page:1,size:1e3,activeFlag:"Y"});if(s.oK&&s.bizData){const t=Array.isArray(s.bizData)?s.bizData:JSON.parse(s.bizData);h.value=t||[]}else h.value=[],s.errMsg&&u.error(`加载工具配置失败: ${s.errMsg}`)}catch(s){b.value=s instanceof Error?s.message:"加载工具配置失败",console.error("加载工具配置失败:",s),u.error("加载工具配置失败"),h.value=[]}finally{o.value=!1}},E=async()=>{try{const s=await g.post("/config-group/query",{page:1,size:1e3,activeFlag:"Y"});if(s.oK&&s.bizData){const t=Array.isArray(s.bizData)?s.bizData:JSON.parse(s.bizData);v.value=t||[]}else v.value=[]}catch(s){console.error("加载配置分组失败:",s),v.value=[]}};return{toolConfigs:h,configGroups:v,stats:_,loading:o,error:b,initializeData:T,refreshData:async()=>{await T()},loadToolConfigs:S,loadConfigGroups:E,addToolConfig:async s=>{try{o.value=!0;const t=await g.post("/add",s);return t.oK?(await S(),u.success("工具配置添加成功"),!0):(u.error(`添加失败: ${t.errMsg}`),!1)}catch(t){const f=t instanceof Error?t.message:"添加工具配置失败";return u.error(f),console.error("添加工具配置失败:",t),!1}finally{o.value=!1}},updateToolConfig:async s=>{try{o.value=!0;const t=await g.post("/update",s);return t.oK?(await S(),u.success("工具配置更新成功"),!0):(u.error(`更新失败: ${t.errMsg}`),!1)}catch(t){const f=t instanceof Error?t.message:"更新工具配置失败";return u.error(f),console.error("更新工具配置失败:",t),!1}finally{o.value=!1}},deleteToolConfig:async s=>{try{o.value=!0;const t=await g.post("/delete",{toolConfigId:s});return t.oK?(await S(),u.success("工具配置删除成功"),!0):(u.error(`删除失败: ${t.errMsg}`),!1)}catch(t){const f=t instanceof Error?t.message:"删除工具配置失败";return u.error(f),console.error("删除工具配置失败:",t),!1}finally{o.value=!1}},testToolConnection:async(s,t)=>{try{o.value=!0;const f=await g.post("/test-connection",{toolConfigId:s,toolType:t});if(f.oK&&f.bizData){const O=typeof f.bizData=="string"?JSON.parse(f.bizData):f.bizData;return O.success?u.success("连接测试成功"):u.warning(`连接测试失败: ${O.message}`),O}else return u.error(`连接测试失败: ${f.errMsg}`),{success:!1,message:f.errMsg}}catch(f){const O=f instanceof Error?f.message:"连接测试失败";return u.error(O),console.error("连接测试失败:",f),{success:!1,message:O}}finally{o.value=!1}},addConfigGroup:async s=>{try{o.value=!0;const t=await g.post("/config-group/add",s);return t.oK?(await E(),u.success("配置分组添加成功"),!0):(u.error(`添加失败: ${t.errMsg}`),!1)}catch(t){const f=t instanceof Error?t.message:"添加配置分组失败";return u.error(f),console.error("添加配置分组失败:",t),!1}finally{o.value=!1}},updateConfigGroup:async s=>{try{o.value=!0;const t=await g.post("/config-group/update",s);return t.oK?(await E(),u.success("配置分组更新成功"),!0):(u.error(`更新失败: ${t.errMsg}`),!1)}catch(t){const f=t instanceof Error?t.message:"更新配置分组失败";return u.error(f),console.error("更新配置分组失败:",t),!1}finally{o.value=!1}},deleteConfigGroup:async s=>{try{o.value=!0;const t=await g.post("/config-group/delete",{configGroupId:s});return t.oK?(await E(),u.success("配置分组删除成功"),!0):(u.error(`删除失败: ${t.errMsg}`),!1)}catch(t){const f=t instanceof Error?t.message:"删除配置分组失败";return u.error(f),console.error("删除配置分组失败:",t),!1}finally{o.value=!1}},getConfigsByToolType:s=>h.value.filter(t=>t.toolType===s),getConfigsByGroup:s=>h.value.filter(t=>t.configGroupId===s)}}const Ve={class:"tool-config-panel"},Oe={class:"search-section"},De={class:"search-filters"},$e={class:"search-actions"},Ne={class:"table-container"},Ie={class:"tool-type-selector"},Be={class:"tool-type-content"},Fe={class:"tool-type-info"},Ge=R({__name:"ToolConfigPanel",emits:["refresh-stats"],setup(u,{expose:g,emit:o}){const b=o,h=Q(),v=w(""),_=w(""),T=w(""),S=w(!1),E=w(!1),D=w(null),V=w(""),A=w(!1),C=w({page:1,pageSize:20,showSizePicker:!0,pageSizes:[10,20,50,100],showQuickJumper:!0,simple:!1}),{toolConfigs:k,loading:p,loadToolConfigs:M,deleteToolConfig:I,testToolConnection:W}=X(),ee=[{label:"全部类型",value:""},{label:"SFTP传输",value:c.SFTP_TRANSFER},{label:"数据库操作",value:c.DATABASE_OPERATION},{label:"HTTP请求",value:c.HTTP_REQUEST},{label:"邮件发送",value:c.EMAIL_SENDER},{label:"消息队列",value:c.MESSAGE_QUEUE},{label:"脚本执行",value:c.SCRIPT_EXECUTOR},{label:"本地文件传输",value:c.LOCAL_FILE_TRANSFER},{label:"自定义工具",value:c.CUSTOM_TOOL}],s=[{label:"全部状态",value:""},{label:"已启用",value:"Y"},{label:"已禁用",value:"N"}],t=[{value:c.SFTP_TRANSFER,label:"SFTP文件传输",description:"支持文件上传、下载、远程操作",color:"#1890ff",icon:Ae},{value:c.DATABASE_OPERATION,label:"数据库操作",description:"SQL查询、数据导入/导出",color:"#52c41a",icon:Ce},{value:c.HTTP_REQUEST,label:"HTTP请求",description:"API调用、RESTful、WebHook",color:"#fa8c16",icon:ke},{value:c.EMAIL_SENDER,label:"邮件发送",description:"SMTP、模板邮件、批量发送",color:"#eb2f96",icon:ze},{value:c.MESSAGE_QUEUE,label:"消息队列",description:"消息发送、订阅、队列管理",color:"#722ed1",icon:Me},{value:c.SCRIPT_EXECUTOR,label:"脚本执行",description:"Shell脚本、Python脚本、批处理",color:"#13c2c2",icon:Re},{value:c.LOCAL_FILE_TRANSFER,label:"本地文件传输",description:"文件复制、移动、目录操作",color:"#a0d911",icon:He},{value:c.CUSTOM_TOOL,label:"自定义工具",description:"自定义逻辑、扩展功能",color:"#595959",icon:ye}],f=B(()=>{let l=k.value;if(v.value){const a=v.value.toLowerCase();l=l.filter(y=>y.toolName.toLowerCase().includes(a)||y.configName.toLowerCase().includes(a)||y.configDescription&&y.configDescription.toLowerCase().includes(a))}return _.value&&(l=l.filter(a=>a.toolType===_.value)),T.value&&(l=l.filter(a=>a.configStatus===T.value)),l}),O=B(()=>[{title:"工具名称",key:"toolName",width:120,render:l=>d("span",{style:"font-weight: 500; color: #1890ff;"},l.toolName)},{title:"配置名称",key:"configName",width:150,ellipsis:{tooltip:!0}},{title:"工具类型",key:"toolType",width:120,render:l=>{const a=te(l.toolType);return d($,{size:"small",type:a.type,round:!0},{default:()=>a.label})}},{title:"主机地址",key:"hostAddress",width:150,ellipsis:{tooltip:!0},render:l=>l.hostAddress||"-"},{title:"端口",key:"portNumber",width:80,render:l=>l.portNumber||"-"},{title:"状态",key:"configStatus",width:80,render:l=>d($,{size:"small",type:l.configStatus==="Y"?"success":"warning"},{default:()=>l.configStatus==="Y"?"已启用":"已禁用"})},{title:"默认配置",key:"defaultFlag",width:80,render:l=>l.defaultFlag==="Y"?d($,{size:"small",type:"info"},{default:()=>"默认"}):"-"},{title:"创建时间",key:"addTime",width:140,render:l=>new Date(l.addTime).toLocaleString()},{title:"操作",key:"actions",width:200,fixed:"right",render:l=>d(se,{size:"small"},{default:()=>[d(H,{size:"small",onClick:()=>ue(l)},{default:()=>"编辑"}),d(H,{size:"small",onClick:()=>pe(l)},{default:()=>"测试"}),d(ne,{onPositiveClick:()=>de(l),positiveText:"删除",negativeText:"取消"},{trigger:()=>d(H,{size:"small",type:"error"},{default:()=>"删除"}),default:()=>`确定删除配置 "${l.configName}" 吗？`})]})}]),te=l=>({[c.SFTP_TRANSFER]:{label:"SFTP",type:"info"},[c.DATABASE_OPERATION]:{label:"数据库",type:"success"},[c.HTTP_REQUEST]:{label:"HTTP",type:"warning"},[c.EMAIL_SENDER]:{label:"邮件",type:"error"},[c.MESSAGE_QUEUE]:{label:"消息队列",type:"info"},[c.SCRIPT_EXECUTOR]:{label:"脚本",type:"default"},[c.LOCAL_FILE_TRANSFER]:{label:"本地文件",type:"success"},[c.CUSTOM_TOOL]:{label:"自定义",type:"default"}})[l]||{label:l,type:"default"},K=()=>{C.value.page=1},ie=()=>{S.value=!0},ce=l=>{S.value=!1,l.value===c.SFTP_TRANSFER?(A.value=!1,V.value="",E.value=!0):h.info(`${l.label}配置功能开发中，敬请期待`)},ue=l=>{if(D.value=l,l.toolType===c.SFTP_TRANSFER)A.value=!0,V.value=l.toolConfigId,E.value=!0;else{const a=te(l.toolType).label;h.info(`${a}配置编辑功能开发中，敬请期待`)}},de=async l=>{await I(l.toolConfigId)&&(await Y(),b("refresh-stats"),h.success("删除成功"))},pe=async l=>{try{await W(l.toolConfigId,l.toolType)}catch{h.error("连接测试失败")}},fe=async()=>{await M(),b("refresh-stats")},ve=l=>{C.value.page=l},ge=l=>{C.value.pageSize=l,C.value.page=1},_e=async()=>{await Y(),b("refresh-stats")},Y=async()=>{await M()};return q(async()=>{await M()}),g({refreshData:Y}),(l,a)=>(m(),x("div",Ve,[e("div",Oe,[e("div",De,[i(n(me),{value:v.value,"onUpdate:value":a[0]||(a[0]=y=>v.value=y),placeholder:"搜索工具名称、配置名称...",style:{width:"300px"},clearable:"",onInput:K},{prefix:r(()=>[i(n(z),{size:"16"},{default:r(()=>a[6]||(a[6]=[e("svg",{viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})],-1)])),_:1})]),_:1},8,["value"]),i(n(le),{value:_.value,"onUpdate:value":[a[1]||(a[1]=y=>_.value=y),K],placeholder:"工具类型筛选",style:{width:"150px"},options:ee},null,8,["value"]),i(n(le),{value:T.value,"onUpdate:value":[a[2]||(a[2]=y=>T.value=y),K],placeholder:"状态筛选",style:{width:"120px"},options:s},null,8,["value"])]),e("div",$e,[i(n(H),{type:"primary",onClick:ie},{icon:r(()=>[i(n(z),null,{default:r(()=>a[7]||(a[7]=[e("svg",{viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])),_:1})]),default:r(()=>[a[8]||(a[8]=L(" 添加配置 "))]),_:1}),i(n(H),{onClick:fe},{icon:r(()=>[i(n(z),null,{default:r(()=>a[9]||(a[9]=[e("svg",{viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),_:1})]),default:r(()=>[a[10]||(a[10]=L(" 刷新 "))]),_:1})])]),e("div",Ne,[i(n(re),{columns:O.value,data:f.value,loading:n(p),pagination:C.value,bordered:!1,size:"small",striped:"","onUpdate:page":ve,"onUpdate:pageSize":ge},null,8,["columns","data","loading","pagination"])]),i(n(we),{show:S.value,"onUpdate:show":a[4]||(a[4]=y=>S.value=y),preset:"dialog",title:"选择工具类型",style:{width:"400px"}},{action:r(()=>[i(n(H),{onClick:a[3]||(a[3]=y=>S.value=!1)},{default:r(()=>a[11]||(a[11]=[L("取消")])),_:1})]),default:r(()=>[e("div",Ie,[(m(),x(F,null,G(t,y=>i(n(U),{key:y.value,bordered:!1,hoverable:"",onClick:Tt=>ce(y),class:"tool-type-card"},{default:r(()=>[e("div",Be,[i(n(z),{size:"24",color:y.color},{default:r(()=>[(m(),N(J(y.icon)))]),_:2},1032,["color"]),e("div",Fe,[i(n(oe),{strong:""},{default:r(()=>[L(P(y.label),1)]),_:2},1024),i(n(oe),{depth:"3",style:{"font-size":"12px"}},{default:r(()=>[L(P(y.description),1)]),_:2},1024)])])]),_:2},1032,["onClick"])),64))])]),_:1},8,["show"]),i(Te,{visible:E.value,"onUpdate:visible":a[5]||(a[5]=y=>E.value=y),"is-editing":A.value,"tool-config-id":V.value,onSubmit:_e},null,8,["visible","is-editing","tool-config-id"])]))}}),Ue=j(Ge,[["__scopeId","data-v-de577e55"]]),Qe={class:"tool-group-panel"},je={class:"action-bar"},Ke={class:"table-container"},Ye=R({__name:"ToolGroupPanel",emits:["add-group","edit-group","delete-group"],setup(u,{expose:g,emit:o}){const b=o,h=Q(),{configGroups:v,loading:_,loadConfigGroups:T,deleteConfigGroup:S}=X(),E=B(()=>[{title:"分组名称",key:"groupName",width:150,render:p=>d("span",{style:"font-weight: 500; color: #1890ff;"},p.groupName)},{title:"分组描述",key:"groupDescription",ellipsis:{tooltip:!0},render:p=>p.groupDescription||"-"},{title:"分组类型",key:"groupType",width:120,render:p=>d($,{size:"small",type:"info",round:!0},{default:()=>p.groupType||"默认"})},{title:"排序顺序",key:"sortOrder",width:100,render:p=>p.sortOrder||"-"},{title:"访问级别",key:"accessLevel",width:100,render:p=>{const I={private:{label:"私有",type:"error"},public:{label:"公开",type:"success"},restricted:{label:"受限",type:"warning"}}[p.accessLevel||"private"];return d($,{size:"small",type:I.type},{default:()=>I.label})}},{title:"创建时间",key:"addTime",width:140,render:p=>new Date(p.addTime).toLocaleString()},{title:"操作",key:"actions",width:150,fixed:"right",render:p=>d(se,{size:"small"},{default:()=>[d(H,{size:"small",onClick:()=>V(p)},{default:()=>"编辑"}),d(ne,{onPositiveClick:()=>A(p),positiveText:"删除",negativeText:"取消"},{trigger:()=>d(H,{size:"small",type:"error"},{default:()=>"删除"}),default:()=>`确定删除分组 "${p.groupName}" 吗？`})]})}]),D=()=>{b("add-group")},V=p=>{b("edit-group",p)},A=async p=>{await S(p.configGroupId)&&b("delete-group",p)},C=async()=>{await T(),h.success("数据刷新成功")},k=async()=>{await T()};return q(async()=>{await T()}),g({refreshData:k}),(p,M)=>(m(),x("div",Qe,[e("div",je,[i(n(H),{type:"primary",onClick:D},{icon:r(()=>[i(n(z),null,{default:r(()=>M[0]||(M[0]=[e("svg",{viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])),_:1})]),default:r(()=>[M[1]||(M[1]=L(" 添加分组 "))]),_:1}),i(n(H),{onClick:C},{icon:r(()=>[i(n(z),null,{default:r(()=>M[2]||(M[2]=[e("svg",{viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),_:1})]),default:r(()=>[M[3]||(M[3]=L(" 刷新 "))]),_:1})]),e("div",Ke,[i(n(re),{columns:E.value,data:n(v),loading:n(_),bordered:!1,size:"small",striped:""},null,8,["columns","data","loading"])])]))}}),Ze=j(Ye,[["__scopeId","data-v-77522e83"]]),qe={class:"tool-type-panel"},Je={class:"type-grid"},Xe={class:"type-content"},We={class:"type-header"},et={class:"type-info"},tt={class:"type-stats"},ot={class:"stat-item"},lt={class:"stat-value"},st={class:"stat-item"},at={class:"type-features"},nt=R({__name:"ToolTypePanel",setup(u){const{toolConfigs:g}=X(),o={sftp:()=>d("svg",{viewBox:"0 0 24 24"},[d("path",{fill:"currentColor",d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})]),database:()=>d("svg",{viewBox:"0 0 24 24"},[d("path",{fill:"currentColor",d:"M12,3C7.58,3 4,4.79 4,7C4,9.21 7.58,11 12,11C16.42,11 20,9.21 20,7C20,4.79 16.42,3 12,3M4,9V12C4,14.21 7.58,16 12,16C16.42,16 20,14.21 20,12V9C20,11.21 16.42,13 12,13C7.58,13 4,11.21 4,9M4,14V17C4,19.21 7.58,21 12,21C16.42,21 20,19.21 20,17V14C20,16.21 16.42,18 12,18C7.58,18 4,16.21 4,14Z"})]),http:()=>d("svg",{viewBox:"0 0 24 24"},[d("path",{fill:"currentColor",d:"M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})]),email:()=>d("svg",{viewBox:"0 0 24 24"},[d("path",{fill:"currentColor",d:"M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"})]),queue:()=>d("svg",{viewBox:"0 0 24 24"},[d("path",{fill:"currentColor",d:"M2,6H22V8H2V6M2,10H22V12H2V10M2,14H22V16H2V14M2,18H22V20H2V18Z"})]),script:()=>d("svg",{viewBox:"0 0 24 24"},[d("path",{fill:"currentColor",d:"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z"})]),file:()=>d("svg",{viewBox:"0 0 24 24"},[d("path",{fill:"currentColor",d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"})]),custom:()=>d("svg",{viewBox:"0 0 24 24"},[d("path",{fill:"currentColor",d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"})])},b=B(()=>[{type:c.SFTP_TRANSFER,name:"SFTP文件传输",description:"安全文件传输协议，用于远程文件传输",features:["文件上传","文件下载","远程操作"],color:"#1890ff",icon:o.sftp,available:!0},{type:c.DATABASE_OPERATION,name:"数据库操作",description:"数据库连接和SQL操作工具",features:["SQL查询","数据导入","数据导出"],color:"#52c41a",icon:o.database,available:!0},{type:c.HTTP_REQUEST,name:"HTTP请求",description:"HTTP/HTTPS接口调用工具",features:["API调用","RESTful","WebHook"],color:"#faad14",icon:o.http,available:!0},{type:c.EMAIL_SENDER,name:"邮件发送",description:"邮件发送和通知工具",features:["SMTP","模板邮件","批量发送"],color:"#f5222d",icon:o.email,available:!0},{type:c.MESSAGE_QUEUE,name:"消息队列",description:"消息队列操作工具",features:["消息发送","消息订阅","队列管理"],color:"#722ed1",icon:o.queue,available:!0},{type:c.SCRIPT_EXECUTOR,name:"脚本执行",description:"脚本和命令执行工具",features:["Shell脚本","Python脚本","批处理"],color:"#13c2c2",icon:o.script,available:!0},{type:c.LOCAL_FILE_TRANSFER,name:"本地文件传输",description:"本地文件系统操作工具",features:["文件复制","文件移动","目录操作"],color:"#eb2f96",icon:o.file,available:!0},{type:c.CUSTOM_TOOL,name:"自定义工具",description:"用户自定义的扩展工具",features:["自定义逻辑","扩展功能","灵活配置"],color:"#595959",icon:o.custom,available:!0}].map(v=>({...v,configCount:g.value.filter(_=>_.toolType===v.type).length})));return(h,v)=>(m(),x("div",qe,[e("div",Je,[(m(!0),x(F,null,G(b.value,_=>(m(),N(n(U),{key:_.type,class:"type-card",hoverable:""},{default:r(()=>[e("div",Xe,[e("div",We,[e("div",{class:"type-icon",style:ae({backgroundColor:_.color+"20",color:_.color})},[i(n(z),{size:"32"},{default:r(()=>[(m(),N(J(_.icon)))]),_:2},1024)],4),e("div",et,[e("h3",null,P(_.name),1),e("p",null,P(_.description),1)])]),e("div",tt,[e("div",ot,[v[0]||(v[0]=e("span",{class:"stat-label"},"配置数量",-1)),e("span",lt,P(_.configCount),1)]),e("div",st,[v[1]||(v[1]=e("span",{class:"stat-label"},"状态",-1)),i(n($),{type:_.available?"success":"warning",size:"small"},{default:r(()=>[L(P(_.available?"可用":"不可用"),1)]),_:2},1032,["type"])])]),e("div",at,[(m(!0),x(F,null,G(_.features,T=>(m(),N(n($),{key:T,size:"small",round:""},{default:r(()=>[L(P(T),1)]),_:2},1024))),128))])])]),_:2},1024))),128))])]))}}),rt=j(nt,[["__scopeId","data-v-5087ac05"]]),it={class:"tool-management-container"},ct={class:"page-header"},ut={class:"header-content"},dt={class:"header-title"},pt={class:"header-actions"},ft={class:"stats-section"},vt={class:"stat-content"},gt={class:"stat-info"},_t={class:"stat-value"},ht={class:"stat-label"},Ct={class:"main-content"},yt={class:"tab-content"},mt={class:"tab-content"},wt={class:"tab-content"},bt=R({__name:"ToolManagement",setup(u){const g=Q(),o=w("configs"),b=w(),h=w(),v=w(),_=w([{key:"total",label:"总配置数",value:0,color:"#1890ff",icon:"SettingsOutline"},{key:"enabled",label:"已启用",value:0,color:"#52c41a",icon:"CheckCircleOutline"},{key:"disabled",label:"已禁用",value:0,color:"#faad14",icon:"PauseCircleOutline"},{key:"groups",label:"分组数",value:0,color:"#722ed1",icon:"FolderOutline"}]),T=()=>{console.log("添加分组")},S=A=>{console.log("编辑分组:",A)},E=A=>{console.log("删除分组:",A)},D=async()=>{var A,C,k;try{(A=b.value)!=null&&A.refreshData&&await b.value.refreshData(),(C=h.value)!=null&&C.refreshData&&await h.value.refreshData(),(k=v.value)!=null&&k.refreshData&&await v.value.refreshData(),g.success("数据刷新成功")}catch{g.error("刷新失败")}},V=async()=>{console.log("初始化工具管理数据")};return q(async()=>{await V()}),(A,C)=>(m(),x("div",it,[e("div",ct,[e("div",ut,[e("div",dt,[i(n(z),{size:"24",color:"#52c41a"},{default:r(()=>C[1]||(C[1]=[e("svg",{viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-2 .9-2 2v4H0.5C.22 11 0 11.22 0 11.5s.22.5.5.5H2v4c0 1.1.9 2 2 2h4v1.5C8 20.88 9.12 22 10.5 22S13 20.88 13 19.5V18h4c1.1 0 2-.9 2-2v-4h1.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5z"})],-1)])),_:1}),C[2]||(C[2]=e("div",{class:"title-text"},[e("h1",null,"工具配置管理"),e("p",{class:"subtitle"},"统一管理系统中的各种工具配置信息")],-1))]),e("div",pt,[i(n(H),{onClick:D},{icon:r(()=>[i(n(z),null,{default:r(()=>C[3]||(C[3]=[e("svg",{viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),_:1})]),default:r(()=>[C[4]||(C[4]=L(" 刷新 "))]),_:1})])])]),e("div",ft,[(m(!0),x(F,null,G(_.value,k=>(m(),N(n(U),{key:k.key,class:"stat-card",bordered:!1},{default:r(()=>[e("div",vt,[e("div",{class:"stat-icon",style:ae({backgroundColor:k.color+"20",color:k.color})},[i(n(z),{size:"24"},{default:r(()=>[(m(),N(J(k.icon)))]),_:2},1024)],4),e("div",gt,[e("div",_t,P(k.value),1),e("div",ht,P(k.label),1)])])]),_:2},1024))),128))]),e("div",Ct,[i(n(U),{class:"tabs-container",bordered:!1},{default:r(()=>[i(n(be),{value:o.value,"onUpdate:value":C[0]||(C[0]=k=>o.value=k),type:"card",animated:"",size:"large",class:"main-tabs"},{default:r(()=>[i(n(Z),{name:"configs",tab:"工具配置"},{default:r(()=>[e("div",yt,[i(Ue,{ref_key:"configPanelRef",ref:b,onRefreshStats:D},null,512)])]),_:1}),i(n(Z),{name:"groups",tab:"分组管理"},{default:r(()=>[e("div",mt,[i(Ze,{ref_key:"groupPanelRef",ref:h,onAddGroup:T,onEditGroup:S,onDeleteGroup:E},null,512)])]),_:1}),i(n(Z),{name:"types",tab:"工具类型"},{default:r(()=>[e("div",wt,[i(rt,{ref_key:"typePanelRef",ref:v},null,512)])]),_:1})]),_:1},8,["value"])]),_:1})])]))}}),zt=j(bt,[["__scopeId","data-v-7f028f4e"]]);export{zt as default};
