import{d as j,a2 as T,b3 as Ce,b5 as ca,b6 as ua,ak as le,am as me,an as ke,al as K,ao as da,c3 as It,au as Oe,r as F,c as $,aV as pa,aw as Ne,d1 as va,av as tt,aB as at,ba as xt,a0 as Pt,b1 as Ee,c4 as kt,aR as xe,d2 as ha,aa as Le,aS as Pe,bd as ht,d3 as fa,bE as ma,$ as ga,be as ya,a1 as Rt,aC as ft,ai as Dt,bt as ba,a4 as _a,d4 as Ca,at as mt,aq as Sa,aY as Ze,bi as Ta,J as L,b$ as Ea,aJ as Na,bk as wa,bl as Ia,d5 as xa,bn as Pa,K as I,X as ka,p as pe,m as ye,q as Me,z as Re,B as De,A as Se,cX as Ut,d6 as At,j as z,aG as q,Y as he,bL as de,h as B,o as O,w as l,g as m,b as Y,i as Q,e as a,f as e,cH as ie,t as h,cv as Ra,N as Da,S as Z,_ as be,d7 as Ot,P as Ue,bM as We,bN as ae,aI as Ve,I as Fe,R as Ke,cR as Ft,cS as lt,v as qe,G as H,ch as st,bO as rt,cu as Ua,n as Aa,d8 as gt,d9 as Oa,E as Xe,F as k,V as zt,Z as Ht,da as Fa,cs as za,ct as Ha,H as yt}from"./index-MyDFJZSo.js";import{u as $t}from"./usePagination-DRpfP-_Z.js";import{F as Je,L as $a,H as Ga,C as La}from"./ListOutline-DbFSJ3jT.js";import{C as Gt}from"./CreateOutline-CVn4xVNu.js";import{T as Qe,A as Ge}from"./TrashOutline-wt2eICUr.js";import{E as Ma,C as et}from"./EllipsisHorizontalOutline-DT4maeKg.js";import{P as Ba}from"./PeopleOutline-C_0hQNMI.js";import{S as nt}from"./ServerOutline-a4NOwfzD.js";import{C as ot}from"./CloudOutline-DZx97A8Q.js";import{T as Ae}from"./TimeOutline-CbuBeHOi.js";import{g as bt,m as _t,h as Ct,i as St,j as Tt,k as Va,l as Ka,c as qa,N as Ja}from"./DatePicker-BxiXFW_J.js";import{a as Ya,A as ja}from"./ArrowUpOutline-C3YsaysT.js";import{C as it}from"./CheckmarkCircleOutline-BOVKNl7O.js";import{R as ze}from"./RefreshOutline-Cm25EJPz.js";import{_ as ct,N as Wa}from"./DataTable-ozTFC5uq.js";import{S as Za}from"./Scrollbar-pDL85XdD.js";import{_ as X}from"./Select-XrnkiBu4.js";import{A as Lt}from"./ArrowBackOutline-BUiunrqf.js";import{_ as W,a as D}from"./Grid-BI1r5n77.js";import{N as _e}from"./Switch-4JwQa4HN.js";import{N as ue}from"./InputNumber-BlyQ9L6f.js";import{I as Be}from"./InformationCircleOutline-UlT6wmQH.js";import{N as Xa}from"./Code-e7RCNiVm.js";import{R as Qa}from"./ReloadOutline-BRxfhbQ2.js";import"./index-DR_R-bYe.js";import"./Checkbox-BKTiaMKv.js";import"./Radio-BDKhEig0.js";import"./RadioGroup-hzGMQHwj.js";import"./prop-BjyUHhTu.js";import"./download-C2161hUv.js";const el=j({name:"ChevronLeft",render(){return T("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},T("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}});function tl(r,c){const o=Ce(r),u=Ce(c),t=o.getTime()-u.getTime();return t<0?-1:t>0?1:t}function al(r){return c=>{const u=(r?Math[r]:Math.trunc)(c);return u===0?0:u}}function ll(r,c,o){const u=ca(),t=(o==null?void 0:o.locale)??u.locale??ua,d=tl(r,c);if(isNaN(d))throw new RangeError("Invalid time value");const g=Object.assign({},o,{addSuffix:o==null?void 0:o.addSuffix,comparison:d});let _,C;d>0?(_=Ce(c),C=Ce(r)):(_=Ce(r),C=Ce(c));const b=al((o==null?void 0:o.roundingMethod)??"round"),f=C.getTime()-_.getTime(),w=f/Tt,y=bt(C)-bt(_),x=(f-y)/Tt,v=o==null?void 0:o.unit;let S;if(v?S=v:w<1?S="second":w<60?S="minute":w<_t?S="hour":x<Ct?S="day":x<St?S="month":S="year",S==="second"){const P=b(f/1e3);return t.formatDistance("xSeconds",P,g)}else if(S==="minute"){const P=b(w);return t.formatDistance("xMinutes",P,g)}else if(S==="hour"){const P=b(w/60);return t.formatDistance("xHours",P,g)}else if(S==="day"){const P=b(x/_t);return t.formatDistance("xDays",P,g)}else if(S==="month"){const P=b(x/Ct);return P===12&&v!=="month"?t.formatDistance("xYears",1,g):t.formatDistance("xMonths",P,g)}else{const P=b(x/St);return t.formatDistance("xYears",P,g)}}function Et(r){return Ce(r*1e3)}const sl=le("collapse","width: 100%;",[le("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[me("disabled",[K("header","cursor: not-allowed;",[K("header-main",`
 color: var(--n-title-text-color-disabled);
 `),le("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),le("collapse-item","margin-left: 32px;"),ke("&:first-child","margin-top: 0;"),ke("&:first-child >",[K("header","padding-top: 0;")]),me("left-arrow-placement",[K("header",[le("collapse-item-arrow","margin-right: 4px;")])]),me("right-arrow-placement",[K("header",[le("collapse-item-arrow","margin-left: 4px;")])]),K("content-wrapper",[K("content-inner","padding-top: 16px;"),It({duration:"0.15s"})]),me("active",[K("header",[me("active",[le("collapse-item-arrow","transform: rotate(90deg);")])])]),ke("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),da("disabled",[me("trigger-area-main",[K("header",[K("header-main","cursor: pointer;"),le("collapse-item-arrow","cursor: default;")])]),me("trigger-area-arrow",[K("header",[le("collapse-item-arrow","cursor: pointer;")])]),me("trigger-area-extra",[K("header",[K("header-extra","cursor: pointer;")])])]),K("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: var(--n-title-padding);
 color: var(--n-title-text-color);
 `,[K("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),K("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),le("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),rl=Object.assign(Object.assign({},Ne.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},triggerAreas:{type:Array,default:()=>["main","extra","arrow"]},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),Mt=xt("n-collapse"),Bt=j({name:"Collapse",props:rl,slots:Object,setup(r,{slots:c}){const{mergedClsPrefixRef:o,inlineThemeDisabled:u,mergedRtlRef:t}=Oe(r),d=F(r.defaultExpandedNames),g=$(()=>r.expandedNames),_=pa(g,d),C=Ne("Collapse","-collapse",sl,va,r,o);function b(S){const{"onUpdate:expandedNames":P,onUpdateExpandedNames:n,onExpandedNamesChange:E}=r;n&&Ee(n,S),P&&Ee(P,S),E&&Ee(E,S),d.value=S}function f(S){const{onItemHeaderClick:P}=r;P&&Ee(P,S)}function w(S,P,n){const{accordion:E}=r,{value:N}=_;if(E)S?(b([P]),f({name:P,expanded:!0,event:n})):(b([]),f({name:P,expanded:!1,event:n}));else if(!Array.isArray(N))b([P]),f({name:P,expanded:!0,event:n});else{const A=N.slice(),U=A.findIndex(R=>P===R);~U?(A.splice(U,1),b(A),f({name:P,expanded:!1,event:n})):(A.push(P),b(A),f({name:P,expanded:!0,event:n}))}}Pt(Mt,{props:r,mergedClsPrefixRef:o,expandedNamesRef:_,slots:c,toggleItem:w});const y=tt("Collapse",t,o),x=$(()=>{const{common:{cubicBezierEaseInOut:S},self:{titleFontWeight:P,dividerColor:n,titlePadding:E,titleTextColor:N,titleTextColorDisabled:A,textColor:U,arrowColor:R,fontSize:G,titleFontSize:M,arrowColorDisabled:se,itemMargin:fe}}=C.value;return{"--n-font-size":G,"--n-bezier":S,"--n-text-color":U,"--n-divider-color":n,"--n-title-padding":E,"--n-title-font-size":M,"--n-title-text-color":N,"--n-title-text-color-disabled":A,"--n-title-font-weight":P,"--n-arrow-color":R,"--n-arrow-color-disabled":se,"--n-item-margin":fe}}),v=u?at("collapse",void 0,x,r):void 0;return{rtlEnabled:y,mergedTheme:C,mergedClsPrefix:o,cssVars:u?void 0:x,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){var r;return(r=this.onRender)===null||r===void 0||r.call(this),T("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),nl=j({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(r){return{onceTrue:ha(Le(r,"show"))}},render(){return T(kt,null,{default:()=>{const{show:r,displayDirective:c,onceTrue:o,clsPrefix:u}=this,t=c==="show"&&o,d=T("div",{class:`${u}-collapse-item__content-wrapper`},T("div",{class:`${u}-collapse-item__content-inner`},this.$slots));return t?xe(d,[[Pe,r]]):r?d:null}})}}),ol={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},Vt=j({name:"CollapseItem",props:ol,setup(r){const{mergedRtlRef:c}=Oe(r),o=ma(),u=ga(()=>{var w;return(w=r.name)!==null&&w!==void 0?w:o}),t=Rt(Mt);t||ya("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:d,props:g,mergedClsPrefixRef:_,slots:C}=t,b=$(()=>{const{value:w}=d;if(Array.isArray(w)){const{value:y}=u;return!~w.findIndex(x=>x===y)}else if(w){const{value:y}=u;return y!==w}return!0});return{rtlEnabled:tt("Collapse",c,_),collapseSlots:C,randomName:o,mergedClsPrefix:_,collapsed:b,triggerAreas:Le(g,"triggerAreas"),mergedDisplayDirective:$(()=>{const{displayDirective:w}=r;return w||g.displayDirective}),arrowPlacement:$(()=>g.arrowPlacement),handleClick(w){let y="main";ft(w,"arrow")&&(y="arrow"),ft(w,"extra")&&(y="extra"),g.triggerAreas.includes(y)&&t&&!r.disabled&&t.toggleItem(b.value,u.value,w)}}},render(){const{collapseSlots:r,$slots:c,arrowPlacement:o,collapsed:u,mergedDisplayDirective:t,mergedClsPrefix:d,disabled:g,triggerAreas:_}=this,C=ht(c.header,{collapsed:u},()=>[this.title]),b=c["header-extra"]||r["header-extra"],f=c.arrow||r.arrow;return T("div",{class:[`${d}-collapse-item`,`${d}-collapse-item--${o}-arrow-placement`,g&&`${d}-collapse-item--disabled`,!u&&`${d}-collapse-item--active`,_.map(w=>`${d}-collapse-item--trigger-area-${w}`)]},T("div",{class:[`${d}-collapse-item__header`,!u&&`${d}-collapse-item__header--active`]},T("div",{class:`${d}-collapse-item__header-main`,onClick:this.handleClick},o==="right"&&C,T("div",{class:`${d}-collapse-item-arrow`,key:this.rtlEnabled?0:1,"data-arrow":!0},ht(f,{collapsed:u},()=>[T(Dt,{clsPrefix:d},{default:()=>this.rtlEnabled?T(el,null):T(ba,null)})])),o==="left"&&C),fa(b,{collapsed:u},w=>T("div",{class:`${d}-collapse-item__header-extra`,onClick:this.handleClick,"data-extra":!0},w))),T(nl,{clsPrefix:d,displayDirective:t,show:!u},c))}}),il=le("collapse-transition",{width:"100%"},[It()]),cl=Object.assign(Object.assign({},Ne.props),{show:{type:Boolean,default:!0},appear:Boolean,collapsed:{type:Boolean,default:void 0}}),ul=j({name:"CollapseTransition",props:cl,inheritAttrs:!1,setup(r){const{mergedClsPrefixRef:c,inlineThemeDisabled:o,mergedRtlRef:u}=Oe(r),t=Ne("CollapseTransition","-collapse-transition",il,Ca,r,c),d=tt("CollapseTransition",u,c),g=$(()=>r.collapsed!==void 0?r.collapsed:r.show),_=$(()=>{const{self:{bezier:b}}=t.value;return{"--n-bezier":b}}),C=o?at("collapse-transition",void 0,_,r):void 0;return{rtlEnabled:d,mergedShow:g,mergedClsPrefix:c,cssVars:o?void 0:_,themeClass:C==null?void 0:C.themeClass,onRender:C==null?void 0:C.onRender}},render(){return T(kt,{appear:this.appear},{default:()=>{var r;if(this.mergedShow)return(r=this.onRender)===null||r===void 0||r.call(this),T("div",_a({class:[`${this.mergedClsPrefix}-collapse-transition`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse-transition--rtl`,this.themeClass],style:this.cssVars},this.$attrs),this.$slots)}})}}),Kt=xt("n-popconfirm"),qt={positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0}},Nt=Ta(qt),dl=j({name:"NPopconfirmPanel",props:qt,setup(r){const{localeRef:c}=Ze("Popconfirm"),{inlineThemeDisabled:o}=Oe(),{mergedClsPrefixRef:u,mergedThemeRef:t,props:d}=Rt(Kt),g=$(()=>{const{common:{cubicBezierEaseInOut:C},self:{fontSize:b,iconSize:f,iconColor:w}}=t.value;return{"--n-bezier":C,"--n-font-size":b,"--n-icon-size":f,"--n-icon-color":w}}),_=o?at("popconfirm-panel",void 0,g,d):void 0;return Object.assign(Object.assign({},Ze("Popconfirm")),{mergedClsPrefix:u,cssVars:o?void 0:g,localizedPositiveText:$(()=>r.positiveText||c.value.positiveText),localizedNegativeText:$(()=>r.negativeText||c.value.negativeText),positiveButtonProps:Le(d,"positiveButtonProps"),negativeButtonProps:Le(d,"negativeButtonProps"),handlePositiveClick(C){r.onPositiveClick(C)},handleNegativeClick(C){r.onNegativeClick(C)},themeClass:_==null?void 0:_.themeClass,onRender:_==null?void 0:_.onRender})},render(){var r;const{mergedClsPrefix:c,showIcon:o,$slots:u}=this,t=mt(u.action,()=>this.negativeText===null&&this.positiveText===null?[]:[this.negativeText!==null&&T(L,Object.assign({size:"small",onClick:this.handleNegativeClick},this.negativeButtonProps),{default:()=>this.localizedNegativeText}),this.positiveText!==null&&T(L,Object.assign({size:"small",type:"primary",onClick:this.handlePositiveClick},this.positiveButtonProps),{default:()=>this.localizedPositiveText})]);return(r=this.onRender)===null||r===void 0||r.call(this),T("div",{class:[`${c}-popconfirm__panel`,this.themeClass],style:this.cssVars},Sa(u.default,d=>o||d?T("div",{class:`${c}-popconfirm__body`},o?T("div",{class:`${c}-popconfirm__icon`},mt(u.icon,()=>[T(Dt,{clsPrefix:c},{default:()=>T(Ea,null)})])):null,d):null),t?T("div",{class:[`${c}-popconfirm__action`]},t):null)}}),pl=le("popconfirm",[K("body",`
 font-size: var(--n-font-size);
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 position: relative;
 `,[K("icon",`
 display: flex;
 font-size: var(--n-icon-size);
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 margin: 0 8px 0 0;
 `)]),K("action",`
 display: flex;
 justify-content: flex-end;
 `,[ke("&:not(:first-child)","margin-top: 8px"),le("button",[ke("&:not(:last-child)","margin-right: 8px;")])])]),vl=Object.assign(Object.assign(Object.assign({},Ne.props),Pa),{positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},trigger:{type:String,default:"click"},positiveButtonProps:Object,negativeButtonProps:Object,onPositiveClick:Function,onNegativeClick:Function}),hl=j({name:"Popconfirm",props:vl,slots:Object,__popover__:!0,setup(r){const{mergedClsPrefixRef:c}=Oe(),o=Ne("Popconfirm","-popconfirm",pl,xa,r,c),u=F(null);function t(_){var C;if(!(!((C=u.value)===null||C===void 0)&&C.getMergedShow()))return;const{onPositiveClick:b,"onUpdate:show":f}=r;Promise.resolve(b?b(_):!0).then(w=>{var y;w!==!1&&((y=u.value)===null||y===void 0||y.setShow(!1),f&&Ee(f,!1))})}function d(_){var C;if(!(!((C=u.value)===null||C===void 0)&&C.getMergedShow()))return;const{onNegativeClick:b,"onUpdate:show":f}=r;Promise.resolve(b?b(_):!0).then(w=>{var y;w!==!1&&((y=u.value)===null||y===void 0||y.setShow(!1),f&&Ee(f,!1))})}return Pt(Kt,{mergedThemeRef:o,mergedClsPrefixRef:c,props:r}),{setShow(_){var C;(C=u.value)===null||C===void 0||C.setShow(_)},syncPosition(){var _;(_=u.value)===null||_===void 0||_.syncPosition()},mergedTheme:o,popoverInstRef:u,handlePositiveClick:t,handleNegativeClick:d}},render(){const{$slots:r,$props:c,mergedTheme:o}=this;return T(Na,wa(c,Nt,{theme:o.peers.Popover,themeOverrides:o.peerOverrides.Popover,internalExtraClass:["popconfirm"],ref:"popoverInstRef"}),{trigger:r.trigger,default:()=>{const u=Ia(c,Nt);return T(dl,Object.assign(Object.assign({},u),{onPositiveClick:this.handlePositiveClick,onNegativeClick:this.handleNegativeClick}),r)}})}}),fl={time:{type:[Number,Date],default:void 0},type:{type:String,default:"datetime"},to:{type:[Number,Date],default:void 0},unix:Boolean,format:String,text:Boolean,timeZone:String},ge=j({name:"Time",props:fl,setup(r){const c=Date.now(),{localeRef:o,dateLocaleRef:u}=Ze("Time"),t=$(()=>{const{timeZone:b}=r;return b?(f,w,y)=>Va(f,b,w,y):Ka}),d=$(()=>({locale:u.value.locale})),g=$(()=>{const{time:b}=r;return r.unix?b===void 0?c:Et(typeof b=="number"?b:b.valueOf()):b??c}),_=$(()=>{const{to:b}=r;return r.unix?b===void 0?c:Et(typeof b=="number"?b:b.valueOf()):b??c});return{renderedTime:$(()=>r.format?t.value(g.value,r.format,d.value):r.type==="date"?t.value(g.value,o.value.dateFormat,d.value):r.type==="datetime"?t.value(g.value,o.value.dateTimeFormat,d.value):ll(g.value,_.value,{addSuffix:!0,locale:u.value.locale}))}},render(){return this.text?I(this.renderedTime):T("time",[this.renderedTime])}}),ee=ka("/gateway/hub0041"),ml=async r=>ee.post("/queryServices",r),Jt=async r=>ee.post("/getService",{serviceName:r}),gl=async r=>ee.post("/createService",r),yl=async r=>ee.post("/updateService",r),bl=async r=>ee.post("/deleteService",{serviceName:r}),ut=async r=>ee.post("/queryServiceInstances",r),_l=async r=>ee.post("/getServiceInstance",{serviceInstanceId:r}),Cl=async r=>ee.post("/createServiceInstance",r),Yt=async r=>ee.post("/updateServiceInstance",r),Sl=async r=>ee.post("/deleteServiceInstance",{serviceInstanceId:r}),Tl=async(r,c)=>ee.post("/updateInstanceHealthStatus",{serviceInstanceId:r,healthStatus:c}),jt=async()=>ee.post("/getServiceGroups",{}),El=async r=>ee.post("/queryServiceEvents",r),Wt=async r=>await ee.post("/getServiceEvent",{serviceEventId:r}),wt=async r=>{const c=await Jt(r);if(!c.oK)return c;const o=await ut({serviceName:r,pageIndex:1,pageSize:1e3});let u={},t=[];try{u=typeof c.bizData=="string"?JSON.parse(c.bizData):c.bizData}catch(g){console.error("Failed to parse service data:",g)}try{if(o.oK&&o.bizData){const g=typeof o.bizData=="string"?JSON.parse(o.bizData):o.bizData;t=(g==null?void 0:g.items)||[],console.log("Raw instances response:",o),console.log("Parsed instances data:",g),console.log("Final instances data:",t),t.length>0&&(console.log("First instance sample:",t[0]),console.log("Instance keys:",Object.keys(t[0])))}}catch(g){console.error("Failed to parse instances data:",g)}const d={...u,instances:t,statistics:Nl(t)};return{oK:!0,state:!0,bizData:JSON.stringify(d),extObj:null,pageQueryData:"",messageId:"",errMsg:"",popMsg:"",extMsg:"",pkey1:"",pkey2:"",pkey3:"",pkey4:"",pkey5:"",pkey6:""}},Nl=r=>({totalInstances:r.length,healthyInstances:r.filter(c=>c.healthStatus==="HEALTHY").length,unhealthyInstances:r.filter(c=>c.healthStatus==="UNHEALTHY").length,upInstances:r.filter(c=>c.instanceStatus==="UP").length,downInstances:r.filter(c=>c.instanceStatus==="DOWN").length}),wl=()=>{const{t:r}=pe("hub0041"),c=ye(),o=F([]),u=F(!1),t=F(0),d=Me({serviceName:"",groupName:"",protocolType:void 0,activeFlag:void 0}),{naiveConfig:g,queryParams:_,setTotal:C,resetPagination:b}=$t({initialPage:1,initialPageSize:12,onPageChange:n=>{w()},onPageSizeChange:(n,E)=>{w()}}),f=$(()=>t.value),w=async()=>{try{u.value=!0;const n={...d,pageIndex:_.value.pageIndex,pageSize:_.value.pageSize},E=await ml(n);if(Re(E)){const N=Se(E,[]);o.value=N||[];let A=0;try{A=Ut(E).totalCount||0}catch(U){console.warn("解析分页信息失败:",U),A=(N==null?void 0:N.length)||0}t.value=A,C(A)}else c.error(De(E,r("fetchServicesFailed"))),o.value=[],t.value=0,C(0)}catch(n){console.error("Failed to fetch services:",n),c.error(r("fetchServicesFailed")),o.value=[],t.value=0,C(0)}finally{u.value=!1}};return{services:o,loading:u,searchParams:d,naiveConfig:g,totalCount:f,fetchServices:w,refreshService:async n=>{try{const E=await Jt(n);Re(E)?(c.success(r("refreshServiceSuccess")),await w()):c.error(De(E,r("refreshServiceFailed")))}catch(E){console.error("Failed to refresh service:",E),c.error(r("refreshServiceFailed"))}},handleSearch:()=>{b(),w()},handleReset:()=>{Object.assign(d,{serviceName:"",groupName:"",protocolType:void 0,activeFlag:void 0}),b(),w()},handleRefresh:()=>{w()},handleDeleteService:async n=>{try{const E=await bl(n);if(Re(E))return c.success(r("deleteServiceSuccess")),await w(),{success:!0,message:r("deleteServiceSuccess")};{const N=De(E,r("deleteServiceFailed"));return c.error(N),{success:!1,message:N}}}catch(E){console.error("Failed to delete service:",E);const N=r("deleteServiceFailed");return c.error(N),{success:!1,message:N}}}}},Il=()=>{const{t:r}=pe("hub0041"),c=ye(),o=F(null),u=F(!1),t=F(!1),d=async y=>{try{u.value=!0;const x=await wt(y);if(x.oK)try{o.value=Se(x)}catch(v){console.error("Failed to parse service detail data:",v),o.value=null}else c.error(r("fetchDetailFailed")),o.value=null}catch(x){console.error("Failed to fetch service detail:",x),c.error(r("fetchDetailFailed")),o.value=null}finally{u.value=!1}},g=async y=>{if(o.value)try{t.value=!0;const x=await ut({serviceName:y});if(x.oK)try{const v=At(x.bizData);o.value.instances=v,_(),c.success(r("refreshInstancesSuccess"))}catch(v){console.error("Failed to parse instances data:",v)}else c.error(r("refreshInstancesFailed"))}catch(x){console.error("Failed to refresh service instances:",x),c.error(r("refreshInstancesFailed"))}finally{t.value=!1}},_=()=>{if(!o.value)return;const y=o.value.instances,x={totalInstances:y.length,healthyInstances:y.filter(v=>v.healthStatus==="HEALTHY").length,unhealthyInstances:y.filter(v=>v.healthStatus==="UNHEALTHY").length,upInstances:y.filter(v=>v.instanceStatus==="UP").length,downInstances:y.filter(v=>v.instanceStatus==="DOWN").length};o.value.statistics=x};return{serviceDetail:o,loading:u,instancesLoading:t,fetchServiceDetail:d,refreshServiceInstances:g,performHealthCheck:async(y,x)=>{try{let v;if(x)v=await Tl(x,"HEALTHY");else if(v=await wt(y),v.oK)try{o.value=Se(v)}catch(S){console.error("Failed to parse health check data:",S)}v.oK?(c.success(r("healthCheckSuccess")),x&&await g(y)):c.error(r("healthCheckFailed"))}catch(v){console.error("Failed to perform health check:",v),c.error(r("healthCheckFailed"))}},updateInstanceStatus:async(y,x,v)=>{try{const S={...x,instanceStatus:v};(await Yt(S)).oK?(c.success(r(v==="UP"?"bringUpSuccess":"takeDownSuccess")),await g(y)):c.error(r(v==="UP"?"bringUpFailed":"takeDownFailed"))}catch(S){console.error(`Failed to ${v==="UP"?"bring up":"take down"} instance:`,S),c.error(r(v==="UP"?"bringUpFailed":"takeDownFailed"))}},getInstanceMetadata:async y=>{try{const x=await _l(y);if(x.oK)try{return Se(x,null)}catch(v){return console.error("Failed to parse metadata:",v),null}else return c.error(r("fetchMetadataFailed")),null}catch(x){return console.error("Failed to fetch instance metadata:",x),c.error(r("fetchMetadataFailed")),null}},clearServiceDetail:()=>{o.value=null}}};function Zt(){const{t:r}=pe("hub0041"),c=ye(),o=F(!1),u=F(null),t=F([]),d=F(0),g=E=>E.includes("GROUP_")?Je:E.includes("SERVICE_")?ot:E.includes("INSTANCE_")?nt:Be,_=E=>E==="GROUP_CREATE"?"success":E==="GROUP_UPDATE"?"info":E==="GROUP_DELETE"?"error":E==="SERVICE_CREATE"?"success":E==="SERVICE_UPDATE"?"info":E==="SERVICE_DELETE"?"error":E==="INSTANCE_REGISTER"?"success":E==="INSTANCE_DEREGISTER"?"error":E==="INSTANCE_HEARTBEAT"?"default":E==="INSTANCE_HEALTH_CHANGE"?"warning":E==="INSTANCE_STATUS_CHANGE"?"info":"default";let C=null;const{naiveConfig:b,queryParams:f,setTotal:w,resetPagination:y}=$t({initialPage:1,initialPageSize:10,onPageChange:E=>{C&&C()},onPageSizeChange:(E,N)=>{C&&C()}}),x=E=>{C=E},v=E=>[{title:r("columns.eventType"),key:"eventType",width:180,minWidth:160,render(N){return T(q,{type:_(N.eventType),bordered:!1,round:!0,size:"small"},{default:()=>N.eventType,icon:()=>T(z,{},{default:()=>T(g(N.eventType))})})}},{title:r("columns.eventMessage"),key:"eventMessage",minWidth:200,ellipsis:{tooltip:{placement:"bottom",width:"trigger",style:{maxWidth:"400px"}}},render(N){return N.eventMessage||"-"}},{title:r("columns.eventSource"),key:"eventSource",width:140,ellipsis:{tooltip:!0}},{title:r("columns.serviceName"),key:"serviceName",width:120,ellipsis:{tooltip:!0}},{title:r("columns.hostAddress"),key:"hostAddress",width:150,ellipsis:{tooltip:!0},render(N){return N.hostAddress?`${N.hostAddress}:${N.portNumber||"-"}`:"-"}},{title:"服务运行节点IP",key:"nodeIpAddress",width:140,ellipsis:{tooltip:!0},render(N){return N.nodeIpAddress||"-"}},{title:r("columns.eventTime"),key:"eventTime",width:160,sorter:!0,render(N){return T(ge,{time:new Date(N.eventTime),format:"yyyy-MM-dd HH:mm:ss"})}},{title:r("columns.actions"),key:"actions",width:80,fixed:"right",render(N){return T(de,{justify:"center",size:"small"},{default:()=>[T(he,{},{trigger:()=>T(L,{quaternary:!0,circle:!0,size:"small",onClick:()=>E(N)},{icon:()=>T(z,{size:18},{default:()=>T(Be)})}),default:()=>r("actions.view")})]})}}],S=async E=>{o.value=!0,u.value=null;try{const N=await El(E);if(Re(N)){const A=Se(N,[]);let U=0;try{U=Ut(N).totalCount||0}catch(R){console.warn("解析分页信息失败:",R),U=(A==null?void 0:A.length)||0}return{data:A,totalCount:U}}else{const A=De(N,r("fetchServiceEventsFailed"));throw c.error(A),u.value=new Error(A),new Error(A)}}catch(N){throw u.value=N,console.error("Failed to fetch service events:",N),N}finally{o.value=!1}};return{events:t,loading:o,error:u,total:d,naiveConfig:b,queryParams:f,setTotal:w,resetPagination:y,setPaginationCallback:x,fetchServiceEvents:S,getServiceEventById:async E=>{o.value=!0,u.value=null;try{const N=await Wt(E);if(Re(N))return Se(N);{const A=De(N,r("getServiceEventFailed"));throw c.error(A),u.value=new Error(A),new Error(A)}}catch(N){throw u.value=N,console.error("Failed to get service event by id:",N),N}finally{o.value=!1}},loadEvents:async(E,N,A)=>{try{const U={pageIndex:f.value.pageIndex,pageSize:f.value.pageSize,serviceInstanceId:N,serviceGroupId:E||void 0,...A},{data:R,totalCount:G}=await S(U);t.value=R,d.value=G,w(G)}catch(U){c.error(r("messages.loadError")),console.error("加载服务事件列表失败:",U)}},createTableColumns:v,getEventTypeIcon:g,getEventTypeColor:_}}const xl={class:"card-content"},Pl={class:"card-header"},kl={class:"service-name-row"},Rl={class:"name-with-badge"},Dl={class:"service-meta"},Ul={class:"group-info"},Al={class:"group-name"},Ol={key:0,class:"group-id"},Fl={key:0,class:"tenant-info"},zl={class:"tenant-tag"},Hl={class:"tenant-name"},$l={key:0,class:"service-description"},Gl={class:"instance-count"},Ll={class:"instance-count-item"},Ml={class:"count-text"},Bl={class:"card-footer"},Vl={class:"footer-item"},Kl={class:"footer-text"},ql={class:"footer-item"},Jl=j({__name:"ServiceCard",props:{service:{}},emits:["viewDetail","edit","delete","viewEvents"],setup(r,{emit:c}){const o=r,u=c,{t}=pe("hub0041"),d=$(()=>[{label:t("actions.viewEvents"),key:"viewEvents",icon:()=>T(z,null,{default:()=>T($a)})},{label:t("actions.edit"),key:"edit",icon:()=>T(z,null,{default:()=>T(Gt)})},{label:t("actions.delete"),key:"delete",icon:()=>T(z,null,{default:()=>T(Qe)})}]),g=()=>o.service.activeFlag==="Y"?t("status.Y"):t("status.N"),_=y=>{switch(y){case"HTTP":return"success";case"HTTPS":return"warning";case"TCP":return"info";case"UDP":return"default";case"GRPC":return"error";default:return"default"}},C=y=>y.length>8?y.substring(0,8)+"...":y,b=y=>({ROUND_ROBIN:t("roundRobin"),WEIGHTED_ROUND_ROBIN:t("weightedRoundRobin"),LEAST_CONNECTIONS:t("leastConnections"),RANDOM:t("random"),IP_HASH:t("ipHash")})[y]||y,f=()=>o.service.instances&&Array.isArray(o.service.instances)?o.service.instances.length:o.service.instanceCount||0,w=y=>{y==="edit"?u("edit",o.service):y==="delete"?u("delete",o.service):y==="viewEvents"&&u("viewEvents",o.service)};return(y,x)=>(O(),B(e(Z),{class:"service-card",hoverable:"",bordered:!0,onClick:x[1]||(x[1]=v=>y.$emit("viewDetail",y.service))},{default:l(()=>[m("div",xl,[m("div",Pl,[m("div",kl,[m("div",Rl,[a(e(ie),{class:"service-name",depth:1},{default:l(()=>[I(h(y.service.serviceName),1)]),_:1}),a(e(q),{size:"small",type:y.service.activeFlag==="Y"?"success":"error",round:""},{default:l(()=>[I(h(g()),1)]),_:1},8,["type"])]),m("div",{class:"actions-menu",onClick:x[0]||(x[0]=Ra(()=>{},["stop"]))},[a(e(Da),{options:d.value,trigger:"click",placement:"bottom-end",onSelect:w},{default:l(()=>[a(e(L),{quaternary:"",circle:"",size:"small"},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(Ma))]),_:1})]),_:1})]),_:1},8,["options"])])]),m("div",Dl,[a(e(q),{size:"tiny",type:_(y.service.protocolType)},{default:l(()=>[I(h(y.service.protocolType),1)]),_:1},8,["type"]),a(e(he),{trigger:"hover",placement:"bottom"},{trigger:l(()=>[m("div",Ul,[a(e(z),{size:"14",color:"var(--text-color-3)"},{default:l(()=>[a(e(Je))]),_:1}),m("span",Al,h(y.service.groupName),1),y.service.serviceGroupId?(O(),Y("span",Ol,"("+h(C(y.service.serviceGroupId))+")",1)):Q("",!0)])]),default:l(()=>[I(" "+h(e(t)("serviceGroup"))+": "+h(y.service.groupName),1)]),_:1}),y.service.tenantId&&y.service.tenantId!=="default"?(O(),Y("div",Fl,[a(e(he),{trigger:"hover",placement:"bottom"},{trigger:l(()=>[m("div",zl,[a(e(z),{size:"14",color:"var(--text-color-3)"},{default:l(()=>[a(e(Ba))]),_:1}),m("span",Hl,h(y.service.tenantId),1)])]),default:l(()=>[I(" "+h(e(t)("namespace"))+": "+h(y.service.tenantId),1)]),_:1})])):Q("",!0)])]),y.service.serviceDescription?(O(),Y("div",$l,[a(e(qa),{"line-clamp":2,tooltip:{width:250}},{default:l(()=>[I(h(y.service.serviceDescription),1)]),_:1})])):Q("",!0),m("div",Gl,[m("div",Ll,[a(e(z),{size:"18",color:"var(--info-color)"},{default:l(()=>[a(e(nt))]),_:1}),m("span",Ml,h(f())+" "+h(e(t)("instanceCount")),1)])]),m("div",Bl,[a(e(he),{trigger:"hover"},{trigger:l(()=>[m("div",Vl,[a(e(z),{size:"14"},{default:l(()=>[a(e(ot))]),_:1}),m("span",Kl,h(b(y.service.loadBalanceStrategy)),1)])]),default:l(()=>[I(" "+h(e(t)("loadBalanceStrategy")),1)]),_:1}),a(e(he),{trigger:"hover"},{trigger:l(()=>[m("div",ql,[a(e(z),{size:"14"},{default:l(()=>[a(e(Ae))]),_:1}),a(e(ge),{class:"footer-text",time:new Date(y.service.editTime),type:"relative"},null,8,["time"])])]),default:l(()=>[I(" "+h(e(t)("lastUpdated")),1)]),_:1})])])]),_:1}))}}),Yl=be(Jl,[["__scopeId","data-v-a1d6250e"]]),jl=(r,c)=>[{title:r("columns.serviceInstanceId"),key:"serviceInstanceId",width:280,ellipsis:{tooltip:!0},render:o=>T("span",{style:{fontFamily:"monospace",fontSize:"13px"}},o.serviceInstanceId)},{title:r("columns.hostAddress"),key:"hostAddress",width:140,render:o=>T("span",{style:{fontFamily:"monospace"}},o.hostAddress)},{title:r("columns.portNumber"),key:"portNumber",width:80,align:"center",render:o=>T("span",{style:{fontFamily:"monospace",fontWeight:"bold"}},o.portNumber.toString())},{title:r("columns.instanceStatus"),key:"instanceStatus",width:100,align:"center",render:o=>{const u=Wl(o.instanceStatus);return T(q,{type:u.type,size:"small",class:`status-${o.instanceStatus.toLowerCase()}`},{default:()=>r(`status.${o.instanceStatus}`),icon:()=>T(z,{size:14,component:u.icon})})}},{title:r("columns.healthStatus"),key:"healthStatus",width:100,align:"center",render:o=>{const u=Zl(o.healthStatus);return T(q,{type:u.type,size:"small",class:`health-${o.healthStatus.toLowerCase()}`},{default:()=>r(`status.${o.healthStatus}`),icon:()=>T(z,{size:14,component:u.icon})})}},{title:r("columns.weightValue"),key:"weightValue",width:80,align:"center",render:o=>T("span",{style:{fontWeight:"600"}},o.weightValue.toString())},{title:r("columns.clientType"),key:"clientType",width:100,align:"center",render:o=>T(q,{type:"info",size:"small"},{default:()=>o.clientType})},{title:r("columns.tempInstanceFlag"),key:"tempInstanceFlag",width:100,align:"center",render:o=>{const u=o.tempInstanceFlag==="Y";return T(q,{type:u?"warning":"success",size:"small"},{default:()=>r(u?"status.temporary":"status.permanent")})}},{title:r("columns.contextPath"),key:"contextPath",width:120,ellipsis:{tooltip:!0},render:o=>T("span",{style:{fontFamily:"monospace"}},o.contextPath||"/")},{title:r("columns.registerTime"),key:"registerTime",width:160,render:o=>T(ge,{time:new Date(o.registerTime)})},{title:r("columns.lastHeartbeatTime"),key:"lastHeartbeatTime",width:160,render:o=>o.lastHeartbeatTime?T(ge,{time:new Date(o.lastHeartbeatTime)}):T("span",{style:{color:"var(--text-color-3)"}},r("table.heartbeatTimeout"))},{title:r("columns.lastHealthCheckTime"),key:"lastHealthCheckTime",width:160,render:o=>o.lastHealthCheckTime?T(ge,{time:new Date(o.lastHealthCheckTime)}):T("span",{style:{color:"var(--text-color-3)"}},r("table.noHealthCheck"))},{title:r("columns.actions"),key:"actions",width:180,align:"center",fixed:"right",render:o=>T(Ot,{size:"small"},{default:()=>[T(he,{trigger:"hover"},{trigger:()=>T(L,{size:"small",type:"primary",quaternary:!0,onClick:()=>c==null?void 0:c("health-check",o)},{icon:()=>T(z,{component:Ga})}),default:()=>r("actions.healthCheck")}),o.instanceStatus==="DOWN"?T(he,{trigger:"hover"},{trigger:()=>T(L,{size:"small",type:"success",quaternary:!0,onClick:()=>c==null?void 0:c("up",o)},{icon:()=>T(z,{component:Ya})}),default:()=>r("actions.bringUp")}):null,o.instanceStatus==="UP"?T(he,{trigger:"hover"},{trigger:()=>T(L,{size:"small",type:"error",quaternary:!0,onClick:()=>c==null?void 0:c("down",o)},{icon:()=>T(z,{component:ja})}),default:()=>r("actions.takeDown")}):null].filter(Boolean)})}],Wl=r=>{switch(r){case"UP":return{type:"success",text:"UP",icon:it};case"DOWN":return{type:"error",text:"DOWN",icon:et};case"STARTING":return{type:"warning",text:"STARTING",icon:Ae};case"OUT_OF_SERVICE":return{type:"default",text:"OUT_OF_SERVICE",icon:et};default:return{type:"default",text:r,icon:Ae}}},Zl=r=>{switch(r){case"HEALTHY":return{type:"success",text:"HEALTHY",icon:it};case"UNHEALTHY":return{type:"error",text:"UNHEALTHY",icon:et};case"UNKNOWN":return{type:"default",text:"UNKNOWN",icon:Ae};default:return{type:"default",text:r,icon:Ae}}},Xl={class:"service-info-section"},Ql={class:"section-title"},es={class:"instances-section"},ts={class:"section-header"},as={class:"section-title"},ls={class:"health-check-section"},ss={class:"section-title"},rs=j({__name:"ServiceDetailDrawer",props:{show:{type:Boolean},serviceName:{}},emits:["update:show"],setup(r,{emit:c}){const o=r,u=c,{t}=pe("hub0041"),d=$({get:()=>o.show,set:U=>u("update:show",U)}),{serviceDetail:g,loading:_,instancesLoading:C,fetchServiceDetail:b,refreshServiceInstances:f,performHealthCheck:w,updateInstanceStatus:y}=Il(),v=jl(t,async(U,R)=>{if(o.serviceName)switch(U){case"health-check":await w(o.serviceName,R.serviceInstanceId);break;case"up":await y(o.serviceName,R,"UP");break;case"down":await y(o.serviceName,R,"DOWN");break}}),S=F(!1);Ue([()=>o.serviceName,()=>o.show],async([U,R])=>{if(U&&R&&!S.value)try{S.value=!0,await b(U),g.value&&await f(U)}finally{S.value=!1}},{immediate:!0});const P=async()=>{o.serviceName&&await f(o.serviceName)},n=U=>{switch(U){case"HTTP":return"success";case"HTTPS":return"warning";case"TCP":return"info";case"UDP":return"default";case"GRPC":return"error";default:return"default"}},E=U=>({ROUND_ROBIN:t("hub0041.roundRobin"),WEIGHTED_ROUND_ROBIN:t("hub0041.weightedRoundRobin"),LEAST_CONNECTIONS:t("hub0041.leastConnections"),RANDOM:t("hub0041.random"),IP_HASH:t("hub0041.ipHash")})[U]||U,N=U=>({ACTIVE:t("healthCheckModes.active"),PASSIVE:t("healthCheckModes.passive")})[U]||U,A=U=>({INTERNAL:t("registryTypes.INTERNAL"),NACOS:t("registryTypes.NACOS"),CONSUL:t("registryTypes.CONSUL"),EUREKA:t("registryTypes.EUREKA"),ETCD:t("registryTypes.ETCD"),ZOOKEEPER:t("registryTypes.ZOOKEEPER")})[U]||U;return(U,R)=>(O(),B(e(lt),{show:d.value,"onUpdate:show":R[0]||(R[0]=G=>d.value=G),width:900,placement:"right",closable:!0},{default:l(()=>[a(e(Ft),{title:e(t)("serviceDetail"),closable:""},{default:l(()=>[e(g)?(O(),Y(Ve,{key:0},[m("div",Xl,[m("h3",Ql,h(e(t)("basicInfo")),1),a(e(We),{column:2,"label-placement":"left",bordered:""},{default:l(()=>[a(e(ae),{label:e(t)("serviceName")},{default:l(()=>[I(h(e(g).serviceName),1)]),_:1},8,["label"]),a(e(ae),{label:e(t)("columns.groupName")},{default:l(()=>[I(h(e(g).groupName),1)]),_:1},8,["label"]),a(e(ae),{label:e(t)("columns.protocolType")},{default:l(()=>[a(e(q),{type:n(e(g).protocolType)},{default:l(()=>[I(h(e(g).protocolType),1)]),_:1},8,["type"])]),_:1},8,["label"]),a(e(ae),{label:e(t)("columns.loadBalanceStrategy")},{default:l(()=>[a(e(q),{type:"info"},{default:l(()=>[I(h(E(e(g).loadBalanceStrategy)),1)]),_:1})]),_:1},8,["label"]),a(e(ae),{label:e(t)("columns.contextPath")},{default:l(()=>[I(h(e(g).contextPath||"/"),1)]),_:1},8,["label"]),a(e(ae),{label:e(t)("healthCheckUrl")},{default:l(()=>[I(h(e(g).healthCheckUrl),1)]),_:1},8,["label"]),a(e(ae),{label:e(t)("columns.registryType")},{default:l(()=>[a(e(q),{type:"primary"},{default:l(()=>[I(h(A(e(g).registryType)),1)]),_:1})]),_:1},8,["label"])]),_:1}),a(e(We),{column:1,"label-placement":"left",bordered:"",style:{"margin-top":"16px"}},{default:l(()=>[a(e(ae),{label:e(t)("serviceDescription")},{default:l(()=>[I(h(e(g).serviceDescription||e(t)("noDescription")),1)]),_:1},8,["label"])]),_:1})]),m("div",es,[m("div",ts,[m("h3",as,h(e(t)("instanceList")),1),a(e(L),{size:"small",onClick:P,loading:e(C)},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(ze))]),_:1})]),default:l(()=>[I(" "+h(e(t)("actions.refresh")),1)]),_:1},8,["loading"])]),a(e(ct),{columns:e(v),data:e(g).instances,loading:e(C),pagination:!1,size:"small",style:{width:"100%","overflow-x":"auto"},title:e(t)("instanceList"),"scroll-x":1800},null,8,["columns","data","loading","title"])]),m("div",ls,[m("h3",ss,h(e(t)("healthCheckConfig")),1),a(e(We),{column:3,"label-placement":"left",bordered:""},{default:l(()=>[a(e(ae),{label:e(t)("healthCheckInterval")},{default:l(()=>[I(h(e(g).healthCheckIntervalSeconds)+"s ",1)]),_:1},8,["label"]),a(e(ae),{label:e(t)("healthCheckTimeout")},{default:l(()=>[I(h(e(g).healthCheckTimeoutSeconds)+"s ",1)]),_:1},8,["label"]),a(e(ae),{label:e(t)("healthCheckType")},{default:l(()=>[a(e(q),{type:"info"},{default:l(()=>[I(h(e(g).healthCheckType),1)]),_:1})]),_:1},8,["label"]),a(e(ae),{label:e(t)("healthCheckMode")},{default:l(()=>[a(e(q),{type:"success"},{default:l(()=>[I(h(N(e(g).healthCheckMode)),1)]),_:1})]),_:1},8,["label"]),a(e(ae),{label:e(t)("lastUpdateTime")},{default:l(()=>[a(e(ge),{time:new Date(e(g).editTime)},null,8,["time"])]),_:1},8,["label"])]),_:1})])],64)):e(_)?(O(),B(e(Fe),{key:1,size:"large",style:{width:"100%",padding:"60px 0"}})):(O(),B(e(Ke),{key:2,description:e(t)("serviceNotFound")},null,8,["description"]))]),_:1},8,["title"])]),_:1},8,["show"]))}}),ns=be(rs,[["__scopeId","data-v-82cf8a54"]]),os={class:"dialog-content"},is={class:"search-section"},cs={class:"group-list"},us={key:1,class:"group-items"},ds=["onClick"],ps={class:"group-header"},vs={class:"group-name"},hs={class:"group-description"},fs=j({__name:"ServiceGroupSelectionDialog",props:{show:{type:Boolean},selectedGroupId:{default:""}},emits:["update:show","confirm"],setup(r,{emit:c}){const o=r,u=c,{t}=pe("hub0041"),d=ye(),g=$({get:()=>o.show,set:R=>u("update:show",R)}),_=F(!1),C=F([]),b=F(null),f=F(""),w=F(""),y=[{label:t("groupType.BUSINESS"),value:"BUSINESS"},{label:t("groupType.SYSTEM"),value:"SYSTEM"},{label:t("groupType.TEST"),value:"TEST"}],x=$(()=>{let R=C.value;if(f.value.trim()){const G=f.value.toLowerCase();R=R.filter(M=>{var se;return M.groupName.toLowerCase().includes(G)||((se=M.groupDescription)==null?void 0:se.toLowerCase().includes(G))})}return w.value&&(R=R.filter(G=>G.groupType===w.value)),R=R.filter(G=>G.activeFlag==="Y"),R});Ue(()=>o.selectedGroupId,R=>{R&&C.value.length>0?b.value=C.value.find(G=>G.serviceGroupId===R)||null:b.value=null},{immediate:!0}),Ue(()=>o.show,R=>{R&&P()});const v=R=>{switch(R){case"BUSINESS":return"success";case"SYSTEM":return"warning";case"TEST":return"info";default:return"default"}},S=R=>t(`groupType.${R}`)||R,P=async()=>{try{_.value=!0;const R=await jt();if(R.oK){let G={};try{G=typeof R.bizData=="string"?JSON.parse(R.bizData):R.bizData,C.value=G||[],o.selectedGroupId&&(b.value=C.value.find(M=>M.serviceGroupId===o.selectedGroupId)||null)}catch(M){console.error("Failed to parse service groups data:",M),C.value=[]}}else d.error(t("fetchServiceGroupsFailed")),C.value=[]}catch(R){console.error("Failed to fetch service groups:",R),d.error(t("fetchServiceGroupsFailed")),C.value=[]}finally{_.value=!1}},n=()=>{},E=()=>{P()},N=R=>{b.value=R},A=()=>{b.value&&(u("confirm",b.value),g.value=!1)},U=()=>{g.value=!1};return qe(()=>{o.show&&P()}),(R,G)=>(O(),B(e(Ua),{show:g.value,"onUpdate:show":G[2]||(G[2]=M=>g.value=M),class:"service-group-selection-dialog","mask-closable":!1,preset:"dialog",title:e(t)("selectServiceGroup"),style:{width:"800px"}},{action:l(()=>[a(e(de),null,{default:l(()=>[a(e(L),{onClick:U},{default:l(()=>[I(h(e(t)("cancel")),1)]),_:1}),a(e(L),{type:"primary",onClick:A,disabled:!b.value},{default:l(()=>[I(h(e(t)("actions.confirm")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[m("div",os,[m("div",is,[a(e(de),{size:12},{default:l(()=>[a(e(H),{value:f.value,"onUpdate:value":G[0]||(G[0]=M=>f.value=M),placeholder:e(t)("searchGroupName"),clearable:"",style:{width:"240px"},onInput:n},{prefix:l(()=>[a(e(z),null,{default:l(()=>[a(e(st))]),_:1})]),_:1},8,["value","placeholder"]),a(e(X),{value:w.value,"onUpdate:value":[G[1]||(G[1]=M=>w.value=M),n],placeholder:e(t)("selectGroupType"),options:y,clearable:"",style:{width:"140px"}},null,8,["value","placeholder"]),a(e(L),{onClick:E,loading:_.value},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(ze))]),_:1})]),default:l(()=>[I(" "+h(e(t)("actions.refresh")),1)]),_:1},8,["loading"])]),_:1})]),m("div",cs,[a(e(Fe),{show:_.value},{default:l(()=>[a(e(Za),{style:{"max-height":"400px"}},{default:l(()=>[x.value.length===0&&!_.value?(O(),B(e(Ke),{key:0,description:e(t)("noServiceGroups")},null,8,["description"])):(O(),Y("div",us,[(O(!0),Y(Ve,null,rt(x.value,M=>{var se,fe;return O(),Y("div",{key:M.serviceGroupId,class:Aa(["group-item",{selected:((se=b.value)==null?void 0:se.serviceGroupId)===M.serviceGroupId}]),onClick:Te=>N(M)},[m("div",ps,[m("div",vs,[((fe=b.value)==null?void 0:fe.serviceGroupId)===M.serviceGroupId?(O(),B(e(z),{key:0,color:"#18a058",size:"18",style:{"margin-right":"8px"}},{default:l(()=>[a(e(it))]),_:1})):Q("",!0),a(e(ie),{strong:""},{default:l(()=>[I(h(M.groupName),1)]),_:2},1024),a(e(q),{type:v(M.groupType),size:"small",style:{"margin-left":"8px"}},{default:l(()=>[I(h(S(M.groupType)),1)]),_:2},1032,["type"])]),a(e(q),{type:M.activeFlag==="Y"?"success":"error",size:"small"},{default:l(()=>[I(h(M.activeFlag==="Y"?e(t)("status.Y"):e(t)("status.N")),1)]),_:2},1032,["type"])]),m("div",hs,[a(e(ie),{depth:"3"},{default:l(()=>[I(h(M.groupDescription||e(t)("noDescription")),1)]),_:2},1024)])],10,ds)}),128))]))]),_:1})]),_:1},8,["show"])])])]),_:1},8,["show","title"]))}}),ms=be(fs,[["__scopeId","data-v-75a4050c"]]),gs={class:"service-form-page"},ys={class:"page-header"},bs={class:"header-actions"},_s={key:0,style:{border:"none",padding:"0",margin:"0"}},Cs={style:{"margin-bottom":"16px"}},Ss={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"12px"}},Ts={style:{"margin-bottom":"16px"}},Es={style:{"margin-bottom":"16px"}},Ns={class:"instance-header"},ws={class:"instance-header-left"},Is={class:"instance-header-actions"},xs={class:"instance-table",style:{"margin-top":"16px"}},Ps={style:{"margin-top":"24px",display:"flex","justify-content":"center",gap:"12px"}},ks={class:"form-actions"},Rs=j({__name:"ServiceFormPage",props:{editData:{default:null}},emits:["back","success"],setup(r,{emit:c}){const o=r,u=c,{t}=pe("hub0041"),d=ye(),g=F(),_=$(()=>!!o.editData),C=F(!1),b=F(!1),f=F([]),w=F(!1),y=$(()=>{if(!n.serviceGroupId)return"";const p=f.value.find(s=>s.serviceGroupId===n.serviceGroupId);return p?p.groupName:""}),x=F(!1),v=$(()=>n.registryType!=="NACOS"),S=$(()=>n.registryType!=="NACOS"),P=$(()=>n.registryType==="NACOS"),n=Me({serviceName:"",serviceGroupId:"",groupName:"",serviceDescription:"",registryType:"INTERNAL",protocolType:"HTTP",contextPath:"/",loadBalanceStrategy:"ROUND_ROBIN",healthCheckUrl:"/health",healthCheckIntervalSeconds:30,healthCheckTimeoutSeconds:5,healthCheckType:"HTTP",healthCheckMode:"ACTIVE",activeFlag:"Y",maxInstances:10,nacosConfig:{servers:[{host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"}],namespace:"public",group:"DEFAULT_GROUP",username:"",password:"",accessKey:"",secretKey:"",timeout:5,beatInterval:5,cacheDir:"",logDir:"",logLevel:"info",updateThreadNum:20,notLoadCacheAtStart:!0,disableUseSnapShot:!1,updateCacheWhenEmpty:!1,appendToStdout:!1,enableTLS:!1,trustAll:!1,caFile:"",certFile:"",keyFile:"",appName:"",appKey:"",openKMS:!1,regionId:""},instances:[],metadataJson:"",tagsJson:"",noteText:"",extProperty:"",reserved1:"",reserved2:"",reserved3:"",reserved4:"",reserved5:"",reserved6:"",reserved7:"",reserved8:"",reserved9:"",reserved10:""}),E=$(()=>[{label:t("registryTypes.INTERNAL"),value:"INTERNAL"},{label:t("registryTypes.NACOS"),value:"NACOS"},{label:t("registryTypes.CONSUL"),value:"CONSUL"},{label:t("registryTypes.EUREKA"),value:"EUREKA"},{label:t("registryTypes.ETCD"),value:"ETCD"},{label:t("registryTypes.ZOOKEEPER"),value:"ZOOKEEPER"}]),N=[{label:"HTTP",value:"HTTP"},{label:"HTTPS",value:"HTTPS"},{label:"TCP",value:"TCP"},{label:"UDP",value:"UDP"},{label:"GRPC",value:"GRPC"}],A=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"}],U=$(()=>[{label:t("healthCheckModes.active"),value:"ACTIVE"},{label:t("healthCheckModes.passive"),value:"PASSIVE"}]),R=$(()=>[{label:t("roundRobin"),value:"ROUND_ROBIN"},{label:t("weightedRoundRobin"),value:"WEIGHTED_ROUND_ROBIN"},{label:t("leastConnections"),value:"LEAST_CONNECTIONS"},{label:t("random"),value:"RANDOM"},{label:t("ipHash"),value:"IP_HASH"}]),G=$(()=>({serviceName:[{required:!0,message:t("serviceNameRequired"),trigger:"blur"},{min:2,max:50,message:t("serviceNameLength"),trigger:"blur"}],serviceGroupId:[{required:!0,message:t("serviceGroupRequired"),trigger:"change"}],groupName:[],registryType:[{required:!0,message:t("registryTypeRequired"),trigger:"change"}],serviceDescription:[{max:200,message:t("serviceDescriptionLength"),trigger:"blur"}],protocolType:[{required:!0,message:t("protocolTypeRequired"),trigger:"change"}],contextPath:[{required:!0,message:t("contextPathRequired"),trigger:"blur"}],loadBalanceStrategy:[{required:!0,message:t("loadBalanceStrategyRequired"),trigger:"change"}],healthCheckUrl:[{validator:(p,s)=>v.value&&!s?new Error(t("healthCheckUrlRequired")):!0,trigger:"blur"}],healthCheckIntervalSeconds:[{validator:(p,s)=>v.value&&!s?new Error(t("healthCheckIntervalRequired")):!0,trigger:"blur"}],healthCheckTimeoutSeconds:[{validator:(p,s)=>v.value&&!s?new Error(t("healthCheckTimeoutRequired")):!0,trigger:"blur"}],healthCheckType:[{validator:(p,s)=>v.value&&!s?new Error(t("healthCheckTypeRequired")):!0,trigger:"change"}],healthCheckMode:[{validator:(p,s)=>v.value&&!s?new Error(t("healthCheckModeRequired")):!0,trigger:"change"}],activeFlag:[{required:!0,message:t("activeFlagRequired"),trigger:"change"}],maxInstances:[{required:!0,type:"number",message:t("maxInstancesRequired"),trigger:"blur"}],metadataJson:[{validator:(p,s)=>{if(s&&s.trim())try{return JSON.parse(s),!0}catch{return new Error(t("invalidJsonFormat"))}return!0},trigger:"blur"}],tagsJson:[{validator:(p,s)=>{if(s&&s.trim())try{return JSON.parse(s),!0}catch{return new Error(t("invalidJsonFormat"))}return!0},trigger:"blur"}],noteText:[{max:500,message:t("noteTextLength"),trigger:"blur"}],extProperty:[{validator:(p,s)=>{if(s&&s.trim())try{return JSON.parse(s),!0}catch{return new Error(t("invalidJsonFormat"))}return!0},trigger:"blur"}],"nacosConfig.namespace":[{validator:(p,s)=>P.value&&!s?new Error("请输入命名空间"):!0,trigger:"blur"}],"nacosConfig.group":[{validator:(p,s)=>P.value&&!s?new Error("请输入默认分组"):!0,trigger:"blur"}]})),M=async p=>{if(p)try{C.value=!0;const s=await ut({serviceName:p,pageIndex:1,pageSize:1e3});if(s.oK){const i=At(s.bizData);n.instances=i,d.success(t("loadInstancesSuccess"))}else d.error(s.errMsg||t("loadInstancesFailed"))}catch(s){console.error("Failed to load instances:",s),d.error(t("loadInstancesFailed"))}finally{C.value=!1}},se=p=>{p?(Object.assign(n,{serviceName:p.serviceName||"",serviceGroupId:p.serviceGroupId||"",groupName:p.groupName||"",serviceDescription:p.serviceDescription||"",registryType:p.registryType||"INTERNAL",protocolType:p.protocolType||"HTTP",contextPath:p.contextPath||"/",loadBalanceStrategy:p.loadBalanceStrategy||"ROUND_ROBIN",healthCheckUrl:p.healthCheckUrl||"/health",healthCheckIntervalSeconds:p.healthCheckIntervalSeconds||30,healthCheckTimeoutSeconds:p.healthCheckTimeoutSeconds||5,healthCheckType:p.healthCheckType||"HTTP",healthCheckMode:p.healthCheckMode||"ACTIVE",activeFlag:p.activeFlag||"Y",maxInstances:10,nacosConfig:(()=>{if(p.externalRegistryConfig&&p.registryType==="NACOS")try{const s=JSON.parse(p.externalRegistryConfig);return{servers:s.servers||[{host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"}],namespace:s.namespace||"public",group:s.group||"DEFAULT_GROUP",username:s.username||"",password:s.password||"",accessKey:s.accessKey||"",secretKey:s.secretKey||"",timeout:s.timeout||5,beatInterval:s.beatInterval||5,cacheDir:s.cacheDir||"",logDir:s.logDir||"",logLevel:s.logLevel||"info",updateThreadNum:s.updateThreadNum||20,notLoadCacheAtStart:s.notLoadCacheAtStart??!0,disableUseSnapShot:s.disableUseSnapShot??!1,updateCacheWhenEmpty:s.updateCacheWhenEmpty??!1,appendToStdout:s.appendToStdout??!1,enableTLS:s.enableTLS??!1,trustAll:s.trustAll??!1,caFile:s.caFile||"",certFile:s.certFile||"",keyFile:s.keyFile||"",appName:s.appName||"",appKey:s.appKey||"",openKMS:s.openKMS??!1,regionId:s.regionId||""}}catch{return{servers:[{host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"}],namespace:"public",group:"DEFAULT_GROUP",username:"",password:"",accessKey:"",secretKey:"",timeout:5,beatInterval:5,cacheDir:"",logDir:"",logLevel:"info",updateThreadNum:20,notLoadCacheAtStart:!0,disableUseSnapShot:!1,updateCacheWhenEmpty:!1,appendToStdout:!1,enableTLS:!1,trustAll:!1,caFile:"",certFile:"",keyFile:"",appName:"",appKey:"",openKMS:!1,regionId:""}}return{servers:[{host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"}],namespace:"public",group:"DEFAULT_GROUP",username:"",password:"",accessKey:"",secretKey:"",timeout:5,beatInterval:5,cacheDir:"",logDir:"",logLevel:"info",updateThreadNum:20,notLoadCacheAtStart:!0,disableUseSnapShot:!1,updateCacheWhenEmpty:!1,appendToStdout:!1,enableTLS:!1,trustAll:!1,caFile:"",certFile:"",keyFile:"",appName:"",appKey:"",openKMS:!1,regionId:""}})(),instances:[],metadataJson:p.metadataJson||"",tagsJson:p.tagsJson||"",noteText:p.noteText||"",extProperty:p.extProperty||"",reserved1:p.reserved1||"",reserved2:p.reserved2||"",reserved3:p.reserved3||"",reserved4:p.reserved4||"",reserved5:p.reserved5||"",reserved6:p.reserved6||"",reserved7:p.reserved7||"",reserved8:p.reserved8||"",reserved9:p.reserved9||"",reserved10:p.reserved10||""}),(p.metadataJson||p.tagsJson||p.noteText||p.extProperty||p.reserved1||p.reserved2||p.reserved3||p.reserved4||p.reserved5||p.reserved6||p.reserved7||p.reserved8||p.reserved9||p.reserved10)&&(x.value=!0),_.value&&p.serviceName&&M(p.serviceName)):Te()};Ue(()=>o.editData,p=>{se(p)}),qe(()=>{fe(),se(o.editData)});const fe=async()=>{try{const p=await jt();if(p.oK){let s={};try{s=typeof p.bizData=="string"?JSON.parse(p.bizData):p.bizData,f.value=s||[]}catch(i){console.error("Failed to parse service groups data:",i),f.value=[]}}else d.error(t("fetchServiceGroupsFailed")),f.value=[]}catch(p){console.error("Failed to fetch service groups:",p),d.error(t("fetchServiceGroupsFailed")),f.value=[]}},Te=()=>{var p;(p=g.value)==null||p.restoreValidation(),_.value||(Object.assign(n,{serviceName:"",serviceGroupId:"",groupName:"",serviceDescription:"",registryType:"INTERNAL",protocolType:"HTTP",contextPath:"/",loadBalanceStrategy:"ROUND_ROBIN",healthCheckUrl:"/health",healthCheckIntervalSeconds:30,healthCheckTimeoutSeconds:5,healthCheckType:"HTTP",healthCheckMode:"ACTIVE",activeFlag:"Y",maxInstances:10,nacosConfig:{servers:[{host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"}],namespace:"public",group:"DEFAULT_GROUP",username:"",password:"",accessKey:"",secretKey:"",timeout:5,beatInterval:5,cacheDir:"",logDir:"",logLevel:"info",updateThreadNum:20,notLoadCacheAtStart:!0,disableUseSnapShot:!1,updateCacheWhenEmpty:!1,appendToStdout:!1,enableTLS:!1,trustAll:!1,caFile:"",certFile:"",keyFile:"",appName:"",appKey:"",openKMS:!1,regionId:""},instances:[],metadataJson:"",tagsJson:"",noteText:"",extProperty:"",reserved1:"",reserved2:"",reserved3:"",reserved4:"",reserved5:"",reserved6:"",reserved7:"",reserved8:"",reserved9:"",reserved10:""}),x.value=!1)},He=()=>{w.value=!0},Ye=p=>{n.serviceGroupId=p.serviceGroupId,n.groupName=p.groupName},re=()=>{n.nacosConfig.servers.push({host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"})},ne=p=>{n.nacosConfig.servers.length>1&&n.nacosConfig.servers.splice(p,1)},J=()=>{u("back")},Xt=async()=>{var p;try{await((p=g.value)==null?void 0:p.validate()),b.value=!0;const{maxInstances:s,nacosConfig:i,...ce}=n;let te;n.registryType==="NACOS"&&(te=JSON.stringify(n.nacosConfig));const vt={...ce,externalRegistryConfig:te,instances:n.instances.map(je=>({...je,serviceName:n.serviceName}))};let Ie;if(_.value?Ie=await yl(vt):Ie=await gl(vt),Ie.oK)d.success(_.value?t("updateServiceSuccess"):t("addServiceSuccess")),u("success"),u("back");else{const je=Ie.popMsg||Ie.errMsg||(_.value?t("updateServiceFailed"):t("addServiceFailed"));d.error(je)}}catch(s){console.error("Failed to submit service:",s),d.error(_.value?t("updateServiceFailed"):t("addServiceFailed"))}finally{b.value=!1}},dt=F(),ve=F(!1),$e=F(!1),we=F(-1),V=Me({serviceInstanceId:"",hostAddress:"",portNumber:8080,contextPath:"/",instanceStatus:"UP",healthStatus:"HEALTHY",weightValue:1,clientType:"OTHER",tempInstanceFlag:"N"}),Qt=$(()=>[{label:t("status.UP"),value:"UP"},{label:t("status.DOWN"),value:"DOWN"},{label:t("status.STARTING"),value:"STARTING"},{label:t("status.OUT_OF_SERVICE"),value:"OUT_OF_SERVICE"}]),ea=$(()=>[{label:t("status.HEALTHY"),value:"HEALTHY"},{label:t("status.UNHEALTHY"),value:"UNHEALTHY"},{label:t("status.UNKNOWN"),value:"UNKNOWN"}]),ta=$(()=>[{label:t("status.JAVA"),value:"JAVA"},{label:t("status.DOTNET"),value:"DOTNET"},{label:t("status.NODEJS"),value:"NODEJS"},{label:t("status.PYTHON"),value:"PYTHON"},{label:t("status.GO"),value:"GO"},{label:t("status.OTHER"),value:"OTHER"}]),aa={hostAddress:[{required:!0,message:t("instanceHostRequired"),trigger:"blur"}],portNumber:[{required:!0,type:"number",message:t("instancePortRequired"),trigger:"blur"}],instanceStatus:[{required:!0,message:t("instanceStatusRequired"),trigger:"change"}],healthStatus:[{required:!0,message:t("healthStatusRequired"),trigger:"change"}],weightValue:[{required:!0,type:"number",message:t("weightRequired"),trigger:"blur"}]},la=$(()=>[{title:t("columns.hostAddress"),key:"hostAddress"},{title:t("columns.portNumber"),key:"portNumber"},{title:t("columns.weightValue"),key:"weightValue",width:80,align:"center",render:p=>{var s;return T("span",{style:{fontWeight:"600"}},((s=p.weightValue)==null?void 0:s.toString())||"1")}},{title:t("columns.instanceStatus"),key:"instanceStatus",render:p=>{const s=p.instanceStatus;return T(q,{type:{UP:"success",DOWN:"error",STARTING:"warning",OUT_OF_SERVICE:"default"}[s],size:"small"},{default:()=>t(`status.${s}`)})}},{title:t("columns.healthStatus"),key:"healthStatus",render:p=>{const s=p.healthStatus;return T(q,{type:{HEALTHY:"success",UNHEALTHY:"error",UNKNOWN:"default"}[s],size:"small"},{default:()=>t(`status.${s}`)})}},{title:t("columns.tempInstanceFlag"),key:"tempInstanceFlag",render:p=>{const s=p.tempInstanceFlag==="Y";return T(q,{type:s?"warning":"success",size:"small"},{default:()=>t(s?"status.temporary":"status.permanent")})}},{title:t("columns.actions"),key:"actions",width:100,align:"center",fixed:"right",render:(p,s)=>T(Ot,{size:"small"},{default:()=>[T(L,{size:"small",type:"info",quaternary:!0,onClick:()=>ra(s)},{icon:()=>T(z,{component:Gt})}),T(hl,{onPositiveClick:()=>oa(s)},{trigger:()=>T(L,{size:"small",type:"error",quaternary:!0},{icon:()=>T(z,{component:Qe})}),default:()=>t("messages.confirmDeleteInstance")})]})}]),pt=()=>{if(!_.value){d.warning(t("saveServiceBeforeAddingInstance"));return}sa()},sa=()=>{$e.value=!1,we.value=-1,Object.assign(V,{serviceInstanceId:`${n.serviceName}-${Date.now()}`,hostAddress:"",portNumber:8080,contextPath:n.contextPath||"/",instanceStatus:"UP",healthStatus:"HEALTHY",weightValue:1,clientType:"OTHER",tempInstanceFlag:"N"}),ve.value=!0},ra=p=>{$e.value=!0,we.value=p;const s=n.instances[p];Object.assign(V,{...s}),ve.value=!0},na=async()=>{_.value&&n.serviceName&&await M(n.serviceName)},oa=async p=>{const s=n.instances[p];if(_.value&&s.serviceInstanceId)try{const i=await Sl(s.serviceInstanceId);i.oK?(n.instances.splice(p,1),d.success(t("deleteInstanceSuccess"))):d.error(i.errMsg||t("deleteInstanceFailed"))}catch(i){console.error("Failed to delete instance:",i),d.error(t("deleteInstanceFailed"))}else n.instances.splice(p,1),d.success(t("deleteInstanceSuccess"))},ia=async()=>{var p;try{await((p=dt.value)==null?void 0:p.validate());const s={...V,serviceName:n.serviceName,serviceGroupId:n.serviceGroupId,groupName:n.groupName,tenantId:"default",registerTime:new Date().toISOString(),lastHeartbeatTime:new Date().toISOString(),activeFlag:"Y",tempInstanceFlag:V.tempInstanceFlag||"N"};if($e.value&&we.value>=0)if(_.value&&n.serviceName&&V.serviceInstanceId)try{const i=await Yt(s);i.oK?(n.instances[we.value]=s,d.success(t("updateInstanceSuccess")),ve.value=!1):d.error(i.errMsg||t("updateInstanceFailed"))}catch(i){console.error("Failed to update instance:",i),d.error(t("updateInstanceFailed"))}else n.instances[we.value]=s,d.success(t("updateInstanceSuccess")),ve.value=!1;else if(_.value&&n.serviceName)try{const i=await Cl(s);i.oK?(n.instances.push(s),d.success(t("addInstanceSuccess")),ve.value=!1):d.error(i.errMsg||t("addInstanceFailed"))}catch(i){console.error("Failed to create instance:",i),d.error(t("addInstanceFailed"))}else n.instances.push(s),d.success(t("addInstanceSuccess")),ve.value=!1}catch(s){console.error("Instance validation error:",s)}};return(p,s)=>(O(),Y("div",gs,[m("div",ys,[a(e(Oa),null,{default:l(()=>[a(e(gt),{onClick:J},{default:l(()=>[I(h(e(t)("serviceManagement")),1)]),_:1}),a(e(gt),null,{default:l(()=>[I(h(_.value?e(t)("editService"):e(t)("addService")),1)]),_:1})]),_:1}),m("div",bs,[a(e(L),{onClick:J,quaternary:""},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(Lt))]),_:1})]),default:l(()=>[I(" "+h(e(t)("actions.back")),1)]),_:1})])]),a(e(Z),{size:"large",class:"form-card"},{default:l(()=>[a(e(Xe),{ref_key:"formRef",ref:g,model:n,rules:G.value,"label-placement":"left","label-width":140,"require-mark-placement":"left"},{default:l(()=>[a(e(Z),{title:e(t)("basicInfo"),size:"small",style:{"margin-bottom":"24px"}},{default:l(()=>[a(e(W),{cols:3,"x-gap":24,"y-gap":16},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("serviceName"),path:"serviceName"},{default:l(()=>[a(e(H),{value:n.serviceName,"onUpdate:value":s[0]||(s[0]=i=>n.serviceName=i),placeholder:e(t)("serviceNamePlaceholder"),maxlength:"50","show-count":"",disabled:_.value},null,8,["value","placeholder","disabled"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("columns.groupName"),path:"serviceGroupId"},{default:l(()=>[a(e(H),{value:y.value,placeholder:e(t)("selectServiceGroup"),readonly:"",onClick:He,style:{cursor:"pointer"}},{suffix:l(()=>[a(e(L),{text:"",onClick:He},{default:l(()=>[a(e(z),null,{default:l(()=>[a(e(La))]),_:1})]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("groupName"),path:"groupName"},{default:l(()=>[a(e(H),{value:n.groupName,"onUpdate:value":s[1]||(s[1]=i=>n.groupName=i),placeholder:e(t)("groupNamePlaceholder"),readonly:"",style:{"background-color":"var(--input-color-disabled)"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("columns.registryType"),path:"registryType"},{default:l(()=>[a(e(X),{value:n.registryType,"onUpdate:value":s[2]||(s[2]=i=>n.registryType=i),options:E.value,placeholder:e(t)("selectRegistryType")},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("columns.activeFlag"),path:"activeFlag"},{default:l(()=>[a(e(_e),{value:n.activeFlag,"onUpdate:value":s[3]||(s[3]=i=>n.activeFlag=i),"checked-value":"Y","unchecked-value":"N"},{checked:l(()=>[I(h(e(t)("status.Y")),1)]),unchecked:l(()=>[I(h(e(t)("status.N")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("maxInstances"),path:"maxInstances"},{default:l(()=>[a(e(ue),{value:n.maxInstances,"onUpdate:value":s[4]||(s[4]=i=>n.maxInstances=i),placeholder:e(t)("maxInstancesPlaceholder"),min:1,max:100,style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),a(e(k),{label:e(t)("serviceDescription"),path:"serviceDescription"},{default:l(()=>[a(e(H),{value:n.serviceDescription,"onUpdate:value":s[5]||(s[5]=i=>n.serviceDescription=i),type:"textarea",placeholder:e(t)("serviceDescriptionPlaceholder"),rows:4,maxlength:"200","show-count":""},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["title"]),a(e(Z),{title:e(t)("networkConfig"),size:"small",style:{"margin-bottom":"24px"}},{default:l(()=>[a(e(W),{cols:3,"x-gap":24,"y-gap":16},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("columns.protocolType"),path:"protocolType"},{default:l(()=>[a(e(X),{value:n.protocolType,"onUpdate:value":s[6]||(s[6]=i=>n.protocolType=i),options:N,placeholder:e(t)("selectProtocol")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("columns.contextPath"),path:"contextPath"},{default:l(()=>[a(e(H),{value:n.contextPath,"onUpdate:value":s[7]||(s[7]=i=>n.contextPath=i),placeholder:e(t)("contextPathPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("columns.loadBalanceStrategy"),path:"loadBalanceStrategy"},{default:l(()=>[a(e(X),{value:n.loadBalanceStrategy,"onUpdate:value":s[8]||(s[8]=i=>n.loadBalanceStrategy=i),options:R.value,placeholder:e(t)("selectLoadBalance")},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"]),P.value?(O(),Y("fieldset",_s,[a(e(Z),{title:e(t)("nacosConfig.title"),size:"small",style:{"margin-bottom":"24px"}},{default:l(()=>[m("div",Cs,[a(e(ie),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>[I(h(e(t)("nacosConfig.serverConfig")),1)]),_:1}),(O(!0),Y(Ve,null,rt(n.nacosConfig.servers,(i,ce)=>(O(),Y("div",{key:ce,style:{"margin-bottom":"16px",padding:"16px",border:"1px solid var(--border-color)","border-radius":"6px","background-color":"var(--color-embedded)"}},[m("div",Ss,[a(e(ie),{strong:""},{default:l(()=>[I(h(e(t)("nacosConfig.serverTitle",{number:ce+1})),1)]),_:2},1024),n.nacosConfig.servers.length>1?(O(),B(e(L),{key:0,size:"small",type:"error",quaternary:"",onClick:te=>ne(ce)},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(Qe))]),_:1})]),_:2},1032,["onClick"])):Q("",!0)]),a(e(W),{cols:3,"x-gap":16,"y-gap":12},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.host"),path:`nacosConfig.servers[${ce}].host`},{default:l(()=>[a(e(H),{value:i.host,"onUpdate:value":te=>i.host=te,placeholder:e(t)("nacosConfig.hostPlaceholder")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","path"])]),_:2},1024),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.port"),path:`nacosConfig.servers[${ce}].port`},{default:l(()=>[a(e(ue),{value:i.port,"onUpdate:value":te=>i.port=te,placeholder:e(t)("nacosConfig.portPlaceholder"),min:1,max:65535,style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","path"])]),_:2},1024),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.scheme"),path:`nacosConfig.servers[${ce}].scheme`},{default:l(()=>[a(e(X),{value:i.scheme,"onUpdate:value":te=>i.scheme=te,options:[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]},null,8,["value","onUpdate:value"])]),_:2},1032,["label","path"])]),_:2},1024),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.grpcPort"),path:`nacosConfig.servers[${ce}].grpcPort`},{default:l(()=>[a(e(ue),{value:i.grpcPort,"onUpdate:value":te=>i.grpcPort=te,placeholder:e(t)("nacosConfig.grpcPortPlaceholder"),min:1,max:65535,style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","path"])]),_:2},1024),a(e(D),null,{default:l(()=>[a(e(k),{label:"上下文路径",path:`nacosConfig.servers[${ce}].contextPath`},{default:l(()=>[a(e(H),{value:i.contextPath,"onUpdate:value":te=>i.contextPath=te,placeholder:"默认: /nacos"},null,8,["value","onUpdate:value"])]),_:2},1032,["path"])]),_:2},1024)]),_:2},1024)]))),128)),a(e(L),{size:"small",type:"primary",dashed:"",onClick:re,style:{width:"100%"}},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(Ge))]),_:1})]),default:l(()=>[I(" "+h(e(t)("nacosConfig.addServer")),1)]),_:1})]),m("div",Ts,[a(e(ie),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>[I(h(e(t)("nacosConfig.basicConfig")),1)]),_:1}),a(e(W),{cols:3,"x-gap":16,"y-gap":12},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.namespace"),path:"nacosConfig.namespace"},{default:l(()=>[a(e(H),{value:n.nacosConfig.namespace,"onUpdate:value":s[9]||(s[9]=i=>n.nacosConfig.namespace=i),placeholder:e(t)("nacosConfig.namespacePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.group"),path:"nacosConfig.group"},{default:l(()=>[a(e(H),{value:n.nacosConfig.group,"onUpdate:value":s[10]||(s[10]=i=>n.nacosConfig.group=i),placeholder:e(t)("nacosConfig.groupPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.timeout"),path:"nacosConfig.timeout"},{default:l(()=>[a(e(ue),{value:n.nacosConfig.timeout,"onUpdate:value":s[11]||(s[11]=i=>n.nacosConfig.timeout=i),placeholder:e(t)("nacosConfig.timeoutPlaceholder"),min:1,max:60,style:{width:"100%"}},{suffix:l(()=>[I(h(e(t)("seconds")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.beatInterval"),path:"nacosConfig.beatInterval"},{default:l(()=>[a(e(ue),{value:n.nacosConfig.beatInterval,"onUpdate:value":s[12]||(s[12]=i=>n.nacosConfig.beatInterval=i),placeholder:e(t)("nacosConfig.beatIntervalPlaceholder"),min:1,max:60,style:{width:"100%"}},{suffix:l(()=>[I(h(e(t)("seconds")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),m("div",Es,[a(e(ie),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>[I(h(e(t)("nacosConfig.authConfig")),1)]),_:1}),a(e(W),{cols:2,"x-gap":16,"y-gap":12},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.username")},{default:l(()=>[a(e(H),{value:n.nacosConfig.username,"onUpdate:value":s[13]||(s[13]=i=>n.nacosConfig.username=i),placeholder:e(t)("nacosConfig.usernamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.password")},{default:l(()=>[a(e(H),{value:n.nacosConfig.password,"onUpdate:value":s[14]||(s[14]=i=>n.nacosConfig.password=i),placeholder:e(t)("nacosConfig.passwordPlaceholder"),"show-password-on":"click","input-props":{autocomplete:"off"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.accessKey")},{default:l(()=>[a(e(H),{value:n.nacosConfig.accessKey,"onUpdate:value":s[15]||(s[15]=i=>n.nacosConfig.accessKey=i),placeholder:e(t)("nacosConfig.accessKeyPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.secretKey")},{default:l(()=>[a(e(H),{value:n.nacosConfig.secretKey,"onUpdate:value":s[16]||(s[16]=i=>n.nacosConfig.secretKey=i),placeholder:e(t)("nacosConfig.secretKeyPlaceholder"),"show-password-on":"click","input-props":{autocomplete:"off"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),a(e(Bt),null,{default:l(()=>[a(e(Vt),{title:e(t)("nacosConfig.advancedConfig"),name:"advanced"},{default:l(()=>[a(e(de),{vertical:"",size:16},{default:l(()=>[m("div",null,[a(e(ie),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>s[56]||(s[56]=[I("日志配置")])),_:1}),a(e(W),{cols:3,"x-gap":16,"y-gap":12},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.logLevel"),path:"nacosConfig.logLevel"},{default:l(()=>[a(e(X),{value:n.nacosConfig.logLevel,"onUpdate:value":s[17]||(s[17]=i=>n.nacosConfig.logLevel=i),options:[{label:"Debug",value:"debug"},{label:"Info",value:"info"},{label:"Warn",value:"warn"},{label:"Error",value:"error"}]},null,8,["value"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:"日志目录",path:"nacosConfig.logDir"},{default:l(()=>[a(e(H),{value:n.nacosConfig.logDir,"onUpdate:value":s[18]||(s[18]=i=>n.nacosConfig.logDir=i),placeholder:"默认: /tmp/nacos/log"},null,8,["value"])]),_:1})]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:"输出到控制台",path:"nacosConfig.appendToStdout"},{default:l(()=>[a(e(_e),{value:n.nacosConfig.appendToStdout,"onUpdate:value":s[19]||(s[19]=i=>n.nacosConfig.appendToStdout=i)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),m("div",null,[a(e(ie),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>s[57]||(s[57]=[I("缓存配置")])),_:1}),a(e(W),{cols:2,"x-gap":16,"y-gap":12},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:"缓存目录"},{default:l(()=>[a(e(H),{value:n.nacosConfig.cacheDir,"onUpdate:value":s[20]||(s[20]=i=>n.nacosConfig.cacheDir=i),placeholder:"默认: /tmp/nacos/cache"},null,8,["value"])]),_:1})]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.updateThreadNum")},{default:l(()=>[a(e(ue),{value:n.nacosConfig.updateThreadNum,"onUpdate:value":s[21]||(s[21]=i=>n.nacosConfig.updateThreadNum=i),placeholder:e(t)("nacosConfig.updateThreadNumPlaceholder"),min:1,max:100,style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.notLoadCacheAtStart")},{default:l(()=>[a(e(_e),{value:n.nacosConfig.notLoadCacheAtStart,"onUpdate:value":s[22]||(s[22]=i=>n.nacosConfig.notLoadCacheAtStart=i)},null,8,["value"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.disableUseSnapShot")},{default:l(()=>[a(e(_e),{value:n.nacosConfig.disableUseSnapShot,"onUpdate:value":s[23]||(s[23]=i=>n.nacosConfig.disableUseSnapShot=i)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})]),m("div",null,[a(e(ie),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>s[58]||(s[58]=[I("TLS配置")])),_:1}),a(e(W),{cols:2,"x-gap":16,"y-gap":12},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.enableTLS")},{default:l(()=>[a(e(_e),{value:n.nacosConfig.enableTLS,"onUpdate:value":s[24]||(s[24]=i=>n.nacosConfig.enableTLS=i)},null,8,["value"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("nacosConfig.trustAll")},{default:l(()=>[a(e(_e),{value:n.nacosConfig.trustAll,"onUpdate:value":s[25]||(s[25]=i=>n.nacosConfig.trustAll=i)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["title"])])):Q("",!0),v.value?(O(),B(e(Z),{key:1,title:e(t)("healthCheckConfig"),size:"small",style:{"margin-bottom":"24px"}},{default:l(()=>[a(e(W),{cols:3,"x-gap":24,"y-gap":16},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("healthCheckUrl"),path:"healthCheckUrl"},{default:l(()=>[a(e(H),{value:n.healthCheckUrl,"onUpdate:value":s[26]||(s[26]=i=>n.healthCheckUrl=i),placeholder:e(t)("healthCheckUrlPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("healthCheckInterval"),path:"healthCheckIntervalSeconds"},{default:l(()=>[a(e(ue),{value:n.healthCheckIntervalSeconds,"onUpdate:value":s[27]||(s[27]=i=>n.healthCheckIntervalSeconds=i),placeholder:e(t)("healthCheckIntervalPlaceholder"),min:5,max:300,style:{width:"100%"}},{suffix:l(()=>[I(h(e(t)("seconds")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("healthCheckTimeout"),path:"healthCheckTimeoutSeconds"},{default:l(()=>[a(e(ue),{value:n.healthCheckTimeoutSeconds,"onUpdate:value":s[28]||(s[28]=i=>n.healthCheckTimeoutSeconds=i),placeholder:e(t)("healthCheckTimeoutPlaceholder"),min:1,max:60,style:{width:"100%"}},{suffix:l(()=>[I(h(e(t)("seconds")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("healthCheckType"),path:"healthCheckType"},{default:l(()=>[a(e(X),{value:n.healthCheckType,"onUpdate:value":s[29]||(s[29]=i=>n.healthCheckType=i),options:A,placeholder:e(t)("selectHealthCheckType")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("healthCheckMode"),path:"healthCheckMode"},{default:l(()=>[a(e(X),{value:n.healthCheckMode,"onUpdate:value":s[30]||(s[30]=i=>n.healthCheckMode=i),options:U.value,placeholder:e(t)("selectHealthCheckMode")},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"])):Q("",!0),a(e(Z),{title:e(t)("instanceList"),size:"small",style:{"margin-bottom":"24px"}},{default:l(()=>[m("div",Ns,[m("div",ws,[a(e(ie),null,{default:l(()=>[I(h(e(t)("instanceConfig")),1)]),_:1}),n.instances.length>0?(O(),B(e(ie),{key:0,depth:"3",style:{"margin-left":"8px"}},{default:l(()=>[I(" ("+h(n.instances.length)+" "+h(e(t)("instances"))+") ",1)]),_:1})):Q("",!0)]),m("div",Is,[a(e(L),{size:"small",onClick:na,loading:C.value,disabled:!_.value||!n.serviceName},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(ze))]),_:1})]),default:l(()=>[I(" "+h(e(t)("actions.refresh")),1)]),_:1},8,["loading","disabled"]),_.value?(O(),B(e(L),{key:1,size:"small",type:"primary",onClick:pt},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(Ge))]),_:1})]),default:l(()=>[I(" "+h(e(t)("actions.addInstance")),1)]),_:1})):(O(),B(e(he),{key:0,placement:"top",trigger:"hover"},{trigger:l(()=>[a(e(L),{size:"small",type:"primary",onClick:pt,disabled:!_.value},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(Ge))]),_:1})]),default:l(()=>[I(" "+h(e(t)("actions.addInstance")),1)]),_:1},8,["disabled"])]),default:l(()=>[I(" "+h(e(t)("saveServiceBeforeAddingInstance")),1)]),_:1}))])]),m("div",xs,[a(e(Fe),{show:C.value},{default:l(()=>[n.instances&&n.instances.length>0?(O(),B(e(ct),{key:0,columns:la.value,data:n.instances,pagination:!1,size:"small","max-height":300,bordered:!0},null,8,["columns","data"])):(O(),B(e(Ke),{key:1,description:e(t)("table.noInstances"),size:"small",style:{padding:"20px 0"}},null,8,["description"]))]),_:1},8,["show"])]),a(e(lt),{show:ve.value,"onUpdate:show":s[39]||(s[39]=i=>ve.value=i),width:500,placement:"right"},{default:l(()=>[a(e(Ft),{title:$e.value?e(t)("editInstance"):e(t)("addInstance")},{default:l(()=>[a(e(Xe),{ref_key:"instanceFormRef",ref:dt,model:V,rules:aa,"label-placement":"left","label-width":120},{default:l(()=>[a(e(k),{label:e(t)("columns.hostAddress"),path:"hostAddress"},{default:l(()=>[a(e(H),{value:V.hostAddress,"onUpdate:value":s[31]||(s[31]=i=>V.hostAddress=i),placeholder:e(t)("search.placeholder.hostAddress")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(e(k),{label:e(t)("columns.portNumber"),path:"portNumber"},{default:l(()=>[a(e(ue),{value:V.portNumber,"onUpdate:value":s[32]||(s[32]=i=>V.portNumber=i),min:1,max:65535,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),a(e(k),{label:e(t)("columns.weightValue"),path:"weightValue"},{default:l(()=>[a(e(ue),{value:V.weightValue,"onUpdate:value":s[33]||(s[33]=i=>V.weightValue=i),min:1,max:100,"default-value":1,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),a(e(k),{label:e(t)("columns.instanceStatus"),path:"instanceStatus"},{default:l(()=>[a(e(X),{value:V.instanceStatus,"onUpdate:value":s[34]||(s[34]=i=>V.instanceStatus=i),options:Qt.value},null,8,["value","options"])]),_:1},8,["label"]),a(e(k),{label:e(t)("columns.healthStatus"),path:"healthStatus"},{default:l(()=>[a(e(X),{value:V.healthStatus,"onUpdate:value":s[35]||(s[35]=i=>V.healthStatus=i),options:ea.value},null,8,["value","options"])]),_:1},8,["label"]),a(e(k),{label:e(t)("columns.clientType"),path:"clientType"},{default:l(()=>[a(e(X),{value:V.clientType,"onUpdate:value":s[36]||(s[36]=i=>V.clientType=i),options:ta.value},null,8,["value","options"])]),_:1},8,["label"]),a(e(k),{label:e(t)("columns.tempInstanceFlag"),path:"tempInstanceFlag"},{default:l(()=>[a(e(_e),{value:V.tempInstanceFlag,"onUpdate:value":s[37]||(s[37]=i=>V.tempInstanceFlag=i),"checked-value":"Y","unchecked-value":"N"},{checked:l(()=>[I(h(e(t)("status.temporary")),1)]),unchecked:l(()=>[I(h(e(t)("status.permanent")),1)]),_:1},8,["value"])]),_:1},8,["label"]),m("div",Ps,[a(e(L),{onClick:s[38]||(s[38]=i=>ve.value=!1)},{default:l(()=>[I(h(e(t)("cancel")),1)]),_:1}),a(e(L),{type:"primary",onClick:ia},{default:l(()=>[I(h(e(t)("submit")),1)]),_:1})])]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])]),_:1},8,["title"]),S.value?(O(),B(e(Z),{key:2,title:e(t)("extensionConfig"),size:"small",style:{"margin-bottom":"32px"}},{"header-extra":l(()=>[a(e(L),{text:"",onClick:s[40]||(s[40]=i=>x.value=!x.value),style:{padding:"0"}},{icon:l(()=>[a(e(z),null,{default:l(()=>[(O(),B(Ht(x.value?"ChevronUpOutline":"ChevronDownOutline")))]),_:1})]),default:l(()=>[I(" "+h(x.value?e(t)("collapse"):e(t)("expand")),1)]),_:1})]),default:l(()=>[a(e(ul),{show:x.value},{default:l(()=>[a(e(de),{vertical:"",size:24},{default:l(()=>[a(e(Z),{title:e(t)("metadataAndTags"),size:"small",embedded:""},{default:l(()=>[a(e(W),{cols:1,"y-gap":16},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("metadataJson"),path:"metadataJson"},{default:l(()=>[a(e(H),{value:n.metadataJson,"onUpdate:value":s[41]||(s[41]=i=>n.metadataJson=i),type:"textarea",placeholder:e(t)("metadataJsonPlaceholder"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("tagsJson"),path:"tagsJson"},{default:l(()=>[a(e(H),{value:n.tagsJson,"onUpdate:value":s[42]||(s[42]=i=>n.tagsJson=i),type:"textarea",placeholder:e(t)("tagsJsonPlaceholder"),rows:3},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"]),a(e(Z),{title:e(t)("notesAndExtProperty"),size:"small",embedded:""},{default:l(()=>[a(e(W),{cols:1,"y-gap":16},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("noteText"),path:"noteText"},{default:l(()=>[a(e(H),{value:n.noteText,"onUpdate:value":s[43]||(s[43]=i=>n.noteText=i),type:"textarea",placeholder:e(t)("noteTextPlaceholder"),rows:3,maxlength:"500","show-count":""},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("extProperty"),path:"extProperty"},{default:l(()=>[a(e(H),{value:n.extProperty,"onUpdate:value":s[44]||(s[44]=i=>n.extProperty=i),type:"textarea",placeholder:e(t)("extPropertyPlaceholder"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"]),a(e(Z),{title:e(t)("reservedFields"),size:"small",embedded:""},{"header-extra":l(()=>[a(e(q),{size:"small",type:"info"},{default:l(()=>[I(h(e(t)("forFutureExpansion")),1)]),_:1})]),default:l(()=>[a(e(W),{cols:2,"x-gap":16,"y-gap":12},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("reservedField",{number:1}),path:"reserved1"},{default:l(()=>[a(e(H),{value:n.reserved1,"onUpdate:value":s[45]||(s[45]=i=>n.reserved1=i),placeholder:e(t)("reservedFieldPlaceholder",{number:1})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("reservedField",{number:2}),path:"reserved2"},{default:l(()=>[a(e(H),{value:n.reserved2,"onUpdate:value":s[46]||(s[46]=i=>n.reserved2=i),placeholder:e(t)("reservedFieldPlaceholder",{number:2})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("reservedField",{number:3}),path:"reserved3"},{default:l(()=>[a(e(H),{value:n.reserved3,"onUpdate:value":s[47]||(s[47]=i=>n.reserved3=i),placeholder:e(t)("reservedFieldPlaceholder",{number:3})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("reservedField",{number:4}),path:"reserved4"},{default:l(()=>[a(e(H),{value:n.reserved4,"onUpdate:value":s[48]||(s[48]=i=>n.reserved4=i),placeholder:e(t)("reservedFieldPlaceholder",{number:4})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("reservedField",{number:5}),path:"reserved5"},{default:l(()=>[a(e(H),{value:n.reserved5,"onUpdate:value":s[49]||(s[49]=i=>n.reserved5=i),placeholder:e(t)("reservedFieldPlaceholder",{number:5})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),a(e(zt),{style:{margin:"12px 0"}}),a(e(W),{cols:2,"x-gap":16,"y-gap":12},{default:l(()=>[a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("reservedField",{number:6}),path:"reserved6"},{default:l(()=>[a(e(H),{value:n.reserved6,"onUpdate:value":s[50]||(s[50]=i=>n.reserved6=i),placeholder:e(t)("reservedFieldPlaceholder",{number:6})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("reservedField",{number:7}),path:"reserved7"},{default:l(()=>[a(e(H),{value:n.reserved7,"onUpdate:value":s[51]||(s[51]=i=>n.reserved7=i),placeholder:e(t)("reservedFieldPlaceholder",{number:7})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("reservedField",{number:8}),path:"reserved8"},{default:l(()=>[a(e(H),{value:n.reserved8,"onUpdate:value":s[52]||(s[52]=i=>n.reserved8=i),placeholder:e(t)("reservedFieldPlaceholder",{number:8})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("reservedField",{number:9}),path:"reserved9"},{default:l(()=>[a(e(H),{value:n.reserved9,"onUpdate:value":s[53]||(s[53]=i=>n.reserved9=i),placeholder:e(t)("reservedFieldPlaceholder",{number:9})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),a(e(D),null,{default:l(()=>[a(e(k),{label:e(t)("reservedField",{number:10}),path:"reserved10"},{default:l(()=>[a(e(H),{value:n.reserved10,"onUpdate:value":s[54]||(s[54]=i=>n.reserved10=i),placeholder:e(t)("reservedFieldPlaceholder",{number:10})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["show"])]),_:1},8,["title"])):Q("",!0)]),_:1},8,["model","rules"]),m("div",ks,[a(e(de),{size:"large",justify:"center"},{default:l(()=>[a(e(L),{size:"large",onClick:J},{default:l(()=>[I(h(e(t)("cancel")),1)]),_:1}),a(e(L),{size:"large",onClick:Te},{default:l(()=>[I(h(e(t)("reset")),1)]),_:1}),a(e(L),{type:"primary",size:"large",onClick:Xt,loading:b.value},{default:l(()=>[I(h(_.value?e(t)("actions.update"):e(t)("actions.create")),1)]),_:1},8,["loading"])]),_:1})])]),_:1}),a(ms,{show:w.value,"onUpdate:show":s[55]||(s[55]=i=>w.value=i),"selected-group-id":n.serviceGroupId,onConfirm:Ye},null,8,["show","selected-group-id"])]))}}),Ds=be(Rs,[["__scopeId","data-v-771bc475"]]),Us={class:"service-event-list"},As=j({__name:"ServiceEventList",props:{serviceId:{default:void 0},instanceId:{default:void 0}},emits:["viewEvent"],setup(r,{expose:c,emit:o}){const u=r,{events:t,loading:d,naiveConfig:g,loadEvents:_,createTableColumns:C,setPaginationCallback:b}=Zt(),f=$(()=>C(y)),w=o,y=v=>{w("viewEvent",v)},x=v=>{_(u.serviceId,u.instanceId,v)};return b(()=>{x()}),qe(()=>{x()}),c({loadEvents:x}),(v,S)=>(O(),Y("div",Us,[a(e(ct),{columns:f.value,data:e(t),loading:e(d),pagination:e(g),bordered:!1,"scroll-x":1370,"single-line":!1,size:"medium",remote:"",striped:""},null,8,["columns","data","loading","pagination"])]))}}),Os=be(As,[["__scopeId","data-v-cb3be427"]]),Fs={class:"event-detail-wrapper"},zs={class:"event-header"},Hs={class:"info-row"},$s={class:"label"},Gs={class:"value"},Ls={class:"info-row"},Ms={class:"label"},Bs={class:"value"},Vs={class:"info-row"},Ks={class:"label"},qs={class:"value"},Js={class:"info-row"},Ys={class:"label"},js={class:"value"},Ws={class:"info-row"},Zs={class:"label"},Xs={class:"value"},Qs={class:"info-row"},er={class:"value"},tr={class:"audit-info"},ar={class:"info-row"},lr={class:"value"},sr={class:"info-row"},rr={class:"value"},nr={key:1},or={class:"info-row"},ir={class:"value"},cr={class:"info-row"},ur={class:"value"},dr={class:"info-row"},pr={class:"value"},vr=j({__name:"ServiceEventDetail",props:{show:{type:Boolean,default:!1},event:{default:null},loading:{type:Boolean,default:!1}},emits:["update:show","close"],setup(r,{emit:c}){const o=r,u=c,{t}=pe("hub0041"),d=ye(),g=F(null),_=F(!1),C=$({get:()=>o.show,set:v=>{u("update:show",v),v||(u("close"),g.value=null)}}),b=async v=>{try{_.value=!0;const S=await Wt(v);S.oK?g.value=Se(S):(d.error("获取事件详情失败"),g.value=null)}catch(S){console.error("Failed to fetch event detail:",S),d.error("获取事件详情失败"),g.value=null}finally{_.value=!1}};Ue([()=>o.event,()=>o.show],([v,S])=>{v&&S&&v.serviceEventId&&b(v.serviceEventId)},{immediate:!0});const f=$(()=>g.value||o.event),w=v=>v?v.includes("GROUP_")?Je:v.includes("SERVICE_")?ot:v.includes("INSTANCE_")?nt:Be:Be,y=v=>v?v==="GROUP_CREATE"?"success":v==="GROUP_UPDATE"?"info":v==="GROUP_DELETE"?"error":v==="SERVICE_CREATE"?"success":v==="SERVICE_UPDATE"?"info":v==="SERVICE_DELETE"?"error":v==="INSTANCE_REGISTER"?"success":v==="INSTANCE_DEREGISTER"?"error":v==="INSTANCE_HEARTBEAT"?"default":v==="INSTANCE_HEALTH_CHANGE"?"warning":v==="INSTANCE_STATUS_CHANGE"?"info":"default":"default",x=v=>{try{const S=JSON.parse(v);return JSON.stringify(S,null,2)}catch{return v}};return(v,S)=>(O(),B(e(lt),{show:C.value,"onUpdate:show":S[0]||(S[0]=P=>C.value=P),width:520,title:e(t)("dialogs.serviceEvent.title"),placement:"right",closable:"",resizable:""},{default:l(()=>[a(e(Fe),{show:v.loading||_.value},{default:l(()=>{var P,n,E;return[m("div",Fs,[m("div",zs,[a(e(q),{size:"medium",type:y((P=f.value)==null?void 0:P.eventType),round:""},{icon:l(()=>[a(e(z),null,{default:l(()=>{var N;return[(O(),B(Ht(w((N=f.value)==null?void 0:N.eventType))))]}),_:1})]),default:l(()=>{var N;return[I(" "+h((N=f.value)==null?void 0:N.eventType),1)]}),_:1},8,["type"]),(n=f.value)!=null&&n.eventTime?(O(),B(e(ge),{key:0,time:new Date(f.value.eventTime),format:"yyyy-MM-dd HH:mm:ss",class:"event-time"},null,8,["time"])):Q("",!0)]),a(e(Z),{class:"detail-card",title:"事件基本信息",size:"small"},{default:l(()=>{var N,A,U,R,G,M;return[m("div",Hs,[m("span",$s,h(e(t)("columns.eventMessage")),1),m("span",Gs,h(((N=f.value)==null?void 0:N.eventMessage)||"-"),1)]),m("div",Ls,[m("span",Ms,h(e(t)("columns.eventSource")),1),m("span",Bs,h(((A=f.value)==null?void 0:A.eventSource)||"-"),1)]),m("div",Vs,[m("span",Ks,h(e(t)("columns.serviceName")),1),m("span",qs,h(((U=f.value)==null?void 0:U.serviceName)||"-"),1)]),m("div",Js,[m("span",Ys,h(e(t)("columns.groupName")),1),m("span",js,h(((R=f.value)==null?void 0:R.groupName)||"-"),1)]),m("div",Ws,[m("span",Zs,h(e(t)("columns.hostAddress")),1),m("span",Xs,h((G=f.value)!=null&&G.hostAddress?`${f.value.hostAddress}:${f.value.portNumber||"-"}`:"-"),1)]),m("div",Qs,[S[1]||(S[1]=m("span",{class:"label"},"服务运行节点IP",-1)),m("span",er,h(((M=f.value)==null?void 0:M.nodeIpAddress)||"-"),1)])]}),_:1}),(E=f.value)!=null&&E.eventDataJson?(O(),B(e(Z),{key:0,class:"detail-card",title:"事件数据",size:"small"},{default:l(()=>[a(e(Xa),{code:x(f.value.eventDataJson),language:"json","show-line-numbers":""},null,8,["code"])]),_:1})):Q("",!0),a(e(Bt),null,{default:l(()=>[a(e(Vt),{name:"audit",title:"审计信息"},{default:l(()=>{var N,A,U,R,G;return[m("div",tr,[m("div",ar,[S[2]||(S[2]=m("span",{class:"label"},"事件ID",-1)),m("span",lr,h(((N=f.value)==null?void 0:N.serviceEventId)||"-"),1)]),m("div",sr,[S[3]||(S[3]=m("span",{class:"label"},"创建时间",-1)),m("span",rr,[(A=f.value)!=null&&A.addTime?(O(),B(e(ge),{key:0,time:new Date(f.value.addTime),format:"yyyy-MM-dd HH:mm:ss"},null,8,["time"])):(O(),Y("span",nr,"-"))])]),m("div",or,[S[4]||(S[4]=m("span",{class:"label"},"创建人",-1)),m("span",ir,h(((U=f.value)==null?void 0:U.addWho)||"-"),1)]),m("div",cr,[S[5]||(S[5]=m("span",{class:"label"},"租户ID",-1)),m("span",ur,h(((R=f.value)==null?void 0:R.tenantId)||"-"),1)]),m("div",dr,[S[6]||(S[6]=m("span",{class:"label"},"服务实例ID",-1)),m("span",pr,h(((G=f.value)==null?void 0:G.serviceInstanceId)||"-"),1)])])]}),_:1})]),_:1})])]}),_:1},8,["show"])]),_:1},8,["show","title"]))}}),hr=be(vr,[["__scopeId","data-v-94935c56"]]);var oe=(r=>(r.SERVICE_GROUP_CREATED="SERVICE_GROUP_CREATED",r.SERVICE_GROUP_UPDATED="SERVICE_GROUP_UPDATED",r.SERVICE_GROUP_DELETED="SERVICE_GROUP_DELETED",r.SERVICE_REGISTERED="SERVICE_REGISTERED",r.SERVICE_UPDATED="SERVICE_UPDATED",r.SERVICE_DEREGISTERED="SERVICE_DEREGISTERED",r.INSTANCE_REGISTERED="INSTANCE_REGISTERED",r.INSTANCE_DEREGISTERED="INSTANCE_DEREGISTERED",r.INSTANCE_HEARTBEAT_UPDATED="INSTANCE_HEARTBEAT_UPDATED",r.INSTANCE_HEALTH_CHANGE="INSTANCE_HEALTH_CHANGE",r.INSTANCE_STATUS_CHANGE="INSTANCE_STATUS_CHANGE",r))(oe||{});const fr={class:"service-event-page"},mr={class:"page-header"},gr={class:"search-section"},yr=j({__name:"ServiceEventPage",setup(r,{expose:c}){const o=ye(),{t:u}=pe("hub0041"),{getServiceEventById:t}=Zt(),d=F(null),g=F(!1),_=F(null),C=F(!1),b=[{type:"group",label:"分组相关事件",key:"group",children:[{label:"分组创建",value:oe.SERVICE_GROUP_CREATED},{label:"分组更新",value:oe.SERVICE_GROUP_UPDATED},{label:"分组删除",value:oe.SERVICE_GROUP_DELETED}]},{type:"group",label:"服务相关事件",key:"service",children:[{label:"服务注册",value:oe.SERVICE_REGISTERED},{label:"服务更新",value:oe.SERVICE_UPDATED},{label:"服务注销",value:oe.SERVICE_DEREGISTERED}]},{type:"group",label:"实例相关事件",key:"instance",children:[{label:"实例注册",value:oe.INSTANCE_REGISTERED},{label:"实例注销",value:oe.INSTANCE_DEREGISTERED},{label:"实例心跳更新",value:oe.INSTANCE_HEARTBEAT_UPDATED},{label:"实例健康变更",value:oe.INSTANCE_HEALTH_CHANGE},{label:"实例状态变更",value:oe.INSTANCE_STATUS_CHANGE}]}],f=Me({serviceName:"",eventType:null,eventSource:"",timeRange:null}),w=()=>{d.value&&typeof d.value.loadEvents=="function"&&(d.value.loadEvents(),o.success(u("messages.refreshSuccess")))},y=()=>{const P={};if(f.serviceName&&(P.serviceName=f.serviceName),f.eventType&&(P.eventType=f.eventType),f.eventSource&&(P.eventSource=f.eventSource),f.timeRange){const[n,E]=f.timeRange;P.startTime=new Date(n).toISOString(),P.endTime=new Date(E).toISOString()}d.value&&typeof d.value.loadEvents=="function"&&d.value.loadEvents(P)},x=()=>{f.serviceName="",f.eventType=null,f.eventSource="",f.timeRange=null,d.value&&typeof d.value.loadEvents=="function"&&d.value.loadEvents()},v=P=>{_.value=P,g.value=!0};return c({refreshEvents:w,viewEventDetail:async P=>{C.value=!0,g.value=!0;try{_.value=await t(P)}catch(n){o.error(u("messages.loadError")),console.error("加载事件详情失败:",n)}finally{C.value=!1}}}),(P,n)=>(O(),Y("div",fr,[a(e(Z),null,{header:l(()=>[m("div",mr,[m("h3",null,h(e(u)("menu.eventList")),1),a(e(de),null,{default:l(()=>[a(e(L),{type:"primary",onClick:y},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(st))]),_:1})]),default:l(()=>[I(" "+h(e(u)("actions.search")),1)]),_:1}),a(e(L),{onClick:x},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(Qa))]),_:1})]),default:l(()=>[I(" "+h(e(u)("actions.reset")),1)]),_:1}),a(e(L),{onClick:w},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(ze))]),_:1})]),default:l(()=>[I(" "+h(e(u)("actions.refresh")),1)]),_:1})]),_:1})])]),default:l(()=>[m("div",gr,[a(e(Xe),{model:f,"label-placement":"left","label-width":"auto",inline:""},{default:l(()=>[a(e(k),{label:e(u)("columns.serviceName")},{default:l(()=>[a(e(H),{value:f.serviceName,"onUpdate:value":n[0]||(n[0]=E=>f.serviceName=E),placeholder:e(u)("search.placeholder.serviceName"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),a(e(k),{label:e(u)("columns.eventType")},{default:l(()=>[a(e(X),{value:f.eventType,"onUpdate:value":n[1]||(n[1]=E=>f.eventType=E),options:b,clearable:"",placeholder:e(u)("selectEventType"),style:{"min-width":"160px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),a(e(k),{label:e(u)("columns.eventSource")},{default:l(()=>[a(e(H),{value:f.eventSource,"onUpdate:value":n[2]||(n[2]=E=>f.eventSource=E),placeholder:e(u)("search.placeholder.eventSource"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),a(e(k),{label:e(u)("columns.eventTime")},{default:l(()=>[a(e(Ja),{value:f.timeRange,"onUpdate:value":n[3]||(n[3]=E=>f.timeRange=E),type:"daterange",clearable:"",placeholder:e(u)("search.placeholder.timeRange"),style:{width:"240px"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),a(Os,{ref_key:"eventListRef",ref:d,onViewEvent:v},null,512),a(hr,{show:g.value,"onUpdate:show":n[4]||(n[4]=E=>g.value=E),event:_.value,loading:C.value},null,8,["show","event","loading"])]),_:1})]))}}),br=be(yr,[["__scopeId","data-v-46a028cd"]]),_r={class:"service-registry-management"},Cr={class:"list-view"},Sr={class:"search-section"},Tr={class:"services-section"},Er={class:"form-view"},Nr={class:"events-view"},wr={class:"events-header"},Ir={class:"events-title"},xr={class:"bottom-pagination"},Pr=j({__name:"ServiceRegistryManagement",setup(r){const{t:c}=pe("hub0041");ye();const o=Fa(),{services:u,loading:t,searchParams:d,naiveConfig:g,fetchServices:_,refreshService:C,handleSearch:b,handleReset:f,handleRefresh:w,handleDeleteService:y}=wl(),x=[{label:"HTTP",value:"HTTP"},{label:"HTTPS",value:"HTTPS"},{label:"TCP",value:"TCP"},{label:"UDP",value:"UDP"},{label:"GRPC",value:"GRPC"}],v=[{label:c("status.Y"),value:"Y"},{label:c("status.N"),value:"N"}],S=F("list"),P=F(!1),n=F(""),E=F(null),N=F("");qe(()=>{_()});const A=f,U=w,R=re=>{n.value=re.serviceName,P.value=!0},G=async re=>{await C(re)},M=()=>{E.value=null,S.value="form"},se=re=>{E.value=re,S.value="form"},fe=re=>{N.value=re.serviceName,S.value="events"},Te=()=>{S.value="list",E.value=null,N.value=""},He=()=>{_()},Ye=re=>{o.warning({title:c("actions.delete"),content:c("messages.confirmDeleteService"),positiveText:c("actions.confirm"),negativeText:c("actions.cancel"),onPositiveClick:async()=>{await y(re.serviceName)}})};return(re,ne)=>(O(),Y("div",_r,[xe(m("div",Cr,[m("div",Sr,[a(e(de),{size:16,justify:"space-between"},{default:l(()=>[a(e(de),{size:16},{default:l(()=>[a(e(H),{value:e(d).serviceName,"onUpdate:value":ne[0]||(ne[0]=J=>e(d).serviceName=J),placeholder:e(c)("searchServiceName"),clearable:"",onClear:e(b),onKeyup:yt(e(b),["enter"]),style:{width:"240px"}},{prefix:l(()=>[a(e(z),null,{default:l(()=>[a(e(st))]),_:1})]),_:1},8,["value","placeholder","onClear","onKeyup"]),a(e(H),{value:e(d).groupName,"onUpdate:value":ne[1]||(ne[1]=J=>e(d).groupName=J),placeholder:e(c)("search.placeholder.groupName"),clearable:"",onClear:e(b),onKeyup:yt(e(b),["enter"]),style:{width:"180px"}},{prefix:l(()=>[a(e(z),null,{default:l(()=>[a(e(Je))]),_:1})]),_:1},8,["value","placeholder","onClear","onKeyup"]),a(e(X),{value:e(d).protocolType,"onUpdate:value":[ne[2]||(ne[2]=J=>e(d).protocolType=J),e(b)],options:x,placeholder:e(c)("selectProtocol"),clearable:"",style:{width:"140px"}},null,8,["value","placeholder","onUpdate:value"]),a(e(X),{value:e(d).activeFlag,"onUpdate:value":[ne[3]||(ne[3]=J=>e(d).activeFlag=J),e(b)],options:v,placeholder:e(c)("selectStatus"),clearable:"",style:{width:"120px"}},null,8,["value","placeholder","onUpdate:value"]),a(e(L),{onClick:e(b),type:"primary"},{default:l(()=>[I(h(e(c)("actions.search")),1)]),_:1},8,["onClick"]),a(e(L),{onClick:e(A)},{default:l(()=>[I(h(e(c)("actions.reset")),1)]),_:1},8,["onClick"]),a(e(L),{type:"primary",onClick:e(U),loading:e(t)},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(ze))]),_:1})]),default:l(()=>[I(" "+h(e(c)("actions.refresh")),1)]),_:1},8,["onClick","loading"])]),_:1}),a(e(L),{type:"primary",onClick:M},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(Ge))]),_:1})]),default:l(()=>[I(" "+h(e(c)("actions.add")),1)]),_:1})]),_:1})]),m("div",Tr,[a(e(Fe),{show:e(t)},{default:l(()=>[e(u).length>0?(O(),B(e(W),{key:0,cols:4,"x-gap":16,"y-gap":16},{default:l(()=>[(O(!0),Y(Ve,null,rt(e(u),J=>(O(),B(e(D),{key:J.serviceName},{default:l(()=>[a(Yl,{service:J,onViewDetail:R,onEdit:se,onRefresh:G,onDelete:Ye,onViewEvents:fe},null,8,["service"])]),_:2},1024))),128))]),_:1})):e(t)?Q("",!0):(O(),B(e(Ke),{key:1,description:e(c)("noServices"),style:{padding:"60px 0"}},null,8,["description"]))]),_:1},8,["show"])]),a(ns,{show:P.value,"onUpdate:show":ne[4]||(ne[4]=J=>P.value=J),"service-name":n.value},null,8,["show","service-name"])],512),[[Pe,S.value==="list"]]),xe(m("div",Er,[S.value==="form"?(O(),B(Ds,{key:0,"edit-data":E.value,onBack:Te,onSuccess:He},null,8,["edit-data"])):Q("",!0)],512),[[Pe,S.value==="form"]]),xe(m("div",Nr,[m("div",wr,[a(e(de),{justify:"space-between",align:"center"},{default:l(()=>[m("div",Ir,[a(e(L),{text:"",onClick:Te},{icon:l(()=>[a(e(z),null,{default:l(()=>[a(e(Lt))]),_:1})]),default:l(()=>[I(" "+h(e(c)("actions.back")),1)]),_:1}),a(e(zt),{vertical:""}),m("h3",null,h(e(c)("serviceEventLog"))+" - "+h(N.value),1)])]),_:1})]),S.value==="events"?(O(),B(br,{key:0,"service-id":N.value},null,8,["service-id"])):Q("",!0)],512),[[Pe,S.value==="events"]]),xe(m("div",xr,[a(e(Wa),za(Ha(e(g))),null,16)],512),[[Pe,S.value==="list"]])]))}}),nn=be(Pr,[["__scopeId","data-v-91961e99"]]);export{nn as default};
