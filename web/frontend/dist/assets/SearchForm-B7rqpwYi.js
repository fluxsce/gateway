import{P as ze}from"./index-DR_R-bYe.js";import{bS as Je,ak as se,am as re,al as We,an as Ye,d as J,a2 as ae,at as Xe,au as Ze,aw as Ne,c as b,r as X,aa as Qe,aM as Ke,aV as et,aB as tt,bv as we,ab as Se,b1 as $e,bu as Be,cj as at,f as s,b as S,o as u,e as I,_ as Z,h,n as L,g as j,bW as ne,ck as w,w as m,cl as ot,cm as ie,y as ue,cn as lt,j as ee,Z as Q,N as nt,J as K,co as de,K as Y,t as V,Y as st,cp as rt,i as B,aI as oe,bO as te,cq as it,cr as ut,a4 as R,cs as Ae,ct as Ve,cu as dt,cv as Pe,bL as Te,ch as ct,v as pt,E as gt,F as Ue,G as xe}from"./index-jHKRbIks.js";/* empty css                                                                    */import{R as qe}from"./RefreshOutline-BQY32ySA.js";import{E as je,C as ft,a as ht,O as bt}from"./OptionsOutline-CAwLTA62.js";import{c as vt,N as W}from"./DatePicker-yujoZiwS.js";import{_ as mt,a as Re}from"./Grid-qwIbHEjp.js";import{_ as Ie}from"./Select-CGsj-ZtY.js";import{N as Fe}from"./InputNumber-BwbhDD7_.js";import{N as De}from"./Switch-C69H-VEY.js";function yt(d){const{primaryColorHover:c,borderColor:o}=d;return{resizableTriggerColorHover:c,resizableTriggerColor:o}}const Ct={common:Je,self:yt},kt=se("split",`
 display: flex;
 width: 100%;
 height: 100%;
`,[re("horizontal",`
 flex-direction: row;
 `),re("vertical",`
 flex-direction: column;
 `),se("split-pane-1",`
 overflow: hidden;
 `),se("split-pane-2",`
 overflow: hidden;
 flex: 1;
 `),We("resize-trigger",`
 background-color: var(--n-resize-trigger-color);
 transition: background-color .3s var(--n-bezier);
 `,[re("hover",`
 background-color: var(--n-resize-trigger-color-hover);
 `),Ye("&:hover",`
 background-color: var(--n-resize-trigger-color-hover);
 `)])]),_t=Object.assign(Object.assign({},Ne.props),{direction:{type:String,default:"horizontal"},resizeTriggerSize:{type:Number,default:3},disabled:Boolean,defaultSize:{type:[String,Number],default:.5},"onUpdate:size":[Function,Array],onUpdateSize:[Function,Array],size:[String,Number],min:{type:[String,Number],default:0},max:{type:[String,Number],default:1},pane1Class:String,pane1Style:[Object,String],pane2Class:String,pane2Style:[Object,String],onDragStart:Function,onDragMove:Function,onDragEnd:Function,watchProps:Array}),zt=J({name:"Split",props:_t,slots:Object,setup(d){var c;const{mergedClsPrefixRef:o,inlineThemeDisabled:a}=Ze(d),f=Ne("Split","-split",kt,Ct,d,o),C=b(()=>{const{common:{cubicBezierEaseInOut:_},self:{resizableTriggerColor:$,resizableTriggerColorHover:D}}=f.value;return{"--n-bezier":_,"--n-resize-trigger-color":$,"--n-resize-trigger-color-hover":D}}),l=X(null),z=X(!1),U=Qe(d,"size"),P=X(d.defaultSize);!((c=d.watchProps)===null||c===void 0)&&c.includes("defaultSize")&&Ke(()=>P.value=d.defaultSize);const T=_=>{const $=d["onUpdate:size"];d.onUpdateSize&&$e(d.onUpdateSize,_),$&&$e($,_),P.value=_},p=et(U,P),r=b(()=>{const _=p.value;if(typeof _=="string")return{flex:`0 0 ${_}`};if(typeof _=="number"){const $=_*100;return{flex:`0 0 calc(${$}% - ${d.resizeTriggerSize*$/100}px)`}}}),g=b(()=>d.direction==="horizontal"?{width:`${d.resizeTriggerSize}px`,height:"100%"}:{width:"100%",height:`${d.resizeTriggerSize}px`}),k=b(()=>{const _=d.direction==="horizontal";return{width:_?`${d.resizeTriggerSize}px`:"",height:_?"":`${d.resizeTriggerSize}px`,cursor:d.direction==="horizontal"?"col-resize":"row-resize"}});let v=0;const F=_=>{_.preventDefault(),z.value=!0,d.onDragStart&&d.onDragStart(_);const $="mousemove",D="mouseup",O=t=>{M(t),d.onDragMove&&d.onDragMove(t)},N=()=>{Be($,document,O),Be(D,document,N),z.value=!1,d.onDragEnd&&d.onDragEnd(_),document.body.style.cursor=""};document.body.style.cursor=k.value.cursor,we($,document,O),we(D,document,N);const H=l.value;if(H){const t=H.getBoundingClientRect();d.direction==="horizontal"?v=_.clientX-t.left:v=t.top-_.clientY}M(_)};function M(_){var $,D;const O=(D=($=l.value)===null||$===void 0?void 0:$.parentElement)===null||D===void 0?void 0:D.getBoundingClientRect();if(!O)return;const{direction:N}=d,H=O.width-d.resizeTriggerSize,t=O.height-d.resizeTriggerSize,i=N==="horizontal"?H:t,e=N==="horizontal"?_.clientX-O.left-v:_.clientY-O.top+v,{min:n,max:E}=d,x=typeof n=="string"?Se(n):n*i,q=typeof E=="string"?Se(E):E*i;let A=e;A=Math.max(A,x),A=Math.min(A,q,i),typeof p.value=="string"?T(`${A}px`):T(A/i)}const G=a?tt("split",void 0,C,d):void 0;return{themeClass:G==null?void 0:G.themeClass,onRender:G==null?void 0:G.onRender,cssVars:a?void 0:C,resizeTriggerElRef:l,isDragging:z,mergedClsPrefix:o,resizeTriggerWrapperStyle:k,resizeTriggerStyle:g,handleMouseDown:F,firstPaneStyle:r}},render(){var d,c,o,a,f;return(d=this.onRender)===null||d===void 0||d.call(this),ae("div",{class:[`${this.mergedClsPrefix}-split`,`${this.mergedClsPrefix}-split--${this.direction}`,this.themeClass],style:this.cssVars},ae("div",{class:[`${this.mergedClsPrefix}-split-pane-1`,this.pane1Class],style:[this.firstPaneStyle,this.pane1Style]},(o=(c=this.$slots)[1])===null||o===void 0?void 0:o.call(c)),!this.disabled&&ae("div",{ref:"resizeTriggerElRef",class:`${this.mergedClsPrefix}-split__resize-trigger-wrapper`,style:this.resizeTriggerWrapperStyle,onMousedown:this.handleMouseDown},Xe(this.$slots["resize-trigger"],()=>[ae("div",{style:this.resizeTriggerStyle,class:[`${this.mergedClsPrefix}-split__resize-trigger`,this.isDragging&&`${this.mergedClsPrefix}-split__resize-trigger--hover`]})])),ae("div",{class:[`${this.mergedClsPrefix}-split-pane-2`,this.pane2Class],style:this.pane2Style},(f=(a=this.$slots)[2])===null||f===void 0?void 0:f.call(a)))}}),wt={class:"g-pagination"},St=J({name:"GPagination",__name:"GPagination",props:{pageInfo:{},currentPage:{default:1},pageSize:{default:20},total:{default:0},pageSizes:{default:()=>[10,20,50,100,200]},layouts:{default:()=>["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},align:{default:"right"},background:{type:Boolean,default:!0},perfect:{type:Boolean,default:!0},showJumper:{type:Boolean,default:!0},showTotal:{type:Boolean,default:!0},pagerOptions:{}},emits:["page-change","update:currentPage","update:pageSize"],setup(d,{expose:c,emit:o}){const a=at.getComponent("VxePager"),f=d,C=o,l=b(()=>{const r=s(f.pageInfo);return r?r.pageIndex:f.currentPage}),z=b(()=>{const r=s(f.pageInfo);return r?r.pageSize:f.pageSize}),U=b(()=>{const r=s(f.pageInfo);return r?r.totalCount:f.total}),P=b(()=>{const r=[...f.layouts];if(!f.showJumper){const g=r.indexOf("FullJump");g>-1&&r.splice(g,1)}return r}),T=b(()=>Math.ceil(U.value/z.value)),p=({currentPage:r,pageSize:g})=>{C("page-change",{currentPage:r,pageSize:g}),C("update:currentPage",r),C("update:pageSize",g)};return c({getTotalPages:()=>T.value,goToPage:r=>{r>=1&&r<=T.value&&p({currentPage:r,pageSize:z.value})},prevPage:()=>{l.value>1&&p({currentPage:l.value-1,pageSize:z.value})},nextPage:()=>{l.value<T.value&&p({currentPage:l.value+1,pageSize:z.value})}}),(r,g)=>(u(),S("div",wt,[I(s(a),{"current-page":l.value,"page-size":z.value,total:U.value,"page-sizes":r.pageSizes,layouts:P.value,align:r.align,size:"mini",onPageChange:p},null,8,["current-page","page-size","total","page-sizes","layouts","align"])]))}}),$t=Z(St,[["__scopeId","data-v-2c35df38"]]);function ca(d,c){return{pageIndex:d??ze.DEFAULT_PAGE_INDEX,pageSize:c??ze.DEFAULT_PAGE_SIZE}}const Bt=J({name:"GPane",__name:"GPane",props:{direction:{default:"vertical"},defaultSize:{default:.3},size:{},min:{default:0},max:{default:1},resizeTriggerSize:{default:2},disabled:{type:Boolean,default:!1},noResize:{type:Boolean,default:!1},pane1Class:{},pane1Style:{},pane2Class:{},pane2Style:{}},emits:["update:size","drag-start","drag-end"],setup(d,{emit:c}){const o=c,a=l=>{o("update:size",l)},f=l=>{o("drag-start",l)},C=l=>{o("drag-end",l)};return(l,z)=>(u(),S("div",{class:L(["g-pane",`g-pane--${l.direction}`])},[l.noResize?(u(),S("div",{key:0,class:L(["g-pane__flex-container",`g-pane__flex-container--${l.direction}`])},[j("div",{class:L(["g-pane__flex-pane g-pane__flex-pane--1",l.pane1Class]),style:ne(l.pane1Style)},[w(l.$slots,"1",{},()=>[w(l.$slots,"pane1",{},void 0,!0)],!0)],6),j("div",{class:L(["g-pane__flex-pane g-pane__flex-pane--2",l.pane2Class]),style:ne(l.pane2Style)},[w(l.$slots,"2",{},()=>[w(l.$slots,"pane2",{},void 0,!0)],!0)],6)],2)):(u(),h(s(zt),{key:1,direction:l.direction,"default-size":l.defaultSize,size:l.size,min:l.min,max:l.max,"resize-trigger-size":l.resizeTriggerSize,disabled:l.disabled,"pane1-class":l.pane1Class,"pane1-style":l.pane1Style,"pane2-class":l.pane2Class,"pane2-style":l.pane2Style,"onUpdate:size":a,"on-drag-start":f,"on-drag-end":C},{1:m(()=>[w(l.$slots,"1",{},()=>[w(l.$slots,"pane1",{},void 0,!0)],!0)]),2:m(()=>[w(l.$slots,"2",{},()=>[w(l.$slots,"pane2",{},void 0,!0)],!0)]),_:3},8,["direction","default-size","size","min","max","resize-trigger-size","disabled","pane1-class","pane1-style","pane2-class","pane2-style"]))],2))}}),pa=Z(Bt,[["__scopeId","data-v-406bf1c7"]]);function Oe(d,c="已复制到剪贴板",o="复制失败"){navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(d).then(()=>{console.log(c)}).catch(a=>{console.error(o,a),Ee(d,c,o)}):Ee(d,c,o)}function Ee(d,c,o){const a=document.createElement("textarea");a.value=d,a.style.position="fixed",a.style.left="-999999px",a.style.top="-999999px",a.style.opacity="0",a.style.pointerEvents="none",document.body.appendChild(a),a.focus(),a.select();try{document.execCommand("copy")?console.log(c):console.error(o)}catch(f){console.error(o,f)}finally{document.body.removeChild(a)}}const Pt={class:"toolbar-button-wrapper"},Tt=J({__name:"ToolbarButton",props:{button:{},moduleId:{}},emits:["click","dropdown-select"],setup(d,{emit:c}){const o=d,a=c,f=b(()=>{if(!o.button.icon)return null;if(typeof o.button.icon=="string"){const p=ot(o.button.icon);return ie(p)}return o.button.icon}),C=b(()=>o.moduleId?`${o.moduleId}:${o.button.key}`:""),l=b(()=>{const p=C.value;return p?ue.user.hasButton(p):!0}),z=b(()=>o.button.disabled||!l.value),U=b(()=>o.button.dropdownOptions?o.button.dropdownOptions.map(p=>{let r=p.disabled;if(o.moduleId){const k=`${o.moduleId}:${p.key}`;ue.user.hasButton(k)||(r=!0)}const g={key:p.key,label:p.label,disabled:r};return p.icon&&(g.icon=lt(p.icon,ee)),p.divider&&(g.type="divider"),g}):[]),P=()=>{!z.value&&!o.button.loading&&a("click",o.button.key)},T=p=>{a("dropdown-select",o.button.key,p)};return(p,r)=>(u(),S("div",Pt,[w(p.$slots,"prefix",{},void 0,!0),p.button.render?(u(),h(Q(p.button.render()),{key:0})):p.button.dropdown&&p.button.dropdownOptions?(u(),h(s(nt),{key:1,options:U.value,onSelect:T,trigger:"click"},{default:m(()=>[I(s(K),{type:p.button.type||"default",size:p.button.size||"small",disabled:z.value,loading:p.button.loading,quaternary:""},de({default:m(()=>[Y(" "+V(p.button.label),1)]),_:2},[p.button.icon?{name:"icon",fn:m(()=>[I(s(ee),null,{default:m(()=>[(u(),h(Q(f.value)))]),_:1})]),key:"0"}:void 0]),1032,["type","size","disabled","loading"])]),_:1},8,["options"])):(u(),h(s(st),{key:2,disabled:!p.button.tooltip,trigger:"hover"},{trigger:m(()=>[I(s(K),{type:p.button.type||"default",size:p.button.size||"small",disabled:z.value,loading:p.button.loading,quaternary:"",onClick:P},de({default:m(()=>[Y(" "+V(p.button.label),1)]),_:2},[p.button.icon?{name:"icon",fn:m(()=>[I(s(ee),null,{default:m(()=>[(u(),h(Q(f.value)))]),_:1})]),key:"0"}:void 0]),1032,["type","size","disabled","loading"])]),default:m(()=>[Y(" "+V(p.button.tooltip),1)]),_:1},8,["disabled"])),w(p.$slots,"suffix",{},void 0,!0)]))}}),Me=Z(Tt,[["__scopeId","data-v-6b215159"]]),Ut={key:0,class:"g-toolbar__title"},xt={class:"g-toolbar__title-text"},Rt={key:1,class:"g-toolbar__left"},It={class:"g-toolbar__content"},Ft={key:0,class:"g-toolbar__group-title"},Dt={class:"g-toolbar__group-buttons"},Ot={key:2,class:"g-toolbar__center"},Et={key:3,class:"g-toolbar__right"},Mt=J({name:"GToolbar",__name:"GToolbar",props:{moduleId:{},title:{},buttons:{},groups:{},align:{default:"left"},bordered:{type:Boolean,default:!0},shadow:{type:Boolean,default:!1},height:{}},emits:["button-click","dropdown-select"],setup(d,{expose:c,emit:o}){const a=d,f=o,C=rt(),l=b(()=>({height:a.height||"var(--g-toolbar-height)"})),z=b(()=>{var r;return((r=a.buttons)==null?void 0:r.filter(g=>g.show!==!1))||[]}),U=b(()=>{var r;return((r=a.groups)==null?void 0:r.map(g=>({...g,buttons:g.buttons.filter(k=>k.show!==!1)})).filter(g=>g.buttons.length>0))||[]}),P=async r=>{f("button-click",r);const g=p(r);g!=null&&g.onClick&&await g.onClick(r)},T=async(r,g)=>{var F;f("dropdown-select",r,g);const k=p(r),v=(F=k==null?void 0:k.dropdownOptions)==null?void 0:F.find(M=>M.key===g);v!=null&&v.onClick&&await v.onClick(g)},p=r=>{if(a.buttons)return a.buttons.find(g=>g.key===r);if(a.groups)for(const g of a.groups){const k=g.buttons.find(v=>v.key===r);if(k)return k}};return c({findButton:p}),(r,g)=>(u(),S("div",{class:L(["g-toolbar",[`g-toolbar--${r.align}`,{"g-toolbar--bordered":r.bordered,"g-toolbar--shadow":r.shadow}]]),style:ne(l.value)},[r.title||s(C).title?(u(),S("div",Ut,[w(r.$slots,"title",{},()=>[j("span",xt,V(r.title),1)],!0)])):B("",!0),s(C).left?(u(),S("div",Rt,[w(r.$slots,"left",{},void 0,!0)])):B("",!0),j("div",It,[w(r.$slots,"default",{},()=>[r.groups&&r.groups.length>0?(u(!0),S(oe,{key:0},te(U.value,(k,v)=>(u(),S("div",{key:k.key,class:L(["g-toolbar__group",{"g-toolbar__group--divider":k.divider&&v>0}])},[k.title?(u(),S("span",Ft,V(k.title),1)):B("",!0),j("div",Dt,[(u(!0),S(oe,null,te(k.buttons,(F,M)=>(u(),h(Me,{key:F.key,button:F,"module-id":a.moduleId,class:L({"g-toolbar__button--divider":M>0}),onClick:P,onDropdownSelect:T},null,8,["button","module-id","class"]))),128))])],2))),128)):r.buttons&&r.buttons.length>0?(u(!0),S(oe,{key:1},te(z.value,(k,v)=>(u(),h(Me,{key:k.key,button:k,"module-id":a.moduleId,class:L({"g-toolbar__button--divider":v>0}),onClick:P,onDropdownSelect:T},null,8,["button","module-id","class"]))),128)):B("",!0)],!0)]),s(C).center?(u(),S("div",Ot,[w(r.$slots,"center",{},void 0,!0)])):B("",!0),s(C).right?(u(),S("div",Et,[w(r.$slots,"right",{},void 0,!0)])):B("",!0)],6))}}),He=Z(Mt,[["__scopeId","data-v-90491273"]]);function Gt(d){const{props:c,emit:o,gridRef:a}=d,f=t=>{o("toolbar-button-click",t)},C=()=>{o("refresh")},l=()=>{a.value&&a.value.zoom()},z=()=>{if(a.value){const t=a.value.getCheckboxRecords();o("checkbox-change",t)}},U=t=>{o("cell-click",t)},P=t=>{o("cell-dblclick",t)},T=t=>{o("row-click",t)},p=t=>{o("sort-change",t)},r=t=>{o("filter-change",t)},g=({menu:t,row:i,column:e})=>{var E;const n=t==null?void 0:t.code;if(n==="copyRow"){const x=JSON.stringify(i,null,2);Oe(x)}else if(n==="copyCell"){const x=i==null?void 0:i[e==null?void 0:e.field];Oe(String(x??""))}o("menu-click",{code:n,row:i,column:e}),(E=c.menuConfig)!=null&&E.onMenuClick&&c.menuConfig.onMenuClick({code:n,row:i,column:e})},k=t=>{o("edit-actived",t)},v=t=>{o("edit-closed",t)},F=b(()=>{var t;return((t=c.toolbarConfig)==null?void 0:t.show)===!0}),M=b(()=>{var i,e,n,E;const t=[];return(i=c.toolbarConfig)!=null&&i.buttons&&t.push(...c.toolbarConfig.buttons),((e=c.toolbarConfig)==null?void 0:e.showRefresh)!==!1&&t.push({key:"refresh",label:"刷新",icon:qe,tooltip:"刷新数据",onClick:C}),(n=c.toolbarConfig)!=null&&n.showColumnSetting&&t.push({key:"column-setting",label:"列设置",icon:it,tooltip:"列设置"}),(E=c.toolbarConfig)!=null&&E.showFullscreen&&t.push({key:"fullscreen",label:"全屏",icon:je,tooltip:"全屏显示",onClick:l}),t}),G=b(()=>{const t=[];return c.showCheckbox&&t.push({type:"checkbox",field:"__checkbox",width:50,align:"center",fixed:"left",resizable:!1}),c.showSeq&&t.push({type:"seq",field:"__seq",title:"序号",width:60,align:"center",resizable:!1,...c.seqConfig}),t.push(...c.columns.filter(i=>i.visible!==!1)),t}),_=b(()=>{if(!c.menuConfig||c.menuConfig.enabled===!1)return;const t=x=>{if(!c.moduleId)return!0;const q=`${c.moduleId}:${x}`;return ue.user.hasButton(q)},i=[];c.menuConfig.showCopyRow!==!1&&i.push({code:"copyRow",name:"复制行数据",prefixIcon:"vxe-icon-copy",visible:!0}),c.menuConfig.showCopyCell!==!1&&i.push({code:"copyCell",name:"复制单元格",prefixIcon:"vxe-icon-copy",visible:!0});const e=(c.menuConfig.customMenus||[]).map(x=>{var A;const q=t(x.code);return{...x,disabled:x.disabled||!q,children:(A=x.children)==null?void 0:A.map(y=>{const le=t(y.code);return{...y,disabled:y.disabled||!le}})}}),n=[],E=[...i];return E.length&&n.push(E),e.length&&n.push(e),{body:{options:n},visibleMethod:({options:x})=>Array.isArray(x)&&x.some(q=>Array.isArray(q)&&q.length>0)}}),$=b(()=>{var i;const t=(i=c.gridOptions)==null?void 0:i.rowConfig;return{keyField:c.rowId,isHover:!0,isCurrent:(t==null?void 0:t.isCurrent)!==!1,...t}}),D=b(()=>c.showCheckbox?{checkField:"__checked",reserve:!0,highlight:!0}:void 0),O=b(()=>c.showSeq?{startIndex:0,...c.seqConfig}:void 0),N=b(()=>{const t=c.gridOptions||{},i={resizable:!0,minWidth:120,...t.columnConfig},e={enabled:!0,gt:0,oSize:5,immediate:!0,scrollToTopOnChange:!0},n={showHeaderOverflow:t.showHeaderOverflow??!0,showOverflow:t.showOverflow??"tooltip",...t,columnConfig:i,virtualYConfig:t.virtualYConfig?{...e,...t.virtualYConfig}:e};return t.expandConfig&&(n.expandConfig=t.expandConfig),n});return{showToolbar:F,toolbarButtonsComputed:M,columnsComputed:G,menuConfigComputed:_,rowConfigComputed:$,checkboxConfigComputed:D,seqConfigComputed:O,gridPropsComputed:N,handleToolbarClick:f,handleRefresh:C,handleFullscreen:l,handleCheckboxChange:z,handleCellClick:U,handleCellDblclick:P,handleRowClick:T,handleSortChange:p,handleFilterChange:r,handleMenuClick:g,handleEditActived:k,handleEditClosed:v,gridMethods:{getGridInstance:()=>a.value,refresh:C,getCheckboxRecords:()=>{var t;return((t=a.value)==null?void 0:t.getCheckboxRecords())||[]},getCurrentRecord:()=>{var t;return((t=a.value)==null?void 0:t.getCurrentRecord())||null},setCheckboxRow:(t,i)=>{a.value&&a.value.setCheckboxRow(t,i)},clearCheckboxRow:()=>{a.value&&a.value.clearCheckboxRow()},getTableData:()=>{var t;return((t=a.value)==null?void 0:t.getTableData().fullData)||[]},insert:async t=>{if(a.value)return await a.value.insert(t)},insertAt:async(t,i)=>{if(a.value)return await a.value.insertAt(t,i)},remove:async t=>{if(a.value)return await a.value.remove(t)},removeCheckboxRow:async()=>{if(a.value){const t=a.value.getCheckboxRecords();return await a.value.remove(t)}},getRecordset:()=>a.value?a.value.getRecordset():{insertRecords:[],removeRecords:[],updateRecords:[]},clearData:async()=>{a.value&&await a.value.clearData()},reloadData:async t=>{a.value&&await a.value.reloadData(t)},exportData:async t=>{if(a.value)return await a.value.exportData(t)},print:t=>{a.value&&a.value.print(t)},zoom:()=>{a.value&&a.value.zoom()},validate:async t=>{if(a.value){const i=await a.value.validate(t);return typeof i=="object"&&i!==null?!1:i}return Promise.resolve(!1)}}}}const Nt={class:"g-grid"},At={class:"g-grid__table-wrapper"},Vt=J({name:"GGrid",__name:"GGrid",props:{moduleId:{},data:{},columns:{},loading:{type:Boolean,default:!1},toolbarConfig:{},menuConfig:{},paginationConfig:{},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},height:{},maxHeight:{},autoResize:{type:Boolean,default:!1},rowId:{default:"id"},showCheckbox:{type:Boolean,default:!1},showSeq:{type:Boolean,default:!0},seqConfig:{},showFooter:{type:Boolean,default:!1},footerData:{},footerMethod:{},sortConfig:{},filterConfig:{},editConfig:{},treeConfig:{},expandConfig:{},exportConfig:{},printConfig:{},gridOptions:{}},emits:["toolbar-button-click","checkbox-change","cell-click","cell-dblclick","row-click","sort-change","filter-change","refresh","menu-click","edit-actived","edit-closed","page-change"],setup(d,{expose:c,emit:o}){const a=d,f=o,C=X(),l=b(()=>ie(a.data)||[]),z=b(()=>ie(a.loading)||!1),U=b(()=>a.treeConfig?!1:a.stripe),{showToolbar:P,toolbarButtonsComputed:T,columnsComputed:p,menuConfigComputed:r,rowConfigComputed:g,checkboxConfigComputed:k,seqConfigComputed:v,gridPropsComputed:F,handleToolbarClick:M,handleCheckboxChange:G,handleCellClick:_,handleCellDblclick:$,handleRowClick:D,handleSortChange:O,handleFilterChange:N,handleMenuClick:H,handleEditActived:t,handleEditClosed:i,gridMethods:e}=Gt({props:a,emit:f,gridRef:C}),n=b(()=>{var y;return((y=a.paginationConfig)==null?void 0:y.show)===!0}),E=b(()=>{var y;return((y=a.paginationConfig)==null?void 0:y.currentPage)||1}),x=b(()=>{var y;return((y=a.paginationConfig)==null?void 0:y.pageSize)||20}),q=b(()=>{var y;return((y=a.paginationConfig)==null?void 0:y.total)||0}),A=({currentPage:y,pageSize:le})=>{f("page-change",{currentPage:y,pageSize:le})};return c(e),(y,le)=>{var ce,pe,ge,fe,he,be,ve,me,ye,Ce,ke;return u(),S("div",Nt,[s(P)?(u(),h(He,{key:0,"module-id":y.moduleId,buttons:s(T),align:((ce=y.toolbarConfig)==null?void 0:ce.align)||"right",bordered:!1,compact:!0,class:"g-grid__toolbar",onButtonClick:s(M)},null,8,["module-id","buttons","align","onButtonClick"])):B("",!0),j("div",At,[I(s(ut),R({ref_key:"gridRef",ref:C,class:"g-grid__table"},s(F),{data:l.value,columns:s(p),loading:z.value,"menu-config":s(r),border:y.border,stripe:U.value,height:y.height||"100%","max-height":y.maxHeight,"auto-resize":y.autoResize,"row-config":s(g),"checkbox-config":s(k),"seq-config":s(v),"sort-config":a.sortConfig||((pe=a.gridOptions)==null?void 0:pe.sortConfig)||{},"filter-config":a.filterConfig||((ge=a.gridOptions)==null?void 0:ge.filterConfig),"edit-config":a.editConfig||((fe=a.gridOptions)==null?void 0:fe.editConfig),"tree-config":a.treeConfig||((he=a.gridOptions)==null?void 0:he.treeConfig),"expand-config":a.expandConfig||((be=a.gridOptions)==null?void 0:be.expandConfig),"export-config":a.exportConfig||((ve=a.gridOptions)==null?void 0:ve.exportConfig),"print-config":a.printConfig||((me=a.gridOptions)==null?void 0:me.printConfig),"show-footer":y.showFooter,"footer-data":y.footerData,"footer-method":y.footerMethod,size:"mini",onCheckboxChange:s(G),onCheckboxAll:s(G),onCellClick:s(_),onCellDblclick:s($),onCurrentChange:s(D),onSortChange:s(O),onFilterChange:s(N),onEditActived:s(t),onEditClosed:s(i),onMenuClick:s(H)}),de({_:2},[te(y.$slots,(ea,_e)=>({name:_e,fn:m(Le=>[w(y.$slots,_e,Ae(Ve(Le||{})),void 0,!0)])}))]),1040,["data","columns","loading","menu-config","border","stripe","height","max-height","auto-resize","row-config","checkbox-config","seq-config","sort-config","filter-config","edit-config","tree-config","expand-config","export-config","print-config","show-footer","footer-data","footer-method","onCheckboxChange","onCheckboxAll","onCellClick","onCellDblclick","onCurrentChange","onSortChange","onFilterChange","onEditActived","onEditClosed","onMenuClick"])]),n.value?(u(),h($t,{key:1,class:"g-grid__pagination","current-page":E.value,"page-size":x.value,total:q.value,"page-sizes":(ye=y.paginationConfig)==null?void 0:ye.pageSizes,align:(Ce=y.paginationConfig)==null?void 0:Ce.align,"page-info":(ke=y.paginationConfig)==null?void 0:ke.pageInfo,onPageChange:A},null,8,["current-page","page-size","total","page-sizes","align","page-info"])):B("",!0)])}}}),ga=Z(Vt,[["__scopeId","data-v-71ef0803"]]),qt={class:"g-modal__header"},jt={class:"g-modal__header-main"},Ht={key:0,class:"g-modal__title"},Lt={class:"g-modal__close"},Jt={class:"g-modal__body"},Wt={key:0,class:"g-modal__footer"},Yt={key:0,class:"g-modal__footer"},Xt=J({name:"GModal",__name:"GModal",props:{visible:{type:Boolean,default:!1},title:{default:""},headerIcon:{},width:{default:"60%"},preset:{default:"dialog"},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},showCancel:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},cancelText:{default:"取消"},confirmText:{default:"确定"},confirmLoading:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},mask:{type:Boolean,default:!1},blockScroll:{type:Boolean,default:!1},to:{type:[String,Boolean]},segmented:{type:[Boolean,Object],default:!1},bordered:{type:Boolean,default:!1},showFullscreenToggle:{type:Boolean,default:!0},style:{type:[Boolean,null,String,Object,Array]}},emits:["update:visible","cancel","confirm","close","after-enter","after-leave"],setup(d,{emit:c}){const o=d,a=c,f=X(!1),C=b(()=>{const g=f.value?{width:"100vw",maxWidth:"100vw",height:"100vh",maxHeight:"100vh"}:{width:typeof o.width=="number"?`${o.width}px`:o.width};return o.style?Array.isArray(o.style)?[g,...o.style]:[g,o.style]:g}),l=()=>{f.value=!f.value},z=()=>{a("update:visible",!1),f.value=!1,a("close")},U=g=>{a("update:visible",g),g||(f.value=!1,a("close"))},P=()=>{a("after-enter")},T=()=>{a("after-leave")},p=()=>{a("cancel"),a("update:visible",!1),f.value=!1},r=()=>{a("confirm")};return(g,k)=>(u(),h(s(dt),{class:L({"g-modal--fullscreen":f.value}),show:o.visible,preset:o.preset,style:ne(C.value),draggable:o.draggable,"unstable-show-mask":o.mask,"mask-closable":o.maskClosable,closable:o.closable,"auto-focus":o.autoFocus,"block-scroll":o.blockScroll,to:o.to===!1?void 0:o.to,segmented:o.segmented,bordered:o.bordered,"onUpdate:show":U,onAfterEnter:P,onAfterLeave:T},{icon:m(()=>[o.headerIcon?(u(),h(s(ee),{key:0},{default:m(()=>[(u(),h(Q(o.headerIcon)))]),_:1})):w(g.$slots,"headerIcon",{key:1},void 0,!0)]),header:m(()=>[j("div",qt,[j("div",jt,[w(g.$slots,"header",{},()=>[o.title?(u(),S("span",Ht,V(o.title),1)):B("",!0)],!0)])])]),close:m(()=>[j("div",Lt,[o.showFullscreenToggle?(u(),h(s(ee),{key:0,size:"18",class:"g-modal__icon g-modal__icon--fullscreen",onClick:Pe(l,["stop"])},{default:m(()=>[(u(),h(Q(f.value?s(ft):s(je))))]),_:1})):B("",!0),I(s(ee),{size:"18",class:"g-modal__icon g-modal__icon--close",onClick:Pe(z,["stop"])},{default:m(()=>[I(s(ht))]),_:1})])]),action:m(()=>[w(g.$slots,"footer",{},()=>[o.showFooter&&o.preset==="dialog"?(u(),S("div",Wt,[I(s(Te),{justify:"end",size:8},{default:m(()=>[o.showCancel?(u(),h(s(K),{key:0,size:"small",onClick:p},{default:m(()=>[Y(V(o.cancelText),1)]),_:1})):B("",!0),o.showConfirm?(u(),h(s(K),{key:1,type:"primary",size:"small",loading:o.confirmLoading,onClick:r},{default:m(()=>[Y(V(o.confirmText),1)]),_:1},8,["loading"])):B("",!0)]),_:1})])):B("",!0)],!0)]),footer:m(()=>[w(g.$slots,"footer",{},()=>[o.showFooter&&o.preset!=="dialog"?(u(),S("div",Yt,[I(s(Te),{justify:"end",size:8},{default:m(()=>[o.showCancel?(u(),h(s(K),{key:0,size:"small",onClick:p},{default:m(()=>[Y(V(o.cancelText),1)]),_:1})):B("",!0),o.showConfirm?(u(),h(s(K),{key:1,type:"primary",size:"small",loading:o.confirmLoading,onClick:r},{default:m(()=>[Y(V(o.confirmText),1)]),_:1},8,["loading"])):B("",!0)]),_:1})])):B("",!0)],!0)]),default:m(()=>[j("div",Jt,[w(g.$slots,"default",{},void 0,!0)])]),_:3},8,["class","show","preset","style","draggable","unstable-show-mask","mask-closable","closable","auto-focus","block-scroll","to","segmented","bordered"]))}}),fa=Z(Xt,[["__scopeId","data-v-9df47ca9"]]),Zt=J({name:"GEllipsis",__name:"GEllipsis",props:{text:{default:""}},setup(d){const c=d,o=b(()=>{const{text:a,...f}=c;return f});return(a,f)=>(u(),h(s(vt),Ae(Ve(o.value)),{default:m(()=>[w(a.$slots,"default",{},()=>[Y(V(a.text),1)],!0)]),_:3},16))}}),Ge=Z(Zt,[["__scopeId","data-v-e2749707"]]),Qt={class:"search-form"},Kt=J({name:"SearchForm",__name:"SearchForm",props:{fields:{},moreFields:{},labelWidth:{default:100},labelPlacement:{default:"left"},size:{default:"small"},inline:{type:Boolean,default:!1},cols:{default:24},xGap:{default:8},yGap:{default:8},moreButtonText:{default:"更多条件"},toolbarButtons:{},showSearchButton:{type:Boolean,default:!0},showResetButton:{type:Boolean,default:!0},searchButtonText:{default:"查询"},resetButtonText:{default:"重置"},toolbarAlign:{default:"right"},showToolbar:{type:Boolean,default:!0},moduleId:{}},emits:["search","field-change","toolbar-click"],setup(d,{expose:c,emit:o}){const a=d,f=o,C=X(),l=X({}),z=X(!1),U=()=>{z.value=!z.value},P=()=>{const t={};a.fields.forEach(i=>{if(i.defaultValue!==void 0)t[i.field]=i.defaultValue;else switch(i.type){case"number":t[i.field]=null;break;case"switch":t[i.field]=!1;break;default:t[i.field]=""}}),a.moreFields&&a.moreFields.forEach(i=>{if(i.defaultValue!==void 0)t[i.field]=i.defaultValue;else switch(i.type){case"number":t[i.field]=null;break;case"switch":t[i.field]=!1;break;default:t[i.field]=""}}),l.value=t},T=b(()=>a.fields.filter(t=>t.show!==!1)),p=b(()=>a.moreFields||[]),r=b(()=>p.value.length>0),g=b(()=>Math.floor(a.cols/4)),k=b(()=>{const t=[];return a.toolbarButtons&&a.toolbarButtons.length>0&&t.push(...a.toolbarButtons),a.showSearchButton&&(t.some(e=>e.key==="search")||t.push({key:"search",label:a.searchButtonText,icon:ct,type:"primary",onClick:F})),a.showResetButton&&(t.some(e=>e.key==="reset")||t.push({key:"reset",label:a.resetButtonText,icon:qe,onClick:M})),r.value&&t.push({key:"more",label:a.moreButtonText,icon:bt,onClick:U}),t}),v=(t,i)=>{f("field-change",t,i)},F=async()=>{var t;try{await((t=C.value)==null?void 0:t.validate()),f("search",{...l.value})}catch(i){console.error("表单验证失败:",i)}},M=()=>{P()},G=t=>{const i=k.value.find(e=>e.key===t);i!=null&&i.onClick||f("toolbar-click",t)},_=()=>C.value,$=()=>l.value,D=t=>{l.value={...l.value,...t}},O=M,N=async()=>{C.value&&await C.value.validate()},H=F;return pt(()=>{P()}),c({getFormRef:_,getFormData:$,setFormData:D,resetForm:O,validate:N,submit:H,toggleMoreFields:U}),(t,i)=>(u(),S("div",Qt,[t.showToolbar?(u(),h(He,{key:0,"module-id":t.moduleId,buttons:k.value,align:t.toolbarAlign,bordered:!1,class:"search-form__toolbar",onButtonClick:G},null,8,["module-id","buttons","align"])):B("",!0),I(s(gt),{ref_key:"formRef",ref:C,model:l.value,"label-width":t.labelWidth,"label-placement":t.labelPlacement,size:t.size,inline:t.inline,class:"search-form__form"},{default:m(()=>[I(s(mt),{cols:t.cols,"x-gap":t.xGap,"y-gap":t.yGap,class:"search-form__grid"},{default:m(()=>[(u(!0),S(oe,null,te(T.value,e=>(u(),h(s(Re),{key:e.field,span:e.span||g.value},{default:m(()=>[I(s(Ue),{path:e.field,rule:e.rules},{label:m(()=>[I(Ge,{text:e.label},null,8,["text"])]),default:m(()=>[e.type==="input"||!e.type?(u(),h(s(xe),R({key:0,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请输入${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="select"?(u(),h(s(Ie),R({key:1,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请选择${e.label}`,options:e.options||[],disabled:e.disabled,clearable:e.clearable!==!1,size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","options","disabled","clearable"])):e.type==="date"?(u(),h(s(W),R({key:2,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请选择${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,type:"date",size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="daterange"?(u(),h(s(W),R({key:3,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请选择${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,type:"daterange",size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="datetime"?(u(),h(s(W),R({key:4,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请选择${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,type:"datetime",size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="datetimerange"?(u(),h(s(W),R({key:5,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请选择${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,type:"datetimerange",size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="number"?(u(),h(s(Fe),R({key:6,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请输入${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="switch"?(u(),h(s(De),R({key:7,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,disabled:e.disabled,ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","disabled"])):e.type==="custom"&&e.render?(u(),h(Q(e.render(l.value)),{key:8})):B("",!0)]),_:2},1032,["path","rule"])]),_:2},1032,["span"]))),128)),z.value?(u(!0),S(oe,{key:0},te(p.value,e=>(u(),h(s(Re),{key:e.field,span:e.span||g.value},{default:m(()=>[I(s(Ue),{path:e.field,rule:e.rules},{label:m(()=>[I(Ge,{text:e.label},null,8,["text"])]),default:m(()=>[e.type==="input"||!e.type?(u(),h(s(xe),R({key:0,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请输入${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="select"?(u(),h(s(Ie),R({key:1,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请选择${e.label}`,options:e.options||[],disabled:e.disabled,clearable:e.clearable!==!1,size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","options","disabled","clearable"])):e.type==="date"?(u(),h(s(W),R({key:2,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请选择${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,type:"date",size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="daterange"?(u(),h(s(W),R({key:3,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请选择${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,type:"daterange",size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="datetime"?(u(),h(s(W),R({key:4,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请选择${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,type:"datetime",size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="datetimerange"?(u(),h(s(W),R({key:5,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请选择${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,type:"datetimerange",size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="number"?(u(),h(s(Fe),R({key:6,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,placeholder:e.placeholder||`请输入${e.label}`,disabled:e.disabled,clearable:e.clearable!==!1,size:"small",ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","placeholder","disabled","clearable"])):e.type==="switch"?(u(),h(s(De),R({key:7,value:l.value[e.field],"onUpdate:value":n=>l.value[e.field]=n,disabled:e.disabled,ref_for:!0},e.props,{"onUpdate:value":n=>v(e.field,n)}),null,16,["value","onUpdate:value","disabled"])):e.type==="custom"&&e.render?(u(),h(Q(e.render(l.value)),{key:8})):B("",!0)]),_:2},1032,["path","rule"])]),_:2},1032,["span"]))),128)):B("",!0)]),_:1},8,["cols","x-gap","y-gap"])]),_:1},8,["model","label-width","label-placement","size","inline"])]))}}),ha=Z(Kt,[["__scopeId","data-v-f7461063"]]);export{fa as G,ha as S,ga as a,pa as b,ca as c,Oe as d,Ge as e,$t as f};
