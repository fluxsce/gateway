import{aq as B,d as x,a8 as r,aM as U,E as K,I as $,ao as E,c7 as H,bR as L,aA as M,b2 as N,b3 as W,r as v,aC as j,cJ as q,ag as J,a$ as G,g as O,aH as Q,O as X,b7 as w,cK as Y}from"./index-Bm8WTrgo.js";import{s as Z}from"./DataTable-C88L71Mp.js";const ee=B("dynamic-tags",[B("input",{minWidth:"var(--n-input-width)"})]),te=Object.assign(Object.assign(Object.assign({},j.props),Y),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),ae=x({name:"DynamicTags",props:te,slots:Object,setup(t){const{mergedClsPrefixRef:y,inlineThemeDisabled:d}=M(t),{localeRef:c}=N("DynamicTags"),m=W(t),{mergedDisabledRef:a}=m,g=v(""),p=v(!1),f=v(!0),C=v(null),b=j("DynamicTags","-dynamic-tags",ee,q,t,y),R=v(t.defaultValue),S=J(t,"value"),l=G(S,R),V=O(()=>c.value.add),F=O(()=>Z(t.size)),z=O(()=>a.value||!!t.max&&l.value.length>=t.max);function I(e){const{onChange:n,"onUpdate:value":s,onUpdateValue:o}=t,{nTriggerFormInput:k,nTriggerFormChange:P}=m;n&&w(n,e),o&&w(o,e),s&&w(s,e),R.value=e,k(),P()}function T(e){const n=l.value.slice(0);n.splice(e,1),I(n)}function D(e){switch(e.key){case"Enter":u()}}function u(e){const n=e??g.value;if(n){const s=l.value.slice(0);s.push(t.onCreate(n)),I(s)}p.value=!1,f.value=!0,g.value=""}function A(){u()}function _(){p.value=!0,X(()=>{var e;(e=C.value)===null||e===void 0||e.focus(),f.value=!1})}const h=O(()=>{const{self:{inputWidth:e}}=b.value;return{"--n-input-width":e}}),i=d?Q("dynamic-tags",void 0,h,t):void 0;return{mergedClsPrefix:y,inputInstRef:C,localizedAdd:V,inputSize:F,inputValue:g,showInput:p,inputForceFocused:f,mergedValue:l,mergedDisabled:a,triggerDisabled:z,handleInputKeyDown:D,handleAddClick:_,handleInputBlur:A,handleCloseClick:T,handleInputConfirm:u,mergedTheme:b,cssVars:d?void 0:h,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){const{mergedTheme:t,cssVars:y,mergedClsPrefix:d,onRender:c,renderTag:m}=this;return c==null||c(),r(L,{class:[`${d}-dynamic-tags`,this.themeClass],size:"small",style:y,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:a,tagClass:g,tagStyle:p,type:f,round:C,size:b,color:R,closable:S,mergedDisabled:l,showInput:V,inputValue:F,inputClass:z,inputStyle:I,inputSize:T,inputForceFocused:D,triggerDisabled:u,handleInputKeyDown:A,handleInputBlur:_,handleAddClick:h,handleCloseClick:i,handleInputConfirm:e,$slots:n}=this;return this.mergedValue.map((s,o)=>m?m(s,o):r(U,{key:o,theme:a.peers.Tag,themeOverrides:a.peerOverrides.Tag,class:g,style:p,type:f,round:C,size:b,color:R,closable:S,disabled:l,onClose:()=>{i(o)}},{default:()=>typeof s=="string"?s:s.label})).concat(V?n.input?n.input({submit:e,deactivate:_}):r(K,Object.assign({placeholder:"",size:T,style:I,class:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:F,onUpdateValue:s=>{this.inputValue=s},theme:a.peers.Input,themeOverrides:a.peerOverrides.Input,onKeydown:A,onBlur:_,internalForceFocus:D})):n.trigger?n.trigger({activate:h,disabled:u}):r($,{dashed:!0,disabled:u,theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,size:T,onClick:h},{icon:()=>r(E,{clsPrefix:d},{default:()=>r(H,null)})}))}})}});export{ae as _};
