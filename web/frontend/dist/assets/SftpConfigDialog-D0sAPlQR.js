import{$ as dt,cw as ye,Z as ft,b as Ee,r as D,f as fe,g as M,a0 as W,a2 as X,a1 as Ie,d as Fe,R as we,q as se,o as q,al as De,w as l,m as t,B as $e,n as $,E as Ne,C as qe,a7 as he,I as Ae,J as f,x as Z,_ as Le,t as re,v as Ke,cB as vt,cH as ct,c as me,aa as Ye,ab as gt,cI as mt,a as g,ac as Ze,U as yt,M as bt,A as Tt,Y as St,a3 as Ct,cz as xt,V as wt,O as Et}from"./index-CzIbiPcR.js";import{_ as je}from"./FormItemGridItem-B8BBWZsl.js";import{_ as Qe}from"./Grid-DtPWGMN9.js";import{N as Je}from"./InputNumber-DYqA-vrb.js";import{_ as We}from"./RadioGroup-BBKwhzSS.js";import{R as Pt,A as _t}from"./Refresh-DcjLw4Lw.js";import{N as It}from"./Thing-CRmuKLFe.js";import{_ as Ft}from"./DynamicTags-BE01c2Nw.js";import{N as Dt}from"./Switch-DmPX386B.js";var ve=(o=>(o.SFTP_TRANSFER="SFTP_TRANSFER",o.DATABASE_OPERATION="DATABASE_OPERATION",o.HTTP_REQUEST="HTTP_REQUEST",o.EMAIL_SENDER="EMAIL_SENDER",o.MESSAGE_QUEUE="MESSAGE_QUEUE",o.SCRIPT_EXECUTOR="SCRIPT_EXECUTOR",o.CUSTOM_TOOL="CUSTOM_TOOL",o.LOCAL_FILE_TRANSFER="LOCAL_FILE_TRANSFER",o))(ve||{}),be=(o=>(o.DISABLED="N",o.ENABLED="Y",o.TESTED="TESTED",o.TEST_FAILED="TEST_FAILED",o))(be||{}),V=(o=>(o.PRIVATE="private",o.PUBLIC="public",o.RESTRICTED="restricted",o))(V||{});const ee=dt("/gateway/hubplugin/common"),Xe=async o=>ee.post("/add",{...o,toolName:"SFTP",toolType:ve.SFTP_TRANSFER,protocolType:o.protocolType||"SFTP"}),Ge=async o=>ee.post("/query",{...o,toolName:"SFTP",toolType:ve.SFTP_TRANSFER}),Re=async o=>ee.post("/get",{toolConfigId:o}),et=async o=>ee.post("/update",{...o,toolName:"SFTP",toolType:ve.SFTP_TRANSFER}),ke=async o=>ee.post("/delete",{toolConfigId:o}),Pe=async o=>ee.post("/test-connection",o),Oe=async o=>ee.post("/config-group/add",{...o,groupType:o.groupType||"sftp"}),_e=async o=>ee.post("/config-group/query",o),tt=async o=>ee.post("/config-group/get",{configGroupId:o}),ze=async o=>ee.post("/config-group/update",o),Ue=async o=>ee.post("/config-group/delete",{configGroupId:o}),at=async()=>{const o=await _e({activeFlag:"Y",size:1e3});return o.oK&&o.bizData?ye(o.bizData):[]},Nt=async o=>{const S=await Ge({configGroupId:o,activeFlag:"Y",size:1e3});return S.oK&&S.bizData?ye(S.bizData):[]},lt=async o=>{const S=await Promise.allSettled(o.map(v=>ke(v))),E=S.filter(v=>v.status==="fulfilled"&&v.value.oK).length,i=S.length-E;return{successCount:E,failureCount:i}},ht=async o=>{const S=o.map(i=>({toolConfigId:i.toolConfigId,toolType:i.toolType||ve.SFTP_TRANSFER}));return(await Promise.allSettled(S.map(i=>Pe(i)))).map((i,v)=>{var _;return{configId:o[v].toolConfigId,result:i.status==="fulfilled"&&i.value.oK&&i.value.bizData?JSON.parse(i.value.bizData):{success:!1,message:"测试失败",errorDetails:i.status==="rejected"?(_=i.reason)==null?void 0:_.toString():i.value.errMsg}}})},oa=Object.freeze(Object.defineProperty({__proto__:null,addSftpConfig:Xe,addSftpConfigGroup:Oe,batchDeleteSftpConfigs:lt,batchTestSftpConnections:ht,deleteSftpConfig:ke,deleteSftpConfigGroup:Ue,getSftpConfig:Re,getSftpConfigGroup:tt,getSftpConfigGroupOptions:at,getSftpConfigsByGroup:Nt,querySftpConfigGroups:_e,querySftpConfigs:Ge,testSftpConnection:Pe,updateSftpConfig:et,updateSftpConfigGroup:ze},Symbol.toStringTag,{value:"Module"})),y=ft("SftpManagement");function At(){const o=Ee(),S=D([]),E=D([]),i=D(!1),v=D(!1),_=fe({page:1,size:10,total:0}),P=fe({page:1,size:10,total:0}),x=fe({page:1,size:10,configStatus:"Y",activeFlag:"Y"}),w=fe({page:1,size:10,activeFlag:"Y"}),I=D({totalConfigs:0,enabledConfigs:0,disabledConfigs:0,totalGroups:0,defaultConfigs:0}),te=M(()=>S.value.filter(u=>u.configStatus==="Y")),O=M(()=>S.value.filter(u=>u.configStatus==="N")),h=M(()=>S.value.find(u=>u.defaultFlag==="Y")),K=M(()=>E.value.map(u=>({label:u.groupName,value:u.configGroupId}))),G=async(u={})=>{try{i.value=!0;const r={...x,...u};y.info("获取SFTP配置列表",r);const d=await Ge(r);if(W(d)){S.value=ye(d.bizData||"[]");const L=d.pageQueryData?JSON.parse(d.pageQueryData):{};_.total=L.total||S.value.length,_.page=r.page||1,_.size=r.size||10,R(),y.info("获取SFTP配置列表成功",{count:S.value.length})}else throw new Error(X(d))}catch(r){y.error("获取SFTP配置列表失败",r),o.error(`获取SFTP配置列表失败: ${r}`),S.value=[]}finally{i.value=!1}},Y=async u=>{try{y.info("获取SFTP配置详情",{toolConfigId:u});const r=await Re(u);if(W(r)){const d=Ie(r,null);return y.info("获取SFTP配置详情成功",{configName:d==null?void 0:d.configName}),d}else throw new Error(X(r))}catch(r){return y.error("获取SFTP配置详情失败",r),o.error(`获取SFTP配置详情失败: ${r}`),null}},F=async u=>{try{y.info("添加SFTP配置",{configName:u.configName});const r=await Xe(u);if(W(r))return o.success("添加SFTP配置成功"),y.info("添加SFTP配置成功",{configName:u.configName}),await G(),!0;throw new Error(X(r))}catch(r){return y.error("添加SFTP配置失败",r),o.error(`添加SFTP配置失败: ${r}`),!1}},N=async u=>{try{y.info("更新SFTP配置",{toolConfigId:u.toolConfigId,configName:u.configName});const r=await et(u);if(W(r))return o.success("更新SFTP配置成功"),y.info("更新SFTP配置成功",{configName:u.configName}),await G(),!0;throw new Error(X(r))}catch(r){return y.error("更新SFTP配置失败",r),o.error(`更新SFTP配置失败: ${r}`),!1}},a=async(u,r)=>{try{y.info("删除SFTP配置",{toolConfigId:u,configName:r});const d=await ke(u);if(W(d))return o.success("删除SFTP配置成功"),y.info("删除SFTP配置成功",{toolConfigId:u,configName:r}),await G(),!0;throw new Error(X(d))}catch(d){return y.error("删除SFTP配置失败",d),o.error(`删除SFTP配置失败: ${d}`),!1}},H=async u=>{try{y.info("测试SFTP连接",{configName:u.configName,toolConfigId:u.toolConfigId});const r={toolConfigId:u.toolConfigId,toolType:u.toolType},d=await Pe(r);if(W(d)){const L=Ie(d,null);return L!=null&&L.success?(o.success(`连接测试成功: ${L.message}`),y.info("SFTP连接测试成功",{configName:u.configName,responseTime:L.responseTime})):(o.warning(`连接测试失败: ${(L==null?void 0:L.message)||"未知错误"}`),y.warn("SFTP连接测试失败",{configName:u.configName,message:L==null?void 0:L.message})),L}else throw new Error(X(d))}catch(r){return y.error("SFTP连接测试异常",r),o.error(`连接测试异常: ${r}`),{success:!1,message:"连接测试异常",errorDetails:String(r)}}},B=async u=>{try{y.info("批量删除SFTP配置",{count:u.length});const r=await lt(u),{successCount:d,failureCount:L}=r;return d>0?(o.success(`成功删除 ${d} 个配置${L>0?`，失败 ${L} 个`:""}`),y.info("批量删除SFTP配置完成",{successCount:d,failureCount:L}),await G(),L===0):(o.error(`批量删除失败，失败 ${L} 个配置`),!1)}catch(r){return y.error("批量删除SFTP配置失败",r),o.error(`批量删除失败: ${r}`),!1}},m=async(u={})=>{try{v.value=!0;const r={...w,...u};y.info("获取SFTP分组列表",r);const d=await _e(r);if(W(d)){E.value=ye(d.bizData||"[]");const L=d.pageQueryData?JSON.parse(d.pageQueryData):{};P.total=L.total||E.value.length,P.page=r.page||1,P.size=r.size||10,y.info("获取SFTP分组列表成功",{count:E.value.length})}else throw new Error(X(d))}catch(r){y.error("获取SFTP分组列表失败",r),o.error(`获取SFTP分组列表失败: ${r}`),E.value=[]}finally{v.value=!1}},c=async u=>{try{y.info("获取SFTP分组详情",{configGroupId:u});const r=await tt(u);if(W(r)){const d=Ie(r,null);return y.info("获取SFTP分组详情成功",{groupName:d==null?void 0:d.groupName}),d}else throw new Error(X(r))}catch(r){return y.error("获取SFTP分组详情失败",r),o.error(`获取SFTP分组详情失败: ${r}`),null}},b=async u=>{try{y.info("添加SFTP分组",{groupName:u.groupName});const r=await Oe(u);if(W(r))return o.success("添加SFTP分组成功"),y.info("添加SFTP分组成功",{groupName:u.groupName}),await m(),!0;throw new Error(X(r))}catch(r){return y.error("添加SFTP分组失败",r),o.error(`添加SFTP分组失败: ${r}`),!1}},C=async u=>{try{y.info("更新SFTP分组",{configGroupId:u.configGroupId,groupName:u.groupName});const r=await ze(u);if(W(r))return o.success("更新SFTP分组成功"),y.info("更新SFTP分组成功",{groupName:u.groupName}),await m(),!0;throw new Error(X(r))}catch(r){return y.error("更新SFTP分组失败",r),o.error(`更新SFTP分组失败: ${r}`),!1}},A=async(u,r)=>{try{y.info("删除SFTP分组",{configGroupId:u,groupName:r});const d=await Ue(u);if(W(d))return o.success("删除SFTP分组成功"),y.info("删除SFTP分组成功",{configGroupId:u,groupName:r}),await m(),!0;throw new Error(X(d))}catch(d){return y.error("删除SFTP分组失败",d),o.error(`删除SFTP分组失败: ${d}`),!1}},R=()=>{const u=S.value;I.value={totalConfigs:u.length,enabledConfigs:u.filter(r=>r.configStatus==="Y").length,disabledConfigs:u.filter(r=>r.configStatus==="N").length,totalGroups:E.value.length,defaultConfigs:u.filter(r=>r.defaultFlag==="Y").length}};return{sftpConfigs:S,sftpGroups:E,loading:i,groupLoading:v,pagination:_,groupPagination:P,queryParams:x,groupQueryParams:w,statistics:I,enabledConfigs:te,disabledConfigs:O,defaultConfig:h,groupOptions:K,fetchSftpConfigs:G,fetchSftpConfig:Y,addSftpConfig:F,updateSftpConfig:N,deleteSftpConfig:a,testSftpConnection:H,batchDeleteSftpConfigs:B,fetchSftpGroups:m,fetchSftpGroup:c,addSftpGroup:b,updateSftpGroup:C,deleteSftpGroup:A,updateStatistics:R,resetQueryParams:()=>{Object.assign(x,{page:1,size:10,configStatus:"Y",activeFlag:"Y",configName:void 0,configGroupId:void 0,hostAddress:void 0,authType:void 0})},resetGroupQueryParams:()=>{Object.assign(w,{page:1,size:10,activeFlag:"Y",groupName:void 0,parentGroupId:void 0,groupType:void 0,accessLevel:void 0})},searchSftpConfigs:async u=>{Object.assign(x,u,{page:1}),await G()},searchSftpGroups:async u=>{Object.assign(w,u,{page:1}),await m()},handlePaginationChange:async(u,r)=>{x.page=u,x.size=r,await G()},handleGroupPaginationChange:async(u,r)=>{w.page=u,w.size=r,await m()}}}var ie=(o=>(o.PASSWORD="password",o.PUBLIC_KEY="publickey",o.KEYBOARD_INTERACTIVE="keyboard-interactive",o))(ie||{}),ue=(o=>(o.SFTP="SFTP",o.SCP="SCP",o.FTP="FTP",o.FTPS="FTPS",o))(ue||{});const Lt=[{label:"密码认证",value:ie.PASSWORD},{label:"密钥认证",value:ie.PUBLIC_KEY},{label:"交互认证",value:ie.KEYBOARD_INTERACTIVE}],Gt=[{label:"SFTP",value:ue.SFTP},{label:"SCP",value:ue.SCP},{label:"FTP",value:ue.FTP},{label:"FTPS",value:ue.FTPS}],Rt=[{label:"启用",value:be.ENABLED},{label:"禁用",value:be.DISABLED}],kt=[{label:"是",value:"Y"},{label:"否",value:"N"}];V.PRIVATE,V.PUBLIC,V.RESTRICTED;const Ot={configName:[{required:!0,message:"请输入配置名称",trigger:["input","blur"]},{min:2,max:50,message:"配置名称长度应为2-50个字符",trigger:["input","blur"]}],hostAddress:[{required:!0,message:"请输入主机地址",trigger:["input","blur"]},{pattern:/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$|^[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?)*$/,message:"请输入有效的IP地址或域名",trigger:["input","blur"]}],portNumber:[{required:!0,type:"number",message:"请输入端口号",trigger:["input","blur"]},{type:"number",min:1,max:65535,message:"端口号应为1-65535之间的数字",trigger:["input","blur"]}],protocolType:[{required:!0,message:"请选择协议类型",trigger:["change","blur"]}],authType:[{required:!0,message:"请选择认证类型",trigger:["change","blur"]}],userName:[{required:!0,message:"请输入用户名",trigger:["input","blur"]},{min:1,max:50,message:"用户名长度应为1-50个字符",trigger:["input","blur"]}],password:[{validator:(o,S)=>!0,trigger:["input","blur"]}],keyFilePath:[{validator:(o,S)=>!0,trigger:["input","blur"]}],configStatus:[{required:!0,message:"请选择配置状态",trigger:["change","blur"]}],defaultFlag:[{required:!0,message:"请选择是否为默认配置",trigger:["change","blur"]}],connectionTimeout:[{type:"number",min:5,max:300,message:"连接超时时间应为5-300秒",trigger:["input","blur"]}],dataTimeout:[{type:"number",min:5,max:3600,message:"数据传输超时时间应为5-3600秒",trigger:["input","blur"]}],maxRetries:[{type:"number",min:0,max:10,message:"最大重连次数应为0-10次",trigger:["input","blur"]}],priorityLevel:[{type:"number",min:1,max:999,message:"优先级应为1-999之间的数字",trigger:["input","blur"]}]},zt={groupName:[{required:!0,message:"请输入分组名称",trigger:["input","blur"]},{min:2,max:50,message:"分组名称长度应为2-50个字符",trigger:["input","blur"]}],groupDescription:[{max:200,message:"分组描述不能超过200个字符",trigger:["input","blur"]}],sortOrder:[{type:"number",min:1,max:999,message:"排序顺序应为1-999之间的数字",trigger:["input","blur"]}],groupType:[{required:!0,message:"请选择分组类型",trigger:["change","blur"]}],accessLevel:[{required:!0,message:"请选择访问级别",trigger:["change","blur"]}]},He={protocolType:ue.SFTP,portNumber:22,authType:ie.PASSWORD,configStatus:be.ENABLED,defaultFlag:"N",priorityLevel:100,connectTimeout:30,readTimeout:300,writeTimeout:300,keepAliveInterval:60,maxReconnectAttempts:3,reconnectInterval:5,maxReconnectInterval:60,autoReconnect:!1,enableCompression:!1,encoding:"utf-8",defaultOperation:"upload",bufferSize:32768,concurrentTransfers:3,transferTimeout:600,retryCount:3,retryInterval:5,maxFileSize:0,minFileSize:0,progressReportInterval:5,compressionLevel:6,uploadLocalPath:"",uploadRemotePath:"",uploadIsDirectory:!1,downloadRemotePath:"",downloadLocalPath:"",downloadIsDirectory:!1,overwriteExisting:!1,skipExisting:!0,createTargetDir:!0,preservePermissions:!1,preserveTimestamps:!1,verifyIntegrity:!0,continueOnError:!1,deleteSourceAfterTransfer:!1,includePatterns:[],excludePatterns:[],includeExtensions:[],excludeExtensions:[]},Be={groupType:"ENV",sortOrder:100,accessLevel:V.PRIVATE,groupLevel:1};function Ut(){const o=fe({...He,configName:"",hostAddress:"",userName:"",authType:ie.PASSWORD,protocolType:ue.SFTP,portNumber:22,configStatus:be.ENABLED,defaultFlag:"N"}),S=()=>{Object.assign(o,{...He,toolConfigId:void 0,configName:"",configDescription:"",configGroupId:"",hostAddress:"",userName:"",passwordEncrypted:"",keyFilePath:"",keyFileContent:"",noteText:""})},E=h=>{Object.assign(o,h)},i=fe({...Be,groupName:""}),v=()=>{Object.assign(i,{...Be,configGroupId:void 0,groupName:"",groupDescription:"",parentGroupId:"",noteText:""})},_=h=>{Object.assign(i,h)},P=D(!1),x=D(!1),w=D(!1);return{sftpConfigForm:o,resetSftpConfigForm:S,setSftpConfigForm:E,sftpGroupForm:i,resetSftpGroupForm:v,setSftpGroupForm:_,loading:P,dialogVisible:x,isEditing:w,showDialog:(h=!1)=>{w.value=h,x.value=!0},hideDialog:()=>{x.value=!1,S(),v()},setLoading:h=>{P.value=h}}}function ot(){const o=Ee(),S=D(!1),E=D([]),i=D(0),v=D(1),_=D(20),P=D(!1),x=D(!1),w=D(null),I=M(()=>E.value.map(b=>({label:b.groupName,value:b.configGroupId}))),te=M(()=>c(E.value)),O=async(b={})=>{try{S.value=!0;const C={page:v.value,size:_.value,activeFlag:"Y",...b},A=await _e(C);A.oK&&A.bizData?(E.value=ye(A.bizData),i.value=E.value.length):o.error(A.errMsg||"查询分组失败")}catch(C){console.error("查询分组失败:",C),o.error("查询分组失败")}finally{S.value=!1}},h=async()=>{try{const b=await at();return E.value=b,b}catch(b){return console.error("获取分组选项失败:",b),[]}},K=async b=>{try{const C=await Oe(b);return C.oK?(o.success("分组创建成功"),await O(),!0):(o.error(C.errMsg||"创建分组失败"),!1)}catch(C){return console.error("创建分组失败:",C),o.error("创建分组失败"),!1}},G=async b=>{try{const C=await ze(b);return C.oK?(o.success("分组更新成功"),await O(),!0):(o.error(C.errMsg||"更新分组失败"),!1)}catch(C){return console.error("更新分组失败:",C),o.error("更新分组失败"),!1}},Y=async b=>{try{const C=await Ue(b);return C.oK?(o.success("分组删除成功"),await O(),!0):(o.error(C.errMsg||"删除分组失败"),!1)}catch(C){return console.error("删除分组失败:",C),o.error("删除分组失败"),!1}},F=()=>{x.value=!1,w.value=null,P.value=!0},N=b=>{x.value=!0,w.value=b,P.value=!0},a=()=>{P.value=!1,x.value=!1,w.value=null},H=async b=>{(x.value?await G(b):await K(b))&&a()},B=b=>{v.value=b,O()},m=b=>{_.value=b,v.value=1,O()};function c(b){const C=[],A=new Map;return b.forEach(R=>{A.set(R.configGroupId,{...R,children:[]})}),b.forEach(R=>{const Q=A.get(R.configGroupId);if(R.parentGroupId&&A.has(R.parentGroupId)){const ae=A.get(R.parentGroupId);ae.children||(ae.children=[]),ae.children.push(Q)}else C.push(Q)}),C}return{loading:S,groupList:E,total:i,currentPage:v,pageSize:_,showGroupDialog:P,isEditingGroup:x,editingGroupData:w,groupOptions:I,parentGroupOptions:te,queryGroups:O,loadGroupOptions:h,createGroup:K,updateGroup:G,deleteGroup:Y,openCreateDialog:F,openEditDialog:N,closeGroupDialog:a,handleGroupSubmit:H,handlePageChange:B,handlePageSizeChange:m}}const Vt=Fe({__name:"SftpGroupDialog",props:{visible:{type:Boolean},isEditing:{type:Boolean,default:!1},editData:{default:null}},emits:["update:visible","submit"],setup(o,{expose:S,emit:E}){const i=o,v=E,_=Ee(),P=ot(),x=D(),w=D(!1),I=D({groupName:"",groupDescription:"",parentGroupId:"",groupType:"ENV",sortOrder:100,accessLevel:V.PRIVATE,groupIcon:"",noteText:""}),te=M(()=>i.isEditing?"编辑分组":"创建分组"),O=[{label:"公开",value:V.PUBLIC},{label:"私有",value:V.PRIVATE},{label:"受限",value:V.RESTRICTED}],h=zt,K=()=>{v("update:visible",!1),Y()},G=async()=>{var N;try{w.value=!0,await((N=x.value)==null?void 0:N.validate());const a={...I.value,...i.isEditing&&i.editData?{configGroupId:i.editData.configGroupId}:{}};let H=!1;i.isEditing?H=await P.updateGroup(a):H=await P.createGroup(a),H&&(v("submit",a),K())}catch(a){console.error("提交分组数据失败:",a),_.error("提交失败，请重试")}finally{w.value=!1}},Y=()=>{var N;I.value={groupName:"",groupDescription:"",parentGroupId:"",groupType:"ENV",sortOrder:100,accessLevel:V.PRIVATE,groupIcon:"",noteText:""},(N=x.value)==null||N.restoreValidation()},F=N=>{Object.assign(I.value,N)};return we(()=>i.visible,N=>{N&&i.isEditing&&i.editData?F({groupName:i.editData.groupName,groupDescription:i.editData.groupDescription||"",parentGroupId:"",groupType:"ENV",sortOrder:i.editData.sortOrder||100,accessLevel:i.editData.accessLevel||V.PRIVATE,groupIcon:i.editData.groupIcon||"",noteText:i.editData.noteText||""}):N||Y()}),S({setFormData:F,resetForm:Y,validateForm:()=>{var N;return(N=x.value)==null?void 0:N.validate()}}),(N,a)=>{const H=Ne,B=je,m=Je,c=We,b=Qe,C=qe,A=$e,R=Ae,Q=he,ae=De;return q(),se(ae,{show:N.visible,"onUpdate:show":a[6]||(a[6]=z=>N.$emit("update:visible",z)),preset:"dialog",title:te.value,loading:w.value,"mask-closable":!1,style:{width:"600px"}},{action:l(()=>[t(Q,null,{default:l(()=>[t(R,{onClick:K},{default:l(()=>a[7]||(a[7]=[f("取消")])),_:1}),t(R,{type:"primary",loading:w.value,onClick:G},{default:l(()=>[f(Z(N.isEditing?"更新分组":"创建分组"),1)]),_:1},8,["loading"])]),_:1})]),default:l(()=>[t(A,{ref_key:"formRef",ref:x,model:I.value,rules:$(h),"label-placement":"left","label-width":"120px","require-mark-placement":"right-hanging",size:"medium"},{default:l(()=>[t(b,{cols:2,"x-gap":16},{default:l(()=>[t(B,{label:"分组名称",path:"groupName"},{default:l(()=>[t(H,{value:I.value.groupName,"onUpdate:value":a[0]||(a[0]=z=>I.value.groupName=z),placeholder:"请输入分组名称",clearable:""},null,8,["value"])]),_:1}),t(B,{label:"排序顺序",path:"sortOrder"},{default:l(()=>[t(m,{value:I.value.sortOrder,"onUpdate:value":a[1]||(a[1]=z=>I.value.sortOrder=z),min:1,max:999,placeholder:"数值越小越靠前",style:{width:"100%"}},null,8,["value"])]),_:1}),t(B,{label:"访问级别",path:"accessLevel"},{default:l(()=>[t(c,{value:I.value.accessLevel,"onUpdate:value":a[2]||(a[2]=z=>I.value.accessLevel=z),options:O,placeholder:"请选择访问级别"},null,8,["value"])]),_:1}),t(B,{label:"分组图标",path:"groupIcon"},{default:l(()=>[t(H,{value:I.value.groupIcon,"onUpdate:value":a[3]||(a[3]=z=>I.value.groupIcon=z),placeholder:"图标名称（可选）",clearable:""},null,8,["value"])]),_:1})]),_:1}),t(C,{label:"分组描述",path:"groupDescription"},{default:l(()=>[t(H,{value:I.value.groupDescription,"onUpdate:value":a[4]||(a[4]=z=>I.value.groupDescription=z),type:"textarea",placeholder:"请输入分组描述（可选）",rows:3,clearable:""},null,8,["value"])]),_:1}),t(C,{label:"备注信息",path:"noteText"},{default:l(()=>[t(H,{value:I.value.noteText,"onUpdate:value":a[5]||(a[5]=z=>I.value.noteText=z),type:"textarea",placeholder:"可输入分组的备注信息（可选）",rows:2,clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","title","loading"])}}}),Mt=Le(Vt,[["__scopeId","data-v-2cac5944"]]),Ht={style:{"font-weight":"500"}},Bt=Fe({__name:"SftpGroupSelector",props:{visible:{type:Boolean},selectedGroupIds:{default:()=>[]}},emits:["update:visible","confirm"],setup(o,{emit:S}){const E=o,i=S,v=ot(),_=D(""),P=D(""),x=M(()=>{const m=_.value.toLowerCase();return v.groupList.value.filter(c=>m?c.groupName.toLowerCase().includes(m)||c.groupDescription&&c.groupDescription.toLowerCase().includes(m):!0)}),w=M(()=>v.groupList.value.find(m=>m.configGroupId===P.value)),I=()=>{i("update:visible",!1),N()},te=()=>{w.value&&i("confirm",[w.value]),I()},O=m=>{P.value===m?P.value="":P.value=m},h=()=>{P.value=""},K=()=>{},G=()=>{_.value="",v.loadGroupOptions()},Y=m=>{v.openEditDialog(m)},F=async()=>{await v.loadGroupOptions()},N=()=>{P.value="",_.value=""},a=m=>({ENV:"success",SFTP:"info",PROJECT:"warning",DEPARTMENT:"default"})[m]||"default",H=m=>({[V.PUBLIC]:"success",[V.PRIVATE]:"warning",[V.RESTRICTED]:"error"})[m]||"default",B=m=>({[V.PUBLIC]:"公开",[V.PRIVATE]:"私有",[V.RESTRICTED]:"受限"})[m||V.PUBLIC]||"未知";return we(()=>E.visible,m=>{m?(P.value=E.selectedGroupIds[0]||"",v.loadGroupOptions()):N()}),we(()=>E.selectedGroupIds,m=>{E.visible&&(P.value=m[0]||"")}),(m,c)=>{const b=Ne,C=Ke,A=Ae,R=he,Q=Ze,ae=It,z=mt,Te=ct,ce=vt,Se=yt,u=De;return q(),se(u,{show:m.visible,"onUpdate:show":c[2]||(c[2]=r=>m.$emit("update:visible",r)),preset:"dialog",title:"选择分组","mask-closable":!1,style:{width:"700px"}},{action:l(()=>[t(R,null,{default:l(()=>[t(A,{onClick:I},{default:l(()=>c[8]||(c[8]=[f("取消")])),_:1}),w.value?(q(),se(A,{key:0,onClick:h},{default:l(()=>c[9]||(c[9]=[f("清空选择")])),_:1})):re("",!0),t(A,{type:"primary",onClick:te,disabled:!w.value},{default:l(()=>c[10]||(c[10]=[f(" 确认选择 ")])),_:1},8,["disabled"])]),_:1})]),default:l(()=>[t(R,{style:{"margin-bottom":"16px"},justify:"space-between"},{default:l(()=>[t(b,{value:_.value,"onUpdate:value":c[0]||(c[0]=r=>_.value=r),placeholder:"搜索分组名称",clearable:"",style:{width:"300px"},onInput:K},null,8,["value"]),t(R,null,{default:l(()=>[t(A,{onClick:G},{icon:l(()=>[t(C,null,{default:l(()=>[t($(Pt))]),_:1})]),default:l(()=>[c[3]||(c[3]=f(" 刷新 "))]),_:1}),t(A,{type:"primary",onClick:$(v).openCreateDialog},{icon:l(()=>[t(C,null,{default:l(()=>[t($(_t))]),_:1})]),default:l(()=>[c[4]||(c[4]=f(" 新建分组 "))]),_:1},8,["onClick"])]),_:1})]),_:1}),t(ce,{style:{"max-height":"400px"}},{default:l(()=>[t(Te,null,{default:l(()=>[(q(!0),me(Ye,null,gt(x.value,r=>(q(),se(z,{key:r.configGroupId},{default:l(()=>[t(ae,null,{header:l(()=>[t(R,{align:"center"},{default:l(()=>[t(Q,{size:"small",type:a(r.groupType)},{default:l(()=>[f(Z(r.groupType||"sftp"),1)]),_:2},1032,["type"]),g("span",Ht,Z(r.groupName),1),P.value===r.configGroupId?(q(),se(Q,{key:0,type:"success",size:"small"},{default:l(()=>c[5]||(c[5]=[f("已选中")])),_:1})):re("",!0)]),_:2},1024)]),description:l(()=>[t(R,null,{default:l(()=>[g("span",null,Z(r.groupDescription||"暂无描述"),1),t(Q,{size:"tiny",type:H(r.accessLevel)},{default:l(()=>[f(Z(B(r.accessLevel)),1)]),_:2},1032,["type"])]),_:2},1024)]),action:l(()=>[t(R,null,{default:l(()=>[t(A,{size:"small",type:P.value===r.configGroupId?"error":"primary",onClick:d=>O(r.configGroupId)},{default:l(()=>[f(Z(P.value===r.configGroupId?"已选中":"选择"),1)]),_:2},1032,["type","onClick"]),t(A,{size:"small",quaternary:"",onClick:d=>Y(r)},{default:l(()=>c[6]||(c[6]=[f(" 编辑 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),x.value.length===0?(q(),se(Se,{key:0,description:"暂无分组数据",style:{margin:"40px 0"}},{extra:l(()=>[t(A,{type:"primary",onClick:$(v).openCreateDialog},{default:l(()=>c[7]||(c[7]=[f(" 创建第一个分组 ")])),_:1},8,["onClick"])]),_:1})):re("",!0),t(Mt,{visible:$(v).showGroupDialog.value,"onUpdate:visible":c[1]||(c[1]=r=>$(v).showGroupDialog.value=r),"is-editing":$(v).isEditingGroup.value,"edit-data":$(v).editingGroupData.value,"parent-group-options":$(v).parentGroupOptions.value,onSubmit:F},null,8,["visible","is-editing","edit-data","parent-group-options"])]),_:1},8,["show"])}}}),$t=Le(Bt,[["__scopeId","data-v-1497c6c8"]]),qt={key:0},Kt={key:1},Yt={key:2},Zt=Fe({__name:"SftpConfigDialog",props:{visible:{type:Boolean},isEditing:{type:Boolean,default:!1},toolConfigId:{default:""},groupOptions:{default:()=>[]}},emits:["update:visible","submit","manage-groups"],setup(o,{expose:S,emit:E}){const i=o,v=E,_=Ee(),{sftpConfigForm:P,resetSftpConfigForm:x,setSftpConfigForm:w}=Ut(),{addSftpConfig:I,updateSftpConfig:te}=At(),O=D(),h=D(!1),K=D(!1),G=D(null),Y=D(!1),F=D(null),N=M(()=>i.isEditing?"编辑SFTP配置":"添加SFTP配置"),a=M(()=>P),H=M(()=>{var p;return((p=G.value)==null?void 0:p.name)||""}),B=M(()=>a.value.authType===ie.PASSWORD||a.value.authType===ie.KEYBOARD_INTERACTIVE),m=M(()=>a.value.authType===ie.PUBLIC_KEY),c=M(()=>{if(!i.isEditing||!i.toolConfigId)return!1;const p=a.value;return p.hostAddress&&p.userName&&p.authType?B.value?!!p.passwordEncrypted:m.value?!!(p.keyFilePath||p.keyFileContent):!0:!1}),b=M(()=>!i.isEditing||!i.toolConfigId?"请先保存配置后再进行连接测试":c.value?"测试SFTP连接":"请填写完整的连接信息"),C=Lt,A=Gt,R=Rt,Q=kt,ae=[{label:"UTF-8",value:"utf-8"},{label:"GBK",value:"gbk"},{label:"GB2312",value:"gb2312"},{label:"ISO-8859-1",value:"iso-8859-1"}],z=[{label:"上传",value:"upload"},{label:"下载",value:"download"},{label:"同步",value:"sync"},{label:"列表",value:"list"},{label:"删除",value:"delete"}],Te=M(()=>{const p={...Ot};return B.value?(p.passwordEncrypted=[{required:!0,message:"请输入密码",trigger:["input","blur"]}],p.keyFilePath=[],p.keyFileContent=[]):m.value&&(p.passwordEncrypted=[],p.keyFilePath=[{validator:(e,T)=>!T&&!a.value.keyFileContent?new Error("请输入密钥文件路径或密钥内容"):!0,trigger:["input","blur"]}]),p}),ce=()=>{v("update:visible",!1),x()},Se=async()=>{var p;try{h.value=!0,await((p=O.value)==null?void 0:p.validate());const e={...a.value,configParameters:JSON.stringify({connectTimeout:a.value.connectTimeout,readTimeout:a.value.readTimeout,writeTimeout:a.value.writeTimeout,keepAliveInterval:a.value.keepAliveInterval,maxReconnectAttempts:a.value.maxReconnectAttempts,reconnectInterval:a.value.reconnectInterval,maxReconnectInterval:a.value.maxReconnectInterval,autoReconnect:a.value.autoReconnect,enableCompression:a.value.enableCompression,encoding:a.value.encoding,defaultOperation:a.value.defaultOperation,bufferSize:a.value.bufferSize,concurrentTransfers:a.value.concurrentTransfers,transferTimeout:a.value.transferTimeout,retryCount:a.value.retryCount,retryInterval:a.value.retryInterval,maxFileSize:a.value.maxFileSize,minFileSize:a.value.minFileSize,progressReportInterval:a.value.progressReportInterval,compressionLevel:a.value.compressionLevel,localPath:a.value.localPath,remotePath:a.value.remotePath,isDirectory:a.value.isDirectory,backupDir:a.value.backupDir,overwriteExisting:a.value.overwriteExisting,skipExisting:a.value.skipExisting,createTargetDir:a.value.createTargetDir,preservePermissions:a.value.preservePermissions,preserveTimestamps:a.value.preserveTimestamps,verifyIntegrity:a.value.verifyIntegrity,continueOnError:a.value.continueOnError,deleteSourceAfterTransfer:a.value.deleteSourceAfterTransfer,includePatterns:a.value.includePatterns,excludePatterns:a.value.excludePatterns,includeExtensions:a.value.includeExtensions,excludeExtensions:a.value.excludeExtensions})};let T=!1;i.isEditing?T=await te(e):T=await I(e),T&&(v("update:visible",!1),x(),v("submit",e))}catch{_.error("请检查表单填写")}finally{h.value=!1}},u=async()=>{try{if(Y.value=!0,F.value=null,!i.toolConfigId)throw new Error("配置ID不存在，请先保存配置后再进行测试");const p={toolConfigId:i.toolConfigId,toolType:a.value.toolType||ve.SFTP_TRANSFER},e=await Pe(p);if(e.oK&&e.bizData){const T=JSON.parse(e.bizData);F.value=T,T.success?_.success("连接测试成功"):_.error(T.message||"连接测试失败")}else throw new Error(e.errMsg||"连接测试失败")}catch(p){const e=p instanceof Error?p.message:String(p);_.error(`连接测试失败: ${e}`),F.value={success:!1,message:"连接测试异常",errorDetails:e}}finally{Y.value=!1}},r=()=>{w({passwordEncrypted:"",keyFilePath:"",keyFileContent:""}),Et(()=>{var p;(p=O.value)==null||p.restoreValidation()})},d=p=>{let e=22;p===ue.FTP?e=21:p===ue.FTPS&&(e=990),w({portNumber:e})},L=p=>{if(p.length>0){const e=p[0];G.value={id:e.configGroupId,name:e.groupName},w({configGroupId:e.configGroupId,configGroupName:e.groupName})}},nt=()=>{G.value=null,w({configGroupId:"",configGroupName:""})},Ve=async p=>{if(p)try{h.value=!0;const e=await Re(p);if(e.oK&&e.bizData){const T=JSON.parse(e.bizData);let s={};if(T.configParameters)try{s=JSON.parse(T.configParameters)}catch(k){console.warn("配置参数解析失败:",k)}w({...T,...s,portNumber:T.portNumber||22,connectTimeout:s.connectTimeout||30,readTimeout:s.readTimeout||300,writeTimeout:s.writeTimeout||300,keepAliveInterval:s.keepAliveInterval||60,maxReconnectAttempts:s.maxReconnectAttempts||3,reconnectInterval:s.reconnectInterval||5,maxReconnectInterval:s.maxReconnectInterval||60,autoReconnect:s.autoReconnect!==void 0?s.autoReconnect:!0,encoding:s.encoding||"utf-8",enableCompression:s.enableCompression||!1,defaultOperation:s.defaultOperation||"upload",bufferSize:s.bufferSize||32768,concurrentTransfers:s.concurrentTransfers||3,transferTimeout:s.transferTimeout||600,retryCount:s.retryCount||3,retryInterval:s.retryInterval||5,maxFileSize:s.maxFileSize||0,minFileSize:s.minFileSize||0,progressReportInterval:s.progressReportInterval||5,compressionLevel:s.compressionLevel||6,localPath:s.localPath||"",remotePath:s.remotePath||"",isDirectory:s.isDirectory||!1,backupDir:s.backupDir||"",overwriteExisting:s.overwriteExisting||!1,skipExisting:s.skipExisting!==void 0?s.skipExisting:!0,createTargetDir:s.createTargetDir!==void 0?s.createTargetDir:!0,preservePermissions:s.preservePermissions||!1,preserveTimestamps:s.preserveTimestamps||!1,verifyIntegrity:s.verifyIntegrity!==void 0?s.verifyIntegrity:!0,continueOnError:s.continueOnError||!1,deleteSourceAfterTransfer:s.deleteSourceAfterTransfer||!1,includePatterns:s.includePatterns||[],excludePatterns:s.excludePatterns||[],includeExtensions:s.includeExtensions||[],excludeExtensions:s.excludeExtensions||[]}),T.configGroupId&&(G.value={id:T.configGroupId,name:T.configGroupName||"未知分组"})}else _.error(e.errMsg||"获取配置数据失败")}catch(e){_.error("加载配置数据失败"),console.error("加载配置数据失败:",e)}finally{h.value=!1}};return we(()=>({visible:i.visible,isEditing:i.isEditing,toolConfigId:i.toolConfigId}),(p,e)=>{console.log("[SftpConfigDialog] props changed:",p,"old:",e);const{visible:T,isEditing:s,toolConfigId:k}=p,ne=(e==null?void 0:e.visible)||!1;if(T&&!ne)console.log("[SftpConfigDialog] 对话框打开"),s&&k?(console.log("[SftpConfigDialog] 编辑模式，加载配置数据:",k),Ve(k)):(console.log("[SftpConfigDialog] 新增模式，重置表单"),x(),G.value=null,F.value=null);else if(T&&ne){const ge=k!==(e==null?void 0:e.toolConfigId),j=s!==(e==null?void 0:e.isEditing);(ge||j)&&(console.log("[SftpConfigDialog] 配置或状态变化 - configId:",k,"isEditing:",s),s&&k?(console.log("[SftpConfigDialog] 重新加载配置数据:",k),Ve(k)):(console.log("[SftpConfigDialog] 重置为新增模式"),x(),G.value=null,F.value=null))}else!T&&ne&&(console.log("[SftpConfigDialog] 对话框关闭，重置表单"),x(),G.value=null,F.value=null)},{immediate:!1}),S({setFormData:w,resetForm:x,validateForm:()=>{var p;return(p=O.value)==null?void 0:p.validate()}}),(p,e)=>{const T=Ne,s=je,k=Ke,ne=Ae,ge=he,j=Qe,pe=qe,le=St,de=We,U=Je,Ce=Tt,J=Dt,Me=Ct,xe=Ft,oe=xt,rt=bt,st=$e,ut=Ze,it=wt,pt=De;return q(),se(pt,{show:p.visible,"onUpdate:show":e[52]||(e[52]=n=>p.$emit("update:visible",n)),preset:"dialog",title:N.value,loading:h.value,"mask-closable":!1,style:{width:"1000px","max-height":"90vh","overflow-y":"auto"},onClose:ce},{action:l(()=>[t(ge,null,{default:l(()=>[t(ne,{onClick:ce},{default:l(()=>e[96]||(e[96]=[f("取消")])),_:1}),t(Me,{disabled:c.value,trigger:"hover"},{trigger:l(()=>[t(ne,{type:"info",loading:Y.value,onClick:u,disabled:!c.value},{default:l(()=>e[97]||(e[97]=[f(" 测试连接 ")])),_:1},8,["loading","disabled"])]),default:l(()=>[f(" "+Z(b.value),1)]),_:1},8,["disabled"]),t(ne,{type:"primary",loading:h.value,onClick:Se},{default:l(()=>[f(Z(p.isEditing?"更新配置":"添加配置"),1)]),_:1},8,["loading"])]),_:1})]),default:l(()=>[t(st,{ref_key:"formRef",ref:O,model:a.value,rules:Te.value,"label-placement":"left","label-width":"120px","require-mark-placement":"right-hanging",size:"medium"},{default:l(()=>[t(rt,{type:"line",animated:""},{default:l(()=>[t(Ce,{name:"basic",tab:"基础配置"},{default:l(()=>[t(j,{cols:2,"x-gap":16},{default:l(()=>[t(s,{label:"配置名称",path:"configName"},{default:l(()=>[t(T,{value:a.value.configName,"onUpdate:value":e[0]||(e[0]=n=>a.value.configName=n),placeholder:"请输入配置名称",clearable:""},null,8,["value"])]),_:1}),t(s,{label:"所属分组",path:"configGroupId"},{default:l(()=>[t(ge,null,{default:l(()=>[t(T,{value:H.value,placeholder:"请选择分组（可选）",readonly:"",style:{flex:"1"}},null,8,["value"]),t(ne,{size:"small",onClick:e[1]||(e[1]=n=>K.value=!0),disabled:h.value,quaternary:"",type:"primary"},{icon:l(()=>[t(k,{size:"14"},{default:l(()=>e[53]||(e[53]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"})],-1)])),_:1})]),default:l(()=>[e[54]||(e[54]=f(" 选择分组 "))]),_:1},8,["disabled"]),t(ne,{size:"small",onClick:nt,disabled:h.value||!a.value.configGroupId,quaternary:""},{default:l(()=>e[55]||(e[55]=[f(" 清空 ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),t(pe,{label:"配置描述",path:"configDescription"},{default:l(()=>[t(T,{value:a.value.configDescription,"onUpdate:value":e[2]||(e[2]=n=>a.value.configDescription=n),type:"textarea",placeholder:"请输入配置描述（可选）",rows:3,clearable:""},null,8,["value"])]),_:1}),t(le,{"title-placement":"left",class:"elegant-divider"},{default:l(()=>[t(k,{size:"16",color:"var(--n-text-color-disabled)"},{default:l(()=>e[56]||(e[56]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.35 19.43,11.03L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11.03C4.53,11.35 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"})],-1)])),_:1}),e[57]||(e[57]=g("span",{style:{"margin-left":"8px","font-weight":"500"}},"状态和优先级",-1))]),_:1}),t(j,{cols:2,"x-gap":16},{default:l(()=>[t(s,{label:"配置状态",path:"configStatus"},{default:l(()=>[t(de,{value:a.value.configStatus,"onUpdate:value":e[3]||(e[3]=n=>a.value.configStatus=n),options:$(R)},null,8,["value","options"])]),_:1}),t(s,{label:"默认配置",path:"defaultFlag"},{default:l(()=>[t(de,{value:a.value.defaultFlag,"onUpdate:value":e[4]||(e[4]=n=>a.value.defaultFlag=n),options:$(Q)},null,8,["value","options"])]),_:1}),t(s,{label:"优先级",path:"priorityLevel"},{default:l(()=>[t(U,{value:a.value.priorityLevel,"onUpdate:value":e[5]||(e[5]=n=>a.value.priorityLevel=n),min:1,max:999,placeholder:"数值越小优先级越高",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(le,{"title-placement":"left",class:"elegant-divider"},{default:l(()=>[t(k,{size:"16",color:"var(--n-text-color-disabled)"},{default:l(()=>e[58]||(e[58]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})],-1)])),_:1}),e[59]||(e[59]=g("span",{style:{"margin-left":"8px","font-weight":"500"}},"备注信息",-1))]),_:1}),t(pe,{label:"备注信息",path:"noteText"},{default:l(()=>[t(T,{value:a.value.noteText,"onUpdate:value":e[6]||(e[6]=n=>a.value.noteText=n),type:"textarea",placeholder:"可输入配置的备注信息（可选）",rows:3,clearable:""},null,8,["value"])]),_:1})]),_:1}),t(Ce,{name:"connection",tab:"连接认证"},{default:l(()=>[t(le,{"title-placement":"left",class:"elegant-divider"},{default:l(()=>[t(k,{size:"16",color:"var(--n-text-color-disabled)"},{default:l(()=>e[60]||(e[60]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M12,2A3,3 0 0,1 15,5V7A1,1 0 0,1 14,8H13V16A1,1 0 0,1 12,17H4A1,1 0 0,1 3,16V8A1,1 0 0,1 4,7H5V5A3,3 0 0,1 8,2H12M12,3H8A2,2 0 0,0 6,5V7H13V5A2,2 0 0,0 12,3Z"})],-1)])),_:1}),e[61]||(e[61]=g("span",{style:{"margin-left":"8px","font-weight":"500"}},"连接配置",-1))]),_:1}),t(j,{cols:2,"x-gap":16},{default:l(()=>[t(s,{label:"主机地址",path:"hostAddress"},{default:l(()=>[t(T,{value:a.value.hostAddress,"onUpdate:value":e[7]||(e[7]=n=>a.value.hostAddress=n),placeholder:"IP地址或域名",clearable:""},null,8,["value"])]),_:1}),t(s,{label:"端口号",path:"portNumber"},{default:l(()=>[t(U,{value:a.value.portNumber,"onUpdate:value":e[8]||(e[8]=n=>a.value.portNumber=n),min:1,max:65535,placeholder:"端口号",style:{width:"100%"}},null,8,["value"])]),_:1}),t(s,{label:"协议类型",path:"protocolType"},{default:l(()=>[t(de,{value:a.value.protocolType,"onUpdate:value":[e[9]||(e[9]=n=>a.value.protocolType=n),d],options:$(A)},null,8,["value","options"])]),_:1}),t(s,{label:"连接超时",path:"connectTimeout"},{default:l(()=>[t(U,{value:a.value.connectTimeout,"onUpdate:value":e[10]||(e[10]=n=>a.value.connectTimeout=n),min:5,max:300,placeholder:"秒",style:{width:"100%"}},{suffix:l(()=>e[62]||(e[62]=[f("秒")])),_:1},8,["value"])]),_:1})]),_:1}),t(le,{"title-placement":"left",class:"elegant-divider"},{default:l(()=>[t(k,{size:"16",color:"var(--n-text-color-disabled)"},{default:l(()=>e[63]||(e[63]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M2,3H9L12,6H22V8H21L20,21H4L2,3M5,5L6,19H18L19,8H11.5L8.5,5H5Z"})],-1)])),_:1}),e[64]||(e[64]=g("span",{style:{"margin-left":"8px","font-weight":"500"}},"认证配置",-1))]),_:1}),t(j,{cols:2,"x-gap":16},{default:l(()=>[t(s,{label:"认证类型",path:"authType"},{default:l(()=>[t(de,{value:a.value.authType,"onUpdate:value":[e[11]||(e[11]=n=>a.value.authType=n),r],options:$(C)},null,8,["value","options"])]),_:1}),t(s,{label:"用户名",path:"userName"},{default:l(()=>[t(T,{value:a.value.userName,"onUpdate:value":e[12]||(e[12]=n=>a.value.userName=n),placeholder:"请输入用户名",clearable:""},null,8,["value"])]),_:1})]),_:1}),B.value?(q(),se(pe,{key:0,label:"密码",path:"passwordEncrypted"},{default:l(()=>[t(T,{value:a.value.passwordEncrypted,"onUpdate:value":e[13]||(e[13]=n=>a.value.passwordEncrypted=n),type:"password",placeholder:"请输入密码","show-password-on":"click",clearable:""},null,8,["value"])]),_:1})):re("",!0),m.value?(q(),me(Ye,{key:1},[t(pe,{label:"密钥文件路径",path:"keyFilePath"},{default:l(()=>[t(T,{value:a.value.keyFilePath,"onUpdate:value":e[14]||(e[14]=n=>a.value.keyFilePath=n),placeholder:"密钥文件的完整路径（可选）",clearable:""},null,8,["value"])]),_:1}),t(pe,{label:"密钥内容",path:"keyFileContent"},{default:l(()=>[t(T,{value:a.value.keyFileContent,"onUpdate:value":e[15]||(e[15]=n=>a.value.keyFileContent=n),type:"textarea",placeholder:"直接粘贴私钥内容（可选）",rows:4,clearable:""},null,8,["value"])]),_:1})],64)):re("",!0)]),_:1}),t(Ce,{name:"transfer",tab:"传输选项"},{default:l(()=>[t(le,{"title-placement":"left",class:"elegant-divider"},{default:l(()=>[t(k,{size:"16",color:"var(--n-text-color-disabled)"},{default:l(()=>e[65]||(e[65]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"})],-1)])),_:1}),e[66]||(e[66]=g("span",{style:{"margin-left":"8px","font-weight":"500"}},"操作配置",-1))]),_:1}),t(j,{cols:2,"x-gap":16},{default:l(()=>[t(s,{label:"默认操作类型",path:"defaultOperation"},{default:l(()=>[t(de,{value:a.value.defaultOperation,"onUpdate:value":e[16]||(e[16]=n=>a.value.defaultOperation=n),options:z,placeholder:"选择默认操作类型"},null,8,["value"])]),_:1}),t(s,{label:"目录传输",path:"isDirectory"},{default:l(()=>[t(J,{value:a.value.isDirectory,"onUpdate:value":e[17]||(e[17]=n=>a.value.isDirectory=n)},null,8,["value"])]),_:1})]),_:1}),t(le,{"title-placement":"left",class:"elegant-divider"},{default:l(()=>[t(k,{size:"16",color:"var(--n-text-color-disabled)"},{default:l(()=>e[67]||(e[67]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"})],-1)])),_:1}),e[68]||(e[68]=g("span",{style:{"margin-left":"8px","font-weight":"500"}},"传输路径配置",-1))]),_:1}),t(j,{cols:1,"x-gap":16},{default:l(()=>[t(s,{label:"本地路径",path:"localPath"},{default:l(()=>[t(T,{value:a.value.localPath,"onUpdate:value":e[18]||(e[18]=n=>a.value.localPath=n),placeholder:"本地文件或目录路径",clearable:""},null,8,["value"])]),_:1}),t(s,{label:"远程路径",path:"remotePath"},{default:l(()=>[t(T,{value:a.value.remotePath,"onUpdate:value":e[19]||(e[19]=n=>a.value.remotePath=n),placeholder:"远程目标路径",clearable:""},null,8,["value"])]),_:1}),t(s,{label:"备份目录",path:"backupDir"},{default:l(()=>[t(T,{value:a.value.backupDir,"onUpdate:value":e[20]||(e[20]=n=>a.value.backupDir=n),placeholder:"备份目录路径（可选）",clearable:""},null,8,["value"])]),_:1})]),_:1}),t(le,{"title-placement":"left",class:"elegant-divider"},{default:l(()=>[t(k,{size:"16",color:"var(--n-text-color-disabled)"},{default:l(()=>e[69]||(e[69]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6M13,3.5L18.5,9H13V3.5Z"})],-1)])),_:1}),e[70]||(e[70]=g("span",{style:{"margin-left":"8px","font-weight":"500"}},"文件处理选项",-1))]),_:1}),t(j,{cols:2,"x-gap":16},{default:l(()=>[t(s,{label:"覆盖已存在文件",path:"overwriteExisting"},{default:l(()=>[t(J,{value:a.value.overwriteExisting,"onUpdate:value":e[21]||(e[21]=n=>a.value.overwriteExisting=n)},null,8,["value"])]),_:1}),t(s,{label:"跳过已存在文件",path:"skipExisting"},{default:l(()=>[t(J,{value:a.value.skipExisting,"onUpdate:value":e[22]||(e[22]=n=>a.value.skipExisting=n)},null,8,["value"])]),_:1}),t(s,{label:"创建目标目录",path:"createTargetDir"},{default:l(()=>[t(J,{value:a.value.createTargetDir,"onUpdate:value":e[23]||(e[23]=n=>a.value.createTargetDir=n)},null,8,["value"])]),_:1}),t(s,{label:"保持文件权限",path:"preservePermissions"},{default:l(()=>[t(J,{value:a.value.preservePermissions,"onUpdate:value":e[24]||(e[24]=n=>a.value.preservePermissions=n)},null,8,["value"])]),_:1}),t(s,{label:"保持文件时间戳",path:"preserveTimestamps"},{default:l(()=>[t(J,{value:a.value.preserveTimestamps,"onUpdate:value":e[25]||(e[25]=n=>a.value.preserveTimestamps=n)},null,8,["value"])]),_:1}),t(s,{label:"验证传输完整性",path:"verifyIntegrity"},{default:l(()=>[t(J,{value:a.value.verifyIntegrity,"onUpdate:value":e[26]||(e[26]=n=>a.value.verifyIntegrity=n)},null,8,["value"])]),_:1}),t(s,{label:"错误时继续",path:"continueOnError"},{default:l(()=>[t(J,{value:a.value.continueOnError,"onUpdate:value":e[27]||(e[27]=n=>a.value.continueOnError=n)},null,8,["value"])]),_:1}),t(s,{label:"传输后删除源文件",path:"deleteSourceAfterTransfer"},{default:l(()=>[t(Me,{trigger:"hover",placement:"top"},{trigger:l(()=>[t(J,{value:a.value.deleteSourceAfterTransfer,"onUpdate:value":e[28]||(e[28]=n=>a.value.deleteSourceAfterTransfer=n)},null,8,["value"])]),default:l(()=>[e[71]||(e[71]=g("div",{style:{"max-width":"200px"}},[g("div",{style:{"font-weight":"500","margin-bottom":"4px"}},"⚠️ 危险操作"),g("div",null,"启用后将在传输成功时自动删除源文件，实现移动而非复制操作。"),g("div",{style:{color:"#f5222d","margin-top":"4px"}},"请谨慎使用，避免意外丢失数据！")],-1))]),_:1})]),_:1})]),_:1}),t(le,{"title-placement":"left",class:"elegant-divider"},{default:l(()=>[t(k,{size:"16",color:"var(--n-text-color-disabled)"},{default:l(()=>e[72]||(e[72]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M6,13H18V11H6M3,6V8H21V6M10,18H14V16H10V18Z"})],-1)])),_:1}),e[73]||(e[73]=g("span",{style:{"margin-left":"8px","font-weight":"500"}},"文件过滤",-1))]),_:1}),t(pe,{label:"包含文件模式",path:"includePatterns"},{feedback:l(()=>[t(oe,{depth:"3",style:{"font-size":"12px"}},{default:l(()=>e[74]||(e[74]=[f(" 支持通配符模式，如 *.txt, log_*, **/*.json 等 ")])),_:1})]),default:l(()=>[t(xe,{value:a.value.includePatterns,"onUpdate:value":e[29]||(e[29]=n=>a.value.includePatterns=n),placeholder:"添加包含的文件模式 (如: *.txt, *.log)"},null,8,["value"])]),_:1}),t(pe,{label:"排除文件模式",path:"excludePatterns"},{feedback:l(()=>[t(oe,{depth:"3",style:{"font-size":"12px"}},{default:l(()=>e[75]||(e[75]=[f(" 支持通配符模式，用于排除不需要传输的文件 ")])),_:1})]),default:l(()=>[t(xe,{value:a.value.excludePatterns,"onUpdate:value":e[30]||(e[30]=n=>a.value.excludePatterns=n),placeholder:"添加排除的文件模式 (如: *.tmp, .git/*)"},null,8,["value"])]),_:1}),t(j,{cols:2,"x-gap":16},{default:l(()=>[t(s,{label:"包含文件扩展名",path:"includeExtensions"},{default:l(()=>[t(xe,{value:a.value.includeExtensions,"onUpdate:value":e[31]||(e[31]=n=>a.value.includeExtensions=n),placeholder:"添加扩展名 (如: txt, log, json)"},null,8,["value"])]),_:1}),t(s,{label:"排除文件扩展名",path:"excludeExtensions"},{default:l(()=>[t(xe,{value:a.value.excludeExtensions,"onUpdate:value":e[32]||(e[32]=n=>a.value.excludeExtensions=n),placeholder:"添加扩展名 (如: tmp, bak)"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(Ce,{name:"advanced",tab:"高级配置"},{default:l(()=>[t(le,{"title-placement":"left",class:"elegant-divider"},{default:l(()=>[t(k,{size:"16",color:"var(--n-text-color-disabled)"},{default:l(()=>e[76]||(e[76]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.35 19.43,11.03L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11.03C4.53,11.35 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"})],-1)])),_:1}),e[77]||(e[77]=g("span",{style:{"margin-left":"8px","font-weight":"500"}},"连接高级配置",-1))]),_:1}),t(j,{cols:2,"x-gap":16},{default:l(()=>[t(s,{label:"读取超时",path:"readTimeout"},{default:l(()=>[t(U,{value:a.value.readTimeout,"onUpdate:value":e[33]||(e[33]=n=>a.value.readTimeout=n),min:5,max:3600,placeholder:"秒",style:{width:"100%"}},{suffix:l(()=>e[78]||(e[78]=[f("秒")])),_:1},8,["value"])]),_:1}),t(s,{label:"写入超时",path:"writeTimeout"},{default:l(()=>[t(U,{value:a.value.writeTimeout,"onUpdate:value":e[34]||(e[34]=n=>a.value.writeTimeout=n),min:5,max:3600,placeholder:"秒",style:{width:"100%"}},{suffix:l(()=>e[79]||(e[79]=[f("秒")])),_:1},8,["value"])]),_:1}),t(s,{label:"Keep-Alive间隔",path:"keepAliveInterval"},{default:l(()=>[t(U,{value:a.value.keepAliveInterval,"onUpdate:value":e[35]||(e[35]=n=>a.value.keepAliveInterval=n),min:10,max:300,placeholder:"秒",style:{width:"100%"}},{suffix:l(()=>e[80]||(e[80]=[f("秒")])),_:1},8,["value"])]),_:1}),t(s,{label:"最大重连次数",path:"maxReconnectAttempts"},{default:l(()=>[t(U,{value:a.value.maxReconnectAttempts,"onUpdate:value":e[36]||(e[36]=n=>a.value.maxReconnectAttempts=n),min:0,max:10,placeholder:"次数",style:{width:"100%"}},{suffix:l(()=>e[81]||(e[81]=[f("次")])),_:1},8,["value"])]),_:1}),t(s,{label:"重连间隔",path:"reconnectInterval"},{default:l(()=>[t(U,{value:a.value.reconnectInterval,"onUpdate:value":e[37]||(e[37]=n=>a.value.reconnectInterval=n),min:1,max:60,placeholder:"秒",style:{width:"100%"}},{suffix:l(()=>e[82]||(e[82]=[f("秒")])),_:1},8,["value"])]),_:1}),t(s,{label:"最大重连间隔",path:"maxReconnectInterval"},{default:l(()=>[t(U,{value:a.value.maxReconnectInterval,"onUpdate:value":e[38]||(e[38]=n=>a.value.maxReconnectInterval=n),min:5,max:300,placeholder:"秒",style:{width:"100%"}},{suffix:l(()=>e[83]||(e[83]=[f("秒")])),_:1},8,["value"])]),_:1}),t(s,{label:"自动重连",path:"autoReconnect"},{default:l(()=>[t(J,{value:a.value.autoReconnect,"onUpdate:value":e[39]||(e[39]=n=>a.value.autoReconnect=n)},null,8,["value"])]),_:1}),t(s,{label:"启用压缩",path:"enableCompression"},{default:l(()=>[t(J,{value:a.value.enableCompression,"onUpdate:value":e[40]||(e[40]=n=>a.value.enableCompression=n)},null,8,["value"])]),_:1}),t(s,{label:"字符编码",path:"encoding"},{default:l(()=>[t(de,{value:a.value.encoding,"onUpdate:value":e[41]||(e[41]=n=>a.value.encoding=n),options:ae,placeholder:"选择字符编码"},null,8,["value"])]),_:1}),t(s,{label:"压缩级别",path:"compressionLevel"},{default:l(()=>[t(U,{value:a.value.compressionLevel,"onUpdate:value":e[42]||(e[42]=n=>a.value.compressionLevel=n),min:1,max:9,placeholder:"1-9级别",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(le,{"title-placement":"left",class:"elegant-divider"},{default:l(()=>[t(k,{size:"16",color:"var(--n-text-color-disabled)"},{default:l(()=>e[84]||(e[84]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"currentColor",d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})],-1)])),_:1}),e[85]||(e[85]=g("span",{style:{"margin-left":"8px","font-weight":"500"}},"传输高级配置",-1))]),_:1}),t(j,{cols:2,"x-gap":16},{default:l(()=>[t(s,{label:"缓冲区大小",path:"bufferSize"},{default:l(()=>[t(U,{value:a.value.bufferSize,"onUpdate:value":e[43]||(e[43]=n=>a.value.bufferSize=n),min:1024,max:1048576,placeholder:"字节",style:{width:"100%"}},{suffix:l(()=>e[86]||(e[86]=[f("KB")])),_:1},8,["value"])]),_:1}),t(s,{label:"并发传输数",path:"concurrentTransfers"},{default:l(()=>[t(U,{value:a.value.concurrentTransfers,"onUpdate:value":e[44]||(e[44]=n=>a.value.concurrentTransfers=n),min:1,max:10,placeholder:"并发数量",style:{width:"100%"}},null,8,["value"])]),_:1}),t(s,{label:"传输超时",path:"transferTimeout"},{default:l(()=>[t(U,{value:a.value.transferTimeout,"onUpdate:value":e[45]||(e[45]=n=>a.value.transferTimeout=n),min:30,max:3600,placeholder:"秒",style:{width:"100%"}},{suffix:l(()=>e[87]||(e[87]=[f("秒")])),_:1},8,["value"])]),_:1}),t(s,{label:"重试次数",path:"retryCount"},{default:l(()=>[t(U,{value:a.value.retryCount,"onUpdate:value":e[46]||(e[46]=n=>a.value.retryCount=n),min:0,max:10,placeholder:"重试次数",style:{width:"100%"}},null,8,["value"])]),_:1}),t(s,{label:"重试间隔",path:"retryInterval"},{default:l(()=>[t(U,{value:a.value.retryInterval,"onUpdate:value":e[47]||(e[47]=n=>a.value.retryInterval=n),min:1,max:60,placeholder:"秒",style:{width:"100%"}},{suffix:l(()=>e[88]||(e[88]=[f("秒")])),_:1},8,["value"])]),_:1}),t(s,{label:"最大文件大小",path:"maxFileSize"},{default:l(()=>[t(U,{value:a.value.maxFileSize,"onUpdate:value":e[48]||(e[48]=n=>a.value.maxFileSize=n),min:0,placeholder:"0=无限制",style:{width:"100%"}},{suffix:l(()=>e[89]||(e[89]=[f("MB")])),_:1},8,["value"])]),_:1}),t(s,{label:"最小文件大小",path:"minFileSize"},{default:l(()=>[t(U,{value:a.value.minFileSize,"onUpdate:value":e[49]||(e[49]=n=>a.value.minFileSize=n),min:0,placeholder:"字节",style:{width:"100%"}},{suffix:l(()=>e[90]||(e[90]=[f("KB")])),_:1},8,["value"])]),_:1}),t(s,{label:"进度间隔",path:"progressReportInterval"},{default:l(()=>[t(U,{value:a.value.progressReportInterval,"onUpdate:value":e[50]||(e[50]=n=>a.value.progressReportInterval=n),min:1,max:60,placeholder:"秒",style:{width:"100%"}},{suffix:l(()=>e[91]||(e[91]=[f("秒")])),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"]),F.value?(q(),se(it,{key:0,title:F.value.success?"连接测试成功":"连接测试失败",size:"small",bordered:!1,style:{"margin-top":"16px"}},{"header-extra":l(()=>[t(ut,{type:F.value.success?"success":"error"},{default:l(()=>[f(Z(F.value.success?"成功":"失败"),1)]),_:1},8,["type"])]),default:l(()=>[t(ge,{vertical:"",size:"small"},{default:l(()=>{var n;return[g("div",null,[t(oe,{strong:""},{default:l(()=>e[92]||(e[92]=[f("消息：")])),_:1}),t(oe,null,{default:l(()=>[f(Z(F.value.message),1)]),_:1})]),F.value.responseTime?(q(),me("div",qt,[t(oe,{strong:""},{default:l(()=>e[93]||(e[93]=[f("响应时间：")])),_:1}),t(oe,null,{default:l(()=>[f(Z(F.value.responseTime)+"ms",1)]),_:1})])):re("",!0),(n=F.value.serverInfo)!=null&&n.version?(q(),me("div",Kt,[t(oe,{strong:""},{default:l(()=>e[94]||(e[94]=[f("服务器版本：")])),_:1}),t(oe,null,{default:l(()=>[f(Z(F.value.serverInfo.version),1)]),_:1})])):re("",!0),F.value.errorDetails&&!F.value.success?(q(),me("div",Yt,[t(oe,{strong:""},{default:l(()=>e[95]||(e[95]=[f("错误详情：")])),_:1}),t(oe,{type:"error"},{default:l(()=>[f(Z(F.value.errorDetails),1)]),_:1})])):re("",!0)]}),_:1})]),_:1},8,["title"])):re("",!0),t($t,{visible:K.value,"onUpdate:visible":e[51]||(e[51]=n=>K.value=n),"selected-group-ids":a.value.configGroupId?[a.value.configGroupId]:[],onConfirm:L},null,8,["visible","selected-group-ids"])]),_:1},8,["show","title","loading"])}}}),na=Le(Zt,[["__scopeId","data-v-21845bd9"]]);export{na as S,ve as T,oa as i};
