import{b8 as Ve,be as Qt,bf as Xt,bb as ea,db as it,dc as ct,dd as ut,bh as dt,P as Ke,cc as ta,d as ne,T as N,am as aa,cd as la,V as We,W as Oe,aF as sa,Z as Ct,j as M,de as na,bm as ra,bu as oa,U as vt,J as G,aC as ia,ay as ca,c7 as ua,a$ as qe,ak as da,a3 as pt,R as Me,S as ht,aR as va,bw as pa,bx as ha,df as fa,r as F,a1 as ft,bz as ma,aj as ga,K as _,af as ya,p as ue,m as he,x as Ue,z as Ce,B as Te,A as ge,d5 as Tt,dg as Et,i as O,aO as K,ag as ve,bV as ce,g as B,o as A,w as l,f as v,c as J,h as Z,b as t,e,ct as se,t as d,cE as ba,N as Sa,a9 as j,_ as fe,dh as Nt,a7 as Ee,c_ as Ze,bW as Be,bX as ee,aQ as Fe,I as Ie,ab as He,c$ as It,q as ze,cD as _a,G as H,cq as Qe,bY as Xe,n as Ca,di as Ta,dj as mt,E as Je,F as I,ac as wt,ah as kt,dk as Ea,aY as xe,aZ as De,cB as Na,cC as Ia,H as gt}from"./index-B5iwLEhr.js";import{u as Pt}from"./usePagination-DXNuPgmN.js";import{E as wa}from"./EllipsisHorizontalOutline-CoY_Ez6Y.js";import{F as Ge}from"./FolderOutline-wqFwx3fF.js";import{P as ka}from"./PeopleOutline-DzWHNjKU.js";import{S as et}from"./ServerOutline-D0nXs2bi.js";import{C as tt}from"./CloudOutline-DrYKqJ5x.js";import{T as Ne}from"./TimeOutline-BL3LoG3E.js";import{L as Pa}from"./ListOutline-D995_T1N.js";import{C as xt}from"./CreateOutline-BfzQYr6W.js";import{T as Ye}from"./TrashOutline-CSUZLE0I.js";import{g as yt,h as xa,i as Da,c as Ra,N as Ua}from"./DatePicker-BYwGRPWG.js";import{H as Aa,C as Oa}from"./HeartOutline-CnvWk0ic.js";import{a as Fa,A as Ha}from"./ArrowUpOutline-BUnTWvvz.js";import{C as je}from"./CloseCircleOutline-D8WGDJGX.js";import{C as at}from"./CheckmarkCircleOutline-7wZ36HKZ.js";import{R as we}from"./RefreshOutline-Ca-9cWyP.js";import{_ as lt,N as za}from"./DataTable-BP0rWkt1.js";import{S as Ga}from"./Scrollbar-zuiunsUR.js";import{_ as W}from"./Select-DZOKbeI6.js";import{A as Dt}from"./ArrowBackOutline-C5QuifMF.js";import{A as Re}from"./AddOutline-B-id1ApB.js";import{N as Rt,a as Ut}from"./CollapseItem-DXFot1jJ.js";import{_ as Y,a as x}from"./Grid-CNbyDJRX.js";import{N as me}from"./Switch-Dznk0CX3.js";import{N as ie}from"./InputNumber-DRvou0Uu.js";import{I as Ae}from"./InformationCircleOutline-v7Gk8MOG.js";import{N as La}from"./Code-B7-WNvvt.js";import{R as $a}from"./ReloadOutline-DA727sS4.js";import"./index-DR_R-bYe.js";import"./Checkbox-CEPM1LtD.js";import"./Radio-j9RXIevN.js";import"./RadioGroup-CXVTQ2cd.js";import"./prop-NnGblK-3.js";import"./download-C2161hUv.js";function Ma(n,c){const o=+Ve(n)-+Ve(c);return o<0?-1:o>0?1:o}function Ba(n){return c=>{const p=(n?Math[n]:Math.trunc)(c);return p===0?0:p}}function Va(n,c,o){const p=Qt(),a=(o==null?void 0:o.locale)??p.locale??Xt,f=Ma(n,c);if(isNaN(f))throw new RangeError("Invalid time value");const g=Object.assign({},o,{addSuffix:o==null?void 0:o.addSuffix,comparison:f}),[y,C]=ea(o==null?void 0:o.in,...f>0?[c,n]:[n,c]),b=Ba((o==null?void 0:o.roundingMethod)??"round"),m=C.getTime()-y.getTime(),D=m/dt,w=yt(C)-yt(y),k=(m-w)/dt,h=o==null?void 0:o.unit;let E;if(h?E=h:D<1?E="second":D<60?E="minute":D<it?E="hour":k<ct?E="day":k<ut?E="month":E="year",E==="second"){const R=b(m/1e3);return a.formatDistance("xSeconds",R,g)}else if(E==="minute"){const R=b(D);return a.formatDistance("xMinutes",R,g)}else if(E==="hour"){const R=b(D/60);return a.formatDistance("xHours",R,g)}else if(E==="day"){const R=b(k/it);return a.formatDistance("xDays",R,g)}else if(E==="month"){const R=b(k/ct);return R===12&&h!=="month"?a.formatDistance("xYears",1,g):a.formatDistance("xMonths",R,g)}else{const R=b(k/ut);return a.formatDistance("xYears",R,g)}}function bt(n,c){return Ve(n*1e3,c==null?void 0:c.in)}const Ka=Ke("collapse-transition",{width:"100%"},[ta()]),qa=Object.assign(Object.assign({},Oe.props),{show:{type:Boolean,default:!0},appear:Boolean,collapsed:{type:Boolean,default:void 0}}),Ja=ne({name:"CollapseTransition",props:qa,inheritAttrs:!1,setup(n){const{mergedClsPrefixRef:c,inlineThemeDisabled:o,mergedRtlRef:p}=We(n),a=Oe("CollapseTransition","-collapse-transition",Ka,na,n,c),f=sa("CollapseTransition",p,c),g=M(()=>n.collapsed!==void 0?n.collapsed:n.show),y=M(()=>{const{self:{bezier:b}}=a.value;return{"--n-bezier":b}}),C=o?Ct("collapse-transition",void 0,y,n):void 0;return{rtlEnabled:f,mergedShow:g,mergedClsPrefix:c,cssVars:o?void 0:y,themeClass:C==null?void 0:C.themeClass,onRender:C==null?void 0:C.onRender}},render(){return N(la,{appear:this.appear},{default:()=>{var n;if(this.mergedShow)return(n=this.onRender)===null||n===void 0||n.call(this),N("div",aa({class:[`${this.mergedClsPrefix}-collapse-transition`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse-transition--rtl`,this.themeClass],style:this.cssVars},this.$attrs),this.$slots)}})}}),At=ra("n-popconfirm"),Ot={positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0}},St=oa(Ot),Ya=ne({name:"NPopconfirmPanel",props:Ot,setup(n){const{localeRef:c}=qe("Popconfirm"),{inlineThemeDisabled:o}=We(),{mergedClsPrefixRef:p,mergedThemeRef:a,props:f}=da(At),g=M(()=>{const{common:{cubicBezierEaseInOut:C},self:{fontSize:b,iconSize:m,iconColor:D}}=a.value;return{"--n-bezier":C,"--n-font-size":b,"--n-icon-size":m,"--n-icon-color":D}}),y=o?Ct("popconfirm-panel",void 0,g,f):void 0;return Object.assign(Object.assign({},qe("Popconfirm")),{mergedClsPrefix:p,cssVars:o?void 0:g,localizedPositiveText:M(()=>n.positiveText||c.value.positiveText),localizedNegativeText:M(()=>n.negativeText||c.value.negativeText),positiveButtonProps:pt(f,"positiveButtonProps"),negativeButtonProps:pt(f,"negativeButtonProps"),handlePositiveClick(C){n.onPositiveClick(C)},handleNegativeClick(C){n.onNegativeClick(C)},themeClass:y==null?void 0:y.themeClass,onRender:y==null?void 0:y.onRender})},render(){var n;const{mergedClsPrefix:c,showIcon:o,$slots:p}=this,a=vt(p.action,()=>this.negativeText===null&&this.positiveText===null?[]:[this.negativeText!==null&&N(G,Object.assign({size:"small",onClick:this.handleNegativeClick},this.negativeButtonProps),{default:()=>this.localizedNegativeText}),this.positiveText!==null&&N(G,Object.assign({size:"small",type:"primary",onClick:this.handlePositiveClick},this.positiveButtonProps),{default:()=>this.localizedPositiveText})]);return(n=this.onRender)===null||n===void 0||n.call(this),N("div",{class:[`${c}-popconfirm__panel`,this.themeClass],style:this.cssVars},ia(p.default,f=>o||f?N("div",{class:`${c}-popconfirm__body`},o?N("div",{class:`${c}-popconfirm__icon`},vt(p.icon,()=>[N(ca,{clsPrefix:c},{default:()=>N(ua,null)})])):null,f):null),a?N("div",{class:[`${c}-popconfirm__action`]},a):null)}}),ja=Ke("popconfirm",[Me("body",`
 font-size: var(--n-font-size);
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 position: relative;
 `,[Me("icon",`
 display: flex;
 font-size: var(--n-icon-size);
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 margin: 0 8px 0 0;
 `)]),Me("action",`
 display: flex;
 justify-content: flex-end;
 `,[ht("&:not(:first-child)","margin-top: 8px"),Ke("button",[ht("&:not(:last-child)","margin-right: 8px;")])])]),Wa=Object.assign(Object.assign(Object.assign({},Oe.props),ma),{positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},trigger:{type:String,default:"click"},positiveButtonProps:Object,negativeButtonProps:Object,onPositiveClick:Function,onNegativeClick:Function}),Za=ne({name:"Popconfirm",props:Wa,slots:Object,__popover__:!0,setup(n){const{mergedClsPrefixRef:c}=We(),o=Oe("Popconfirm","-popconfirm",ja,fa,n,c),p=F(null);function a(y){var C;if(!(!((C=p.value)===null||C===void 0)&&C.getMergedShow()))return;const{onPositiveClick:b,"onUpdate:show":m}=n;Promise.resolve(b?b(y):!0).then(D=>{var w;D!==!1&&((w=p.value)===null||w===void 0||w.setShow(!1),m&&ft(m,!1))})}function f(y){var C;if(!(!((C=p.value)===null||C===void 0)&&C.getMergedShow()))return;const{onNegativeClick:b,"onUpdate:show":m}=n;Promise.resolve(b?b(y):!0).then(D=>{var w;D!==!1&&((w=p.value)===null||w===void 0||w.setShow(!1),m&&ft(m,!1))})}return ga(At,{mergedThemeRef:o,mergedClsPrefixRef:c,props:n}),{setShow(y){var C;(C=p.value)===null||C===void 0||C.setShow(y)},syncPosition(){var y;(y=p.value)===null||y===void 0||y.syncPosition()},mergedTheme:o,popoverInstRef:p,handlePositiveClick:a,handleNegativeClick:f}},render(){const{$slots:n,$props:c,mergedTheme:o}=this;return N(va,Object.assign({},pa(c,St),{theme:o.peers.Popover,themeOverrides:o.peerOverrides.Popover,internalExtraClass:["popconfirm"],ref:"popoverInstRef"}),{trigger:n.trigger,default:()=>{const p=ha(c,St);return N(Ya,Object.assign({},p,{onPositiveClick:this.handlePositiveClick,onNegativeClick:this.handleNegativeClick}),n)}})}}),Qa={time:{type:[Number,Date],default:void 0},type:{type:String,default:"datetime"},to:{type:[Number,Date],default:void 0},unix:Boolean,format:String,text:Boolean,timeZone:String},pe=ne({name:"Time",props:Qa,setup(n){const c=Date.now(),{localeRef:o,dateLocaleRef:p}=qe("Time"),a=M(()=>{const{timeZone:b}=n;return b?(m,D,w)=>xa(m,b,D,w):Da}),f=M(()=>({locale:p.value.locale})),g=M(()=>{const{time:b}=n;return n.unix?b===void 0?c:bt(typeof b=="number"?b:b.valueOf()):b??c}),y=M(()=>{const{to:b}=n;return n.unix?b===void 0?c:bt(typeof b=="number"?b:b.valueOf()):b??c});return{renderedTime:M(()=>n.format?a.value(g.value,n.format,f.value):n.type==="date"?a.value(g.value,o.value.dateFormat,f.value):n.type==="datetime"?a.value(g.value,o.value.dateTimeFormat,f.value):Va(g.value,y.value,{addSuffix:!0,locale:p.value.locale}))}},render(){return this.text?_(this.renderedTime):N("time",[this.renderedTime])}}),Q=ya("/gateway/hub0041"),Xa=async n=>Q.post("/queryServices",n),Ft=async n=>Q.post("/getService",{serviceName:n}),el=async n=>Q.post("/createService",n),tl=async n=>Q.post("/updateService",n),al=async n=>Q.post("/deleteService",{serviceName:n}),st=async n=>Q.post("/queryServiceInstances",n),ll=async n=>Q.post("/getServiceInstance",{serviceInstanceId:n}),sl=async n=>Q.post("/createServiceInstance",n),Ht=async n=>Q.post("/updateServiceInstance",n),nl=async n=>Q.post("/deleteServiceInstance",{serviceInstanceId:n}),rl=async(n,c)=>Q.post("/updateInstanceHealthStatus",{serviceInstanceId:n,healthStatus:c}),zt=async()=>Q.post("/getServiceGroups",{}),ol=async n=>Q.post("/queryServiceEvents",n),Gt=async n=>await Q.post("/getServiceEvent",{serviceEventId:n}),_t=async n=>{const c=await Ft(n);if(!c.oK)return c;const o=await st({serviceName:n,pageIndex:1,pageSize:1e3});let p={},a=[];try{p=typeof c.bizData=="string"?JSON.parse(c.bizData):c.bizData}catch(g){console.error("Failed to parse service data:",g)}try{if(o.oK&&o.bizData){const g=typeof o.bizData=="string"?JSON.parse(o.bizData):o.bizData;a=(g==null?void 0:g.items)||[],console.log("Raw instances response:",o),console.log("Parsed instances data:",g),console.log("Final instances data:",a),a.length>0&&(console.log("First instance sample:",a[0]),console.log("Instance keys:",Object.keys(a[0])))}}catch(g){console.error("Failed to parse instances data:",g)}const f={...p,instances:a,statistics:il(a)};return{oK:!0,state:!0,bizData:JSON.stringify(f),extObj:null,pageQueryData:"",messageId:"",errMsg:"",popMsg:"",extMsg:"",pkey1:"",pkey2:"",pkey3:"",pkey4:"",pkey5:"",pkey6:""}},il=n=>({totalInstances:n.length,healthyInstances:n.filter(c=>c.healthStatus==="HEALTHY").length,unhealthyInstances:n.filter(c=>c.healthStatus==="UNHEALTHY").length,upInstances:n.filter(c=>c.instanceStatus==="UP").length,downInstances:n.filter(c=>c.instanceStatus==="DOWN").length}),cl=()=>{const{t:n}=ue("hub0041"),c=he(),o=F([]),p=F(!1),a=F(0),f=Ue({serviceName:"",groupName:"",protocolType:void 0,activeFlag:void 0}),{naiveConfig:g,queryParams:y,setTotal:C,resetPagination:b}=Pt({initialPage:1,initialPageSize:12,onPageChange:r=>{D()},onPageSizeChange:(r,S)=>{D()}}),m=M(()=>a.value),D=async()=>{try{p.value=!0;const r={...f,pageIndex:y.value.pageIndex,pageSize:y.value.pageSize},S=await Xa(r);if(Ce(S)){const T=ge(S,[]);o.value=T||[];let z=0;try{z=Tt(S).totalCount||0}catch(U){console.warn("解析分页信息失败:",U),z=(T==null?void 0:T.length)||0}a.value=z,C(z)}else c.error(Te(S,n("fetchServicesFailed"))),o.value=[],a.value=0,C(0)}catch(r){console.error("Failed to fetch services:",r),c.error(n("fetchServicesFailed")),o.value=[],a.value=0,C(0)}finally{p.value=!1}};return{services:o,loading:p,searchParams:f,naiveConfig:g,totalCount:m,fetchServices:D,refreshService:async r=>{try{const S=await Ft(r);Ce(S)?(c.success(n("refreshServiceSuccess")),await D()):c.error(Te(S,n("refreshServiceFailed")))}catch(S){console.error("Failed to refresh service:",S),c.error(n("refreshServiceFailed"))}},handleSearch:()=>{b(),D()},handleReset:()=>{Object.assign(f,{serviceName:"",groupName:"",protocolType:void 0,activeFlag:void 0}),b(),D()},handleRefresh:()=>{D()},handleDeleteService:async r=>{try{const S=await al(r);if(Ce(S))return c.success(n("deleteServiceSuccess")),await D(),{success:!0,message:n("deleteServiceSuccess")};{const T=Te(S,n("deleteServiceFailed"));return c.error(T),{success:!1,message:T}}}catch(S){console.error("Failed to delete service:",S);const T=n("deleteServiceFailed");return c.error(T),{success:!1,message:T}}}}},ul=()=>{const{t:n}=ue("hub0041"),c=he(),o=F(null),p=F(!1),a=F(!1),f=async w=>{try{p.value=!0;const k=await _t(w);if(k.oK)try{o.value=ge(k)}catch(h){console.error("Failed to parse service detail data:",h),o.value=null}else c.error(n("fetchDetailFailed")),o.value=null}catch(k){console.error("Failed to fetch service detail:",k),c.error(n("fetchDetailFailed")),o.value=null}finally{p.value=!1}},g=async w=>{if(o.value)try{a.value=!0;const k=await st({serviceName:w});if(k.oK)try{const h=Et(k.bizData);o.value.instances=h,y(),c.success(n("refreshInstancesSuccess"))}catch(h){console.error("Failed to parse instances data:",h)}else c.error(n("refreshInstancesFailed"))}catch(k){console.error("Failed to refresh service instances:",k),c.error(n("refreshInstancesFailed"))}finally{a.value=!1}},y=()=>{if(!o.value)return;const w=o.value.instances,k={totalInstances:w.length,healthyInstances:w.filter(h=>h.healthStatus==="HEALTHY").length,unhealthyInstances:w.filter(h=>h.healthStatus==="UNHEALTHY").length,upInstances:w.filter(h=>h.instanceStatus==="UP").length,downInstances:w.filter(h=>h.instanceStatus==="DOWN").length};o.value.statistics=k};return{serviceDetail:o,loading:p,instancesLoading:a,fetchServiceDetail:f,refreshServiceInstances:g,performHealthCheck:async(w,k)=>{try{let h;if(k)h=await rl(k,"HEALTHY");else if(h=await _t(w),h.oK)try{o.value=ge(h)}catch(E){console.error("Failed to parse health check data:",E)}h.oK?(c.success(n("healthCheckSuccess")),k&&await g(w)):c.error(n("healthCheckFailed"))}catch(h){console.error("Failed to perform health check:",h),c.error(n("healthCheckFailed"))}},updateInstanceStatus:async(w,k,h)=>{try{const E={...k,instanceStatus:h};(await Ht(E)).oK?(c.success(n(h==="UP"?"bringUpSuccess":"takeDownSuccess")),await g(w)):c.error(n(h==="UP"?"bringUpFailed":"takeDownFailed"))}catch(E){console.error(`Failed to ${h==="UP"?"bring up":"take down"} instance:`,E),c.error(n(h==="UP"?"bringUpFailed":"takeDownFailed"))}},getInstanceMetadata:async w=>{try{const k=await ll(w);if(k.oK)try{return ge(k,null)}catch(h){return console.error("Failed to parse metadata:",h),null}else return c.error(n("fetchMetadataFailed")),null}catch(k){return console.error("Failed to fetch instance metadata:",k),c.error(n("fetchMetadataFailed")),null}},clearServiceDetail:()=>{o.value=null}}};function Lt(){const{t:n}=ue("hub0041"),c=he(),o=F(!1),p=F(null),a=F([]),f=F(0),g=S=>S.includes("GROUP_")?Ge:S.includes("SERVICE_")?tt:S.includes("INSTANCE_")?et:Ae,y=S=>S==="GROUP_CREATE"?"success":S==="GROUP_UPDATE"?"info":S==="GROUP_DELETE"?"error":S==="SERVICE_CREATE"?"success":S==="SERVICE_UPDATE"?"info":S==="SERVICE_DELETE"?"error":S==="INSTANCE_REGISTER"?"success":S==="INSTANCE_DEREGISTER"?"error":S==="INSTANCE_HEARTBEAT"?"default":S==="INSTANCE_HEALTH_CHANGE"?"warning":S==="INSTANCE_STATUS_CHANGE"?"info":"default";let C=null;const{naiveConfig:b,queryParams:m,setTotal:D,resetPagination:w}=Pt({initialPage:1,initialPageSize:10,onPageChange:S=>{C&&C()},onPageSizeChange:(S,T)=>{C&&C()}}),k=S=>{C=S},h=S=>[{title:n("columns.eventType"),key:"eventType",width:180,minWidth:160,render(T){return N(K,{type:y(T.eventType),bordered:!1,round:!0,size:"small"},{default:()=>T.eventType,icon:()=>N(O,{},{default:()=>N(g(T.eventType))})})}},{title:n("columns.eventMessage"),key:"eventMessage",minWidth:200,ellipsis:{tooltip:{placement:"bottom",width:"trigger",style:{maxWidth:"400px"}}},render(T){return T.eventMessage||"-"}},{title:n("columns.eventSource"),key:"eventSource",width:140,ellipsis:{tooltip:!0}},{title:n("columns.serviceName"),key:"serviceName",width:120,ellipsis:{tooltip:!0}},{title:n("columns.hostAddress"),key:"hostAddress",width:150,ellipsis:{tooltip:!0},render(T){return T.hostAddress?`${T.hostAddress}:${T.portNumber||"-"}`:"-"}},{title:"服务运行节点IP",key:"nodeIpAddress",width:140,ellipsis:{tooltip:!0},render(T){return T.nodeIpAddress||"-"}},{title:n("columns.eventTime"),key:"eventTime",width:160,sorter:!0,render(T){return N(pe,{time:new Date(T.eventTime),format:"yyyy-MM-dd HH:mm:ss"})}},{title:n("columns.actions"),key:"actions",width:80,fixed:"right",render(T){return N(ce,{justify:"center",size:"small"},{default:()=>[N(ve,{},{trigger:()=>N(G,{quaternary:!0,circle:!0,size:"small",onClick:()=>S(T)},{icon:()=>N(O,{size:18},{default:()=>N(Ae)})}),default:()=>n("actions.view")})]})}}],E=async S=>{o.value=!0,p.value=null;try{const T=await ol(S);if(Ce(T)){const z=ge(T,[]);let U=0;try{U=Tt(T).totalCount||0}catch(P){console.warn("解析分页信息失败:",P),U=(z==null?void 0:z.length)||0}return{data:z,totalCount:U}}else{const z=Te(T,n("fetchServiceEventsFailed"));throw c.error(z),p.value=new Error(z),new Error(z)}}catch(T){throw p.value=T,console.error("Failed to fetch service events:",T),T}finally{o.value=!1}};return{events:a,loading:o,error:p,total:f,naiveConfig:b,queryParams:m,setTotal:D,resetPagination:w,setPaginationCallback:k,fetchServiceEvents:E,getServiceEventById:async S=>{o.value=!0,p.value=null;try{const T=await Gt(S);if(Ce(T))return ge(T);{const z=Te(T,n("getServiceEventFailed"));throw c.error(z),p.value=new Error(z),new Error(z)}}catch(T){throw p.value=T,console.error("Failed to get service event by id:",T),T}finally{o.value=!1}},loadEvents:async(S,T,z)=>{try{const U={pageIndex:m.value.pageIndex,pageSize:m.value.pageSize,serviceInstanceId:T,serviceGroupId:S||void 0,...z},{data:P,totalCount:L}=await E(U);a.value=P,f.value=L,D(L)}catch(U){c.error(n("messages.loadError")),console.error("加载服务事件列表失败:",U)}},createTableColumns:h,getEventTypeIcon:g,getEventTypeColor:y}}const dl={class:"card-content"},vl={class:"card-header"},pl={class:"service-name-row"},hl={class:"name-with-badge"},fl={class:"service-meta"},ml={class:"group-info"},gl={class:"group-name"},yl={key:0,class:"group-id"},bl={key:0,class:"tenant-info"},Sl={class:"tenant-tag"},_l={class:"tenant-name"},Cl={key:0,class:"service-description"},Tl={class:"instance-count"},El={class:"instance-count-item"},Nl={class:"count-text"},Il={class:"card-footer"},wl={class:"footer-item"},kl={class:"footer-text"},Pl={class:"footer-item"},xl=ne({__name:"ServiceCard",props:{service:{}},emits:["viewDetail","edit","delete","viewEvents"],setup(n,{emit:c}){const o=n,p=c,{t:a}=ue("hub0041"),f=M(()=>[{label:a("actions.viewEvents"),key:"viewEvents",icon:()=>N(O,null,{default:()=>N(Pa)})},{label:a("actions.edit"),key:"edit",icon:()=>N(O,null,{default:()=>N(xt)})},{label:a("actions.delete"),key:"delete",icon:()=>N(O,null,{default:()=>N(Ye)})}]),g=()=>o.service.activeFlag==="Y"?a("status.Y"):a("status.N"),y=w=>{switch(w){case"HTTP":return"success";case"HTTPS":return"warning";case"TCP":return"info";case"UDP":return"default";case"GRPC":return"error";default:return"default"}},C=w=>w.length>8?w.substring(0,8)+"...":w,b=w=>({ROUND_ROBIN:a("roundRobin"),WEIGHTED_ROUND_ROBIN:a("weightedRoundRobin"),LEAST_CONNECTIONS:a("leastConnections"),RANDOM:a("random"),IP_HASH:a("ipHash")})[w]||w,m=()=>o.service.instances&&Array.isArray(o.service.instances)?o.service.instances.length:o.service.instanceCount||0,D=w=>{w==="edit"?p("edit",o.service):w==="delete"?p("delete",o.service):w==="viewEvents"&&p("viewEvents",o.service)};return(w,k)=>(A(),B(e(j),{class:"service-card",hoverable:"",bordered:!0,onClick:k[1]||(k[1]=h=>w.$emit("viewDetail",n.service))},{default:l(()=>[v("div",dl,[v("div",vl,[v("div",pl,[v("div",hl,[t(e(se),{class:"service-name",depth:1},{default:l(()=>[_(d(n.service.serviceName),1)]),_:1}),t(e(K),{size:"small",type:n.service.activeFlag==="Y"?"success":"error",round:""},{default:l(()=>[_(d(g()),1)]),_:1},8,["type"])]),v("div",{class:"actions-menu",onClick:k[0]||(k[0]=ba(()=>{},["stop"]))},[t(e(Sa),{options:f.value,trigger:"click",placement:"bottom-end",onSelect:D},{default:l(()=>[t(e(G),{quaternary:"",circle:"",size:"small"},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(wa))]),_:1})]),_:1})]),_:1},8,["options"])])]),v("div",fl,[t(e(K),{size:"tiny",type:y(n.service.protocolType)},{default:l(()=>[_(d(n.service.protocolType),1)]),_:1},8,["type"]),t(e(ve),{trigger:"hover",placement:"bottom"},{trigger:l(()=>[v("div",ml,[t(e(O),{size:"14",color:"var(--text-color-3)"},{default:l(()=>[t(e(Ge))]),_:1}),v("span",gl,d(n.service.groupName),1),n.service.serviceGroupId?(A(),J("span",yl,"("+d(C(n.service.serviceGroupId))+")",1)):Z("",!0)])]),default:l(()=>[_(" "+d(e(a)("serviceGroup"))+": "+d(n.service.groupName),1)]),_:1}),n.service.tenantId&&n.service.tenantId!=="default"?(A(),J("div",bl,[t(e(ve),{trigger:"hover",placement:"bottom"},{trigger:l(()=>[v("div",Sl,[t(e(O),{size:"14",color:"var(--text-color-3)"},{default:l(()=>[t(e(ka))]),_:1}),v("span",_l,d(n.service.tenantId),1)])]),default:l(()=>[_(" "+d(e(a)("namespace"))+": "+d(n.service.tenantId),1)]),_:1})])):Z("",!0)])]),n.service.serviceDescription?(A(),J("div",Cl,[t(e(Ra),{"line-clamp":2,tooltip:{width:250}},{default:l(()=>[_(d(n.service.serviceDescription),1)]),_:1})])):Z("",!0),v("div",Tl,[v("div",El,[t(e(O),{size:"18",color:"var(--info-color)"},{default:l(()=>[t(e(et))]),_:1}),v("span",Nl,d(m())+" "+d(e(a)("instanceCount")),1)])]),v("div",Il,[t(e(ve),{trigger:"hover"},{trigger:l(()=>[v("div",wl,[t(e(O),{size:"14"},{default:l(()=>[t(e(tt))]),_:1}),v("span",kl,d(b(n.service.loadBalanceStrategy)),1)])]),default:l(()=>[_(" "+d(e(a)("loadBalanceStrategy")),1)]),_:1}),t(e(ve),{trigger:"hover"},{trigger:l(()=>[v("div",Pl,[t(e(O),{size:"14"},{default:l(()=>[t(e(Ne))]),_:1}),t(e(pe),{class:"footer-text",time:new Date(n.service.editTime),type:"relative"},null,8,["time"])])]),default:l(()=>[_(" "+d(e(a)("lastUpdated")),1)]),_:1})])])]),_:1}))}}),Dl=fe(xl,[["__scopeId","data-v-a1d6250e"]]),Rl=(n,c)=>[{title:n("columns.serviceInstanceId"),key:"serviceInstanceId",width:280,ellipsis:{tooltip:!0},render:o=>N("span",{style:{fontFamily:"monospace",fontSize:"13px"}},o.serviceInstanceId)},{title:n("columns.hostAddress"),key:"hostAddress",width:140,render:o=>N("span",{style:{fontFamily:"monospace"}},o.hostAddress)},{title:n("columns.portNumber"),key:"portNumber",width:80,align:"center",render:o=>N("span",{style:{fontFamily:"monospace",fontWeight:"bold"}},o.portNumber.toString())},{title:n("columns.instanceStatus"),key:"instanceStatus",width:100,align:"center",render:o=>{const p=Ul(o.instanceStatus);return N(K,{type:p.type,size:"small",class:`status-${o.instanceStatus.toLowerCase()}`},{default:()=>n(`status.${o.instanceStatus}`),icon:()=>N(O,{size:14,component:p.icon})})}},{title:n("columns.healthStatus"),key:"healthStatus",width:100,align:"center",render:o=>{const p=Al(o.healthStatus);return N(K,{type:p.type,size:"small",class:`health-${o.healthStatus.toLowerCase()}`},{default:()=>n(`status.${o.healthStatus}`),icon:()=>N(O,{size:14,component:p.icon})})}},{title:n("columns.weightValue"),key:"weightValue",width:80,align:"center",render:o=>N("span",{style:{fontWeight:"600"}},o.weightValue.toString())},{title:n("columns.clientType"),key:"clientType",width:100,align:"center",render:o=>N(K,{type:"info",size:"small"},{default:()=>o.clientType})},{title:n("columns.tempInstanceFlag"),key:"tempInstanceFlag",width:100,align:"center",render:o=>{const p=o.tempInstanceFlag==="Y";return N(K,{type:p?"warning":"success",size:"small"},{default:()=>n(p?"status.temporary":"status.permanent")})}},{title:n("columns.contextPath"),key:"contextPath",width:120,ellipsis:{tooltip:!0},render:o=>N("span",{style:{fontFamily:"monospace"}},o.contextPath||"/")},{title:n("columns.registerTime"),key:"registerTime",width:160,render:o=>N(pe,{time:new Date(o.registerTime)})},{title:n("columns.lastHeartbeatTime"),key:"lastHeartbeatTime",width:160,render:o=>o.lastHeartbeatTime?N(pe,{time:new Date(o.lastHeartbeatTime)}):N("span",{style:{color:"var(--text-color-3)"}},n("table.heartbeatTimeout"))},{title:n("columns.lastHealthCheckTime"),key:"lastHealthCheckTime",width:160,render:o=>o.lastHealthCheckTime?N(pe,{time:new Date(o.lastHealthCheckTime)}):N("span",{style:{color:"var(--text-color-3)"}},n("table.noHealthCheck"))},{title:n("columns.actions"),key:"actions",width:180,align:"center",fixed:"right",render:o=>N(Nt,{size:"small"},{default:()=>[N(ve,{trigger:"hover"},{trigger:()=>N(G,{size:"small",type:"primary",quaternary:!0,onClick:()=>c==null?void 0:c("health-check",o)},{icon:()=>N(O,{component:Aa})}),default:()=>n("actions.healthCheck")}),o.instanceStatus==="DOWN"?N(ve,{trigger:"hover"},{trigger:()=>N(G,{size:"small",type:"success",quaternary:!0,onClick:()=>c==null?void 0:c("up",o)},{icon:()=>N(O,{component:Fa})}),default:()=>n("actions.bringUp")}):null,o.instanceStatus==="UP"?N(ve,{trigger:"hover"},{trigger:()=>N(G,{size:"small",type:"error",quaternary:!0,onClick:()=>c==null?void 0:c("down",o)},{icon:()=>N(O,{component:Ha})}),default:()=>n("actions.takeDown")}):null].filter(Boolean)})}],Ul=n=>{switch(n){case"UP":return{type:"success",text:"UP",icon:at};case"DOWN":return{type:"error",text:"DOWN",icon:je};case"STARTING":return{type:"warning",text:"STARTING",icon:Ne};case"OUT_OF_SERVICE":return{type:"default",text:"OUT_OF_SERVICE",icon:je};default:return{type:"default",text:n,icon:Ne}}},Al=n=>{switch(n){case"HEALTHY":return{type:"success",text:"HEALTHY",icon:at};case"UNHEALTHY":return{type:"error",text:"UNHEALTHY",icon:je};case"UNKNOWN":return{type:"default",text:"UNKNOWN",icon:Ne};default:return{type:"default",text:n,icon:Ne}}},Ol={class:"service-info-section"},Fl={class:"section-title"},Hl={class:"instances-section"},zl={class:"section-header"},Gl={class:"section-title"},Ll={class:"health-check-section"},$l={class:"section-title"},Ml=ne({__name:"ServiceDetailDrawer",props:{show:{type:Boolean},serviceName:{}},emits:["update:show"],setup(n,{emit:c}){const o=n,p=c,{t:a}=ue("hub0041"),f=M({get:()=>o.show,set:U=>p("update:show",U)}),{serviceDetail:g,loading:y,instancesLoading:C,fetchServiceDetail:b,refreshServiceInstances:m,performHealthCheck:D,updateInstanceStatus:w}=ul(),h=Rl(a,async(U,P)=>{if(o.serviceName)switch(U){case"health-check":await D(o.serviceName,P.serviceInstanceId);break;case"up":await w(o.serviceName,P,"UP");break;case"down":await w(o.serviceName,P,"DOWN");break}}),E=F(!1);Ee([()=>o.serviceName,()=>o.show],async([U,P])=>{if(U&&P&&!E.value)try{E.value=!0,await b(U),g.value&&await m(U)}finally{E.value=!1}},{immediate:!0});const R=async()=>{o.serviceName&&await m(o.serviceName)},r=U=>{switch(U){case"HTTP":return"success";case"HTTPS":return"warning";case"TCP":return"info";case"UDP":return"default";case"GRPC":return"error";default:return"default"}},S=U=>({ROUND_ROBIN:a("hub0041.roundRobin"),WEIGHTED_ROUND_ROBIN:a("hub0041.weightedRoundRobin"),LEAST_CONNECTIONS:a("hub0041.leastConnections"),RANDOM:a("hub0041.random"),IP_HASH:a("hub0041.ipHash")})[U]||U,T=U=>({ACTIVE:a("healthCheckModes.active"),PASSIVE:a("healthCheckModes.passive")})[U]||U,z=U=>({INTERNAL:a("registryTypes.INTERNAL"),NACOS:a("registryTypes.NACOS"),CONSUL:a("registryTypes.CONSUL"),EUREKA:a("registryTypes.EUREKA"),ETCD:a("registryTypes.ETCD"),ZOOKEEPER:a("registryTypes.ZOOKEEPER")})[U]||U;return(U,P)=>(A(),B(e(Ze),{show:f.value,"onUpdate:show":P[0]||(P[0]=L=>f.value=L),width:900,placement:"right",closable:!0},{default:l(()=>[t(e(It),{title:e(a)("serviceDetail"),closable:""},{default:l(()=>[e(g)?(A(),J(Fe,{key:0},[v("div",Ol,[v("h3",Fl,d(e(a)("basicInfo")),1),t(e(Be),{column:2,"label-placement":"left",bordered:""},{default:l(()=>[t(e(ee),{label:e(a)("serviceName")},{default:l(()=>[_(d(e(g).serviceName),1)]),_:1},8,["label"]),t(e(ee),{label:e(a)("columns.groupName")},{default:l(()=>[_(d(e(g).groupName),1)]),_:1},8,["label"]),t(e(ee),{label:e(a)("columns.protocolType")},{default:l(()=>[t(e(K),{type:r(e(g).protocolType)},{default:l(()=>[_(d(e(g).protocolType),1)]),_:1},8,["type"])]),_:1},8,["label"]),t(e(ee),{label:e(a)("columns.loadBalanceStrategy")},{default:l(()=>[t(e(K),{type:"info"},{default:l(()=>[_(d(S(e(g).loadBalanceStrategy)),1)]),_:1})]),_:1},8,["label"]),t(e(ee),{label:e(a)("columns.contextPath")},{default:l(()=>[_(d(e(g).contextPath||"/"),1)]),_:1},8,["label"]),t(e(ee),{label:e(a)("healthCheckUrl")},{default:l(()=>[_(d(e(g).healthCheckUrl),1)]),_:1},8,["label"]),t(e(ee),{label:e(a)("columns.registryType")},{default:l(()=>[t(e(K),{type:"primary"},{default:l(()=>[_(d(z(e(g).registryType)),1)]),_:1})]),_:1},8,["label"])]),_:1}),t(e(Be),{column:1,"label-placement":"left",bordered:"",style:{"margin-top":"16px"}},{default:l(()=>[t(e(ee),{label:e(a)("serviceDescription")},{default:l(()=>[_(d(e(g).serviceDescription||e(a)("noDescription")),1)]),_:1},8,["label"])]),_:1})]),v("div",Hl,[v("div",zl,[v("h3",Gl,d(e(a)("instanceList")),1),t(e(G),{size:"small",onClick:R,loading:e(C)},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(we))]),_:1})]),default:l(()=>[_(" "+d(e(a)("actions.refresh")),1)]),_:1},8,["loading"])]),t(e(lt),{columns:e(h),data:e(g).instances,loading:e(C),pagination:!1,size:"small",style:{width:"100%","overflow-x":"auto"},title:e(a)("instanceList"),"scroll-x":1800},null,8,["columns","data","loading","title"])]),v("div",Ll,[v("h3",$l,d(e(a)("healthCheckConfig")),1),t(e(Be),{column:3,"label-placement":"left",bordered:""},{default:l(()=>[t(e(ee),{label:e(a)("healthCheckInterval")},{default:l(()=>[_(d(e(g).healthCheckIntervalSeconds)+"s ",1)]),_:1},8,["label"]),t(e(ee),{label:e(a)("healthCheckTimeout")},{default:l(()=>[_(d(e(g).healthCheckTimeoutSeconds)+"s ",1)]),_:1},8,["label"]),t(e(ee),{label:e(a)("healthCheckType")},{default:l(()=>[t(e(K),{type:"info"},{default:l(()=>[_(d(e(g).healthCheckType),1)]),_:1})]),_:1},8,["label"]),t(e(ee),{label:e(a)("healthCheckMode")},{default:l(()=>[t(e(K),{type:"success"},{default:l(()=>[_(d(T(e(g).healthCheckMode)),1)]),_:1})]),_:1},8,["label"]),t(e(ee),{label:e(a)("lastUpdateTime")},{default:l(()=>[t(e(pe),{time:new Date(e(g).editTime)},null,8,["time"])]),_:1},8,["label"])]),_:1})])],64)):e(y)?(A(),B(e(Ie),{key:1,size:"large",style:{width:"100%",padding:"60px 0"}})):(A(),B(e(He),{key:2,description:e(a)("serviceNotFound")},null,8,["description"]))]),_:1},8,["title"])]),_:1},8,["show"]))}}),Bl=fe(Ml,[["__scopeId","data-v-82cf8a54"]]),Vl={class:"dialog-content"},Kl={class:"search-section"},ql={class:"group-list"},Jl={key:1,class:"group-items"},Yl=["onClick"],jl={class:"group-header"},Wl={class:"group-name"},Zl={class:"group-description"},Ql=ne({__name:"ServiceGroupSelectionDialog",props:{show:{type:Boolean},selectedGroupId:{default:""}},emits:["update:show","confirm"],setup(n,{emit:c}){const o=n,p=c,{t:a}=ue("hub0041"),f=he(),g=M({get:()=>o.show,set:P=>p("update:show",P)}),y=F(!1),C=F([]),b=F(null),m=F(""),D=F(""),w=[{label:a("groupType.BUSINESS"),value:"BUSINESS"},{label:a("groupType.SYSTEM"),value:"SYSTEM"},{label:a("groupType.TEST"),value:"TEST"}],k=M(()=>{let P=C.value;if(m.value.trim()){const L=m.value.toLowerCase();P=P.filter($=>{var re;return $.groupName.toLowerCase().includes(L)||((re=$.groupDescription)==null?void 0:re.toLowerCase().includes(L))})}return D.value&&(P=P.filter(L=>L.groupType===D.value)),P=P.filter(L=>L.activeFlag==="Y"),P});Ee(()=>o.selectedGroupId,P=>{P&&C.value.length>0?b.value=C.value.find(L=>L.serviceGroupId===P)||null:b.value=null},{immediate:!0}),Ee(()=>o.show,P=>{P&&R()});const h=P=>{switch(P){case"BUSINESS":return"success";case"SYSTEM":return"warning";case"TEST":return"info";default:return"default"}},E=P=>a(`groupType.${P}`)||P,R=async()=>{try{y.value=!0;const P=await zt();if(P.oK){let L={};try{L=typeof P.bizData=="string"?JSON.parse(P.bizData):P.bizData,C.value=L||[],o.selectedGroupId&&(b.value=C.value.find($=>$.serviceGroupId===o.selectedGroupId)||null)}catch($){console.error("Failed to parse service groups data:",$),C.value=[]}}else f.error(a("fetchServiceGroupsFailed")),C.value=[]}catch(P){console.error("Failed to fetch service groups:",P),f.error(a("fetchServiceGroupsFailed")),C.value=[]}finally{y.value=!1}},r=()=>{},S=()=>{R()},T=P=>{b.value=P},z=()=>{b.value&&(p("confirm",b.value),g.value=!1)},U=()=>{g.value=!1};return ze(()=>{o.show&&R()}),(P,L)=>(A(),B(e(_a),{show:g.value,"onUpdate:show":L[2]||(L[2]=$=>g.value=$),class:"service-group-selection-dialog","mask-closable":!1,preset:"dialog",title:e(a)("selectServiceGroup"),style:{width:"800px"}},{action:l(()=>[t(e(ce),null,{default:l(()=>[t(e(G),{onClick:U},{default:l(()=>[_(d(e(a)("cancel")),1)]),_:1}),t(e(G),{type:"primary",onClick:z,disabled:!b.value},{default:l(()=>[_(d(e(a)("actions.confirm")),1)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[v("div",Vl,[v("div",Kl,[t(e(ce),{size:12},{default:l(()=>[t(e(H),{value:m.value,"onUpdate:value":L[0]||(L[0]=$=>m.value=$),placeholder:e(a)("searchGroupName"),clearable:"",style:{width:"240px"},onInput:r},{prefix:l(()=>[t(e(O),null,{default:l(()=>[t(e(Qe))]),_:1})]),_:1},8,["value","placeholder"]),t(e(W),{value:D.value,"onUpdate:value":[L[1]||(L[1]=$=>D.value=$),r],placeholder:e(a)("selectGroupType"),options:w,clearable:"",style:{width:"140px"}},null,8,["value","placeholder"]),t(e(G),{onClick:S,loading:y.value},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(we))]),_:1})]),default:l(()=>[_(" "+d(e(a)("actions.refresh")),1)]),_:1},8,["loading"])]),_:1})]),v("div",ql,[t(e(Ie),{show:y.value},{default:l(()=>[t(e(Ga),{style:{"max-height":"400px"}},{default:l(()=>[k.value.length===0&&!y.value?(A(),B(e(He),{key:0,description:e(a)("noServiceGroups")},null,8,["description"])):(A(),J("div",Jl,[(A(!0),J(Fe,null,Xe(k.value,$=>{var re,ye;return A(),J("div",{key:$.serviceGroupId,class:Ca(["group-item",{selected:((re=b.value)==null?void 0:re.serviceGroupId)===$.serviceGroupId}]),onClick:be=>T($)},[v("div",jl,[v("div",Wl,[((ye=b.value)==null?void 0:ye.serviceGroupId)===$.serviceGroupId?(A(),B(e(O),{key:0,color:"#18a058",size:"18",style:{"margin-right":"8px"}},{default:l(()=>[t(e(at))]),_:1})):Z("",!0),t(e(se),{strong:""},{default:l(()=>[_(d($.groupName),1)]),_:2},1024),t(e(K),{type:h($.groupType),size:"small",style:{"margin-left":"8px"}},{default:l(()=>[_(d(E($.groupType)),1)]),_:2},1032,["type"])]),t(e(K),{type:$.activeFlag==="Y"?"success":"error",size:"small"},{default:l(()=>[_(d($.activeFlag==="Y"?e(a)("status.Y"):e(a)("status.N")),1)]),_:2},1032,["type"])]),v("div",Zl,[t(e(se),{depth:"3"},{default:l(()=>[_(d($.groupDescription||e(a)("noDescription")),1)]),_:2},1024)])],10,Yl)}),128))]))]),_:1})]),_:1},8,["show"])])])]),_:1},8,["show","title"]))}}),Xl=fe(Ql,[["__scopeId","data-v-75a4050c"]]),es={class:"service-form-page"},ts={class:"page-header"},as={class:"header-actions"},ls={key:0,style:{border:"none",padding:"0",margin:"0"}},ss={style:{"margin-bottom":"16px"}},ns={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"12px"}},rs={style:{"margin-bottom":"16px"}},os={style:{"margin-bottom":"16px"}},is={class:"instance-header"},cs={class:"instance-header-left"},us={class:"instance-header-actions"},ds={class:"instance-table",style:{"margin-top":"16px"}},vs={style:{"margin-top":"24px",display:"flex","justify-content":"center",gap:"12px"}},ps={class:"form-actions"},hs=ne({__name:"ServiceFormPage",props:{editData:{default:null}},emits:["back","success"],setup(n,{emit:c}){const o=n,p=c,{t:a}=ue("hub0041"),f=he(),g=F(),y=M(()=>!!o.editData),C=F(!1),b=F(!1),m=F([]),D=F(!1),w=M(()=>{if(!r.serviceGroupId)return"";const u=m.value.find(s=>s.serviceGroupId===r.serviceGroupId);return u?u.groupName:""}),k=F(!1),h=M(()=>r.registryType!=="NACOS"),E=M(()=>r.registryType!=="NACOS"),R=M(()=>r.registryType==="NACOS"),r=Ue({serviceName:"",serviceGroupId:"",groupName:"",serviceDescription:"",registryType:"INTERNAL",protocolType:"HTTP",contextPath:"/",loadBalanceStrategy:"ROUND_ROBIN",healthCheckUrl:"/health",healthCheckIntervalSeconds:30,healthCheckTimeoutSeconds:5,healthCheckType:"HTTP",healthCheckMode:"ACTIVE",activeFlag:"Y",maxInstances:10,nacosConfig:{servers:[{host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"}],namespace:"public",group:"DEFAULT_GROUP",username:"",password:"",accessKey:"",secretKey:"",timeout:5,beatInterval:5,cacheDir:"",logDir:"",logLevel:"info",updateThreadNum:20,notLoadCacheAtStart:!0,disableUseSnapShot:!1,updateCacheWhenEmpty:!1,appendToStdout:!1,enableTLS:!1,trustAll:!1,caFile:"",certFile:"",keyFile:"",appName:"",appKey:"",openKMS:!1,regionId:""},instances:[],metadataJson:"",tagsJson:"",noteText:"",extProperty:"",reserved1:"",reserved2:"",reserved3:"",reserved4:"",reserved5:"",reserved6:"",reserved7:"",reserved8:"",reserved9:"",reserved10:""}),S=M(()=>[{label:a("registryTypes.INTERNAL"),value:"INTERNAL"},{label:a("registryTypes.NACOS"),value:"NACOS"},{label:a("registryTypes.CONSUL"),value:"CONSUL"},{label:a("registryTypes.EUREKA"),value:"EUREKA"},{label:a("registryTypes.ETCD"),value:"ETCD"},{label:a("registryTypes.ZOOKEEPER"),value:"ZOOKEEPER"}]),T=[{label:"HTTP",value:"HTTP"},{label:"HTTPS",value:"HTTPS"},{label:"TCP",value:"TCP"},{label:"UDP",value:"UDP"},{label:"GRPC",value:"GRPC"}],z=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"}],U=M(()=>[{label:a("healthCheckModes.active"),value:"ACTIVE"},{label:a("healthCheckModes.passive"),value:"PASSIVE"}]),P=M(()=>[{label:a("roundRobin"),value:"ROUND_ROBIN"},{label:a("weightedRoundRobin"),value:"WEIGHTED_ROUND_ROBIN"},{label:a("leastConnections"),value:"LEAST_CONNECTIONS"},{label:a("random"),value:"RANDOM"},{label:a("ipHash"),value:"IP_HASH"}]),L=M(()=>({serviceName:[{required:!0,message:a("serviceNameRequired"),trigger:"blur"},{min:2,max:50,message:a("serviceNameLength"),trigger:"blur"}],serviceGroupId:[{required:!0,message:a("serviceGroupRequired"),trigger:"change"}],groupName:[],registryType:[{required:!0,message:a("registryTypeRequired"),trigger:"change"}],serviceDescription:[{max:200,message:a("serviceDescriptionLength"),trigger:"blur"}],protocolType:[{required:!0,message:a("protocolTypeRequired"),trigger:"change"}],contextPath:[{required:!0,message:a("contextPathRequired"),trigger:"blur"}],loadBalanceStrategy:[{required:!0,message:a("loadBalanceStrategyRequired"),trigger:"change"}],healthCheckUrl:[{validator:(u,s)=>h.value&&!s?new Error(a("healthCheckUrlRequired")):!0,trigger:"blur"}],healthCheckIntervalSeconds:[{validator:(u,s)=>h.value&&!s?new Error(a("healthCheckIntervalRequired")):!0,trigger:"blur"}],healthCheckTimeoutSeconds:[{validator:(u,s)=>h.value&&!s?new Error(a("healthCheckTimeoutRequired")):!0,trigger:"blur"}],healthCheckType:[{validator:(u,s)=>h.value&&!s?new Error(a("healthCheckTypeRequired")):!0,trigger:"change"}],healthCheckMode:[{validator:(u,s)=>h.value&&!s?new Error(a("healthCheckModeRequired")):!0,trigger:"change"}],activeFlag:[{required:!0,message:a("activeFlagRequired"),trigger:"change"}],maxInstances:[{required:!0,type:"number",message:a("maxInstancesRequired"),trigger:"blur"}],metadataJson:[{validator:(u,s)=>{if(s&&s.trim())try{return JSON.parse(s),!0}catch{return new Error(a("invalidJsonFormat"))}return!0},trigger:"blur"}],tagsJson:[{validator:(u,s)=>{if(s&&s.trim())try{return JSON.parse(s),!0}catch{return new Error(a("invalidJsonFormat"))}return!0},trigger:"blur"}],noteText:[{max:500,message:a("noteTextLength"),trigger:"blur"}],extProperty:[{validator:(u,s)=>{if(s&&s.trim())try{return JSON.parse(s),!0}catch{return new Error(a("invalidJsonFormat"))}return!0},trigger:"blur"}],"nacosConfig.namespace":[{validator:(u,s)=>R.value&&!s?new Error("请输入命名空间"):!0,trigger:"blur"}],"nacosConfig.group":[{validator:(u,s)=>R.value&&!s?new Error("请输入默认分组"):!0,trigger:"blur"}]})),$=async u=>{if(u)try{C.value=!0;const s=await st({serviceName:u,pageIndex:1,pageSize:1e3});if(s.oK){const i=Et(s.bizData);r.instances=i,f.success(a("loadInstancesSuccess"))}else f.error(s.errMsg||a("loadInstancesFailed"))}catch(s){console.error("Failed to load instances:",s),f.error(a("loadInstancesFailed"))}finally{C.value=!1}},re=u=>{u?(Object.assign(r,{serviceName:u.serviceName||"",serviceGroupId:u.serviceGroupId||"",groupName:u.groupName||"",serviceDescription:u.serviceDescription||"",registryType:u.registryType||"INTERNAL",protocolType:u.protocolType||"HTTP",contextPath:u.contextPath||"/",loadBalanceStrategy:u.loadBalanceStrategy||"ROUND_ROBIN",healthCheckUrl:u.healthCheckUrl||"/health",healthCheckIntervalSeconds:u.healthCheckIntervalSeconds||30,healthCheckTimeoutSeconds:u.healthCheckTimeoutSeconds||5,healthCheckType:u.healthCheckType||"HTTP",healthCheckMode:u.healthCheckMode||"ACTIVE",activeFlag:u.activeFlag||"Y",maxInstances:10,nacosConfig:(()=>{if(u.externalRegistryConfig&&u.registryType==="NACOS")try{const s=JSON.parse(u.externalRegistryConfig);return{servers:s.servers||[{host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"}],namespace:s.namespace||"public",group:s.group||"DEFAULT_GROUP",username:s.username||"",password:s.password||"",accessKey:s.accessKey||"",secretKey:s.secretKey||"",timeout:s.timeout||5,beatInterval:s.beatInterval||5,cacheDir:s.cacheDir||"",logDir:s.logDir||"",logLevel:s.logLevel||"info",updateThreadNum:s.updateThreadNum||20,notLoadCacheAtStart:s.notLoadCacheAtStart??!0,disableUseSnapShot:s.disableUseSnapShot??!1,updateCacheWhenEmpty:s.updateCacheWhenEmpty??!1,appendToStdout:s.appendToStdout??!1,enableTLS:s.enableTLS??!1,trustAll:s.trustAll??!1,caFile:s.caFile||"",certFile:s.certFile||"",keyFile:s.keyFile||"",appName:s.appName||"",appKey:s.appKey||"",openKMS:s.openKMS??!1,regionId:s.regionId||""}}catch{return{servers:[{host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"}],namespace:"public",group:"DEFAULT_GROUP",username:"",password:"",accessKey:"",secretKey:"",timeout:5,beatInterval:5,cacheDir:"",logDir:"",logLevel:"info",updateThreadNum:20,notLoadCacheAtStart:!0,disableUseSnapShot:!1,updateCacheWhenEmpty:!1,appendToStdout:!1,enableTLS:!1,trustAll:!1,caFile:"",certFile:"",keyFile:"",appName:"",appKey:"",openKMS:!1,regionId:""}}return{servers:[{host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"}],namespace:"public",group:"DEFAULT_GROUP",username:"",password:"",accessKey:"",secretKey:"",timeout:5,beatInterval:5,cacheDir:"",logDir:"",logLevel:"info",updateThreadNum:20,notLoadCacheAtStart:!0,disableUseSnapShot:!1,updateCacheWhenEmpty:!1,appendToStdout:!1,enableTLS:!1,trustAll:!1,caFile:"",certFile:"",keyFile:"",appName:"",appKey:"",openKMS:!1,regionId:""}})(),instances:[],metadataJson:u.metadataJson||"",tagsJson:u.tagsJson||"",noteText:u.noteText||"",extProperty:u.extProperty||"",reserved1:u.reserved1||"",reserved2:u.reserved2||"",reserved3:u.reserved3||"",reserved4:u.reserved4||"",reserved5:u.reserved5||"",reserved6:u.reserved6||"",reserved7:u.reserved7||"",reserved8:u.reserved8||"",reserved9:u.reserved9||"",reserved10:u.reserved10||""}),(u.metadataJson||u.tagsJson||u.noteText||u.extProperty||u.reserved1||u.reserved2||u.reserved3||u.reserved4||u.reserved5||u.reserved6||u.reserved7||u.reserved8||u.reserved9||u.reserved10)&&(k.value=!0),y.value&&u.serviceName&&$(u.serviceName)):be()};Ee(()=>o.editData,u=>{re(u)}),ze(()=>{ye(),re(o.editData)});const ye=async()=>{try{const u=await zt();if(u.oK){let s={};try{s=typeof u.bizData=="string"?JSON.parse(u.bizData):u.bizData,m.value=s||[]}catch(i){console.error("Failed to parse service groups data:",i),m.value=[]}}else f.error(a("fetchServiceGroupsFailed")),m.value=[]}catch(u){console.error("Failed to fetch service groups:",u),f.error(a("fetchServiceGroupsFailed")),m.value=[]}},be=()=>{var u;(u=g.value)==null||u.restoreValidation(),y.value||(Object.assign(r,{serviceName:"",serviceGroupId:"",groupName:"",serviceDescription:"",registryType:"INTERNAL",protocolType:"HTTP",contextPath:"/",loadBalanceStrategy:"ROUND_ROBIN",healthCheckUrl:"/health",healthCheckIntervalSeconds:30,healthCheckTimeoutSeconds:5,healthCheckType:"HTTP",healthCheckMode:"ACTIVE",activeFlag:"Y",maxInstances:10,nacosConfig:{servers:[{host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"}],namespace:"public",group:"DEFAULT_GROUP",username:"",password:"",accessKey:"",secretKey:"",timeout:5,beatInterval:5,cacheDir:"",logDir:"",logLevel:"info",updateThreadNum:20,notLoadCacheAtStart:!0,disableUseSnapShot:!1,updateCacheWhenEmpty:!1,appendToStdout:!1,enableTLS:!1,trustAll:!1,caFile:"",certFile:"",keyFile:"",appName:"",appKey:"",openKMS:!1,regionId:""},instances:[],metadataJson:"",tagsJson:"",noteText:"",extProperty:"",reserved1:"",reserved2:"",reserved3:"",reserved4:"",reserved5:"",reserved6:"",reserved7:"",reserved8:"",reserved9:"",reserved10:""}),k.value=!1)},ke=()=>{D.value=!0},Le=u=>{r.serviceGroupId=u.serviceGroupId,r.groupName=u.groupName},te=()=>{r.nacosConfig.servers.push({host:"",port:8848,grpcPort:void 0,contextPath:"/nacos",scheme:"http"})},ae=u=>{r.nacosConfig.servers.length>1&&r.nacosConfig.servers.splice(u,1)},q=()=>{p("back")},$t=async()=>{var u;try{await((u=g.value)==null?void 0:u.validate()),b.value=!0;const{maxInstances:s,nacosConfig:i,...oe}=r;let X;r.registryType==="NACOS"&&(X=JSON.stringify(r.nacosConfig));const ot={...oe,externalRegistryConfig:X,instances:r.instances.map($e=>({...$e,serviceName:r.serviceName}))};let _e;if(y.value?_e=await tl(ot):_e=await el(ot),_e.oK)f.success(y.value?a("updateServiceSuccess"):a("addServiceSuccess")),p("success"),p("back");else{const $e=_e.popMsg||_e.errMsg||(y.value?a("updateServiceFailed"):a("addServiceFailed"));f.error($e)}}catch(s){console.error("Failed to submit service:",s),f.error(y.value?a("updateServiceFailed"):a("addServiceFailed"))}finally{b.value=!1}},nt=F(),de=F(!1),Pe=F(!1),Se=F(-1),V=Ue({serviceInstanceId:"",hostAddress:"",portNumber:8080,contextPath:"/",instanceStatus:"UP",healthStatus:"HEALTHY",weightValue:1,clientType:"OTHER",tempInstanceFlag:"N"}),Mt=M(()=>[{label:a("status.UP"),value:"UP"},{label:a("status.DOWN"),value:"DOWN"},{label:a("status.STARTING"),value:"STARTING"},{label:a("status.OUT_OF_SERVICE"),value:"OUT_OF_SERVICE"}]),Bt=M(()=>[{label:a("status.HEALTHY"),value:"HEALTHY"},{label:a("status.UNHEALTHY"),value:"UNHEALTHY"},{label:a("status.UNKNOWN"),value:"UNKNOWN"}]),Vt=M(()=>[{label:a("status.JAVA"),value:"JAVA"},{label:a("status.DOTNET"),value:"DOTNET"},{label:a("status.NODEJS"),value:"NODEJS"},{label:a("status.PYTHON"),value:"PYTHON"},{label:a("status.GO"),value:"GO"},{label:a("status.OTHER"),value:"OTHER"}]),Kt={hostAddress:[{required:!0,message:a("instanceHostRequired"),trigger:"blur"}],portNumber:[{required:!0,type:"number",message:a("instancePortRequired"),trigger:"blur"}],instanceStatus:[{required:!0,message:a("instanceStatusRequired"),trigger:"change"}],healthStatus:[{required:!0,message:a("healthStatusRequired"),trigger:"change"}],weightValue:[{required:!0,type:"number",message:a("weightRequired"),trigger:"blur"}]},qt=M(()=>[{title:a("columns.hostAddress"),key:"hostAddress"},{title:a("columns.portNumber"),key:"portNumber"},{title:a("columns.weightValue"),key:"weightValue",width:80,align:"center",render:u=>{var s;return N("span",{style:{fontWeight:"600"}},((s=u.weightValue)==null?void 0:s.toString())||"1")}},{title:a("columns.instanceStatus"),key:"instanceStatus",render:u=>{const s=u.instanceStatus;return N(K,{type:{UP:"success",DOWN:"error",STARTING:"warning",OUT_OF_SERVICE:"default"}[s],size:"small"},{default:()=>a(`status.${s}`)})}},{title:a("columns.healthStatus"),key:"healthStatus",render:u=>{const s=u.healthStatus;return N(K,{type:{HEALTHY:"success",UNHEALTHY:"error",UNKNOWN:"default"}[s],size:"small"},{default:()=>a(`status.${s}`)})}},{title:a("columns.tempInstanceFlag"),key:"tempInstanceFlag",render:u=>{const s=u.tempInstanceFlag==="Y";return N(K,{type:s?"warning":"success",size:"small"},{default:()=>a(s?"status.temporary":"status.permanent")})}},{title:a("columns.actions"),key:"actions",width:100,align:"center",fixed:"right",render:(u,s)=>N(Nt,{size:"small"},{default:()=>[N(G,{size:"small",type:"info",quaternary:!0,onClick:()=>Yt(s)},{icon:()=>N(O,{component:xt})}),N(Za,{onPositiveClick:()=>Wt(s)},{trigger:()=>N(G,{size:"small",type:"error",quaternary:!0},{icon:()=>N(O,{component:Ye})}),default:()=>a("messages.confirmDeleteInstance")})]})}]),rt=()=>{if(!y.value){f.warning(a("saveServiceBeforeAddingInstance"));return}Jt()},Jt=()=>{Pe.value=!1,Se.value=-1,Object.assign(V,{serviceInstanceId:`${r.serviceName}-${Date.now()}`,hostAddress:"",portNumber:8080,contextPath:r.contextPath||"/",instanceStatus:"UP",healthStatus:"HEALTHY",weightValue:1,clientType:"OTHER",tempInstanceFlag:"N"}),de.value=!0},Yt=u=>{Pe.value=!0,Se.value=u;const s=r.instances[u];Object.assign(V,{...s}),de.value=!0},jt=async()=>{y.value&&r.serviceName&&await $(r.serviceName)},Wt=async u=>{const s=r.instances[u];if(y.value&&s.serviceInstanceId)try{const i=await nl(s.serviceInstanceId);i.oK?(r.instances.splice(u,1),f.success(a("deleteInstanceSuccess"))):f.error(i.errMsg||a("deleteInstanceFailed"))}catch(i){console.error("Failed to delete instance:",i),f.error(a("deleteInstanceFailed"))}else r.instances.splice(u,1),f.success(a("deleteInstanceSuccess"))},Zt=async()=>{var u;try{await((u=nt.value)==null?void 0:u.validate());const s={...V,serviceName:r.serviceName,serviceGroupId:r.serviceGroupId,groupName:r.groupName,tenantId:"default",registerTime:new Date().toISOString(),lastHeartbeatTime:new Date().toISOString(),activeFlag:"Y",tempInstanceFlag:V.tempInstanceFlag||"N"};if(Pe.value&&Se.value>=0)if(y.value&&r.serviceName&&V.serviceInstanceId)try{const i=await Ht(s);i.oK?(r.instances[Se.value]=s,f.success(a("updateInstanceSuccess")),de.value=!1):f.error(i.errMsg||a("updateInstanceFailed"))}catch(i){console.error("Failed to update instance:",i),f.error(a("updateInstanceFailed"))}else r.instances[Se.value]=s,f.success(a("updateInstanceSuccess")),de.value=!1;else if(y.value&&r.serviceName)try{const i=await sl(s);i.oK?(r.instances.push(s),f.success(a("addInstanceSuccess")),de.value=!1):f.error(i.errMsg||a("addInstanceFailed"))}catch(i){console.error("Failed to create instance:",i),f.error(a("addInstanceFailed"))}else r.instances.push(s),f.success(a("addInstanceSuccess")),de.value=!1}catch(s){console.error("Instance validation error:",s)}};return(u,s)=>(A(),J("div",es,[v("div",ts,[t(e(Ta),null,{default:l(()=>[t(e(mt),{onClick:q},{default:l(()=>[_(d(e(a)("serviceManagement")),1)]),_:1}),t(e(mt),null,{default:l(()=>[_(d(y.value?e(a)("editService"):e(a)("addService")),1)]),_:1})]),_:1}),v("div",as,[t(e(G),{onClick:q,quaternary:""},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(Dt))]),_:1})]),default:l(()=>[_(" "+d(e(a)("actions.back")),1)]),_:1})])]),t(e(j),{size:"large",class:"form-card"},{default:l(()=>[t(e(Je),{ref_key:"formRef",ref:g,model:r,rules:L.value,"label-placement":"left","label-width":140,"require-mark-placement":"left"},{default:l(()=>[t(e(j),{title:e(a)("basicInfo"),size:"small",style:{"margin-bottom":"24px"}},{default:l(()=>[t(e(Y),{cols:3,"x-gap":24,"y-gap":16},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("serviceName"),path:"serviceName"},{default:l(()=>[t(e(H),{value:r.serviceName,"onUpdate:value":s[0]||(s[0]=i=>r.serviceName=i),placeholder:e(a)("serviceNamePlaceholder"),maxlength:"50","show-count":"",disabled:y.value},null,8,["value","placeholder","disabled"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("columns.groupName"),path:"serviceGroupId"},{default:l(()=>[t(e(H),{value:w.value,placeholder:e(a)("selectServiceGroup"),readonly:"",onClick:ke,style:{cursor:"pointer"}},{suffix:l(()=>[t(e(G),{text:"",onClick:ke},{default:l(()=>[t(e(O),null,{default:l(()=>[t(e(Oa))]),_:1})]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("groupName"),path:"groupName"},{default:l(()=>[t(e(H),{value:r.groupName,"onUpdate:value":s[1]||(s[1]=i=>r.groupName=i),placeholder:e(a)("groupNamePlaceholder"),readonly:"",style:{"background-color":"var(--input-color-disabled)"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("columns.registryType"),path:"registryType"},{default:l(()=>[t(e(W),{value:r.registryType,"onUpdate:value":s[2]||(s[2]=i=>r.registryType=i),options:S.value,placeholder:e(a)("selectRegistryType")},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("columns.activeFlag"),path:"activeFlag"},{default:l(()=>[t(e(me),{value:r.activeFlag,"onUpdate:value":s[3]||(s[3]=i=>r.activeFlag=i),"checked-value":"Y","unchecked-value":"N"},{checked:l(()=>[_(d(e(a)("status.Y")),1)]),unchecked:l(()=>[_(d(e(a)("status.N")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("maxInstances"),path:"maxInstances"},{default:l(()=>[t(e(ie),{value:r.maxInstances,"onUpdate:value":s[4]||(s[4]=i=>r.maxInstances=i),placeholder:e(a)("maxInstancesPlaceholder"),min:1,max:100,style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(I),{label:e(a)("serviceDescription"),path:"serviceDescription"},{default:l(()=>[t(e(H),{value:r.serviceDescription,"onUpdate:value":s[5]||(s[5]=i=>r.serviceDescription=i),type:"textarea",placeholder:e(a)("serviceDescriptionPlaceholder"),rows:4,maxlength:"200","show-count":""},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["title"]),t(e(j),{title:e(a)("networkConfig"),size:"small",style:{"margin-bottom":"24px"}},{default:l(()=>[t(e(Y),{cols:3,"x-gap":24,"y-gap":16},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("columns.protocolType"),path:"protocolType"},{default:l(()=>[t(e(W),{value:r.protocolType,"onUpdate:value":s[6]||(s[6]=i=>r.protocolType=i),options:T,placeholder:e(a)("selectProtocol")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("columns.contextPath"),path:"contextPath"},{default:l(()=>[t(e(H),{value:r.contextPath,"onUpdate:value":s[7]||(s[7]=i=>r.contextPath=i),placeholder:e(a)("contextPathPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("columns.loadBalanceStrategy"),path:"loadBalanceStrategy"},{default:l(()=>[t(e(W),{value:r.loadBalanceStrategy,"onUpdate:value":s[8]||(s[8]=i=>r.loadBalanceStrategy=i),options:P.value,placeholder:e(a)("selectLoadBalance")},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"]),R.value?(A(),J("fieldset",ls,[t(e(j),{title:e(a)("nacosConfig.title"),size:"small",style:{"margin-bottom":"24px"}},{default:l(()=>[v("div",ss,[t(e(se),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>[_(d(e(a)("nacosConfig.serverConfig")),1)]),_:1}),(A(!0),J(Fe,null,Xe(r.nacosConfig.servers,(i,oe)=>(A(),J("div",{key:oe,style:{"margin-bottom":"16px",padding:"16px",border:"1px solid var(--border-color)","border-radius":"6px","background-color":"var(--color-embedded)"}},[v("div",ns,[t(e(se),{strong:""},{default:l(()=>[_(d(e(a)("nacosConfig.serverTitle",{number:oe+1})),1)]),_:2},1024),r.nacosConfig.servers.length>1?(A(),B(e(G),{key:0,size:"small",type:"error",quaternary:"",onClick:X=>ae(oe)},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(Ye))]),_:1})]),_:1},8,["onClick"])):Z("",!0)]),t(e(Y),{cols:3,"x-gap":16,"y-gap":12},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.host"),path:`nacosConfig.servers[${oe}].host`},{default:l(()=>[t(e(H),{value:i.host,"onUpdate:value":X=>i.host=X,placeholder:e(a)("nacosConfig.hostPlaceholder")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","path"])]),_:2},1024),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.port"),path:`nacosConfig.servers[${oe}].port`},{default:l(()=>[t(e(ie),{value:i.port,"onUpdate:value":X=>i.port=X,placeholder:e(a)("nacosConfig.portPlaceholder"),min:1,max:65535,style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","path"])]),_:2},1024),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.scheme"),path:`nacosConfig.servers[${oe}].scheme`},{default:l(()=>[t(e(W),{value:i.scheme,"onUpdate:value":X=>i.scheme=X,options:[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]},null,8,["value","onUpdate:value"])]),_:2},1032,["label","path"])]),_:2},1024),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.grpcPort"),path:`nacosConfig.servers[${oe}].grpcPort`},{default:l(()=>[t(e(ie),{value:i.grpcPort,"onUpdate:value":X=>i.grpcPort=X,placeholder:e(a)("nacosConfig.grpcPortPlaceholder"),min:1,max:65535,style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","path"])]),_:2},1024),t(e(x),null,{default:l(()=>[t(e(I),{label:"上下文路径",path:`nacosConfig.servers[${oe}].contextPath`},{default:l(()=>[t(e(H),{value:i.contextPath,"onUpdate:value":X=>i.contextPath=X,placeholder:"默认: /nacos"},null,8,["value","onUpdate:value"])]),_:2},1032,["path"])]),_:2},1024)]),_:2},1024)]))),128)),t(e(G),{size:"small",type:"primary",dashed:"",onClick:te,style:{width:"100%"}},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(Re))]),_:1})]),default:l(()=>[_(" "+d(e(a)("nacosConfig.addServer")),1)]),_:1})]),v("div",rs,[t(e(se),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>[_(d(e(a)("nacosConfig.basicConfig")),1)]),_:1}),t(e(Y),{cols:3,"x-gap":16,"y-gap":12},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.namespace"),path:"nacosConfig.namespace"},{default:l(()=>[t(e(H),{value:r.nacosConfig.namespace,"onUpdate:value":s[9]||(s[9]=i=>r.nacosConfig.namespace=i),placeholder:e(a)("nacosConfig.namespacePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.group"),path:"nacosConfig.group"},{default:l(()=>[t(e(H),{value:r.nacosConfig.group,"onUpdate:value":s[10]||(s[10]=i=>r.nacosConfig.group=i),placeholder:e(a)("nacosConfig.groupPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.timeout"),path:"nacosConfig.timeout"},{default:l(()=>[t(e(ie),{value:r.nacosConfig.timeout,"onUpdate:value":s[11]||(s[11]=i=>r.nacosConfig.timeout=i),placeholder:e(a)("nacosConfig.timeoutPlaceholder"),min:1,max:60,style:{width:"100%"}},{suffix:l(()=>[_(d(e(a)("seconds")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.beatInterval"),path:"nacosConfig.beatInterval"},{default:l(()=>[t(e(ie),{value:r.nacosConfig.beatInterval,"onUpdate:value":s[12]||(s[12]=i=>r.nacosConfig.beatInterval=i),placeholder:e(a)("nacosConfig.beatIntervalPlaceholder"),min:1,max:60,style:{width:"100%"}},{suffix:l(()=>[_(d(e(a)("seconds")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),v("div",os,[t(e(se),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>[_(d(e(a)("nacosConfig.authConfig")),1)]),_:1}),t(e(Y),{cols:2,"x-gap":16,"y-gap":12},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.username")},{default:l(()=>[t(e(H),{value:r.nacosConfig.username,"onUpdate:value":s[13]||(s[13]=i=>r.nacosConfig.username=i),placeholder:e(a)("nacosConfig.usernamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.password")},{default:l(()=>[t(e(H),{value:r.nacosConfig.password,"onUpdate:value":s[14]||(s[14]=i=>r.nacosConfig.password=i),placeholder:e(a)("nacosConfig.passwordPlaceholder"),"show-password-on":"click","input-props":{autocomplete:"off"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.accessKey")},{default:l(()=>[t(e(H),{value:r.nacosConfig.accessKey,"onUpdate:value":s[15]||(s[15]=i=>r.nacosConfig.accessKey=i),placeholder:e(a)("nacosConfig.accessKeyPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.secretKey")},{default:l(()=>[t(e(H),{value:r.nacosConfig.secretKey,"onUpdate:value":s[16]||(s[16]=i=>r.nacosConfig.secretKey=i),placeholder:e(a)("nacosConfig.secretKeyPlaceholder"),"show-password-on":"click","input-props":{autocomplete:"off"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),t(e(Rt),null,{default:l(()=>[t(e(Ut),{title:e(a)("nacosConfig.advancedConfig"),name:"advanced"},{default:l(()=>[t(e(ce),{vertical:"",size:16},{default:l(()=>[v("div",null,[t(e(se),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>[...s[56]||(s[56]=[_("日志配置",-1)])]),_:1}),t(e(Y),{cols:3,"x-gap":16,"y-gap":12},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.logLevel"),path:"nacosConfig.logLevel"},{default:l(()=>[t(e(W),{value:r.nacosConfig.logLevel,"onUpdate:value":s[17]||(s[17]=i=>r.nacosConfig.logLevel=i),options:[{label:"Debug",value:"debug"},{label:"Info",value:"info"},{label:"Warn",value:"warn"},{label:"Error",value:"error"}]},null,8,["value"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:"日志目录",path:"nacosConfig.logDir"},{default:l(()=>[t(e(H),{value:r.nacosConfig.logDir,"onUpdate:value":s[18]||(s[18]=i=>r.nacosConfig.logDir=i),placeholder:"默认: /tmp/nacos/log"},null,8,["value"])]),_:1})]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:"输出到控制台",path:"nacosConfig.appendToStdout"},{default:l(()=>[t(e(me),{value:r.nacosConfig.appendToStdout,"onUpdate:value":s[19]||(s[19]=i=>r.nacosConfig.appendToStdout=i)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),v("div",null,[t(e(se),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>[...s[57]||(s[57]=[_("缓存配置",-1)])]),_:1}),t(e(Y),{cols:2,"x-gap":16,"y-gap":12},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:"缓存目录"},{default:l(()=>[t(e(H),{value:r.nacosConfig.cacheDir,"onUpdate:value":s[20]||(s[20]=i=>r.nacosConfig.cacheDir=i),placeholder:"默认: /tmp/nacos/cache"},null,8,["value"])]),_:1})]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.updateThreadNum")},{default:l(()=>[t(e(ie),{value:r.nacosConfig.updateThreadNum,"onUpdate:value":s[21]||(s[21]=i=>r.nacosConfig.updateThreadNum=i),placeholder:e(a)("nacosConfig.updateThreadNumPlaceholder"),min:1,max:100,style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.notLoadCacheAtStart")},{default:l(()=>[t(e(me),{value:r.nacosConfig.notLoadCacheAtStart,"onUpdate:value":s[22]||(s[22]=i=>r.nacosConfig.notLoadCacheAtStart=i)},null,8,["value"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.disableUseSnapShot")},{default:l(()=>[t(e(me),{value:r.nacosConfig.disableUseSnapShot,"onUpdate:value":s[23]||(s[23]=i=>r.nacosConfig.disableUseSnapShot=i)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})]),v("div",null,[t(e(se),{strong:"",style:{display:"block","margin-bottom":"12px"}},{default:l(()=>[...s[58]||(s[58]=[_("TLS配置",-1)])]),_:1}),t(e(Y),{cols:2,"x-gap":16,"y-gap":12},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.enableTLS")},{default:l(()=>[t(e(me),{value:r.nacosConfig.enableTLS,"onUpdate:value":s[24]||(s[24]=i=>r.nacosConfig.enableTLS=i)},null,8,["value"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("nacosConfig.trustAll")},{default:l(()=>[t(e(me),{value:r.nacosConfig.trustAll,"onUpdate:value":s[25]||(s[25]=i=>r.nacosConfig.trustAll=i)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["title"])])):Z("",!0),h.value?(A(),B(e(j),{key:1,title:e(a)("healthCheckConfig"),size:"small",style:{"margin-bottom":"24px"}},{default:l(()=>[t(e(Y),{cols:3,"x-gap":24,"y-gap":16},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("healthCheckUrl"),path:"healthCheckUrl"},{default:l(()=>[t(e(H),{value:r.healthCheckUrl,"onUpdate:value":s[26]||(s[26]=i=>r.healthCheckUrl=i),placeholder:e(a)("healthCheckUrlPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("healthCheckInterval"),path:"healthCheckIntervalSeconds"},{default:l(()=>[t(e(ie),{value:r.healthCheckIntervalSeconds,"onUpdate:value":s[27]||(s[27]=i=>r.healthCheckIntervalSeconds=i),placeholder:e(a)("healthCheckIntervalPlaceholder"),min:5,max:300,style:{width:"100%"}},{suffix:l(()=>[_(d(e(a)("seconds")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("healthCheckTimeout"),path:"healthCheckTimeoutSeconds"},{default:l(()=>[t(e(ie),{value:r.healthCheckTimeoutSeconds,"onUpdate:value":s[28]||(s[28]=i=>r.healthCheckTimeoutSeconds=i),placeholder:e(a)("healthCheckTimeoutPlaceholder"),min:1,max:60,style:{width:"100%"}},{suffix:l(()=>[_(d(e(a)("seconds")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("healthCheckType"),path:"healthCheckType"},{default:l(()=>[t(e(W),{value:r.healthCheckType,"onUpdate:value":s[29]||(s[29]=i=>r.healthCheckType=i),options:z,placeholder:e(a)("selectHealthCheckType")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("healthCheckMode"),path:"healthCheckMode"},{default:l(()=>[t(e(W),{value:r.healthCheckMode,"onUpdate:value":s[30]||(s[30]=i=>r.healthCheckMode=i),options:U.value,placeholder:e(a)("selectHealthCheckMode")},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"])):Z("",!0),t(e(j),{title:e(a)("instanceList"),size:"small",style:{"margin-bottom":"24px"}},{default:l(()=>[v("div",is,[v("div",cs,[t(e(se),null,{default:l(()=>[_(d(e(a)("instanceConfig")),1)]),_:1}),r.instances.length>0?(A(),B(e(se),{key:0,depth:"3",style:{"margin-left":"8px"}},{default:l(()=>[_(" ("+d(r.instances.length)+" "+d(e(a)("instances"))+") ",1)]),_:1})):Z("",!0)]),v("div",us,[t(e(G),{size:"small",onClick:jt,loading:C.value,disabled:!y.value||!r.serviceName},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(we))]),_:1})]),default:l(()=>[_(" "+d(e(a)("actions.refresh")),1)]),_:1},8,["loading","disabled"]),y.value?(A(),B(e(G),{key:1,size:"small",type:"primary",onClick:rt},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(Re))]),_:1})]),default:l(()=>[_(" "+d(e(a)("actions.addInstance")),1)]),_:1})):(A(),B(e(ve),{key:0,placement:"top",trigger:"hover"},{trigger:l(()=>[t(e(G),{size:"small",type:"primary",onClick:rt,disabled:!y.value},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(Re))]),_:1})]),default:l(()=>[_(" "+d(e(a)("actions.addInstance")),1)]),_:1},8,["disabled"])]),default:l(()=>[_(" "+d(e(a)("saveServiceBeforeAddingInstance")),1)]),_:1}))])]),v("div",ds,[t(e(Ie),{show:C.value},{default:l(()=>[r.instances&&r.instances.length>0?(A(),B(e(lt),{key:0,columns:qt.value,data:r.instances,pagination:!1,size:"small","max-height":300,bordered:!0},null,8,["columns","data"])):(A(),B(e(He),{key:1,description:e(a)("table.noInstances"),size:"small",style:{padding:"20px 0"}},null,8,["description"]))]),_:1},8,["show"])]),t(e(Ze),{show:de.value,"onUpdate:show":s[39]||(s[39]=i=>de.value=i),width:500,placement:"right"},{default:l(()=>[t(e(It),{title:Pe.value?e(a)("editInstance"):e(a)("addInstance")},{default:l(()=>[t(e(Je),{ref_key:"instanceFormRef",ref:nt,model:V,rules:Kt,"label-placement":"left","label-width":120},{default:l(()=>[t(e(I),{label:e(a)("columns.hostAddress"),path:"hostAddress"},{default:l(()=>[t(e(H),{value:V.hostAddress,"onUpdate:value":s[31]||(s[31]=i=>V.hostAddress=i),placeholder:e(a)("search.placeholder.hostAddress")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(e(I),{label:e(a)("columns.portNumber"),path:"portNumber"},{default:l(()=>[t(e(ie),{value:V.portNumber,"onUpdate:value":s[32]||(s[32]=i=>V.portNumber=i),min:1,max:65535,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),t(e(I),{label:e(a)("columns.weightValue"),path:"weightValue"},{default:l(()=>[t(e(ie),{value:V.weightValue,"onUpdate:value":s[33]||(s[33]=i=>V.weightValue=i),min:1,max:100,"default-value":1,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),t(e(I),{label:e(a)("columns.instanceStatus"),path:"instanceStatus"},{default:l(()=>[t(e(W),{value:V.instanceStatus,"onUpdate:value":s[34]||(s[34]=i=>V.instanceStatus=i),options:Mt.value},null,8,["value","options"])]),_:1},8,["label"]),t(e(I),{label:e(a)("columns.healthStatus"),path:"healthStatus"},{default:l(()=>[t(e(W),{value:V.healthStatus,"onUpdate:value":s[35]||(s[35]=i=>V.healthStatus=i),options:Bt.value},null,8,["value","options"])]),_:1},8,["label"]),t(e(I),{label:e(a)("columns.clientType"),path:"clientType"},{default:l(()=>[t(e(W),{value:V.clientType,"onUpdate:value":s[36]||(s[36]=i=>V.clientType=i),options:Vt.value},null,8,["value","options"])]),_:1},8,["label"]),t(e(I),{label:e(a)("columns.tempInstanceFlag"),path:"tempInstanceFlag"},{default:l(()=>[t(e(me),{value:V.tempInstanceFlag,"onUpdate:value":s[37]||(s[37]=i=>V.tempInstanceFlag=i),"checked-value":"Y","unchecked-value":"N"},{checked:l(()=>[_(d(e(a)("status.temporary")),1)]),unchecked:l(()=>[_(d(e(a)("status.permanent")),1)]),_:1},8,["value"])]),_:1},8,["label"]),v("div",vs,[t(e(G),{onClick:s[38]||(s[38]=i=>de.value=!1)},{default:l(()=>[_(d(e(a)("cancel")),1)]),_:1}),t(e(G),{type:"primary",onClick:Zt},{default:l(()=>[_(d(e(a)("submit")),1)]),_:1})])]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])]),_:1},8,["title"]),E.value?(A(),B(e(j),{key:2,title:e(a)("extensionConfig"),size:"small",style:{"margin-bottom":"32px"}},{"header-extra":l(()=>[t(e(G),{text:"",onClick:s[40]||(s[40]=i=>k.value=!k.value),style:{padding:"0"}},{icon:l(()=>[t(e(O),null,{default:l(()=>[(A(),B(kt(k.value?"ChevronUpOutline":"ChevronDownOutline")))]),_:1})]),default:l(()=>[_(" "+d(k.value?e(a)("collapse"):e(a)("expand")),1)]),_:1})]),default:l(()=>[t(e(Ja),{show:k.value},{default:l(()=>[t(e(ce),{vertical:"",size:24},{default:l(()=>[t(e(j),{title:e(a)("metadataAndTags"),size:"small",embedded:""},{default:l(()=>[t(e(Y),{cols:1,"y-gap":16},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("metadataJson"),path:"metadataJson"},{default:l(()=>[t(e(H),{value:r.metadataJson,"onUpdate:value":s[41]||(s[41]=i=>r.metadataJson=i),type:"textarea",placeholder:e(a)("metadataJsonPlaceholder"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("tagsJson"),path:"tagsJson"},{default:l(()=>[t(e(H),{value:r.tagsJson,"onUpdate:value":s[42]||(s[42]=i=>r.tagsJson=i),type:"textarea",placeholder:e(a)("tagsJsonPlaceholder"),rows:3},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"]),t(e(j),{title:e(a)("notesAndExtProperty"),size:"small",embedded:""},{default:l(()=>[t(e(Y),{cols:1,"y-gap":16},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("noteText"),path:"noteText"},{default:l(()=>[t(e(H),{value:r.noteText,"onUpdate:value":s[43]||(s[43]=i=>r.noteText=i),type:"textarea",placeholder:e(a)("noteTextPlaceholder"),rows:3,maxlength:"500","show-count":""},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("extProperty"),path:"extProperty"},{default:l(()=>[t(e(H),{value:r.extProperty,"onUpdate:value":s[44]||(s[44]=i=>r.extProperty=i),type:"textarea",placeholder:e(a)("extPropertyPlaceholder"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"]),t(e(j),{title:e(a)("reservedFields"),size:"small",embedded:""},{"header-extra":l(()=>[t(e(K),{size:"small",type:"info"},{default:l(()=>[_(d(e(a)("forFutureExpansion")),1)]),_:1})]),default:l(()=>[t(e(Y),{cols:2,"x-gap":16,"y-gap":12},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("reservedField",{number:1}),path:"reserved1"},{default:l(()=>[t(e(H),{value:r.reserved1,"onUpdate:value":s[45]||(s[45]=i=>r.reserved1=i),placeholder:e(a)("reservedFieldPlaceholder",{number:1})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("reservedField",{number:2}),path:"reserved2"},{default:l(()=>[t(e(H),{value:r.reserved2,"onUpdate:value":s[46]||(s[46]=i=>r.reserved2=i),placeholder:e(a)("reservedFieldPlaceholder",{number:2})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("reservedField",{number:3}),path:"reserved3"},{default:l(()=>[t(e(H),{value:r.reserved3,"onUpdate:value":s[47]||(s[47]=i=>r.reserved3=i),placeholder:e(a)("reservedFieldPlaceholder",{number:3})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("reservedField",{number:4}),path:"reserved4"},{default:l(()=>[t(e(H),{value:r.reserved4,"onUpdate:value":s[48]||(s[48]=i=>r.reserved4=i),placeholder:e(a)("reservedFieldPlaceholder",{number:4})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("reservedField",{number:5}),path:"reserved5"},{default:l(()=>[t(e(H),{value:r.reserved5,"onUpdate:value":s[49]||(s[49]=i=>r.reserved5=i),placeholder:e(a)("reservedFieldPlaceholder",{number:5})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(wt),{style:{margin:"12px 0"}}),t(e(Y),{cols:2,"x-gap":16,"y-gap":12},{default:l(()=>[t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("reservedField",{number:6}),path:"reserved6"},{default:l(()=>[t(e(H),{value:r.reserved6,"onUpdate:value":s[50]||(s[50]=i=>r.reserved6=i),placeholder:e(a)("reservedFieldPlaceholder",{number:6})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("reservedField",{number:7}),path:"reserved7"},{default:l(()=>[t(e(H),{value:r.reserved7,"onUpdate:value":s[51]||(s[51]=i=>r.reserved7=i),placeholder:e(a)("reservedFieldPlaceholder",{number:7})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("reservedField",{number:8}),path:"reserved8"},{default:l(()=>[t(e(H),{value:r.reserved8,"onUpdate:value":s[52]||(s[52]=i=>r.reserved8=i),placeholder:e(a)("reservedFieldPlaceholder",{number:8})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("reservedField",{number:9}),path:"reserved9"},{default:l(()=>[t(e(H),{value:r.reserved9,"onUpdate:value":s[53]||(s[53]=i=>r.reserved9=i),placeholder:e(a)("reservedFieldPlaceholder",{number:9})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(x),null,{default:l(()=>[t(e(I),{label:e(a)("reservedField",{number:10}),path:"reserved10"},{default:l(()=>[t(e(H),{value:r.reserved10,"onUpdate:value":s[54]||(s[54]=i=>r.reserved10=i),placeholder:e(a)("reservedFieldPlaceholder",{number:10})},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["show"])]),_:1},8,["title"])):Z("",!0)]),_:1},8,["model","rules"]),v("div",ps,[t(e(ce),{size:"large",justify:"center"},{default:l(()=>[t(e(G),{size:"large",onClick:q},{default:l(()=>[_(d(e(a)("cancel")),1)]),_:1}),t(e(G),{size:"large",onClick:be},{default:l(()=>[_(d(e(a)("reset")),1)]),_:1}),t(e(G),{type:"primary",size:"large",onClick:$t,loading:b.value},{default:l(()=>[_(d(y.value?e(a)("actions.update"):e(a)("actions.create")),1)]),_:1},8,["loading"])]),_:1})])]),_:1}),t(Xl,{show:D.value,"onUpdate:show":s[55]||(s[55]=i=>D.value=i),"selected-group-id":r.serviceGroupId,onConfirm:Le},null,8,["show","selected-group-id"])]))}}),fs=fe(hs,[["__scopeId","data-v-771bc475"]]),ms={class:"service-event-list"},gs=ne({__name:"ServiceEventList",props:{serviceId:{default:void 0},instanceId:{default:void 0}},emits:["viewEvent"],setup(n,{expose:c,emit:o}){const p=n,{events:a,loading:f,naiveConfig:g,loadEvents:y,createTableColumns:C,setPaginationCallback:b}=Lt(),m=M(()=>C(w)),D=o,w=h=>{D("viewEvent",h)},k=h=>{y(p.serviceId,p.instanceId,h)};return b(()=>{k()}),ze(()=>{k()}),c({loadEvents:k}),(h,E)=>(A(),J("div",ms,[t(e(lt),{columns:m.value,data:e(a),loading:e(f),pagination:e(g),bordered:!1,"scroll-x":1370,"single-line":!1,size:"medium",remote:"",striped:""},null,8,["columns","data","loading","pagination"])]))}}),ys=fe(gs,[["__scopeId","data-v-cb3be427"]]),bs={class:"event-detail-wrapper"},Ss={class:"event-header"},_s={class:"info-row"},Cs={class:"label"},Ts={class:"value"},Es={class:"info-row"},Ns={class:"label"},Is={class:"value"},ws={class:"info-row"},ks={class:"label"},Ps={class:"value"},xs={class:"info-row"},Ds={class:"label"},Rs={class:"value"},Us={class:"info-row"},As={class:"label"},Os={class:"value"},Fs={class:"info-row"},Hs={class:"value"},zs={class:"audit-info"},Gs={class:"info-row"},Ls={class:"value"},$s={class:"info-row"},Ms={class:"value"},Bs={key:1},Vs={class:"info-row"},Ks={class:"value"},qs={class:"info-row"},Js={class:"value"},Ys={class:"info-row"},js={class:"value"},Ws=ne({__name:"ServiceEventDetail",props:{show:{type:Boolean,default:!1},event:{default:null},loading:{type:Boolean,default:!1}},emits:["update:show","close"],setup(n,{emit:c}){const o=n,p=c,{t:a}=ue("hub0041"),f=he(),g=F(null),y=F(!1),C=M({get:()=>o.show,set:h=>{p("update:show",h),h||(p("close"),g.value=null)}}),b=async h=>{try{y.value=!0;const E=await Gt(h);E.oK?g.value=ge(E):(f.error("获取事件详情失败"),g.value=null)}catch(E){console.error("Failed to fetch event detail:",E),f.error("获取事件详情失败"),g.value=null}finally{y.value=!1}};Ee([()=>o.event,()=>o.show],([h,E])=>{h&&E&&h.serviceEventId&&b(h.serviceEventId)},{immediate:!0});const m=M(()=>g.value||o.event),D=h=>h?h.includes("GROUP_")?Ge:h.includes("SERVICE_")?tt:h.includes("INSTANCE_")?et:Ae:Ae,w=h=>h?h==="GROUP_CREATE"?"success":h==="GROUP_UPDATE"?"info":h==="GROUP_DELETE"?"error":h==="SERVICE_CREATE"?"success":h==="SERVICE_UPDATE"?"info":h==="SERVICE_DELETE"?"error":h==="INSTANCE_REGISTER"?"success":h==="INSTANCE_DEREGISTER"?"error":h==="INSTANCE_HEARTBEAT"?"default":h==="INSTANCE_HEALTH_CHANGE"?"warning":h==="INSTANCE_STATUS_CHANGE"?"info":"default":"default",k=h=>{try{const E=JSON.parse(h);return JSON.stringify(E,null,2)}catch{return h}};return(h,E)=>(A(),B(e(Ze),{show:C.value,"onUpdate:show":E[0]||(E[0]=R=>C.value=R),width:520,title:e(a)("dialogs.serviceEvent.title"),placement:"right",closable:"",resizable:""},{default:l(()=>[t(e(Ie),{show:n.loading||y.value},{default:l(()=>{var R,r,S;return[v("div",bs,[v("div",Ss,[t(e(K),{size:"medium",type:w((R=m.value)==null?void 0:R.eventType),round:""},{icon:l(()=>[t(e(O),null,{default:l(()=>{var T;return[(A(),B(kt(D((T=m.value)==null?void 0:T.eventType))))]}),_:1})]),default:l(()=>{var T;return[_(" "+d((T=m.value)==null?void 0:T.eventType),1)]}),_:1},8,["type"]),(r=m.value)!=null&&r.eventTime?(A(),B(e(pe),{key:0,time:new Date(m.value.eventTime),format:"yyyy-MM-dd HH:mm:ss",class:"event-time"},null,8,["time"])):Z("",!0)]),t(e(j),{class:"detail-card",title:"事件基本信息",size:"small"},{default:l(()=>{var T,z,U,P,L,$;return[v("div",_s,[v("span",Cs,d(e(a)("columns.eventMessage")),1),v("span",Ts,d(((T=m.value)==null?void 0:T.eventMessage)||"-"),1)]),v("div",Es,[v("span",Ns,d(e(a)("columns.eventSource")),1),v("span",Is,d(((z=m.value)==null?void 0:z.eventSource)||"-"),1)]),v("div",ws,[v("span",ks,d(e(a)("columns.serviceName")),1),v("span",Ps,d(((U=m.value)==null?void 0:U.serviceName)||"-"),1)]),v("div",xs,[v("span",Ds,d(e(a)("columns.groupName")),1),v("span",Rs,d(((P=m.value)==null?void 0:P.groupName)||"-"),1)]),v("div",Us,[v("span",As,d(e(a)("columns.hostAddress")),1),v("span",Os,d((L=m.value)!=null&&L.hostAddress?`${m.value.hostAddress}:${m.value.portNumber||"-"}`:"-"),1)]),v("div",Fs,[E[1]||(E[1]=v("span",{class:"label"},"服务运行节点IP",-1)),v("span",Hs,d((($=m.value)==null?void 0:$.nodeIpAddress)||"-"),1)])]}),_:1}),(S=m.value)!=null&&S.eventDataJson?(A(),B(e(j),{key:0,class:"detail-card",title:"事件数据",size:"small"},{default:l(()=>[t(e(La),{code:k(m.value.eventDataJson),language:"json","show-line-numbers":""},null,8,["code"])]),_:1})):Z("",!0),t(e(Rt),null,{default:l(()=>[t(e(Ut),{name:"audit",title:"审计信息"},{default:l(()=>{var T,z,U,P,L;return[v("div",zs,[v("div",Gs,[E[2]||(E[2]=v("span",{class:"label"},"事件ID",-1)),v("span",Ls,d(((T=m.value)==null?void 0:T.serviceEventId)||"-"),1)]),v("div",$s,[E[3]||(E[3]=v("span",{class:"label"},"创建时间",-1)),v("span",Ms,[(z=m.value)!=null&&z.addTime?(A(),B(e(pe),{key:0,time:new Date(m.value.addTime),format:"yyyy-MM-dd HH:mm:ss"},null,8,["time"])):(A(),J("span",Bs,"-"))])]),v("div",Vs,[E[4]||(E[4]=v("span",{class:"label"},"创建人",-1)),v("span",Ks,d(((U=m.value)==null?void 0:U.addWho)||"-"),1)]),v("div",qs,[E[5]||(E[5]=v("span",{class:"label"},"租户ID",-1)),v("span",Js,d(((P=m.value)==null?void 0:P.tenantId)||"-"),1)]),v("div",Ys,[E[6]||(E[6]=v("span",{class:"label"},"服务实例ID",-1)),v("span",js,d(((L=m.value)==null?void 0:L.serviceInstanceId)||"-"),1)])])]}),_:1})]),_:1})])]}),_:1},8,["show"])]),_:1},8,["show","title"]))}}),Zs=fe(Ws,[["__scopeId","data-v-94935c56"]]);var le=(n=>(n.SERVICE_GROUP_CREATED="SERVICE_GROUP_CREATED",n.SERVICE_GROUP_UPDATED="SERVICE_GROUP_UPDATED",n.SERVICE_GROUP_DELETED="SERVICE_GROUP_DELETED",n.SERVICE_REGISTERED="SERVICE_REGISTERED",n.SERVICE_UPDATED="SERVICE_UPDATED",n.SERVICE_DEREGISTERED="SERVICE_DEREGISTERED",n.INSTANCE_REGISTERED="INSTANCE_REGISTERED",n.INSTANCE_DEREGISTERED="INSTANCE_DEREGISTERED",n.INSTANCE_HEARTBEAT_UPDATED="INSTANCE_HEARTBEAT_UPDATED",n.INSTANCE_HEALTH_CHANGE="INSTANCE_HEALTH_CHANGE",n.INSTANCE_STATUS_CHANGE="INSTANCE_STATUS_CHANGE",n))(le||{});const Qs={class:"service-event-page"},Xs={class:"page-header"},en={class:"search-section"},tn=ne({__name:"ServiceEventPage",setup(n,{expose:c}){const o=he(),{t:p}=ue("hub0041"),{getServiceEventById:a}=Lt(),f=F(null),g=F(!1),y=F(null),C=F(!1),b=[{type:"group",label:"分组相关事件",key:"group",children:[{label:"分组创建",value:le.SERVICE_GROUP_CREATED},{label:"分组更新",value:le.SERVICE_GROUP_UPDATED},{label:"分组删除",value:le.SERVICE_GROUP_DELETED}]},{type:"group",label:"服务相关事件",key:"service",children:[{label:"服务注册",value:le.SERVICE_REGISTERED},{label:"服务更新",value:le.SERVICE_UPDATED},{label:"服务注销",value:le.SERVICE_DEREGISTERED}]},{type:"group",label:"实例相关事件",key:"instance",children:[{label:"实例注册",value:le.INSTANCE_REGISTERED},{label:"实例注销",value:le.INSTANCE_DEREGISTERED},{label:"实例心跳更新",value:le.INSTANCE_HEARTBEAT_UPDATED},{label:"实例健康变更",value:le.INSTANCE_HEALTH_CHANGE},{label:"实例状态变更",value:le.INSTANCE_STATUS_CHANGE}]}],m=Ue({serviceName:"",eventType:null,eventSource:"",timeRange:null}),D=()=>{f.value&&typeof f.value.loadEvents=="function"&&(f.value.loadEvents(),o.success(p("messages.refreshSuccess")))},w=()=>{const R={};if(m.serviceName&&(R.serviceName=m.serviceName),m.eventType&&(R.eventType=m.eventType),m.eventSource&&(R.eventSource=m.eventSource),m.timeRange){const[r,S]=m.timeRange;R.startTime=new Date(r).toISOString(),R.endTime=new Date(S).toISOString()}f.value&&typeof f.value.loadEvents=="function"&&f.value.loadEvents(R)},k=()=>{m.serviceName="",m.eventType=null,m.eventSource="",m.timeRange=null,f.value&&typeof f.value.loadEvents=="function"&&f.value.loadEvents()},h=R=>{y.value=R,g.value=!0};return c({refreshEvents:D,viewEventDetail:async R=>{C.value=!0,g.value=!0;try{y.value=await a(R)}catch(r){o.error(p("messages.loadError")),console.error("加载事件详情失败:",r)}finally{C.value=!1}}}),(R,r)=>(A(),J("div",Qs,[t(e(j),null,{header:l(()=>[v("div",Xs,[v("h3",null,d(e(p)("menu.eventList")),1),t(e(ce),null,{default:l(()=>[t(e(G),{type:"primary",onClick:w},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(Qe))]),_:1})]),default:l(()=>[_(" "+d(e(p)("actions.search")),1)]),_:1}),t(e(G),{onClick:k},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e($a))]),_:1})]),default:l(()=>[_(" "+d(e(p)("actions.reset")),1)]),_:1}),t(e(G),{onClick:D},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(we))]),_:1})]),default:l(()=>[_(" "+d(e(p)("actions.refresh")),1)]),_:1})]),_:1})])]),default:l(()=>[v("div",en,[t(e(Je),{model:m,"label-placement":"left","label-width":"auto",inline:""},{default:l(()=>[t(e(I),{label:e(p)("columns.serviceName")},{default:l(()=>[t(e(H),{value:m.serviceName,"onUpdate:value":r[0]||(r[0]=S=>m.serviceName=S),placeholder:e(p)("search.placeholder.serviceName"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(e(I),{label:e(p)("columns.eventType")},{default:l(()=>[t(e(W),{value:m.eventType,"onUpdate:value":r[1]||(r[1]=S=>m.eventType=S),options:b,clearable:"",placeholder:e(p)("selectEventType"),style:{"min-width":"160px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(e(I),{label:e(p)("columns.eventSource")},{default:l(()=>[t(e(H),{value:m.eventSource,"onUpdate:value":r[2]||(r[2]=S=>m.eventSource=S),placeholder:e(p)("search.placeholder.eventSource"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(e(I),{label:e(p)("columns.eventTime")},{default:l(()=>[t(e(Ua),{value:m.timeRange,"onUpdate:value":r[3]||(r[3]=S=>m.timeRange=S),type:"daterange",clearable:"",placeholder:e(p)("search.placeholder.timeRange"),style:{width:"240px"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),t(ys,{ref_key:"eventListRef",ref:f,onViewEvent:h},null,512),t(Zs,{show:g.value,"onUpdate:show":r[4]||(r[4]=S=>g.value=S),event:y.value,loading:C.value},null,8,["show","event","loading"])]),_:1})]))}}),an=fe(tn,[["__scopeId","data-v-46a028cd"]]),ln={class:"service-registry-management"},sn={class:"list-view"},nn={class:"search-section"},rn={class:"services-section"},on={class:"form-view"},cn={class:"events-view"},un={class:"events-header"},dn={class:"events-title"},vn={class:"bottom-pagination"},pn=ne({__name:"ServiceRegistryManagement",setup(n){const{t:c}=ue("hub0041");he();const o=Ea(),{services:p,loading:a,searchParams:f,naiveConfig:g,fetchServices:y,refreshService:C,handleSearch:b,handleReset:m,handleRefresh:D,handleDeleteService:w}=cl(),k=[{label:"HTTP",value:"HTTP"},{label:"HTTPS",value:"HTTPS"},{label:"TCP",value:"TCP"},{label:"UDP",value:"UDP"},{label:"GRPC",value:"GRPC"}],h=[{label:c("status.Y"),value:"Y"},{label:c("status.N"),value:"N"}],E=F("list"),R=F(!1),r=F(""),S=F(null),T=F("");ze(()=>{y()});const z=m,U=D,P=te=>{r.value=te.serviceName,R.value=!0},L=async te=>{await C(te)},$=()=>{S.value=null,E.value="form"},re=te=>{S.value=te,E.value="form"},ye=te=>{T.value=te.serviceName,E.value="events"},be=()=>{E.value="list",S.value=null,T.value=""},ke=()=>{y()},Le=te=>{o.warning({title:c("actions.delete"),content:c("messages.confirmDeleteService"),positiveText:c("actions.confirm"),negativeText:c("actions.cancel"),onPositiveClick:async()=>{await w(te.serviceName)}})};return(te,ae)=>(A(),J("div",ln,[xe(v("div",sn,[v("div",nn,[t(e(ce),{size:16,justify:"space-between"},{default:l(()=>[t(e(ce),{size:16},{default:l(()=>[t(e(H),{value:e(f).serviceName,"onUpdate:value":ae[0]||(ae[0]=q=>e(f).serviceName=q),placeholder:e(c)("searchServiceName"),clearable:"",onClear:e(b),onKeyup:gt(e(b),["enter"]),style:{width:"240px"}},{prefix:l(()=>[t(e(O),null,{default:l(()=>[t(e(Qe))]),_:1})]),_:1},8,["value","placeholder","onClear","onKeyup"]),t(e(H),{value:e(f).groupName,"onUpdate:value":ae[1]||(ae[1]=q=>e(f).groupName=q),placeholder:e(c)("search.placeholder.groupName"),clearable:"",onClear:e(b),onKeyup:gt(e(b),["enter"]),style:{width:"180px"}},{prefix:l(()=>[t(e(O),null,{default:l(()=>[t(e(Ge))]),_:1})]),_:1},8,["value","placeholder","onClear","onKeyup"]),t(e(W),{value:e(f).protocolType,"onUpdate:value":[ae[2]||(ae[2]=q=>e(f).protocolType=q),e(b)],options:k,placeholder:e(c)("selectProtocol"),clearable:"",style:{width:"140px"}},null,8,["value","placeholder","onUpdate:value"]),t(e(W),{value:e(f).activeFlag,"onUpdate:value":[ae[3]||(ae[3]=q=>e(f).activeFlag=q),e(b)],options:h,placeholder:e(c)("selectStatus"),clearable:"",style:{width:"120px"}},null,8,["value","placeholder","onUpdate:value"]),t(e(G),{onClick:e(b),type:"primary"},{default:l(()=>[_(d(e(c)("actions.search")),1)]),_:1},8,["onClick"]),t(e(G),{onClick:e(z)},{default:l(()=>[_(d(e(c)("actions.reset")),1)]),_:1},8,["onClick"]),t(e(G),{type:"primary",onClick:e(U),loading:e(a)},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(we))]),_:1})]),default:l(()=>[_(" "+d(e(c)("actions.refresh")),1)]),_:1},8,["onClick","loading"])]),_:1}),t(e(G),{type:"primary",onClick:$},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(Re))]),_:1})]),default:l(()=>[_(" "+d(e(c)("actions.add")),1)]),_:1})]),_:1})]),v("div",rn,[t(e(Ie),{show:e(a)},{default:l(()=>[e(p).length>0?(A(),B(e(Y),{key:0,cols:4,"x-gap":16,"y-gap":16},{default:l(()=>[(A(!0),J(Fe,null,Xe(e(p),q=>(A(),B(e(x),{key:q.serviceName},{default:l(()=>[t(Dl,{service:q,onViewDetail:P,onEdit:re,onRefresh:L,onDelete:Le,onViewEvents:ye},null,8,["service"])]),_:2},1024))),128))]),_:1})):e(a)?Z("",!0):(A(),B(e(He),{key:1,description:e(c)("noServices"),style:{padding:"60px 0"}},null,8,["description"]))]),_:1},8,["show"])]),t(Bl,{show:R.value,"onUpdate:show":ae[4]||(ae[4]=q=>R.value=q),"service-name":r.value},null,8,["show","service-name"])],512),[[De,E.value==="list"]]),xe(v("div",on,[E.value==="form"?(A(),B(fs,{key:0,"edit-data":S.value,onBack:be,onSuccess:ke},null,8,["edit-data"])):Z("",!0)],512),[[De,E.value==="form"]]),xe(v("div",cn,[v("div",un,[t(e(ce),{justify:"space-between",align:"center"},{default:l(()=>[v("div",dn,[t(e(G),{text:"",onClick:be},{icon:l(()=>[t(e(O),null,{default:l(()=>[t(e(Dt))]),_:1})]),default:l(()=>[_(" "+d(e(c)("actions.back")),1)]),_:1}),t(e(wt),{vertical:""}),v("h3",null,d(e(c)("serviceEventLog"))+" - "+d(T.value),1)])]),_:1})]),E.value==="events"?(A(),B(an,{key:0,"service-id":T.value},null,8,["service-id"])):Z("",!0)],512),[[De,E.value==="events"]]),xe(v("div",vn,[t(e(za),Na(Ia(e(g))),null,16)],512),[[De,E.value==="list"]])]))}}),jn=fe(pn,[["__scopeId","data-v-91961e99"]]);export{jn as default};
