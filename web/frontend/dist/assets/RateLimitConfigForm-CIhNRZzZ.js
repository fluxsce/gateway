import{d as ie,c as H,o as p,a as F,$ as ke,Z as xe,a8 as ne,aM as J,I as oe,v as L,cQ as _e,a3 as be,bR as b,r as T,g as ee,f as de,R as re,b as fe,a0 as ae,a1 as le,a2 as ce,h as pe,m as t,q as E,t as A,n as e,w as a,aX as ve,V as Y,cz as w,J as r,aY as ye,E as q,x as K,d2 as G,d3 as Pe,d4 as Ae,_ as ge,B as Se,D as Ne,M as De,A as Ce,U as we,S as Ie,co as ze,cT as Ue}from"./index-Bm8WTrgo.js";import{T as Fe}from"./TrashOutline-lFSebtJX.js";import{I as Z}from"./InformationCircleOutline-BTXjnBdJ.js";import{N as te}from"./Switch-Bksdye9l.js";import{_ as V}from"./Grid-BszSwIPR.js";import{_ as m}from"./FormItemGridItem-B5vUm4-s.js";import{_ as ue}from"./RadioGroup-DeGnoaYt.js";import{_ as Q}from"./DynamicTags-0c3x5b1s.js";import{_ as me}from"./Alert-DJnAu6Nd.js";import{C as Te}from"./CreateOutline-B_iFUquS.js";import{C as Oe}from"./CheckmarkCircleOutline-zm_tlaJ3.js";import{N as se}from"./InputNumber-Da0ADIUs.js";import{A as Re}from"./AddOutline-Crq49hC7.js";import{R as Me}from"./RefreshOutline-BMOJJPWL.js";import{_ as Ee}from"./DataTable-C88L71Mp.js";const je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},$e=ie({name:"ChatboxOutline",render:function(z,u){return p(),H("svg",je,u[0]||(u[0]=[F("path",{d:"M408 64H104a56.16 56.16 0 0 0-56 56v192a56.16 56.16 0 0 0 56 56h40v80l93.72-78.14a8 8 0 0 1 5.13-1.86H408a56.16 56.16 0 0 0 56-56V120a56.16 56.16 0 0 0-56-56z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),He={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Be=ie({name:"FlagOutline",render:function(z,u){return p(),H("svg",He,u[0]||(u[0]=[F("path",{d:"M80 464V68.14a8 8 0 0 1 4-6.9C91.81 56.66 112.92 48 160 48c64 0 145 48 192 48a199.53 199.53 0 0 0 77.23-15.77a2 2 0 0 1 2.77 1.85v219.36a4 4 0 0 1-2.39 3.65C421.37 308.7 392.33 320 352 320c-48 0-128-32-192-32s-80 16-80 16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),Le={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Je=ie({name:"ReaderOutline",render:function(z,u){return p(),H("svg",Le,u[0]||(u[0]=[F("rect",{x:"96",y:"48",width:"320",height:"416",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),F("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 128h160"},null,-1),F("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 208h160"},null,-1),F("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 288h80"},null,-1)]))}}),We={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ye=ie({name:"SaveOutline",render:function(z,u){return p(),H("svg",We,u[0]||(u[0]=[F("path",{d:"M380.93 57.37A32 32 0 0 0 358.3 48H94.22A46.21 46.21 0 0 0 48 94.22v323.56A46.21 46.21 0 0 0 94.22 464h323.56A46.36 46.36 0 0 0 464 417.78V153.7a32 32 0 0 0-9.37-22.63zM256 416a64 64 0 1 1 64-64a63.92 63.92 0 0 1-64 64zm48-224H112a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h192a16 16 0 0 1 16 16v64a16 16 0 0 1-16 16z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),X=ke("/gateway/hubcommon002");async function Xe(g){return X.post("/addSecurityConfig",g)}async function Ke(g){return X.post("/editSecurityConfig",g)}async function qe(g,z){return X.post("/deleteSecurityConfig",{securityConfigId:g,tenantId:z})}async function Ve(g){return X.post("/querySecurityConfigsByGatewayInstance",g)}async function Qe(g){return X.post("/querySecurityConfigsByRouteConfig",g)}async function Ge(g){return X.post("/ip-access/add",g)}async function Ze(g){return X.post("/ip-access/get",g)}async function et(g){return X.post("/ip-access/update",g)}async function tt(g){return X.post("/useragent-access/add",g)}async function at(g){return X.post("/useragent-access/get",g)}async function lt(g){return X.post("/useragent-access/update",g)}async function nt(g){return X.post("/api-access/add",g)}async function it(g){return X.post("/api-access/get",g)}async function st(g){return X.post("/api-access/update",g)}async function ot(g){return X.post("/domain-access/add",g)}async function ut(g){return X.post("/domain-access/get",g)}async function rt(g){return X.post("/domain-access/update",g)}async function dt(g){return X.post("/cors/add",g)}async function ft(g){return X.post("/cors/get",g)}async function gt(g){return X.post("/cors/update",g)}async function ct(g){return X.post("/auth/add",g)}async function pt(g){return X.post("/auth/get",g)}async function vt(g){return X.post("/auth/update",g)}async function yt(g){return X.post("/rate-limit/add",g)}async function mt(g){return X.post("/rate-limit/get",g)}async function It(g){return X.post("/rate-limit/update",g)}xe("SecurityConfig");function Ct(){const g=n=>n.filter(x=>x.activeFlag==="Y"),z=n=>{const x=n.activeFlag==="Y";return ne(J,{type:x?"success":"default",size:"small"},()=>x?"æ´»åŠ¨":"éžæ´»åŠ¨")},u=n=>n.gatewayInstanceId?ne(J,{type:"info",size:"small"},()=>"å®žä¾‹çº§"):n.routeConfigId?ne(J,{type:"warning",size:"small"},()=>"è·¯ç”±çº§"):ne(J,{type:"default",size:"small"},()=>"å…¨å±€"),I=(n,x)=>{const y=ne(be,{trigger:"hover"},{trigger:()=>ne(oe,{size:"small",type:"primary",secondary:!0,onClick:()=>x("edit",n)},{icon:()=>ne(L,null,()=>ne(_e))}),default:()=>"ç¼–è¾‘é…ç½®"}),D=ne(be,{trigger:"hover"},{trigger:()=>ne(oe,{size:"small",type:"error",secondary:!0,onClick:()=>x("delete",n)},{icon:()=>ne(L,null,()=>ne(Fe))}),default:()=>"åˆ é™¤é…ç½®"});return ne(b,{size:"small"},()=>[y,D])};return{getActiveConfigs:g,renderActiveTag:z,renderConfigType:u,renderActionButtons:I,createTableColumns:n=>[{title:"é…ç½®åç§°",key:"configName",width:180,ellipsis:{tooltip:!0}},{title:"æè¿°",key:"configDesc",width:200,ellipsis:{tooltip:!0},render:x=>x.configDesc||"-"},{title:"é…ç½®ç±»åž‹",key:"configType",width:100,render:u},{title:"ä¼˜å…ˆçº§",key:"configPriority",width:80,render:x=>x.configPriority},{title:"çŠ¶æ€",key:"activeFlag",width:100,render:z},{title:"åˆ›å»ºæ—¶é—´",key:"addTime",width:160,render:x=>x.addTime||"-"},{title:"æœ€åŽä¿®æ”¹",key:"editTime",width:160,render:x=>x.editTime||"-"},{title:"æ“ä½œ",key:"actions",width:150,fixed:"right",render:x=>I(x,n)}]}}function wt(){const g=fe(),z={configName:[{required:!0,message:"è¯·è¾“å…¥é…ç½®åç§°",trigger:"blur"},{min:2,max:50,message:"é…ç½®åç§°é•¿åº¦åœ¨2-50ä¸ªå­—ç¬¦",trigger:"blur"}],configDesc:[{required:!0,message:"è¯·è¾“å…¥é…ç½®æè¿°",trigger:"blur"}],configPriority:[{required:!0,type:"number",message:"è¯·è¾“å…¥é…ç½®ä¼˜å…ˆçº§",trigger:"blur"}]},u=()=>({configName:"",configDesc:"",configPriority:1,noteText:""});return{formRules:z,createDefaultFormData:u,fillEditData:(M,n)=>{n?Object.assign(M,n):Object.assign(M,u())},message:g}}function bt(g){const{formRules:z,createDefaultFormData:u,fillEditData:I,message:M}=wt(),n=T(),x=T(!1),y=T(""),D=T(!1),d=ee(()=>!!g.editData),j=de(u());re(()=>g.editData,h=>{I(j,h),h&&(y.value=h.securityConfigId||"",D.value=!1)},{immediate:!0});const s=()=>{D.value=!0},N=async()=>{var h;try{await((h=n.value)==null?void 0:h.validate()),x.value=!0;const S={configName:j.configName,configDesc:j.configDesc,configPriority:j.configPriority,noteText:j.noteText,gatewayInstanceId:g.gatewayInstanceId,routeConfigId:g.routeConfigId};let k;if(d.value&&y.value?k=await Ke({...S,securityConfigId:y.value}):k=await Xe(S),ae(k)){const i=le(k);y.value=(i==null?void 0:i.securityConfigId)||y.value,D.value=!1,M.success(d.value?"åŸºç¡€é…ç½®æ›´æ–°æˆåŠŸ":"åŸºç¡€é…ç½®åˆ›å»ºæˆåŠŸ")}else{const i=ce(k,"åŸºç¡€é…ç½®ä¿å­˜å¤±è´¥");M.error(i)}}catch{M.error("è¯·æ£€æŸ¥åŸºç¡€é…ç½®è¾“å…¥")}finally{x.value=!1}},$=h=>{M.success(`${U(h)}ä¿å­˜æˆåŠŸ`)},B=(h,S)=>{M.error(`${U(h)}ä¿å­˜å¤±è´¥: ${S}`)},U=h=>({ip:"IPè®¿é—®æŽ§åˆ¶",useragent:"User-AgentæŽ§åˆ¶",api:"APIè®¿é—®æŽ§åˆ¶",domain:"åŸŸåè®¿é—®æŽ§åˆ¶"})[h]||h;return{formRef:n,formData:j,formRules:z,isEdit:d,basicConfigSaving:x,currentSecurityConfigId:y,hasBasicConfigChanges:D,markBasicConfigChanged:s,handleSaveBasicConfig:N,handleSubModuleSaveSuccess:$,handleSubModuleSaveError:B}}const ht={class:"ip-access-config"},kt={key:0},xt={key:0},_t={key:0},Pt={key:0},At={key:0},St=ie({__name:"IpAccessConfigForm",props:{securityConfigId:{default:""},gatewayInstanceId:{default:""},initialData:{default:()=>({})}},setup(g,{expose:z}){const u=g,I=fe(),M=()=>({activeFlag:"N",configName:"IPè®¿é—®æŽ§åˆ¶é…ç½®",defaultPolicy:"allow",whitelistIps:[],blacklistIps:[],whitelistCidrs:[],blacklistCidrs:[],trustXForwardedFor:"N",trustXRealIp:"N",...u.initialData}),n=de(M()),x=T(!1),y=T(!1),D=T(!1),d=T(""),j=T(!1),s=de({whitelistIps:[],blacklistIps:[],whitelistCidrs:[],blacklistCidrs:[]}),N=[{label:"å…è®¸ï¼ˆç™½åå•æ¨¡å¼ï¼‰",value:"allow"},{label:"æ‹’ç»ï¼ˆé»‘åå•æ¨¡å¼ï¼‰",value:"deny"}],$=ee(()=>!!(u.securityConfigId&&u.gatewayInstanceId)),B=ee(()=>{const _=JSON.stringify(n);return new Blob([_]).size}),U=ee(()=>!h.value&&y.value),h=ee(()=>s.whitelistIps.length>0||s.blacklistIps.length>0||s.whitelistCidrs.length>0||s.blacklistCidrs.length>0),S=(_,c)=>{const P=Pe(_);return s[c]=P.invalidIps,P.valid},k=(_,c)=>{const P=Ae(_);return s[c]=P.invalidCidrs,P.valid},i=_=>{if(_===0)return"0 B";const c=1024,P=["B","KB","MB"],he=Math.floor(Math.log(_)/Math.log(c));return parseFloat((_/Math.pow(c,he)).toFixed(2))+" "+P[he]},l=()=>{const{defaultPolicy:_}=n,c=n.whitelistIps.length>0||n.whitelistCidrs.length>0,P=n.blacklistIps.length>0||n.blacklistCidrs.length>0;return _==="allow"?P?"é»˜è®¤å…è®¸ï¼Œé»‘åå•æ‹’ç»":"é»˜è®¤å…è®¸æ‰€æœ‰IP":c?"é»˜è®¤æ‹’ç»ï¼Œç™½åå•å…è®¸":"é»˜è®¤æ‹’ç»æ‰€æœ‰IP"},o=async _=>{n.activeFlag=_,y.value=!0,d.value&&await f()},W=()=>{y.value=!0},C=_=>{s[_]=[],S(n[_],_),y.value=!0},O=_=>{s[_]=[],k(n[_],_),y.value=!0},R=async()=>{if($.value)try{const _=await Ze({securityConfigId:u.securityConfigId});if(ae(_)){const c=le(_);let P=null;Array.isArray(c)&&c.length>0?P=c[0]:c&&typeof c=="object"&&c.ipAccessConfigId&&(P=c),P&&(d.value=P.ipAccessConfigId,Object.assign(n,{activeFlag:P.activeFlag||"N",configName:P.configName||n.configName,defaultPolicy:P.defaultPolicy||n.defaultPolicy,whitelistIps:G(P.whitelistIps),blacklistIps:G(P.blacklistIps),whitelistCidrs:G(P.whitelistCidrs),blacklistCidrs:G(P.blacklistCidrs),trustXForwardedFor:P.trustXForwardedFor||"N",trustXRealIp:P.trustXRealIp||"N"}),D.value=!0,y.value=!1,S(n.whitelistIps,"whitelistIps"),S(n.blacklistIps,"blacklistIps"),k(n.whitelistCidrs,"whitelistCidrs"),k(n.blacklistCidrs,"blacklistCidrs"))}}catch(_){console.error("åŠ è½½IPè®¿é—®æŽ§åˆ¶é…ç½®å¤±è´¥:",_)}finally{j.value=!0}},f=async()=>{if(!$.value){I.warning("è¯·å…ˆä¿å­˜åŸºç¡€é…ç½®");return}if(!n.configName.trim()){I.warning("è¯·è¾“å…¥é…ç½®åç§°");return}x.value=!0;try{const _={securityConfigId:u.securityConfigId,gatewayInstanceId:u.gatewayInstanceId,configName:n.configName,defaultPolicy:n.defaultPolicy,whitelistIps:JSON.stringify(n.whitelistIps),blacklistIps:JSON.stringify(n.blacklistIps),whitelistCidrs:JSON.stringify(n.whitelistCidrs),blacklistCidrs:JSON.stringify(n.blacklistCidrs),trustXForwardedFor:n.trustXForwardedFor,trustXRealIp:n.trustXRealIp,activeFlag:n.activeFlag};let c;if(d.value?c=await et({..._,ipAccessConfigId:d.value}):c=await Ge(_),ae(c)){if(y.value=!1,D.value=!0,!d.value){const P=le(c);P!=null&&P.ipAccessConfigId&&(d.value=P.ipAccessConfigId)}I.success("IPè®¿é—®æŽ§åˆ¶é…ç½®ä¿å­˜æˆåŠŸ")}else{const P=ce(c,"IPè®¿é—®æŽ§åˆ¶é…ç½®ä¿å­˜å¤±è´¥");I.error(P)}}catch(_){const c=_ instanceof Error?_.message:"ä¿å­˜å¤±è´¥";I.error(c),console.error("ä¿å­˜IPè®¿é—®æŽ§åˆ¶é…ç½®å¤±è´¥:",_)}finally{x.value=!1}},v=()=>{Object.assign(n,M()),Object.keys(s).forEach(_=>{s[_]=[]}),y.value=!1,D.value=!1,d.value=""};return re([()=>u.securityConfigId,()=>u.gatewayInstanceId],()=>{$.value?R():v()},{immediate:!1}),pe(()=>{$.value?R():j.value=!0}),z({save:f,reset:v,hasChanges:()=>y.value,isConfigured:()=>D.value}),(_,c)=>(p(),H("div",ht,[t(e(b),{vertical:"",size:"medium"},{default:a(()=>[t(e(Y),{size:"small",bordered:!1,embedded:""},{default:a(()=>[t(e(b),{align:"center",justify:"space-between"},{default:a(()=>[F("div",null,[t(e(w),{strong:""},{default:a(()=>c[13]||(c[13]=[r("å¯ç”¨IPè®¿é—®æŽ§åˆ¶")])),_:1}),t(e(w),{depth:"3",style:{display:"block","margin-top":"4px"}},{default:a(()=>c[14]||(c[14]=[r(" åŸºäºŽå®¢æˆ·ç«¯IPåœ°å€æŽ§åˆ¶è®¿é—®æƒé™ï¼Œæ”¯æŒå•IPå’ŒCIDRç½‘æ®µé…ç½® ")])),_:1})]),t(e(te),{value:n.activeFlag,"onUpdate:value":[c[0]||(c[0]=P=>n.activeFlag=P),o],"checked-value":"Y","unchecked-value":"N"},null,8,["value"])]),_:1})]),_:1}),n.activeFlag==="Y"?ve((p(),H("div",kt,[t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"é…ç½®åç§°"},{default:a(()=>[t(e(q),{value:n.configName,"onUpdate:value":c[1]||(c[1]=P=>n.configName=P),placeholder:"IPè®¿é—®æŽ§åˆ¶é…ç½®åç§°",onInput:W},null,8,["value"])]),_:1}),t(e(m),{label:"é»˜è®¤ç­–ç•¥"},{default:a(()=>[t(e(be),{trigger:"hover",placement:"top"},{trigger:a(()=>[t(e(ue),{value:n.defaultPolicy,"onUpdate:value":[c[2]||(c[2]=P=>n.defaultPolicy=P),W],options:N,placeholder:"é€‰æ‹©é»˜è®¤ç­–ç•¥"},null,8,["value"])]),default:a(()=>[c[15]||(c[15]=F("div",{style:{"max-width":"320px","line-height":"1.5"}},[F("p",null,[F("strong",null,"é»˜è®¤ç­–ç•¥è¯´æ˜Žï¼š")]),F("p",null,[F("strong",null,"â€¢ allowï¼ˆå…è®¸ï¼‰:"),r(" é»˜è®¤å…è®¸è®¿é—®ï¼Œåªæœ‰åœ¨é»‘åå•ä¸­çš„IPä¼šè¢«æ‹’ç»")]),F("p",null,[F("strong",null,"â€¢ denyï¼ˆæ‹’ç»ï¼‰:"),r(" é»˜è®¤æ‹’ç»è®¿é—®ï¼Œåªæœ‰åœ¨ç™½åå•ä¸­çš„IPæ‰è¢«å…è®¸")]),F("p",{style:{color:"#f0a020"}},[F("strong",null,"âš ï¸ é‡è¦ï¼š"),r("é»‘åå•ä¼˜å…ˆçº§é«˜äºŽç™½åå•ï¼Œæ— è®ºé»˜è®¤ç­–ç•¥å¦‚ä½•ï¼Œé»‘åå•ä¸­çš„IPéƒ½ä¼šè¢«æ‹’ç» ")])],-1))]),_:1})]),_:1}),t(e(m),{label:"ä¿¡ä»»X-Forwarded-For"},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[t(e(te),{value:n.trustXForwardedFor,"onUpdate:value":[c[3]||(c[3]=P=>n.trustXForwardedFor=P),W],"checked-value":"Y","unchecked-value":"N"},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>c[16]||(c[16]=[r("ä¿¡ä»»ä»£ç†æœåŠ¡å™¨çš„X-Forwarded-Forå¤´")])),_:1})]),_:1})]),_:1}),t(e(m),{label:"ä¿¡ä»»X-Real-IP"},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[t(e(te),{value:n.trustXRealIp,"onUpdate:value":[c[4]||(c[4]=P=>n.trustXRealIp=P),W],"checked-value":"Y","unchecked-value":"N"},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>c[17]||(c[17]=[r("ä¿¡ä»»ä»£ç†æœåŠ¡å™¨çš„X-Real-IPå¤´")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"IPç™½åå•"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.whitelistIps,"onUpdate:value":[c[5]||(c[5]=P=>n.whitelistIps=P),c[6]||(c[6]=P=>C("whitelistIps"))],"input-props":{placeholder:"è¾“å…¥IPåœ°å€ï¼Œå¦‚ï¼š192.168.1.100"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),c[18]||(c[18]=r(" ç²¾ç¡®åŒ¹é…å•ä¸ªIPåœ°å€ï¼Œç™½åå•ä¸­çš„IPå°†è¢«å…è®¸è®¿é—® "))]),_:1}),s.whitelistIps.length>0?(p(),H("div",xt,[t(e(w),{type:"error",style:{"font-size":"12px"}},{default:a(()=>[r(" æ— æ•ˆçš„IPåœ°å€ï¼š"+K(s.whitelistIps.join(", ")),1)]),_:1})])):A("",!0)]),_:1})]),_:1}),t(e(m),{label:"CIDRç™½åå•"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.whitelistCidrs,"onUpdate:value":[c[7]||(c[7]=P=>n.whitelistCidrs=P),c[8]||(c[8]=P=>O("whitelistCidrs"))],"input-props":{placeholder:"è¾“å…¥CIDRç½‘æ®µï¼Œå¦‚ï¼š192.168.1.0/24"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),c[19]||(c[19]=r(" åŒ¹é…ç½‘æ®µèŒƒå›´ï¼Œå¦‚ï¼š192.168.1.0/24ï¼ˆ192.168.1.1-254ï¼‰ "))]),_:1}),s.whitelistCidrs.length>0?(p(),H("div",_t,[t(e(w),{type:"error",style:{"font-size":"12px"}},{default:a(()=>[r(" æ— æ•ˆçš„CIDRç½‘æ®µï¼š"+K(s.whitelistCidrs.join(", ")),1)]),_:1})])):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"IPé»‘åå•"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.blacklistIps,"onUpdate:value":[c[9]||(c[9]=P=>n.blacklistIps=P),c[10]||(c[10]=P=>C("blacklistIps"))],"input-props":{placeholder:"è¾“å…¥IPåœ°å€ï¼Œå¦‚ï¼š192.168.1.100"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),c[20]||(c[20]=r(" ç²¾ç¡®åŒ¹é…å•ä¸ªIPåœ°å€ï¼Œé»‘åå•ä¼˜å…ˆçº§æœ€é«˜ï¼Œç›´æŽ¥æ‹’ç»è®¿é—® "))]),_:1}),s.blacklistIps.length>0?(p(),H("div",Pt,[t(e(w),{type:"error",style:{"font-size":"12px"}},{default:a(()=>[r(" æ— æ•ˆçš„IPåœ°å€ï¼š"+K(s.blacklistIps.join(", ")),1)]),_:1})])):A("",!0)]),_:1})]),_:1}),t(e(m),{label:"CIDRé»‘åå•"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.blacklistCidrs,"onUpdate:value":[c[11]||(c[11]=P=>n.blacklistCidrs=P),c[12]||(c[12]=P=>O("blacklistCidrs"))],"input-props":{placeholder:"è¾“å…¥CIDRç½‘æ®µï¼Œå¦‚ï¼š192.168.1.0/24"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),c[21]||(c[21]=r(" åŒ¹é…ç½‘æ®µèŒƒå›´ï¼Œé»‘åå•ä¼˜å…ˆçº§æœ€é«˜ï¼Œç›´æŽ¥æ‹’ç»è®¿é—® "))]),_:1}),s.blacklistCidrs.length>0?(p(),H("div",At,[t(e(w),{type:"error",style:{"font-size":"12px"}},{default:a(()=>[r(" æ— æ•ˆçš„CIDRç½‘æ®µï¼š"+K(s.blacklistCidrs.join(", ")),1)]),_:1})])):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(e(b),{justify:"space-between",style:{"margin-top":"16px"}},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[y.value?(p(),E(e(J),{key:0,type:"warning",size:"small"},{default:a(()=>c[22]||(c[22]=[r("æœ‰å˜æ›´")])),_:1})):A("",!0),!y.value&&D.value?(p(),E(e(J),{key:1,type:"success",size:"small"},{default:a(()=>c[23]||(c[23]=[r("å·²ä¿å­˜")])),_:1})):A("",!0),$.value?A("",!0):(p(),E(e(J),{key:2,type:"info",size:"small"},{default:a(()=>c[24]||(c[24]=[r("éœ€è¦åŸºç¡€é…ç½®")])),_:1})),t(e(w),{depth:"3"},{default:a(()=>[r(" ç­–ç•¥ï¼š"+K(l()),1)]),_:1})]),_:1}),t(e(b),null,{default:a(()=>[$.value?(p(),E(e(oe),{key:0,type:"primary",onClick:f,loading:x.value,disabled:!U.value},{default:a(()=>c[25]||(c[25]=[r(" ä¿å­˜IPé…ç½® ")])),_:1},8,["loading","disabled"])):A("",!0),h.value?(p(),E(e(w),{key:1,type:"error",style:{"font-size":"12px"}},{default:a(()=>c[26]||(c[26]=[r(" è¯·ä¿®å¤éªŒè¯é”™è¯¯åŽå†ä¿å­˜ ")])),_:1})):A("",!0)]),_:1})]),_:1})],512)),[[ye,j.value]]):A("",!0)]),_:1}),n.activeFlag==="Y"&&B.value>5120?(p(),E(e(me),{key:0,type:"warning",title:"æ•°æ®é‡æé†’",style:{"margin-top":"16px"}},{default:a(()=>[r(" å½“å‰IPé…ç½®æ•°æ®é‡è¾ƒå¤§ï¼ˆ"+K(i(B.value))+"ï¼‰ï¼Œå»ºè®®åˆ†æ‰¹æ¬¡é…ç½®ã€‚ ",1)]),_:1})):A("",!0)]))}}),Nt=ge(St,[["__scopeId","data-v-513e277e"]]),Dt={class:"useragent-access-config"},zt={key:0},Ut=ie({__name:"UserAgentAccessConfigForm",props:{securityConfigId:{default:""},gatewayInstanceId:{default:""},initialData:{default:()=>({})}},setup(g,{expose:z}){const u=g,I=fe(),M=()=>({activeFlag:"N",configName:"User-Agentè®¿é—®æŽ§åˆ¶é…ç½®",defaultPolicy:"allow",whitelistPatterns:[],blacklistPatterns:[],blockEmptyUserAgent:"N",...u.initialData}),n=de(M()),x=T(!1),y=T(!1),D=T(!1),d=T(""),j=T(!1),s=[{label:"å…è®¸ï¼ˆç™½åå•æ¨¡å¼ï¼‰",value:"allow"},{label:"æ‹’ç»ï¼ˆé»‘åå•æ¨¡å¼ï¼‰",value:"deny"}],N=ee(()=>!!(u.securityConfigId&&u.gatewayInstanceId)),$=()=>{const{defaultPolicy:i}=n,l=n.whitelistPatterns.length>0,o=n.blacklistPatterns.length>0;return i==="allow"?o?"é»˜è®¤å…è®¸ï¼Œé»‘åå•æ‹’ç»":"é»˜è®¤å…è®¸æ‰€æœ‰User-Agent":l?"é»˜è®¤æ‹’ç»ï¼Œç™½åå•å…è®¸":"é»˜è®¤æ‹’ç»æ‰€æœ‰User-Agent"},B=async i=>{n.activeFlag=i,y.value=!0,d.value&&await S()},U=()=>{y.value=!0},h=async()=>{if(N.value)try{const i=await at({securityConfigId:u.securityConfigId});if(ae(i)){const l=le(i);let o=null;Array.isArray(l)&&l.length>0?o=l[0]:l&&typeof l=="object"&&l.useragentAccessConfigId&&(o=l),o&&(d.value=o.useragentAccessConfigId,Object.assign(n,{activeFlag:o.activeFlag||"N",configName:o.configName||n.configName,defaultPolicy:o.defaultPolicy||n.defaultPolicy,whitelistPatterns:G(o.whitelistPatterns),blacklistPatterns:G(o.blacklistPatterns),blockEmptyUserAgent:o.blockEmptyUserAgent||"N"}),D.value=!0,y.value=!1)}}catch(i){console.error("åŠ è½½User-Agentè®¿é—®æŽ§åˆ¶é…ç½®å¤±è´¥:",i)}finally{j.value=!0}},S=async()=>{if(!N.value){I.warning("è¯·å…ˆä¿å­˜åŸºç¡€é…ç½®");return}if(!n.configName.trim()){I.warning("è¯·è¾“å…¥é…ç½®åç§°");return}x.value=!0;try{const i={securityConfigId:u.securityConfigId,gatewayInstanceId:u.gatewayInstanceId,configName:n.configName,defaultPolicy:n.defaultPolicy,whitelistPatterns:JSON.stringify(n.whitelistPatterns),blacklistPatterns:JSON.stringify(n.blacklistPatterns),blockEmptyUserAgent:n.blockEmptyUserAgent,activeFlag:n.activeFlag};let l;if(d.value?l=await lt({...i,useragentAccessConfigId:d.value}):l=await tt(i),ae(l)){if(y.value=!1,D.value=!0,!d.value){const o=le(l);o!=null&&o.useragentAccessConfigId&&(d.value=o.useragentAccessConfigId)}I.success("User-Agentè®¿é—®æŽ§åˆ¶é…ç½®ä¿å­˜æˆåŠŸ")}else{const o=ce(l,"User-Agentè®¿é—®æŽ§åˆ¶é…ç½®ä¿å­˜å¤±è´¥");I.error(o)}}catch(i){const l=i instanceof Error?i.message:"ä¿å­˜å¤±è´¥";I.error(l),console.error("ä¿å­˜User-Agentè®¿é—®æŽ§åˆ¶é…ç½®å¤±è´¥:",i)}finally{x.value=!1}},k=()=>{Object.assign(n,M()),y.value=!1,D.value=!1,d.value=""};return re([()=>u.securityConfigId,()=>u.gatewayInstanceId],()=>{N.value?h():k()},{immediate:!1}),pe(()=>{N.value?h():j.value=!0}),z({save:S,reset:k,hasChanges:()=>y.value,isConfigured:()=>D.value}),(i,l)=>(p(),H("div",Dt,[t(e(b),{vertical:"",size:"medium"},{default:a(()=>[t(e(Y),{size:"small",bordered:!1,embedded:""},{default:a(()=>[t(e(b),{align:"center",justify:"space-between"},{default:a(()=>[F("div",null,[t(e(w),{strong:""},{default:a(()=>l[6]||(l[6]=[r("å¯ç”¨User-Agentè®¿é—®æŽ§åˆ¶")])),_:1}),t(e(w),{depth:"3",style:{display:"block","margin-top":"4px"}},{default:a(()=>l[7]||(l[7]=[r(" æ ¹æ®å®¢æˆ·ç«¯User-Agentå­—ç¬¦ä¸²æŽ§åˆ¶è®¿é—®æƒé™ ")])),_:1})]),t(e(te),{value:n.activeFlag,"onUpdate:value":[l[0]||(l[0]=o=>n.activeFlag=o),B],"checked-value":"Y","unchecked-value":"N"},null,8,["value"])]),_:1})]),_:1}),n.activeFlag==="Y"?ve((p(),H("div",zt,[t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"é…ç½®åç§°"},{default:a(()=>[t(e(q),{value:n.configName,"onUpdate:value":l[1]||(l[1]=o=>n.configName=o),placeholder:"User-AgentæŽ§åˆ¶é…ç½®åç§°",onInput:U},null,8,["value"])]),_:1}),t(e(m),{label:"é»˜è®¤ç­–ç•¥"},{default:a(()=>[t(e(ue),{value:n.defaultPolicy,"onUpdate:value":[l[2]||(l[2]=o=>n.defaultPolicy=o),U],options:s,placeholder:"é€‰æ‹©é»˜è®¤ç­–ç•¥"},null,8,["value"])]),_:1}),t(e(m),{label:"é˜»æ­¢ç©ºUser-Agent",span:2},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[t(e(te),{value:n.blockEmptyUserAgent,"onUpdate:value":[l[3]||(l[3]=o=>n.blockEmptyUserAgent=o),U],"checked-value":"Y","unchecked-value":"N"},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>l[8]||(l[8]=[r("é˜»æ­¢æ²¡æœ‰User-Agentå¤´çš„è¯·æ±‚")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(w),{strong:""},{default:a(()=>l[9]||(l[9]=[r("User-Agentç™½åå•")])),_:1}),t(e(Q),{value:n.whitelistPatterns,"onUpdate:value":[l[4]||(l[4]=o=>n.whitelistPatterns=o),U],"input-props":{placeholder:"è¾“å…¥å…è®¸çš„User-Agentæ¨¡å¼"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),l[10]||(l[10]=r(" æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå¦‚ï¼šMozilla/.*Chrome.* "))]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(w),{strong:""},{default:a(()=>l[11]||(l[11]=[r("User-Agenté»‘åå•")])),_:1}),t(e(Q),{value:n.blacklistPatterns,"onUpdate:value":[l[5]||(l[5]=o=>n.blacklistPatterns=o),U],"input-props":{placeholder:"è¾“å…¥ç¦æ­¢çš„User-Agentæ¨¡å¼"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),l[12]||(l[12]=r(" æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œä¼˜å…ˆçº§é«˜äºŽç™½åå• "))]),_:1})]),_:1})]),_:1}),t(e(b),{justify:"space-between",style:{"margin-top":"16px"}},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[y.value?(p(),E(e(J),{key:0,type:"warning",size:"small"},{default:a(()=>l[13]||(l[13]=[r("æœ‰å˜æ›´")])),_:1})):A("",!0),!y.value&&D.value?(p(),E(e(J),{key:1,type:"success",size:"small"},{default:a(()=>l[14]||(l[14]=[r("å·²ä¿å­˜")])),_:1})):A("",!0),N.value?A("",!0):(p(),E(e(J),{key:2,type:"info",size:"small"},{default:a(()=>l[15]||(l[15]=[r("éœ€è¦åŸºç¡€é…ç½®")])),_:1})),t(e(w),{depth:"3"},{default:a(()=>[r(" ç­–ç•¥ï¼š"+K($()),1)]),_:1})]),_:1}),t(e(b),null,{default:a(()=>[N.value?(p(),E(e(oe),{key:0,type:"primary",onClick:S,loading:x.value,disabled:!y.value},{default:a(()=>l[16]||(l[16]=[r(" ä¿å­˜User-Agenté…ç½® ")])),_:1},8,["loading","disabled"])):A("",!0)]),_:1})]),_:1})],512)),[[ye,j.value]]):A("",!0)]),_:1})]))}}),Ft=ge(Ut,[["__scopeId","data-v-cd82fa8d"]]),Tt={class:"api-access-config"},Ot={key:0},Rt=ie({__name:"ApiAccessConfigForm",props:{securityConfigId:{default:""},gatewayInstanceId:{default:""},initialData:{default:()=>({})}},setup(g,{expose:z}){const u=g,I=fe(),M=()=>({activeFlag:"N",configName:"APIè®¿é—®æŽ§åˆ¶é…ç½®",defaultPolicy:"allow",whitelistPaths:[],blacklistPaths:[],allowedMethods:[],blockedMethods:[],...u.initialData}),n=de(M()),x=T(!1),y=T(!1),D=T(!1),d=T(""),j=T(!1),s=[{label:"å…è®¸ï¼ˆç™½åå•æ¨¡å¼ï¼‰",value:"allow"},{label:"æ‹’ç»ï¼ˆé»‘åå•æ¨¡å¼ï¼‰",value:"deny"}],N=ee(()=>!!(u.securityConfigId&&u.gatewayInstanceId)),$=()=>{const{defaultPolicy:i}=n,l=n.whitelistPaths.length>0,o=n.blacklistPaths.length>0;return i==="allow"?o?"é»˜è®¤å…è®¸ï¼Œé»‘åå•æ‹’ç»":"é»˜è®¤å…è®¸æ‰€æœ‰API":l?"é»˜è®¤æ‹’ç»ï¼Œç™½åå•å…è®¸":"é»˜è®¤æ‹’ç»æ‰€æœ‰API"},B=async i=>{n.activeFlag=i,y.value=!0,d.value&&await S()},U=()=>{y.value=!0},h=async()=>{if(N.value)try{const i=await it({securityConfigId:u.securityConfigId});if(ae(i)){const l=le(i);let o=null;Array.isArray(l)&&l.length>0?o=l[0]:l&&typeof l=="object"&&l.apiAccessConfigId&&(o=l),o&&(d.value=o.apiAccessConfigId,Object.assign(n,{activeFlag:o.activeFlag||"N",configName:o.configName||n.configName,defaultPolicy:o.defaultPolicy||n.defaultPolicy,whitelistPaths:G(o.whitelistPaths),blacklistPaths:G(o.blacklistPaths),allowedMethods:G(o.allowedMethods),blockedMethods:G(o.blockedMethods)}),D.value=!0,y.value=!1)}}catch(i){console.error("åŠ è½½APIè®¿é—®æŽ§åˆ¶é…ç½®å¤±è´¥:",i)}finally{j.value=!0}},S=async()=>{if(!N.value){I.warning("è¯·å…ˆä¿å­˜åŸºç¡€é…ç½®");return}if(!n.configName.trim()){I.warning("è¯·è¾“å…¥é…ç½®åç§°");return}x.value=!0;try{const i={securityConfigId:u.securityConfigId,gatewayInstanceId:u.gatewayInstanceId,configName:n.configName,defaultPolicy:n.defaultPolicy,whitelistPaths:JSON.stringify(n.whitelistPaths),blacklistPaths:JSON.stringify(n.blacklistPaths),allowedMethods:JSON.stringify(n.allowedMethods),blockedMethods:JSON.stringify(n.blockedMethods),activeFlag:n.activeFlag};let l;if(d.value?l=await st({...i,apiAccessConfigId:d.value}):l=await nt(i),ae(l)){if(y.value=!1,D.value=!0,!d.value){const o=le(l);o!=null&&o.apiAccessConfigId&&(d.value=o.apiAccessConfigId)}I.success("APIè®¿é—®æŽ§åˆ¶é…ç½®ä¿å­˜æˆåŠŸ")}else{const o=ce(l,"APIè®¿é—®æŽ§åˆ¶é…ç½®ä¿å­˜å¤±è´¥");I.error(o)}}catch(i){const l=i instanceof Error?i.message:"ä¿å­˜å¤±è´¥";I.error(l),console.error("ä¿å­˜APIè®¿é—®æŽ§åˆ¶é…ç½®å¤±è´¥:",i)}finally{x.value=!1}},k=()=>{Object.assign(n,M()),y.value=!1,D.value=!1,d.value=""};return re([()=>u.securityConfigId,()=>u.gatewayInstanceId],()=>{N.value?h():k()},{immediate:!1}),pe(()=>{N.value?h():j.value=!0}),z({save:S,reset:k,hasChanges:()=>y.value,isConfigured:()=>D.value}),(i,l)=>(p(),H("div",Tt,[t(e(b),{vertical:"",size:"medium"},{default:a(()=>[t(e(Y),{size:"small",bordered:!1,embedded:""},{default:a(()=>[t(e(b),{align:"center",justify:"space-between"},{default:a(()=>[F("div",null,[t(e(w),{strong:""},{default:a(()=>l[7]||(l[7]=[r("å¯ç”¨APIè®¿é—®æŽ§åˆ¶")])),_:1}),t(e(w),{depth:"3",style:{display:"block","margin-top":"4px"}},{default:a(()=>l[8]||(l[8]=[r(" åŸºäºŽAPIè·¯å¾„å’ŒHTTPæ–¹æ³•æŽ§åˆ¶è®¿é—®æƒé™ ")])),_:1})]),t(e(te),{value:n.activeFlag,"onUpdate:value":[l[0]||(l[0]=o=>n.activeFlag=o),B],"checked-value":"Y","unchecked-value":"N"},null,8,["value"])]),_:1})]),_:1}),n.activeFlag==="Y"?ve((p(),H("div",Ot,[t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"é…ç½®åç§°"},{default:a(()=>[t(e(q),{value:n.configName,"onUpdate:value":l[1]||(l[1]=o=>n.configName=o),placeholder:"APIè®¿é—®æŽ§åˆ¶é…ç½®åç§°",onInput:U},null,8,["value"])]),_:1}),t(e(m),{label:"é»˜è®¤ç­–ç•¥"},{default:a(()=>[t(e(ue),{value:n.defaultPolicy,"onUpdate:value":[l[2]||(l[2]=o=>n.defaultPolicy=o),U],options:s,placeholder:"é€‰æ‹©é»˜è®¤ç­–ç•¥"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"APIè·¯å¾„ç™½åå•"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.whitelistPaths,"onUpdate:value":[l[3]||(l[3]=o=>n.whitelistPaths=o),U],"input-props":{placeholder:"è¾“å…¥å…è®¸çš„APIè·¯å¾„"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),l[9]||(l[9]=r(" æ”¯æŒé€šé…ç¬¦åŒ¹é…ï¼Œå¦‚ï¼š/api/v1/* "))]),_:1})]),_:1})]),_:1}),t(e(m),{label:"APIè·¯å¾„é»‘åå•"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.blacklistPaths,"onUpdate:value":[l[4]||(l[4]=o=>n.blacklistPaths=o),U],"input-props":{placeholder:"è¾“å…¥ç¦æ­¢çš„APIè·¯å¾„"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),l[10]||(l[10]=r(" æ”¯æŒé€šé…ç¬¦åŒ¹é…ï¼Œä¼˜å…ˆçº§é«˜äºŽç™½åå• "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"å…è®¸çš„HTTPæ–¹æ³•"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.allowedMethods,"onUpdate:value":[l[5]||(l[5]=o=>n.allowedMethods=o),U],"input-props":{placeholder:"è¾“å…¥å…è®¸çš„HTTPæ–¹æ³•"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),l[11]||(l[11]=r(" å¦‚ï¼šGET, POST, PUT, DELETE "))]),_:1})]),_:1})]),_:1}),t(e(m),{label:"ç¦æ­¢çš„HTTPæ–¹æ³•"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.blockedMethods,"onUpdate:value":[l[6]||(l[6]=o=>n.blockedMethods=o),U],"input-props":{placeholder:"è¾“å…¥ç¦æ­¢çš„HTTPæ–¹æ³•"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),l[12]||(l[12]=r(" ä¼˜å…ˆçº§é«˜äºŽå…è®¸çš„æ–¹æ³• "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(b),{justify:"space-between",style:{"margin-top":"16px"}},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[y.value?(p(),E(e(J),{key:0,type:"warning",size:"small"},{default:a(()=>l[13]||(l[13]=[r("æœ‰å˜æ›´")])),_:1})):A("",!0),!y.value&&D.value?(p(),E(e(J),{key:1,type:"success",size:"small"},{default:a(()=>l[14]||(l[14]=[r("å·²ä¿å­˜")])),_:1})):A("",!0),N.value?A("",!0):(p(),E(e(J),{key:2,type:"info",size:"small"},{default:a(()=>l[15]||(l[15]=[r("éœ€è¦åŸºç¡€é…ç½®")])),_:1})),t(e(w),{depth:"3"},{default:a(()=>[r(" ç­–ç•¥ï¼š"+K($()),1)]),_:1})]),_:1}),t(e(b),null,{default:a(()=>[N.value?(p(),E(e(oe),{key:0,type:"primary",onClick:S,loading:x.value,disabled:!y.value},{default:a(()=>l[16]||(l[16]=[r(" ä¿å­˜APIé…ç½® ")])),_:1},8,["loading","disabled"])):A("",!0)]),_:1})]),_:1})],512)),[[ye,j.value]]):A("",!0)]),_:1})]))}}),Mt=ge(Rt,[["__scopeId","data-v-e657fa41"]]),Et={class:"domain-access-config"},jt={key:0},$t=ie({__name:"DomainAccessConfigForm",props:{securityConfigId:{default:""},gatewayInstanceId:{default:""},initialData:{default:()=>({})}},setup(g,{expose:z}){const u=g,I=fe(),M=()=>({activeFlag:"N",configName:"åŸŸåè®¿é—®æŽ§åˆ¶é…ç½®",defaultPolicy:"allow",whitelistDomains:[],blacklistDomains:[],allowSubdomains:"Y",...u.initialData}),n=de(M()),x=T(!1),y=T(!1),D=T(!1),d=T(""),j=T(!1),s=[{label:"å…è®¸ï¼ˆç™½åå•æ¨¡å¼ï¼‰",value:"allow"},{label:"æ‹’ç»ï¼ˆé»‘åå•æ¨¡å¼ï¼‰",value:"deny"}],N=ee(()=>!!(u.securityConfigId&&u.gatewayInstanceId)),$=()=>{const{defaultPolicy:i}=n,l=n.whitelistDomains.length>0,o=n.blacklistDomains.length>0;return i==="allow"?o?"é»˜è®¤å…è®¸ï¼Œé»‘åå•æ‹’ç»":"é»˜è®¤å…è®¸æ‰€æœ‰åŸŸå":l?"é»˜è®¤æ‹’ç»ï¼Œç™½åå•å…è®¸":"é»˜è®¤æ‹’ç»æ‰€æœ‰åŸŸå"},B=async i=>{n.activeFlag=i,y.value=!0,d.value&&await S()},U=()=>{y.value=!0},h=async()=>{if(N.value)try{const i=await ut({securityConfigId:u.securityConfigId});if(ae(i)){const l=le(i);let o=null;Array.isArray(l)&&l.length>0?o=l[0]:l&&typeof l=="object"&&l.domainAccessConfigId&&(o=l),o&&(d.value=o.domainAccessConfigId,Object.assign(n,{activeFlag:o.activeFlag||"N",configName:o.configName||n.configName,defaultPolicy:o.defaultPolicy||n.defaultPolicy,whitelistDomains:G(o.whitelistDomains),blacklistDomains:G(o.blacklistDomains),allowSubdomains:o.allowSubdomains||"Y"}),D.value=!0,y.value=!1)}}catch(i){console.error("åŠ è½½åŸŸåè®¿é—®æŽ§åˆ¶é…ç½®å¤±è´¥:",i)}finally{j.value=!0}},S=async()=>{if(!N.value){I.warning("è¯·å…ˆä¿å­˜åŸºç¡€é…ç½®");return}if(!n.configName.trim()){I.warning("è¯·è¾“å…¥é…ç½®åç§°");return}x.value=!0;try{const i={securityConfigId:u.securityConfigId,gatewayInstanceId:u.gatewayInstanceId,configName:n.configName,defaultPolicy:n.defaultPolicy,whitelistDomains:JSON.stringify(n.whitelistDomains),blacklistDomains:JSON.stringify(n.blacklistDomains),allowSubdomains:n.allowSubdomains,activeFlag:n.activeFlag};let l;if(d.value?l=await rt({...i,domainAccessConfigId:d.value}):l=await ot(i),ae(l)){if(y.value=!1,D.value=!0,!d.value){const o=le(l);o!=null&&o.domainAccessConfigId&&(d.value=o.domainAccessConfigId)}I.success("åŸŸåè®¿é—®æŽ§åˆ¶é…ç½®ä¿å­˜æˆåŠŸ")}else{const o=ce(l,"åŸŸåè®¿é—®æŽ§åˆ¶é…ç½®ä¿å­˜å¤±è´¥");I.error(o)}}catch(i){const l=i instanceof Error?i.message:"ä¿å­˜å¤±è´¥";I.error(l),console.error("ä¿å­˜åŸŸåè®¿é—®æŽ§åˆ¶é…ç½®å¤±è´¥:",i)}finally{x.value=!1}},k=()=>{Object.assign(n,M()),y.value=!1,D.value=!1,d.value=""};return re([()=>u.securityConfigId,()=>u.gatewayInstanceId],()=>{N.value?h():k()},{immediate:!1}),pe(()=>{N.value?h():j.value=!0}),z({save:S,reset:k,hasChanges:()=>y.value,isConfigured:()=>D.value}),(i,l)=>(p(),H("div",Et,[t(e(b),{vertical:"",size:"medium"},{default:a(()=>[t(e(Y),{size:"small",bordered:!1,embedded:""},{default:a(()=>[t(e(b),{align:"center",justify:"space-between"},{default:a(()=>[F("div",null,[t(e(w),{strong:""},{default:a(()=>l[6]||(l[6]=[r("å¯ç”¨åŸŸåè®¿é—®æŽ§åˆ¶")])),_:1}),t(e(w),{depth:"3",style:{display:"block","margin-top":"4px"}},{default:a(()=>l[7]||(l[7]=[r(" åŸºäºŽè¯·æ±‚åŸŸåæŽ§åˆ¶è®¿é—®æƒé™ ")])),_:1})]),t(e(te),{value:n.activeFlag,"onUpdate:value":[l[0]||(l[0]=o=>n.activeFlag=o),B],"checked-value":"Y","unchecked-value":"N"},null,8,["value"])]),_:1})]),_:1}),n.activeFlag==="Y"?ve((p(),H("div",jt,[t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"é…ç½®åç§°"},{default:a(()=>[t(e(q),{value:n.configName,"onUpdate:value":l[1]||(l[1]=o=>n.configName=o),placeholder:"åŸŸåè®¿é—®æŽ§åˆ¶é…ç½®åç§°",onInput:U},null,8,["value"])]),_:1}),t(e(m),{label:"é»˜è®¤ç­–ç•¥"},{default:a(()=>[t(e(ue),{value:n.defaultPolicy,"onUpdate:value":[l[2]||(l[2]=o=>n.defaultPolicy=o),U],options:s,placeholder:"é€‰æ‹©é»˜è®¤ç­–ç•¥"},null,8,["value"])]),_:1}),t(e(m),{label:"å…è®¸å­åŸŸå",span:2},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[t(e(te),{value:n.allowSubdomains,"onUpdate:value":[l[3]||(l[3]=o=>n.allowSubdomains=o),U],"checked-value":"Y","unchecked-value":"N"},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>l[8]||(l[8]=[r("æ˜¯å¦å…è®¸åŒ¹é…å­åŸŸåï¼ˆå¦‚ï¼š*.example.comï¼‰")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"åŸŸåç™½åå•"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.whitelistDomains,"onUpdate:value":[l[4]||(l[4]=o=>n.whitelistDomains=o),U],"input-props":{placeholder:"è¾“å…¥å…è®¸çš„åŸŸå"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),l[9]||(l[9]=r(" å¦‚ï¼šexample.com, api.example.com "))]),_:1})]),_:1})]),_:1}),t(e(m),{label:"åŸŸåé»‘åå•"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.blacklistDomains,"onUpdate:value":[l[5]||(l[5]=o=>n.blacklistDomains=o),U],"input-props":{placeholder:"è¾“å…¥ç¦æ­¢çš„åŸŸå"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),l[10]||(l[10]=r(" ä¼˜å…ˆçº§é«˜äºŽç™½åå•ï¼Œç›´æŽ¥æ‹’ç»è®¿é—® "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(b),{justify:"space-between",style:{"margin-top":"16px"}},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[y.value?(p(),E(e(J),{key:0,type:"warning",size:"small"},{default:a(()=>l[11]||(l[11]=[r("æœ‰å˜æ›´")])),_:1})):A("",!0),!y.value&&D.value?(p(),E(e(J),{key:1,type:"success",size:"small"},{default:a(()=>l[12]||(l[12]=[r("å·²ä¿å­˜")])),_:1})):A("",!0),N.value?A("",!0):(p(),E(e(J),{key:2,type:"info",size:"small"},{default:a(()=>l[13]||(l[13]=[r("éœ€è¦åŸºç¡€é…ç½®")])),_:1})),t(e(w),{depth:"3"},{default:a(()=>[r(" ç­–ç•¥ï¼š"+K($()),1)]),_:1})]),_:1}),t(e(b),null,{default:a(()=>[N.value?(p(),E(e(oe),{key:0,type:"primary",onClick:S,loading:x.value,disabled:!y.value},{default:a(()=>l[14]||(l[14]=[r(" ä¿å­˜åŸŸåé…ç½® ")])),_:1},8,["loading","disabled"])):A("",!0)]),_:1})]),_:1})],512)),[[ye,j.value]]):A("",!0)]),_:1})]))}}),Ht=ge($t,[["__scopeId","data-v-a67afdee"]]),Bt={class:"basic-config-content"},Lt={class:"tab-content-wrapper"},Jt={key:0,class:"empty-state"},Wt={class:"tab-content-wrapper"},Yt={key:0,class:"empty-state"},Xt={class:"tab-content-wrapper"},Kt={key:0,class:"empty-state"},qt={class:"tab-content-wrapper"},Vt={key:0,class:"empty-state"},Qt=ie({__name:"SecurityConfigDialog",props:{visible:{type:Boolean,default:!1},editData:{default:null},gatewayInstanceId:{default:""},routeConfigId:{default:""}},emits:["update:visible","submit"],setup(g,{emit:z}){const u=g,I=z,{formRef:M,formData:n,formRules:x,isEdit:y,basicConfigSaving:D,currentSecurityConfigId:d,hasBasicConfigChanges:j,markBasicConfigChanged:s,handleSaveBasicConfig:N}=bt(u),$=x,B=T("ip");return(U,h)=>(p(),E(e(ze),{show:U.visible,"onUpdate:show":h[5]||(h[5]=S=>I("update:visible",S)),"mask-closable":!1,preset:"dialog",title:e(y)?"ç¼–è¾‘å®‰å…¨é…ç½®":"æ–°å»ºå®‰å…¨é…ç½®",style:{width:"75%",maxWidth:"1600px",minWidth:"1000px",minHeight:"800px"},class:"security-config-modal"},{action:a(()=>h[10]||(h[10]=[])),default:a(()=>[t(e(Y),{title:"åŸºç¡€é…ç½®",size:"small",bordered:!1,class:"config-section basic-config-card"},{"header-extra":a(()=>[t(e(b),{align:"center",size:12},{default:a(()=>[e(j)?(p(),E(e(J),{key:0,type:"warning",size:"small",round:""},{icon:a(()=>[t(e(L),null,{default:a(()=>[t(e(Te))]),_:1})]),default:a(()=>[h[6]||(h[6]=r(" æœªä¿å­˜ "))]),_:1})):e(d)?(p(),E(e(J),{key:1,type:"success",size:"small",round:""},{icon:a(()=>[t(e(L),null,{default:a(()=>[t(e(Oe))]),_:1})]),default:a(()=>[h[7]||(h[7]=r(" å·²ä¿å­˜ "))]),_:1})):A("",!0),t(e(oe),{size:"small",type:"primary",onClick:e(N),loading:e(D),disabled:!e(j),round:""},{icon:a(()=>[t(e(L),null,{default:a(()=>[t(e(Ye))]),_:1})]),default:a(()=>[r(" "+K(e(y)?"æ›´æ–°åŸºç¡€é…ç½®":"ä¿å­˜åŸºç¡€é…ç½®"),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),default:a(()=>[F("div",Bt,[t(e(Se),{ref_key:"formRef",ref:M,model:e(n),rules:e($),"label-placement":"left","label-width":"140px","require-mark-placement":"right-hanging",size:"medium",class:"config-form"},{default:a(()=>[t(e(V),{cols:2,"x-gap":24,"y-gap":20},{default:a(()=>[t(e(m),{label:"é…ç½®åç§°",path:"configName"},{default:a(()=>[t(e(q),{value:e(n).configName,"onUpdate:value":h[0]||(h[0]=S=>e(n).configName=S),placeholder:"è¯·è¾“å…¥é…ç½®åç§°",disabled:e(y),onInput:e(s),round:"",clearable:""},{prefix:a(()=>[t(e(L),null,{default:a(()=>[t(e(Ne))]),_:1})]),_:1},8,["value","disabled","onInput"])]),_:1}),t(e(m),{label:"é…ç½®ä¼˜å…ˆçº§",path:"configPriority"},{default:a(()=>[t(e(se),{value:e(n).configPriority,"onUpdate:value":[h[1]||(h[1]=S=>e(n).configPriority=S),e(s)],min:1,max:999,placeholder:"æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜",style:{width:"100%"}},{prefix:a(()=>[t(e(L),null,{default:a(()=>[t(e(Be))]),_:1})]),_:1},8,["value","onUpdate:value"])]),_:1}),t(e(m),{label:"é…ç½®æè¿°",path:"configDesc",span:2},{default:a(()=>[t(e(q),{value:e(n).configDesc,"onUpdate:value":h[2]||(h[2]=S=>e(n).configDesc=S),placeholder:"è¯·è¾“å…¥é…ç½®æè¿°",type:"textarea",rows:3,onInput:e(s),round:"",maxlength:200,"show-count":"",clearable:""},{prefix:a(()=>[t(e(L),null,{default:a(()=>[t(e(Je))]),_:1})]),_:1},8,["value","onInput"])]),_:1}),t(e(m),{label:"å¤‡æ³¨ä¿¡æ¯",path:"noteText",span:2},{default:a(()=>[t(e(q),{value:e(n).noteText,"onUpdate:value":h[3]||(h[3]=S=>e(n).noteText=S),placeholder:"è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯",type:"textarea",rows:2,onInput:e(s),round:"",maxlength:100,"show-count":"",clearable:""},{prefix:a(()=>[t(e(L),null,{default:a(()=>[t(e($e))]),_:1})]),_:1},8,["value","onInput"])]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1}),t(e(Y),{title:"å®‰å…¨ç­–ç•¥é…ç½®",size:"small",bordered:!1,class:"config-section modules-config-card"},{"header-extra":a(()=>[t(e(b),{align:"center",size:8},{default:a(()=>[t(e(L),{size:"18",color:"#18a058"},{default:a(()=>[t(e(Ie))]),_:1}),t(e(w),{depth:"3",style:{"font-size":"13px"}},{default:a(()=>h[8]||(h[8]=[r("é€‰æ‹©å¹¶é…ç½®æ‰€éœ€çš„å®‰å…¨ç­–ç•¥æ¨¡å—")])),_:1}),e(d)?A("",!0):(p(),E(e(J),{key:0,type:"warning",size:"small"},{default:a(()=>h[9]||(h[9]=[r(" è¯·å…ˆä¿å­˜åŸºç¡€é…ç½® ")])),_:1}))]),_:1})]),default:a(()=>[t(e(De),{type:"card",animated:"",size:"medium",class:"security-tabs",placement:"top","justify-content":"space-evenly",value:B.value,"onUpdate:value":h[4]||(h[4]=S=>B.value=S),disabled:!e(d)},{default:a(()=>[t(e(Ce),{name:"ip",tab:"ðŸŒ IPè®¿é—®æŽ§åˆ¶",class:"tab-pane-content"},{default:a(()=>[F("div",Lt,[e(d)?(p(),E(Nt,{key:1,"security-config-id":e(d),"gateway-instance-id":u.gatewayInstanceId},null,8,["security-config-id","gateway-instance-id"])):(p(),H("div",Jt,[t(e(we),{size:"large",description:"è¯·å…ˆä¿å­˜åŸºç¡€é…ç½®åŽå†è¿›è¡Œå®‰å…¨ç­–ç•¥é…ç½®"},{icon:a(()=>[t(e(L),{size:"48",color:"#d1d5db"},{default:a(()=>[t(e(Ie))]),_:1})]),_:1})]))])]),_:1}),t(e(Ce),{name:"useragent",tab:"ðŸ’» User-AgentæŽ§åˆ¶",class:"tab-pane-content"},{default:a(()=>[F("div",Wt,[e(d)?(p(),E(Ft,{key:1,"security-config-id":e(d),"gateway-instance-id":u.gatewayInstanceId},null,8,["security-config-id","gateway-instance-id"])):(p(),H("div",Yt,[t(e(we),{size:"large",description:"è¯·å…ˆä¿å­˜åŸºç¡€é…ç½®åŽå†è¿›è¡Œå®‰å…¨ç­–ç•¥é…ç½®"},{icon:a(()=>[t(e(L),{size:"48",color:"#d1d5db"},{default:a(()=>[t(e(Ie))]),_:1})]),_:1})]))])]),_:1}),t(e(Ce),{name:"api",tab:"ðŸ”— APIè®¿é—®æŽ§åˆ¶",class:"tab-pane-content"},{default:a(()=>[F("div",Xt,[e(d)?(p(),E(Mt,{key:1,"security-config-id":e(d),"gateway-instance-id":u.gatewayInstanceId},null,8,["security-config-id","gateway-instance-id"])):(p(),H("div",Kt,[t(e(we),{size:"large",description:"è¯·å…ˆä¿å­˜åŸºç¡€é…ç½®åŽå†è¿›è¡Œå®‰å…¨ç­–ç•¥é…ç½®"},{icon:a(()=>[t(e(L),{size:"48",color:"#d1d5db"},{default:a(()=>[t(e(Ie))]),_:1})]),_:1})]))])]),_:1}),t(e(Ce),{name:"domain",tab:"ðŸ”— åŸŸåè®¿é—®æŽ§åˆ¶",class:"tab-pane-content"},{default:a(()=>[F("div",qt,[e(d)?(p(),E(Ht,{key:1,"security-config-id":e(d),"gateway-instance-id":u.gatewayInstanceId},null,8,["security-config-id","gateway-instance-id"])):(p(),H("div",Vt,[t(e(we),{size:"large",description:"è¯·å…ˆä¿å­˜åŸºç¡€é…ç½®åŽå†è¿›è¡Œå®‰å…¨ç­–ç•¥é…ç½®"},{icon:a(()=>[t(e(L),{size:"48",color:"#d1d5db"},{default:a(()=>[t(e(Ie))]),_:1})]),_:1})]))])]),_:1})]),_:1},8,["value","disabled"])]),_:1})]),_:1},8,["show","title"]))}}),Gt=ge(Qt,[["__scopeId","data-v-4f68454b"]]),Zt={class:"security-config-table"},ea={class:"table-header"},ta={class:"header-left"},aa={class:"header-actions"},la=ie({__name:"SecurityConfigTable",props:{routeConfigId:{default:""},gatewayInstanceId:{default:""}},setup(g){const z=g,u=fe(),I=Ue(),M=T([]),n=T(!1),x=T(!1),y=T(null),{getActiveConfigs:D,createTableColumns:d}=Ct(),j=ee(()=>D(M.value)),s=ee(()=>d((l,o)=>{switch(l){case"edit":B(o);break;case"delete":U(o);break;default:console.warn("æœªçŸ¥çš„äº‹ä»¶ç±»åž‹:",l)}})),N=async()=>{if(!z.routeConfigId&&!z.gatewayInstanceId){M.value=[];return}try{n.value=!0;let i;if(z.routeConfigId?i=await Qe({routeConfigId:z.routeConfigId,pageNo:1,pageSize:100}):z.gatewayInstanceId&&(i=await Ve({gatewayInstanceId:z.gatewayInstanceId,pageNo:1,pageSize:100})),i!=null&&i.oK){const l=i.bizData;if(l)try{const o=JSON.parse(l);M.value=Array.isArray(o)?o:o.records||[]}catch(o){console.warn("è§£æžå®‰å…¨é…ç½®æ•°æ®å¤±è´¥:",o),M.value=[]}else console.info("æœªèŽ·å–åˆ°å®‰å…¨é…ç½®æ•°æ®"),M.value=[]}else u.error((i==null?void 0:i.errMsg)||"åŠ è½½å®‰å…¨é…ç½®å¤±è´¥"),M.value=[]}catch(i){console.error("åŠ è½½å®‰å…¨é…ç½®å¼‚å¸¸:",i),u.error("åŠ è½½å®‰å…¨é…ç½®å¤±è´¥"),M.value=[]}finally{n.value=!1}},$=()=>{y.value=null,x.value=!0},B=i=>{const l={configName:i.configName,configDesc:i.configDesc||"",configPriority:i.configPriority,gatewayInstanceId:i.gatewayInstanceId,routeConfigId:i.routeConfigId,customConfigJson:i.customConfigJson,noteText:i.noteText||""};l.securityConfigId=i.securityConfigId,l.tenantId=i.tenantId,l.activeFlag=i.activeFlag,y.value=l,x.value=!0},U=i=>{I.warning({title:"ç¡®è®¤åˆ é™¤",content:`ç¡®å®šè¦åˆ é™¤å®‰å…¨é…ç½®"${i.configName}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`,positiveText:"ç¡®å®šåˆ é™¤",negativeText:"å–æ¶ˆ",onPositiveClick:async()=>{await h(i)}})},h=async i=>{try{const l=await qe(i.securityConfigId,i.tenantId||"default");l!=null&&l.oK?(u.success("åˆ é™¤å®‰å…¨é…ç½®æˆåŠŸ"),await N()):u.error((l==null?void 0:l.errMsg)||"åˆ é™¤å®‰å…¨é…ç½®å¤±è´¥")}catch(l){console.error("åˆ é™¤å®‰å…¨é…ç½®å¼‚å¸¸:",l);const o=l instanceof Error?l.message:String(l);u.error(`åˆ é™¤å®‰å…¨é…ç½®å¤±è´¥: ${o}`)}},S=async()=>{await N(),M.value.length>0&&u.success("åˆ·æ–°å®Œæˆ")},k=async()=>{try{x.value=!1,await N()}catch(i){console.error("æäº¤å®‰å…¨é…ç½®å¤±è´¥:",i),u.error("æäº¤å®‰å…¨é…ç½®å¤±è´¥")}};return re(()=>z.routeConfigId,()=>{(z.routeConfigId||z.gatewayInstanceId)&&N()},{immediate:!0}),re(()=>z.gatewayInstanceId,()=>{(z.gatewayInstanceId||z.routeConfigId)&&N()}),pe(()=>{(z.routeConfigId||z.gatewayInstanceId)&&N()}),(i,l)=>{const o=w,W=oe,C=b,O=Ee;return p(),H("div",Zt,[F("div",ea,[t(C,{justify:"space-between"},{default:a(()=>[F("div",ta,[l[1]||(l[1]=F("h3",null,"å®‰å…¨é…ç½®åˆ—è¡¨",-1)),t(o,{depth:"3"},{default:a(()=>[r("å…± "+K(M.value.length)+" ä¸ªé…ç½®ï¼Œ"+K(j.value.length)+" ä¸ªæ´»åŠ¨",1)]),_:1})]),F("div",aa,[t(W,{type:"primary",onClick:$},{icon:a(()=>[t(e(L),null,{default:a(()=>[t(e(Re))]),_:1})]),default:a(()=>[l[2]||(l[2]=r(" æ–°å»ºå®‰å…¨é…ç½® "))]),_:1}),t(W,{onClick:S,loading:n.value},{icon:a(()=>[t(e(L),null,{default:a(()=>[t(e(Me))]),_:1})]),default:a(()=>[l[3]||(l[3]=r(" åˆ·æ–° "))]),_:1},8,["loading"])])]),_:1})]),t(O,{columns:s.value,data:M.value,loading:n.value,bordered:!1,size:"medium","flex-height":"",style:{height:"600px"}},null,8,["columns","data","loading"]),t(Gt,{visible:x.value,"onUpdate:visible":l[0]||(l[0]=R=>x.value=R),"edit-data":y.value,"route-config-id":z.routeConfigId,"gateway-instance-id":z.gatewayInstanceId,onSubmit:k},null,8,["visible","edit-data","route-config-id","gateway-instance-id"])])}}}),Ma=ge(la,[["__scopeId","data-v-d90aecfe"]]),na={class:"cors-config"},ia={key:0},sa=ie({__name:"CorsConfigForm",props:{securityConfigId:{default:""},gatewayInstanceId:{default:""},routeConfigId:{default:""},initialData:{default:()=>({})}},setup(g,{expose:z}){const u=g,I=fe(),M=()=>({activeFlag:"N",configName:"CORSè·¨åŸŸé…ç½®",allowOrigins:[],allowMethods:["GET","POST","PUT","DELETE","OPTIONS"],allowHeaders:["Content-Type","Authorization","X-Requested-With"],exposeHeaders:[],allowCredentials:"N",maxAgeSeconds:86400,configPriority:1,...u.initialData}),n=de(M()),x=T(!1),y=T(!1),D=T(!1),d=T(""),j=T(!1),s=ee(()=>!!(u.routeConfigId||u.gatewayInstanceId&&!u.routeConfigId||u.securityConfigId)),N=ee(()=>u.routeConfigId?"è·¯ç”±çº§":u.gatewayInstanceId?"å®žä¾‹çº§":u.securityConfigId?"å®‰å…¨é…ç½®çº§":""),$=async k=>{n.activeFlag=k,y.value=!0,d.value&&await h()},B=()=>{y.value=!0},U=async()=>{if(s.value)try{const k={};u.gatewayInstanceId&&(k.gatewayInstanceId=u.gatewayInstanceId),u.routeConfigId&&(k.routeConfigId=u.routeConfigId),u.securityConfigId&&(k.securityConfigId=u.securityConfigId);const i=await ft(k);if(ae(i)){const l=le(i);let o=null;Array.isArray(l)&&l.length>0?o=l[0]:l&&typeof l=="object"&&l.corsConfigId&&(o=l),o&&(d.value=o.corsConfigId,Object.assign(n,{activeFlag:o.activeFlag||"N",configName:o.configName||n.configName,allowOrigins:G(o.allowOrigins),allowMethods:G(o.allowMethods),allowHeaders:G(o.allowHeaders),exposeHeaders:G(o.exposeHeaders),allowCredentials:o.allowCredentials||"N",maxAgeSeconds:o.maxAgeSeconds||86400,configPriority:o.configPriority||1}),D.value=!0,y.value=!1)}}catch(k){console.error("åŠ è½½CORSé…ç½®å¤±è´¥:",k)}finally{j.value=!0}},h=async()=>{if(!s.value){I.warning("è¯·æä¾›è·¯ç”±é…ç½®IDã€ç½‘å…³å®žä¾‹IDæˆ–å®‰å…¨é…ç½®ID");return}if(!n.configName.trim()){I.warning("è¯·è¾“å…¥é…ç½®åç§°");return}if(n.allowOrigins.length===0){I.warning("è¯·è‡³å°‘é…ç½®ä¸€ä¸ªå…è®¸çš„æº");return}if(n.allowMethods.length===0){I.warning("è¯·è‡³å°‘é…ç½®ä¸€ä¸ªå…è®¸çš„HTTPæ–¹æ³•");return}x.value=!0;try{const k={configName:n.configName,allowOrigins:JSON.stringify(n.allowOrigins),allowMethods:n.allowMethods.join(","),allowHeaders:JSON.stringify(n.allowHeaders),exposeHeaders:JSON.stringify(n.exposeHeaders),allowCredentials:n.allowCredentials,maxAgeSeconds:n.maxAgeSeconds,configPriority:n.configPriority,activeFlag:n.activeFlag};u.gatewayInstanceId&&(k.gatewayInstanceId=u.gatewayInstanceId),u.routeConfigId&&(k.routeConfigId=u.routeConfigId),u.securityConfigId&&(k.securityConfigId=u.securityConfigId);let i;if(d.value?i=await gt({...k,corsConfigId:d.value}):i=await dt(k),ae(i)){if(y.value=!1,D.value=!0,!d.value){const l=le(i);l!=null&&l.corsConfigId&&(d.value=l.corsConfigId)}I.success("CORSé…ç½®ä¿å­˜æˆåŠŸ")}else{const l=ce(i,"CORSé…ç½®ä¿å­˜å¤±è´¥");I.error(l)}}catch(k){const i=k instanceof Error?k.message:"ä¿å­˜å¤±è´¥";I.error(i),console.error("ä¿å­˜CORSé…ç½®å¤±è´¥:",k)}finally{x.value=!1}},S=()=>{Object.assign(n,M()),y.value=!1,D.value=!1,d.value=""};return re([()=>u.securityConfigId,()=>u.gatewayInstanceId,()=>u.routeConfigId],()=>{s.value?U():S()},{immediate:!1}),pe(()=>{s.value?U():j.value=!0}),z({save:h,reset:S,hasChanges:()=>y.value,isConfigured:()=>D.value}),(k,i)=>(p(),H("div",na,[t(e(b),{vertical:"",size:"medium"},{default:a(()=>[t(e(Y),{size:"small",bordered:!1,embedded:""},{default:a(()=>[t(e(b),{align:"center",justify:"space-between"},{default:a(()=>[F("div",null,[t(e(w),{strong:""},{default:a(()=>i[9]||(i[9]=[r("å¯ç”¨CORSè·¨åŸŸé…ç½®")])),_:1}),t(e(w),{depth:"3",style:{display:"block","margin-top":"4px"}},{default:a(()=>i[10]||(i[10]=[r(" é…ç½®è·¨åŸŸèµ„æºå…±äº«(CORS)ç­–ç•¥ï¼ŒæŽ§åˆ¶æµè§ˆå™¨è·¨åŸŸè®¿é—®æƒé™ ")])),_:1}),N.value?(p(),E(e(J),{key:0,type:N.value==="å®žä¾‹çº§"?"primary":"warning",size:"small",style:{"margin-top":"8px"}},{default:a(()=>[r(K(N.value)+"é…ç½® ",1)]),_:1},8,["type"])):A("",!0)]),t(e(te),{value:n.activeFlag,"onUpdate:value":[i[0]||(i[0]=l=>n.activeFlag=l),$],"checked-value":"Y","unchecked-value":"N"},null,8,["value"])]),_:1})]),_:1}),n.activeFlag==="Y"?ve((p(),H("div",ia,[t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"é…ç½®åç§°"},{default:a(()=>[t(e(q),{value:n.configName,"onUpdate:value":i[1]||(i[1]=l=>n.configName=l),placeholder:"CORSé…ç½®åç§°",onInput:B},null,8,["value"])]),_:1}),t(e(m),{label:"é…ç½®ä¼˜å…ˆçº§"},{default:a(()=>[t(e(se),{value:n.configPriority,"onUpdate:value":[i[2]||(i[2]=l=>n.configPriority=l),B],min:0,max:999,placeholder:"æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜"},null,8,["value"])]),_:1}),t(e(m),{label:"å…è®¸æºå¸¦å‡­è¯",span:2},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[t(e(te),{value:n.allowCredentials,"onUpdate:value":[i[3]||(i[3]=l=>n.allowCredentials=l),B],"checked-value":"Y","unchecked-value":"N"},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>i[11]||(i[11]=[r("æ˜¯å¦å…è®¸è·¨åŸŸè¯·æ±‚æºå¸¦Cookieã€Authorizationç­‰å‡­è¯ä¿¡æ¯")])),_:1})]),_:1})]),_:1}),t(e(m),{label:"é¢„æ£€ç¼“å­˜æ—¶é—´",span:2},{default:a(()=>[t(e(se),{value:n.maxAgeSeconds,"onUpdate:value":[i[4]||(i[4]=l=>n.maxAgeSeconds=l),B],min:0,max:86400,placeholder:"é¢„æ£€è¯·æ±‚ç¼“å­˜æ—¶é—´(ç§’)"},{suffix:a(()=>[t(e(w),{depth:"3"},{default:a(()=>i[12]||(i[12]=[r("ç§’")])),_:1})]),_:1},8,["value"]),t(e(w),{depth:"3",style:{"margin-top":"4px"}},{default:a(()=>i[13]||(i[13]=[r(" OPTIONSé¢„æ£€è¯·æ±‚çš„ç¼“å­˜æ—¶é—´ï¼Œ0è¡¨ç¤ºä¸ç¼“å­˜ï¼Œæœ€å¤§86400ç§’(24å°æ—¶) ")])),_:1})]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(w),{strong:""},{default:a(()=>i[14]||(i[14]=[r("å…è®¸çš„æº (Access-Control-Allow-Origin)")])),_:1}),t(e(Q),{value:n.allowOrigins,"onUpdate:value":[i[5]||(i[5]=l=>n.allowOrigins=l),B],"input-props":{placeholder:"è¾“å…¥å…è®¸çš„æº"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),i[15]||(i[15]=r(" æ”¯æŒå…·ä½“åŸŸå(https://example.com)ã€é€šé…ç¬¦(*)ï¼Œå»ºè®®é¿å…ä½¿ç”¨*ä»¥æé«˜å®‰å…¨æ€§ "))]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(w),{strong:""},{default:a(()=>i[16]||(i[16]=[r("å…è®¸çš„HTTPæ–¹æ³• (Access-Control-Allow-Methods)")])),_:1}),t(e(Q),{value:n.allowMethods,"onUpdate:value":[i[6]||(i[6]=l=>n.allowMethods=l),B],"input-props":{placeholder:"è¾“å…¥HTTPæ–¹æ³•"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),i[17]||(i[17]=r(" å¸¸ç”¨æ–¹æ³•ï¼šGET, POST, PUT, DELETE, OPTIONS, PATCH, HEAD "))]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"å…è®¸çš„è¯·æ±‚å¤´"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.allowHeaders,"onUpdate:value":[i[7]||(i[7]=l=>n.allowHeaders=l),B],"input-props":{placeholder:"è¾“å…¥å…è®¸çš„è¯·æ±‚å¤´"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),i[18]||(i[18]=r(" å¦‚ï¼šContent-Type, Authorization, X-Requested-With "))]),_:1})]),_:1})]),_:1}),t(e(m),{label:"æš´éœ²çš„å“åº”å¤´"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:n.exposeHeaders,"onUpdate:value":[i[8]||(i[8]=l=>n.exposeHeaders=l),B],"input-props":{placeholder:"è¾“å…¥æš´éœ²çš„å“åº”å¤´"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),i[19]||(i[19]=r(" æµè§ˆå™¨å¯ä»¥è®¿é—®çš„è‡ªå®šä¹‰å“åº”å¤´ "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(b),{justify:"space-between",style:{"margin-top":"16px"}},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[y.value?(p(),E(e(J),{key:0,type:"warning",size:"small"},{default:a(()=>i[20]||(i[20]=[r("æœ‰å˜æ›´")])),_:1})):A("",!0),!y.value&&D.value?(p(),E(e(J),{key:1,type:"success",size:"small"},{default:a(()=>i[21]||(i[21]=[r("å·²ä¿å­˜")])),_:1})):A("",!0),s.value?A("",!0):(p(),E(e(J),{key:2,type:"info",size:"small"},{default:a(()=>i[22]||(i[22]=[r("éœ€è¦ç½‘å…³å®žä¾‹IDæˆ–è·¯ç”±é…ç½®ID")])),_:1})),t(e(w),{depth:"3"},{default:a(()=>[r(" ä¼˜å…ˆçº§ï¼š"+K(n.configPriority)+" | å‡­è¯ï¼š"+K(n.allowCredentials==="Y"?"å…è®¸":"ç¦æ­¢"),1)]),_:1})]),_:1}),t(e(b),null,{default:a(()=>[s.value?(p(),E(e(oe),{key:0,type:"primary",onClick:h,loading:x.value,disabled:!y.value},{default:a(()=>i[23]||(i[23]=[r(" ä¿å­˜CORSé…ç½® ")])),_:1},8,["loading","disabled"])):A("",!0)]),_:1})]),_:1})],512)),[[ye,j.value]]):A("",!0)]),_:1})]))}}),Ea=ge(sa,[["__scopeId","data-v-c16b7112"]]),oa={class:"auth-config"},ua={key:0},ra={key:0},da={key:1},fa={key:2},ga={key:3},ca=ie({__name:"AuthConfigForm",props:{gatewayInstanceId:{default:""},routeConfigId:{default:""},initialData:{default:()=>({})}},setup(g,{expose:z}){const u=g,I=fe(),M=[{label:"JWTè®¤è¯",value:"JWT"},{label:"API Keyè®¤è¯",value:"API_KEY"},{label:"OAuth2è®¤è¯",value:"OAUTH2"},{label:"Basicè®¤è¯",value:"BASIC"}],n=[{label:"å¿…éœ€è®¤è¯",value:"REQUIRED"},{label:"å¯é€‰è®¤è¯",value:"OPTIONAL"},{label:"ç¦ç”¨è®¤è¯",value:"DISABLED"}],x=[{label:"HS256",value:"HS256"},{label:"HS384",value:"HS384"},{label:"HS512",value:"HS512"},{label:"RS256",value:"RS256"},{label:"RS384",value:"RS384"},{label:"RS512",value:"RS512"}],y=[{label:"Header",value:"header"},{label:"Queryå‚æ•°",value:"query"}],D={JWT:"JWT",API_KEY:"API Key",OAUTH2:"OAuth2",BASIC:"Basic"},d={REQUIRED:"å¿…éœ€",OPTIONAL:"å¯é€‰",DISABLED:"ç¦ç”¨"},j=()=>({activeFlag:"N",authName:"è®¤è¯é…ç½®",authType:"JWT",authStrategy:"REQUIRED",authConfig:{secret:"",algorithm:"HS256",issuer:"",expiration:3600,verifyExpiration:!0,verifyIssuer:!1,refreshWindow:300,includeInResponse:!1,responseHeaderName:"X-Auth-Token",keyLocation:"header",keyName:"X-API-Key",validKeys:[],tokenEndpoint:"",introspectEndpoint:"",clientID:"",clientSecret:"",scope:"",username:"",password:""},exemptPaths:[],exemptHeaders:[],failureStatusCode:401,failureMessage:"è®¤è¯å¤±è´¥",configPriority:1,...u.initialData}),s=de(j()),N=T(!1),$=T(!1),B=T(!1),U=T(""),h=T(!1),S=ee(()=>!!(u.routeConfigId||u.gatewayInstanceId&&!u.routeConfigId)),k=ee(()=>u.routeConfigId?"è·¯ç”±çº§":u.gatewayInstanceId?"å®žä¾‹çº§":""),i=async R=>{s.activeFlag=R,$.value=!0,U.value&&await C()},l=()=>{$.value=!0},o=R=>{s.authType=R,s.authConfig=j().authConfig,$.value=!0},W=async()=>{if(S.value)try{const R={};u.gatewayInstanceId&&(R.gatewayInstanceId=u.gatewayInstanceId),u.routeConfigId&&(R.routeConfigId=u.routeConfigId);const f=await pt(R);if(ae(f)){const v=le(f);let _=null;Array.isArray(v)&&v.length>0?_=v[0]:v&&typeof v=="object"&&v.authConfigId&&(_=v),_&&(U.value=_.authConfigId,Object.assign(s,{activeFlag:_.activeFlag||"N",authName:_.authName||s.authName,authType:_.authType||"JWT",authStrategy:_.authStrategy||"REQUIRED",authConfig:typeof _.authConfig=="string"?JSON.parse(_.authConfig):_.authConfig||s.authConfig,exemptPaths:G(_.exemptPaths),exemptHeaders:G(_.exemptHeaders),failureStatusCode:_.failureStatusCode||401,failureMessage:_.failureMessage||"è®¤è¯å¤±è´¥",configPriority:_.configPriority||1}),B.value=!0,$.value=!1)}}catch(R){console.error("åŠ è½½è®¤è¯é…ç½®å¤±è´¥:",R)}finally{h.value=!0}},C=async()=>{if(!S.value){I.warning("è¯·æä¾›è·¯ç”±é…ç½®IDæˆ–ç½‘å…³å®žä¾‹ID");return}if(!s.authName.trim()){I.warning("è¯·è¾“å…¥è®¤è¯é…ç½®åç§°");return}if(s.authType==="JWT"){if(!s.authConfig.secret){I.warning("è¯·è¾“å…¥JWTå¯†é’¥");return}if(!s.authConfig.algorithm){I.warning("è¯·é€‰æ‹©ç­¾åç®—æ³•");return}}if(s.authType==="API_KEY"&&(!s.authConfig.validKeys||s.authConfig.validKeys.length===0)){I.warning("è¯·é…ç½®è‡³å°‘ä¸€ä¸ªæœ‰æ•ˆçš„API Key");return}if(s.authType==="OAUTH2"){if(!s.authConfig.tokenEndpoint){I.warning("è¯·è¾“å…¥Tokenç«¯ç‚¹URL");return}if(!s.authConfig.clientID){I.warning("è¯·è¾“å…¥Client ID");return}if(!s.authConfig.clientSecret){I.warning("è¯·è¾“å…¥Client Secret");return}}if(s.authType==="BASIC"){if(!s.authConfig.username){I.warning("è¯·è¾“å…¥ç”¨æˆ·å");return}if(!s.authConfig.password){I.warning("è¯·è¾“å…¥å¯†ç ");return}}N.value=!0;try{const R={authName:s.authName,authType:s.authType,authStrategy:s.authStrategy,authConfig:JSON.stringify(s.authConfig),exemptPaths:JSON.stringify(s.exemptPaths),exemptHeaders:JSON.stringify(s.exemptHeaders),failureStatusCode:s.failureStatusCode,failureMessage:s.failureMessage,configPriority:s.configPriority,activeFlag:s.activeFlag};if(u.gatewayInstanceId&&(R.gatewayInstanceId=u.gatewayInstanceId),u.routeConfigId&&(R.routeConfigId=u.routeConfigId),!R.gatewayInstanceId&&!R.routeConfigId){I.error("ç¼ºå°‘è·¯ç”±é…ç½®IDæˆ–ç½‘å…³å®žä¾‹IDï¼Œæ— æ³•ä¿å­˜è®¤è¯é…ç½®");return}let f;if(U.value?f=await vt({...R,authConfigId:U.value}):f=await ct(R),ae(f)){if($.value=!1,B.value=!0,!U.value){const v=le(f);v!=null&&v.authConfigId&&(U.value=v.authConfigId)}I.success("è®¤è¯é…ç½®ä¿å­˜æˆåŠŸ")}else{const v=ce(f,"è®¤è¯é…ç½®ä¿å­˜å¤±è´¥");I.error(v)}}catch(R){const f=R instanceof Error?R.message:"ä¿å­˜å¤±è´¥";I.error(f),console.error("ä¿å­˜è®¤è¯é…ç½®å¤±è´¥:",R)}finally{N.value=!1}},O=()=>{Object.assign(s,j()),$.value=!1,B.value=!1,U.value=""};return re([()=>u.gatewayInstanceId,()=>u.routeConfigId],()=>{S.value?W():O()},{immediate:!1}),pe(()=>{S.value?W():h.value=!0}),z({save:C,reset:O,hasChanges:()=>$.value,isConfigured:()=>B.value}),(R,f)=>(p(),H("div",oa,[t(e(b),{vertical:"",size:"medium"},{default:a(()=>[t(e(Y),{size:"small",bordered:!1,embedded:""},{default:a(()=>[t(e(b),{align:"center",justify:"space-between"},{default:a(()=>[F("div",null,[t(e(w),{strong:""},{default:a(()=>f[28]||(f[28]=[r("å¯ç”¨è®¤è¯é…ç½®")])),_:1}),t(e(w),{depth:"3",style:{display:"block","margin-top":"4px"}},{default:a(()=>f[29]||(f[29]=[r(" é…ç½®APIè®¤è¯ç­–ç•¥ï¼Œæ”¯æŒJWTã€API Keyã€OAuth2ã€Basic Authç­‰è®¤è¯æ–¹å¼ ")])),_:1}),k.value?(p(),E(e(J),{key:0,type:k.value==="å®žä¾‹çº§"?"primary":"warning",size:"small",style:{"margin-top":"8px"}},{default:a(()=>[r(K(k.value)+"é…ç½® ",1)]),_:1},8,["type"])):A("",!0)]),t(e(te),{value:s.activeFlag,"onUpdate:value":[f[0]||(f[0]=v=>s.activeFlag=v),i],"checked-value":"Y","unchecked-value":"N"},null,8,["value"])]),_:1})]),_:1}),s.activeFlag==="Y"?ve((p(),H("div",ua,[t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"è®¤è¯é…ç½®åç§°"},{default:a(()=>[t(e(q),{value:s.authName,"onUpdate:value":f[1]||(f[1]=v=>s.authName=v),placeholder:"è®¤è¯é…ç½®åç§°",onInput:l},null,8,["value"])]),_:1}),t(e(m),{label:"é…ç½®ä¼˜å…ˆçº§"},{default:a(()=>[t(e(se),{value:s.configPriority,"onUpdate:value":[f[2]||(f[2]=v=>s.configPriority=v),l],min:0,max:999,placeholder:"æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜"},null,8,["value"])]),_:1}),t(e(m),{label:"è®¤è¯ç±»åž‹"},{default:a(()=>[t(e(ue),{value:s.authType,"onUpdate:value":[f[3]||(f[3]=v=>s.authType=v),o],options:M,placeholder:"é€‰æ‹©è®¤è¯ç±»åž‹"},null,8,["value"])]),_:1}),t(e(m),{label:"è®¤è¯ç­–ç•¥"},{default:a(()=>[t(e(ue),{value:s.authStrategy,"onUpdate:value":[f[4]||(f[4]=v=>s.authStrategy=v),l],options:n,placeholder:"é€‰æ‹©è®¤è¯ç­–ç•¥"},null,8,["value"])]),_:1}),t(e(m),{label:"å¤±è´¥çŠ¶æ€ç ",span:1},{default:a(()=>[t(e(se),{value:s.failureStatusCode,"onUpdate:value":[f[5]||(f[5]=v=>s.failureStatusCode=v),l],min:400,max:599,placeholder:"è®¤è¯å¤±è´¥HTTPçŠ¶æ€ç "},null,8,["value"])]),_:1}),t(e(m),{label:"å¤±è´¥æç¤ºæ¶ˆæ¯",span:1},{default:a(()=>[t(e(q),{value:s.failureMessage,"onUpdate:value":f[6]||(f[6]=v=>s.failureMessage=v),placeholder:"è®¤è¯å¤±è´¥æç¤ºæ¶ˆæ¯",onInput:l},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(w),{strong:""},{default:a(()=>[r(K(D[s.authType])+"è®¤è¯å‚æ•°",1)]),_:1}),s.authType==="JWT"?(p(),H("div",ra,[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"JWTå¯†é’¥"},{default:a(()=>[t(e(q),{value:s.authConfig.secret,"onUpdate:value":f[7]||(f[7]=v=>s.authConfig.secret=v),type:"password",placeholder:"JWTç­¾åå¯†é’¥",onInput:l},null,8,["value"])]),_:1}),t(e(m),{label:"ç­¾åç®—æ³•"},{default:a(()=>[t(e(ue),{value:s.authConfig.algorithm,"onUpdate:value":[f[8]||(f[8]=v=>s.authConfig.algorithm=v),l],options:x,placeholder:"é€‰æ‹©ç­¾åç®—æ³•"},null,8,["value"])]),_:1}),t(e(m),{label:"ç­¾å‘è€…(Issuer)"},{default:a(()=>[t(e(q),{value:s.authConfig.issuer,"onUpdate:value":f[9]||(f[9]=v=>s.authConfig.issuer=v),placeholder:"JWTç­¾å‘è€…",onInput:l},null,8,["value"])]),_:1}),t(e(m),{label:"è¿‡æœŸæ—¶é—´(ç§’)"},{default:a(()=>[t(e(se),{value:s.authConfig.expiration,"onUpdate:value":[f[10]||(f[10]=v=>s.authConfig.expiration=v),l],min:60,max:86400,placeholder:"Tokenè¿‡æœŸæ—¶é—´"},null,8,["value"])]),_:1}),t(e(m),{label:"éªŒè¯è¿‡æœŸæ—¶é—´"},{default:a(()=>[t(e(te),{value:s.authConfig.verifyExpiration,"onUpdate:value":[f[11]||(f[11]=v=>s.authConfig.verifyExpiration=v),l]},null,8,["value"])]),_:1}),t(e(m),{label:"éªŒè¯ç­¾å‘è€…"},{default:a(()=>[t(e(te),{value:s.authConfig.verifyIssuer,"onUpdate:value":[f[12]||(f[12]=v=>s.authConfig.verifyIssuer=v),l]},null,8,["value"])]),_:1}),t(e(m),{label:"åˆ·æ–°çª—å£(ç§’)"},{default:a(()=>[t(e(se),{value:s.authConfig.refreshWindow,"onUpdate:value":[f[13]||(f[13]=v=>s.authConfig.refreshWindow=v),l],min:0,max:3600,placeholder:"è¿‡æœŸå‰å¤šå°‘ç§’å¯åˆ·æ–°"},null,8,["value"])]),_:1}),t(e(m),{label:"å“åº”åŒ…å«Token"},{default:a(()=>[t(e(te),{value:s.authConfig.includeInResponse,"onUpdate:value":[f[14]||(f[14]=v=>s.authConfig.includeInResponse=v),l]},null,8,["value"])]),_:1}),t(e(m),{label:"å“åº”å¤´åç§°",span:2},{default:a(()=>[t(e(q),{value:s.authConfig.responseHeaderName,"onUpdate:value":f[15]||(f[15]=v=>s.authConfig.responseHeaderName=v),placeholder:"X-Auth-Token",onInput:l},null,8,["value"])]),_:1})]),_:1})])):A("",!0),s.authType==="API_KEY"?(p(),H("div",da,[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"API Keyä½ç½®"},{default:a(()=>[t(e(ue),{value:s.authConfig.keyLocation,"onUpdate:value":[f[16]||(f[16]=v=>s.authConfig.keyLocation=v),l],options:y,placeholder:"API KeyèŽ·å–ä½ç½®"},null,8,["value"])]),_:1}),t(e(m),{label:"å‚æ•°åç§°"},{default:a(()=>[t(e(q),{value:s.authConfig.keyName,"onUpdate:value":f[17]||(f[17]=v=>s.authConfig.keyName=v),placeholder:"api_key",onInput:l},null,8,["value"])]),_:1}),t(e(m),{label:"æœ‰æ•ˆAPI Keys",span:2},{default:a(()=>[t(e(Q),{value:s.authConfig.validKeys,"onUpdate:value":[f[18]||(f[18]=v=>s.authConfig.validKeys=v),l],"input-props":{placeholder:"è¾“å…¥API Key"}},null,8,["value"])]),_:1})]),_:1})])):A("",!0),s.authType==="OAUTH2"?(p(),H("div",fa,[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"Tokenç«¯ç‚¹URL"},{default:a(()=>[t(e(q),{value:s.authConfig.tokenEndpoint,"onUpdate:value":f[19]||(f[19]=v=>s.authConfig.tokenEndpoint=v),placeholder:"https://auth.example.com/oauth/token",onInput:l},null,8,["value"])]),_:1}),t(e(m),{label:"å†…çœç«¯ç‚¹URL"},{default:a(()=>[t(e(q),{value:s.authConfig.introspectEndpoint,"onUpdate:value":f[20]||(f[20]=v=>s.authConfig.introspectEndpoint=v),placeholder:"https://auth.example.com/oauth/introspect",onInput:l},null,8,["value"])]),_:1}),t(e(m),{label:"Client ID"},{default:a(()=>[t(e(q),{value:s.authConfig.clientID,"onUpdate:value":f[21]||(f[21]=v=>s.authConfig.clientID=v),placeholder:"å®¢æˆ·ç«¯ID",onInput:l},null,8,["value"])]),_:1}),t(e(m),{label:"Client Secret"},{default:a(()=>[t(e(q),{value:s.authConfig.clientSecret,"onUpdate:value":f[22]||(f[22]=v=>s.authConfig.clientSecret=v),type:"password",placeholder:"å®¢æˆ·ç«¯å¯†é’¥",onInput:l},null,8,["value"])]),_:1}),t(e(m),{label:"Scope",span:2},{default:a(()=>[t(e(q),{value:s.authConfig.scope,"onUpdate:value":f[23]||(f[23]=v=>s.authConfig.scope=v),placeholder:"read write",onInput:l},null,8,["value"])]),_:1})]),_:1})])):A("",!0),s.authType==="BASIC"?(p(),H("div",ga,[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"ç”¨æˆ·å"},{default:a(()=>[t(e(q),{value:s.authConfig.username,"onUpdate:value":f[24]||(f[24]=v=>s.authConfig.username=v),placeholder:"è®¤è¯ç”¨æˆ·å",onInput:l},null,8,["value"])]),_:1}),t(e(m),{label:"å¯†ç "},{default:a(()=>[t(e(q),{value:s.authConfig.password,"onUpdate:value":f[25]||(f[25]=v=>s.authConfig.password=v),type:"password",placeholder:"è®¤è¯å¯†ç ",onInput:l},null,8,["value"])]),_:1})]),_:1})])):A("",!0)]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"è±å…è·¯å¾„"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:s.exemptPaths,"onUpdate:value":[f[26]||(f[26]=v=>s.exemptPaths=v),l],"input-props":{placeholder:"è¾“å…¥è±å…è·¯å¾„"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),f[30]||(f[30]=r(" æ”¯æŒé€šé…ç¬¦ï¼Œå¦‚ï¼š/public/*, /health, /api/v1/status "))]),_:1})]),_:1})]),_:1}),t(e(m),{label:"è±å…è¯·æ±‚å¤´"},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(Q),{value:s.exemptHeaders,"onUpdate:value":[f[27]||(f[27]=v=>s.exemptHeaders=v),l],"input-props":{placeholder:"è¾“å…¥è±å…è¯·æ±‚å¤´"}},null,8,["value"]),t(e(w),{depth:"3"},{default:a(()=>[t(e(L),{size:"16",style:{"margin-right":"4px"}},{default:a(()=>[t(e(Z))]),_:1}),f[31]||(f[31]=r(" åŒ…å«æŒ‡å®šè¯·æ±‚å¤´çš„è¯·æ±‚å°†è·³è¿‡è®¤è¯ "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(b),{justify:"space-between",style:{"margin-top":"16px"}},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[$.value?(p(),E(e(J),{key:0,type:"warning",size:"small"},{default:a(()=>f[32]||(f[32]=[r("æœ‰å˜æ›´")])),_:1})):A("",!0),!$.value&&B.value?(p(),E(e(J),{key:1,type:"success",size:"small"},{default:a(()=>f[33]||(f[33]=[r("å·²ä¿å­˜")])),_:1})):A("",!0),S.value?A("",!0):(p(),E(e(J),{key:2,type:"info",size:"small"},{default:a(()=>f[34]||(f[34]=[r("éœ€è¦ç½‘å…³å®žä¾‹IDæˆ–è·¯ç”±é…ç½®ID")])),_:1})),t(e(w),{depth:"3"},{default:a(()=>[r(" ç±»åž‹ï¼š"+K(D[s.authType])+" | ç­–ç•¥ï¼š"+K(d[s.authStrategy])+" | ä¼˜å…ˆçº§ï¼š"+K(s.configPriority),1)]),_:1})]),_:1}),t(e(b),null,{default:a(()=>[S.value?(p(),E(e(oe),{key:0,type:"primary",onClick:C,loading:N.value,disabled:!$.value},{default:a(()=>f[35]||(f[35]=[r(" ä¿å­˜è®¤è¯é…ç½® ")])),_:1},8,["loading","disabled"])):A("",!0)]),_:1})]),_:1})],512)),[[ye,h.value]]):A("",!0)]),_:1})]))}}),ja=ge(ca,[["__scopeId","data-v-85e79a62"]]),pa={class:"rate-limit-config"},va={key:0},ya={key:0},ma={key:1},Ia={key:2},Ca={key:3},wa={key:4},ba=ie({__name:"RateLimitConfigForm",props:{gatewayInstanceId:{default:""},routeConfigId:{default:""},initialData:{default:()=>({})}},setup(g,{expose:z}){const u=g,I=fe(),M=[{label:"IPç­–ç•¥",value:"ip"},{label:"ç”¨æˆ·ç­–ç•¥",value:"user"},{label:"è·¯å¾„ç­–ç•¥",value:"path"},{label:"æœåŠ¡ç­–ç•¥",value:"service"},{label:"è·¯ç”±ç­–ç•¥",value:"route"}],n=[{label:"ä»¤ç‰Œæ¡¶ç®—æ³•",value:"token-bucket"},{label:"æ¼æ¡¶ç®—æ³•",value:"leaky-bucket"},{label:"æ»‘åŠ¨çª—å£ç®—æ³•",value:"sliding-window"},{label:"å›ºå®šçª—å£ç®—æ³•",value:"fixed-window"},{label:"æ— é™æµ",value:"none"}],x={ip:"IP",user:"ç”¨æˆ·",path:"è·¯å¾„",service:"æœåŠ¡",route:"è·¯ç”±"},y={"token-bucket":"ä»¤ç‰Œæ¡¶","leaky-bucket":"æ¼æ¡¶","sliding-window":"æ»‘åŠ¨çª—å£","fixed-window":"å›ºå®šçª—å£",none:"æ— é™æµ"},D=()=>({activeFlag:"N",limitName:"é™æµè§„åˆ™",keyStrategy:"ip",algorithm:"token-bucket",limitRate:100,burstCapacity:200,timeWindowSeconds:1,rejectionStatusCode:429,rejectionMessage:"è¯·æ±‚è¿‡äºŽé¢‘ç¹ï¼Œè¯·ç¨åŽå†è¯•",configPriority:1,customConfig:{},...u.initialData}),d=de(D()),j=T(!1),s=T(!1),N=T(!1),$=T(""),B=T(!1),U=ee(()=>!!(u.routeConfigId||u.gatewayInstanceId&&!u.routeConfigId)),h=ee(()=>u.routeConfigId?"è·¯ç”±çº§":u.gatewayInstanceId?"å®žä¾‹çº§":""),S=async W=>{d.activeFlag=W,s.value=!0,$.value&&await l()},k=()=>{s.value=!0},i=async()=>{if(U.value)try{const W={};u.gatewayInstanceId&&(W.gatewayInstanceId=u.gatewayInstanceId),u.routeConfigId&&(W.routeConfigId=u.routeConfigId);const C=await mt(W);if(ae(C)){const O=le(C);let R=null;Array.isArray(O)&&O.length>0?R=O[0]:O&&typeof O=="object"&&O.rateLimitConfigId&&(R=O),R&&($.value=R.rateLimitConfigId,Object.assign(d,{activeFlag:R.activeFlag||"N",limitName:R.limitName||d.limitName,keyStrategy:R.keyStrategy||"ip",algorithm:R.algorithm||"token-bucket",limitRate:R.limitRate||100,burstCapacity:R.burstCapacity||200,timeWindowSeconds:R.timeWindowSeconds||1,rejectionStatusCode:R.rejectionStatusCode||429,rejectionMessage:R.rejectionMessage||"è¯·æ±‚è¿‡äºŽé¢‘ç¹ï¼Œè¯·ç¨åŽå†è¯•",configPriority:R.configPriority||1,customConfig:R.customConfig||{}}),N.value=!0,s.value=!1)}}catch(W){console.error("åŠ è½½é™æµé…ç½®å¤±è´¥:",W)}finally{B.value=!0}},l=async()=>{if(!U.value){I.warning("è¯·æä¾›è·¯ç”±é…ç½®IDæˆ–ç½‘å…³å®žä¾‹ID");return}if(!d.limitName.trim()){I.warning("è¯·è¾“å…¥é™æµè§„åˆ™åç§°");return}if(d.limitRate<=0){I.warning("é™æµé€ŸçŽ‡å¿…é¡»å¤§äºŽ0");return}if(d.burstCapacity<0){I.warning("çªå‘å®¹é‡ä¸èƒ½å°äºŽ0");return}if(d.timeWindowSeconds<=0){I.warning("æ—¶é—´çª—å£å¿…é¡»å¤§äºŽ0");return}j.value=!0;try{const W={limitName:d.limitName,keyStrategy:d.keyStrategy,algorithm:d.algorithm,limitRate:d.limitRate,burstCapacity:d.burstCapacity,timeWindowSeconds:d.timeWindowSeconds,rejectionStatusCode:d.rejectionStatusCode,rejectionMessage:d.rejectionMessage,configPriority:d.configPriority,customConfig:d.customConfig,activeFlag:d.activeFlag};if(u.gatewayInstanceId&&(W.gatewayInstanceId=u.gatewayInstanceId),u.routeConfigId&&(W.routeConfigId=u.routeConfigId),!W.gatewayInstanceId&&!W.routeConfigId){I.error("ç¼ºå°‘è·¯ç”±é…ç½®IDæˆ–ç½‘å…³å®žä¾‹IDï¼Œæ— æ³•ä¿å­˜é™æµé…ç½®");return}let C;if($.value?C=await It({...W,rateLimitConfigId:$.value}):C=await yt(W),ae(C)){if(s.value=!1,N.value=!0,!$.value){const O=le(C);O!=null&&O.rateLimitConfigId&&($.value=O.rateLimitConfigId)}I.success("é™æµé…ç½®ä¿å­˜æˆåŠŸ")}else{const O=ce(C,"é™æµé…ç½®ä¿å­˜å¤±è´¥");I.error(O)}}catch(W){const C=W instanceof Error?W.message:"ä¿å­˜å¤±è´¥";I.error(C),console.error("ä¿å­˜é™æµé…ç½®å¤±è´¥:",W)}finally{j.value=!1}},o=()=>{Object.assign(d,D()),s.value=!1,N.value=!1,$.value=""};return re([()=>u.gatewayInstanceId,()=>u.routeConfigId],()=>{U.value?i():o()},{immediate:!1}),pe(()=>{U.value?i():B.value=!0}),z({save:l,reset:o,hasChanges:()=>s.value,isConfigured:()=>N.value}),(W,C)=>(p(),H("div",pa,[t(e(b),{vertical:"",size:"medium"},{default:a(()=>[t(e(Y),{size:"small",bordered:!1,embedded:""},{default:a(()=>[t(e(b),{align:"center",justify:"space-between"},{default:a(()=>[F("div",null,[t(e(w),{strong:""},{default:a(()=>C[10]||(C[10]=[r("å¯ç”¨é™æµé…ç½®")])),_:1}),t(e(w),{depth:"3",style:{display:"block","margin-top":"4px"}},{default:a(()=>C[11]||(C[11]=[r(" é…ç½®APIæµé‡æŽ§åˆ¶ç­–ç•¥ï¼Œæ”¯æŒä»¤ç‰Œæ¡¶ã€æ¼æ¡¶ã€æ»‘åŠ¨çª—å£ç­‰é™æµç®—æ³• ")])),_:1}),h.value?(p(),E(e(J),{key:0,type:h.value==="å®žä¾‹çº§"?"primary":"warning",size:"small",style:{"margin-top":"8px"}},{default:a(()=>[r(K(h.value)+"é…ç½® ",1)]),_:1},8,["type"])):A("",!0)]),t(e(te),{value:d.activeFlag,"onUpdate:value":[C[0]||(C[0]=O=>d.activeFlag=O),S],"checked-value":"Y","unchecked-value":"N"},null,8,["value"])]),_:1})]),_:1}),d.activeFlag==="Y"?ve((p(),H("div",va,[t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"é™æµè§„åˆ™åç§°"},{default:a(()=>[t(e(q),{value:d.limitName,"onUpdate:value":C[1]||(C[1]=O=>d.limitName=O),placeholder:"é™æµè§„åˆ™åç§°",onInput:k},null,8,["value"])]),_:1}),t(e(m),{label:"é…ç½®ä¼˜å…ˆçº§"},{default:a(()=>[t(e(se),{value:d.configPriority,"onUpdate:value":[C[2]||(C[2]=O=>d.configPriority=O),k],min:0,max:999,placeholder:"æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜"},null,8,["value"])]),_:1}),t(e(m),{label:"é™æµé”®ç­–ç•¥"},{default:a(()=>[t(e(ue),{value:d.keyStrategy,"onUpdate:value":[C[3]||(C[3]=O=>d.keyStrategy=O),k],options:M,placeholder:"é€‰æ‹©é™æµé”®ç­–ç•¥"},null,8,["value"])]),_:1}),t(e(m),{label:"é™æµç®—æ³•"},{default:a(()=>[t(e(ue),{value:d.algorithm,"onUpdate:value":[C[4]||(C[4]=O=>d.algorithm=O),k],options:n,placeholder:"é€‰æ‹©é™æµç®—æ³•"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(w),{strong:""},{default:a(()=>C[12]||(C[12]=[r("é™æµå‚æ•°é…ç½®")])),_:1}),t(e(V),{cols:2,"x-gap":16,"y-gap":16},{default:a(()=>[t(e(m),{label:"é™æµé€ŸçŽ‡(æ¬¡/ç§’)"},{default:a(()=>[t(e(se),{value:d.limitRate,"onUpdate:value":[C[5]||(C[5]=O=>d.limitRate=O),k],min:1,max:1e4,placeholder:"æ¯ç§’å…è®¸çš„è¯·æ±‚æ•°"},null,8,["value"])]),_:1}),t(e(m),{label:"çªå‘å®¹é‡"},{default:a(()=>[t(e(se),{value:d.burstCapacity,"onUpdate:value":[C[6]||(C[6]=O=>d.burstCapacity=O),k],min:0,max:1e5,placeholder:"å…è®¸çš„çªå‘è¯·æ±‚æ•°"},null,8,["value"])]),_:1}),t(e(m),{label:"æ—¶é—´çª—å£(ç§’)"},{default:a(()=>[t(e(se),{value:d.timeWindowSeconds,"onUpdate:value":[C[7]||(C[7]=O=>d.timeWindowSeconds=O),k],min:1,max:3600,placeholder:"é™æµæ—¶é—´çª—å£"},null,8,["value"])]),_:1}),t(e(m),{label:"æ‹’ç»çŠ¶æ€ç "},{default:a(()=>[t(e(se),{value:d.rejectionStatusCode,"onUpdate:value":[C[8]||(C[8]=O=>d.rejectionStatusCode=O),k],min:400,max:599,placeholder:"é™æµæ—¶è¿”å›žçš„HTTPçŠ¶æ€ç "},null,8,["value"])]),_:1}),t(e(m),{label:"æ‹’ç»æç¤ºæ¶ˆæ¯",span:2},{default:a(()=>[t(e(q),{value:d.rejectionMessage,"onUpdate:value":C[9]||(C[9]=O=>d.rejectionMessage=O),placeholder:"é™æµæ—¶çš„æç¤ºæ¶ˆæ¯",onInput:k},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),t(e(Y),{size:"small",style:{"margin-bottom":"16px"}},{default:a(()=>[t(e(b),{vertical:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(e(w),{strong:""},{default:a(()=>C[13]||(C[13]=[r("ç®—æ³•è¯´æ˜Ž")])),_:1}),d.algorithm==="token-bucket"?(p(),H("div",ya,[t(e(me),{type:"info"},{default:a(()=>[t(e(w),null,{default:a(()=>C[14]||(C[14]=[F("strong",null,"ä»¤ç‰Œæ¡¶ç®—æ³•ï¼š",-1),r("ä»¥å›ºå®šé€ŸçŽ‡å‘æ¡¶ä¸­æ”¾å…¥ä»¤ç‰Œï¼Œè¯·æ±‚éœ€è¦æ¶ˆè€—ä»¤ç‰Œæ‰èƒ½é€šè¿‡ã€‚ æ”¯æŒçªå‘æµé‡ï¼Œæ¡¶æ»¡æ—¶å¤šä½™ä»¤ç‰Œä¼šè¢«ä¸¢å¼ƒã€‚ "),F("br",null,null,-1),r(" â€¢ é™æµé€ŸçŽ‡ï¼šæ¯ç§’æ”¾å…¥æ¡¶ä¸­çš„ä»¤ç‰Œæ•° "),F("br",null,null,-1),r(" â€¢ çªå‘å®¹é‡ï¼šæ¡¶çš„æœ€å¤§å®¹é‡ï¼Œå†³å®šäº†æœ€å¤§çªå‘è¯·æ±‚æ•° ")])),_:1})]),_:1})])):d.algorithm==="leaky-bucket"?(p(),H("div",ma,[t(e(me),{type:"info"},{default:a(()=>[t(e(w),null,{default:a(()=>C[15]||(C[15]=[F("strong",null,"æ¼æ¡¶ç®—æ³•ï¼š",-1),r("è¯·æ±‚å…ˆè¿›å…¥æ¡¶ä¸­ï¼Œç„¶åŽä»¥å›ºå®šé€ŸçŽ‡ä»Žæ¡¶ä¸­æµå‡ºã€‚ èƒ½å¤Ÿå¹³æ»‘çªå‘æµé‡ï¼Œä½†ä¸æ”¯æŒçªå‘å¤„ç†ã€‚ "),F("br",null,null,-1),r(" â€¢ é™æµé€ŸçŽ‡ï¼šæ¯ç§’ä»Žæ¡¶ä¸­æµå‡ºçš„è¯·æ±‚æ•° "),F("br",null,null,-1),r(" â€¢ çªå‘å®¹é‡ï¼šæ¡¶çš„æœ€å¤§å®¹é‡ï¼Œè¶…å‡ºæ—¶è¯·æ±‚ä¼šè¢«ä¸¢å¼ƒ ")])),_:1})]),_:1})])):d.algorithm==="sliding-window"?(p(),H("div",Ia,[t(e(me),{type:"info"},{default:a(()=>[t(e(w),null,{default:a(()=>C[16]||(C[16]=[F("strong",null,"æ»‘åŠ¨çª—å£ç®—æ³•ï¼š",-1),r("åœ¨å›ºå®šæ—¶é—´çª—å£å†…é™åˆ¶è¯·æ±‚æ•°é‡ã€‚ çª—å£ä¼šéšæ—¶é—´æ»‘åŠ¨ï¼Œæä¾›æ›´ç²¾ç¡®çš„é™æµæŽ§åˆ¶ã€‚ "),F("br",null,null,-1),r(" â€¢ é™æµé€ŸçŽ‡ï¼šæ—¶é—´çª—å£å†…å…è®¸çš„æœ€å¤§è¯·æ±‚æ•° "),F("br",null,null,-1),r(" â€¢ æ—¶é—´çª—å£ï¼šç»Ÿè®¡è¯·æ±‚æ•°é‡çš„æ—¶é—´èŒƒå›´ ")])),_:1})]),_:1})])):d.algorithm==="fixed-window"?(p(),H("div",Ca,[t(e(me),{type:"info"},{default:a(()=>[t(e(w),null,{default:a(()=>C[17]||(C[17]=[F("strong",null,"å›ºå®šçª—å£ç®—æ³•ï¼š",-1),r("åœ¨å›ºå®šæ—¶é—´çª—å£å†…é™åˆ¶è¯·æ±‚æ•°é‡ã€‚ çª—å£åˆ°æœŸåŽé‡ç½®è®¡æ•°å™¨ï¼Œå¯èƒ½å‡ºçŽ°è¾¹ç•Œçªå‘ã€‚ "),F("br",null,null,-1),r(" â€¢ é™æµé€ŸçŽ‡ï¼šæ—¶é—´çª—å£å†…å…è®¸çš„æœ€å¤§è¯·æ±‚æ•° "),F("br",null,null,-1),r(" â€¢ æ—¶é—´çª—å£ï¼šç»Ÿè®¡è¯·æ±‚æ•°é‡çš„æ—¶é—´èŒƒå›´ ")])),_:1})]),_:1})])):d.algorithm==="none"?(p(),H("div",wa,[t(e(me),{type:"warning"},{default:a(()=>[t(e(w),null,{default:a(()=>C[18]||(C[18]=[F("strong",null,"æ— é™æµï¼š",-1),r("ä¸è¿›è¡Œä»»ä½•é™æµæŽ§åˆ¶ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šé€šè¿‡ã€‚ é€šå¸¸ç”¨äºŽä¸´æ—¶å…³é—­é™æµæˆ–æµ‹è¯•çŽ¯å¢ƒã€‚ ")])),_:1})]),_:1})])):A("",!0)]),_:1})]),_:1}),t(e(b),{justify:"space-between",style:{"margin-top":"16px"}},{default:a(()=>[t(e(b),{align:"center"},{default:a(()=>[s.value?(p(),E(e(J),{key:0,type:"warning",size:"small"},{default:a(()=>C[19]||(C[19]=[r("æœ‰å˜æ›´")])),_:1})):A("",!0),!s.value&&N.value?(p(),E(e(J),{key:1,type:"success",size:"small"},{default:a(()=>C[20]||(C[20]=[r("å·²ä¿å­˜")])),_:1})):A("",!0),U.value?A("",!0):(p(),E(e(J),{key:2,type:"info",size:"small"},{default:a(()=>C[21]||(C[21]=[r("éœ€è¦ç½‘å…³å®žä¾‹IDæˆ–è·¯ç”±é…ç½®ID")])),_:1})),t(e(w),{depth:"3"},{default:a(()=>[r(" ç­–ç•¥ï¼š"+K(x[d.keyStrategy])+" | ç®—æ³•ï¼š"+K(y[d.algorithm])+" | é€ŸçŽ‡ï¼š"+K(d.limitRate)+"/ç§’ | ä¼˜å…ˆçº§ï¼š"+K(d.configPriority),1)]),_:1})]),_:1}),t(e(b),null,{default:a(()=>[U.value?(p(),E(e(oe),{key:0,type:"primary",onClick:l,loading:j.value,disabled:!s.value},{default:a(()=>C[22]||(C[22]=[r(" ä¿å­˜é™æµé…ç½® ")])),_:1},8,["loading","disabled"])):A("",!0)]),_:1})]),_:1})],512)),[[ye,B.value]]):A("",!0)]),_:1})]))}}),$a=ge(ba,[["__scopeId","data-v-540a5501"]]);export{ja as A,Ea as C,$a as R,Ma as S,Ye as a};
