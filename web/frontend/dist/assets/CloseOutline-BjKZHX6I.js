import{d as A,a8 as a,b8 as Z,E as K,a7 as M,aq as b,ar as ee,at as q,as as te,I as R,az as x,ao as B,c7 as H,bk as W,cE as ne,aA as ae,r as re,ag as U,a$ as le,aC as J,dc as ie,g as j,a6 as oe,aB as se,aH as ue,b2 as ce,dd as _,de as F,bv as de,b7 as N,df as pe,c as me,o as fe,a as G}from"./index-DKB7UIvv.js";import{R as he}from"./InputNumber-C6uuw51c.js";import{A as ve}from"./DataTable-Zlk1n-G1.js";const ye=A({name:"ArrowUp",render(){return a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},a("g",{fill:"none"},a("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),z=Z("n-dynamic-input"),ge=A({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:n,placeholderRef:d}=M(z);return{mergedTheme:n,placeholder:d}},render(){const{mergedTheme:n,placeholder:d,value:u,clsPrefix:i,onUpdateValue:s,disabled:v}=this;return a("div",{class:`${i}-dynamic-input-preset-input`},a(K,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:u,placeholder:d,onUpdateValue:s,disabled:v}))}}),be=A({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(n){const{mergedThemeRef:d,keyPlaceholderRef:u,valuePlaceholderRef:i}=M(z);return{mergedTheme:d,keyPlaceholder:u,valuePlaceholder:i,handleKeyInput(s){n.onUpdateValue({key:s,value:n.value.value})},handleValueInput(s){n.onUpdateValue({key:n.value.key,value:s})}}},render(){const{mergedTheme:n,keyPlaceholder:d,valuePlaceholder:u,value:i,clsPrefix:s,disabled:v}=this;return a("div",{class:`${s}-dynamic-input-preset-pair`},a(K,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:i.key,class:`${s}-dynamic-input-pair-input`,placeholder:d,onUpdateValue:this.handleKeyInput,disabled:v}),a(K,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:i.value,class:`${s}-dynamic-input-pair-input`,placeholder:u,onUpdateValue:this.handleValueInput,disabled:v}))}}),Ve=b("dynamic-input",{width:"100%"},[b("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[b("dynamic-input-preset-input",{flex:1,alignItems:"center"}),b("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[b("dynamic-input-pair-input",[q("&:first-child",{"margin-right":"12px"})])]),ee("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[te("icon",{cursor:"pointer"})]),q("&:last-child",{marginBottom:0})]),b("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[b("form-item-blank",{paddingTop:"0 !important"})])]),T=new WeakMap,ke=Object.assign(Object.assign({},J.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Re=A({name:"DynamicInput",props:ke,setup(n,{slots:d}){const{mergedComponentPropsRef:u,mergedClsPrefixRef:i,mergedRtlRef:s,inlineThemeDisabled:v}=ae(),p=M(pe,null),y=re(n.defaultValue),$=U(n,"value"),m=le($,y),V=J("DynamicInput","-dynamic-input",Ve,ie,n,i),c=j(()=>{const{value:e}=m;if(Array.isArray(e)){const{max:t}=n;return t!==void 0&&e.length>=t}return!1}),S=j(()=>{const{value:e}=m;return Array.isArray(e)?e.length<=n.min:!0}),O=j(()=>{var e,t;return(t=(e=u==null?void 0:u.value)===null||e===void 0?void 0:e.DynamicInput)===null||t===void 0?void 0:t.buttonSize});function f(e){const{onInput:t,"onUpdate:value":l,onUpdateValue:r}=n;t&&N(t,e),l&&N(l,e),r&&N(r,e),y.value=e}function D(e,t){if(e==null||typeof e!="object")return t;const l=_(e)?F(e):e;let r=T.get(l);return r===void 0&&T.set(l,r=de()),r}function w(e,t){const{value:l}=m,r=Array.from(l??[]),g=r[e];if(r[e]=t,g&&t&&typeof g=="object"&&typeof t=="object"){const X=_(g)?F(g):g,Y=_(t)?F(t):t,L=T.get(X);L!==void 0&&T.set(Y,L)}f(r)}function I(){h(-1)}function h(e){const{value:t}=m,{onCreate:l}=n,r=Array.from(t??[]);if(l)r.splice(e+1,0,l(e+1)),f(r);else if(d.default)r.splice(e+1,0,null),f(r);else switch(n.preset){case"input":r.splice(e+1,0,""),f(r);break;case"pair":r.splice(e+1,0,{key:"",value:""}),f(r);break}}function k(e){const{value:t}=m;if(!Array.isArray(t))return;const{min:l}=n;if(t.length<=l)return;const{onRemove:r}=n;r&&r(e);const g=Array.from(t);g.splice(e,1),f(g)}function o(e,t,l){if(t<0||l<0||t>=e.length||l>=e.length||t===l)return;const r=e[t];e[t]=e[l],e[l]=r}function C(e,t){const{value:l}=m;if(!Array.isArray(l))return;const r=Array.from(l);e==="up"&&o(r,t,t-1),e==="down"&&o(r,t,t+1),f(r)}oe(z,{mergedThemeRef:V,keyPlaceholderRef:U(n,"keyPlaceholder"),valuePlaceholderRef:U(n,"valuePlaceholder"),placeholderRef:U(n,"placeholder")});const Q=se("DynamicInput",s,i),E=j(()=>{const{self:{actionMargin:e,actionMarginRtl:t}}=V.value;return{"--action-margin":e,"--action-margin-rtl":t}}),P=v?ue("dynamic-input",void 0,E,n):void 0;return{locale:ce("DynamicInput").localeRef,rtlEnabled:Q,buttonSize:O,mergedClsPrefix:i,NFormItem:p,uncontrolledValue:y,mergedValue:m,insertionDisabled:c,removeDisabled:S,handleCreateClick:I,ensureKey:D,handleValueChange:w,remove:k,move:C,createItem:h,mergedTheme:V,cssVars:v?void 0:E,themeClass:P==null?void 0:P.themeClass,onRender:P==null?void 0:P.onRender}},render(){const{$slots:n,itemClass:d,buttonSize:u,mergedClsPrefix:i,mergedValue:s,locale:v,mergedTheme:p,keyField:y,itemStyle:$,preset:m,showSortButton:V,NFormItem:c,ensureKey:S,handleValueChange:O,remove:f,createItem:D,move:w,onRender:I,disabled:h}=this;return I==null||I(),a("div",{class:[`${i}-dynamic-input`,this.rtlEnabled&&`${i}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(s)||s.length===0?a(R,Object.assign({block:!0,ghost:!0,dashed:!0,size:u},this.createButtonProps,{disabled:this.insertionDisabled||h,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>x(n["create-button-default"],()=>[v.create]),icon:()=>x(n["create-button-icon"],()=>[a(B,{clsPrefix:i},{default:()=>a(H,null)})])}):s.map((k,o)=>a("div",{key:y?k[y]:S(k,o),"data-key":y?k[y]:S(k,o),class:[`${i}-dynamic-input-item`,d],style:$},W(n.default,{value:s[o],index:o},()=>[m==="input"?a(ge,{disabled:h,clsPrefix:i,value:s[o],parentPath:c?c.path.value:void 0,path:c!=null&&c.path.value?`${c.path.value}[${o}]`:void 0,onUpdateValue:C=>{O(o,C)}}):m==="pair"?a(be,{disabled:h,clsPrefix:i,value:s[o],parentPath:c?c.path.value:void 0,path:c!=null&&c.path.value?`${c.path.value}[${o}]`:void 0,onUpdateValue:C=>{O(o,C)}}):null]),W(n.action,{value:s[o],index:o,create:D,remove:f,move:w},()=>[a("div",{class:`${i}-dynamic-input-item__action`},a(ne,{size:u},{default:()=>[a(R,{disabled:this.removeDisabled||h,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,circle:!0,onClick:()=>{f(o)}},{icon:()=>a(B,{clsPrefix:i},{default:()=>a(he,null)})}),a(R,{disabled:this.insertionDisabled||h,circle:!0,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,onClick:()=>{D(o)}},{icon:()=>a(B,{clsPrefix:i},{default:()=>a(H,null)})}),V?a(R,{disabled:o===0||h,circle:!0,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,onClick:()=>{w("up",o)}},{icon:()=>a(B,{clsPrefix:i},{default:()=>a(ye,null)})}):null,V?a(R,{disabled:o===s.length-1||h,circle:!0,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,onClick:()=>{w("down",o)}},{icon:()=>a(B,{clsPrefix:i},{default:()=>a(ve,null)})}):null]}))]))))}}),Pe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Be=A({name:"CloseOutline",render:function(d,u){return fe(),me("svg",Pe,u[0]||(u[0]=[G("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 368L144 144"},null,-1),G("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 144L144 368"},null,-1)]))}});export{Be as C,Re as _};
