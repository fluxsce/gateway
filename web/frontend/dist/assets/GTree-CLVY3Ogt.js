import{d as sn,e as cn}from"./SearchForm-ZHBBAje7.js";import{d as de,a2 as k,ba as pn,a1 as pe,r as B,ag as Qe,bs as Jn,ar as Zn,ai as et,c as _,c5 as nt,$ as H,v as tt,by as lt,aC as Ae,c4 as ot,ac as xn,ak as A,an as te,am as I,ao as ke,al as me,c3 as un,bC as at,aA as Je,at as fn,ab as Se,cO as hn,au as it,av as rt,aw as wn,cP as dt,aX as gn,aM as Ke,aa as P,aV as Be,P as Ie,ay as st,a0 as ct,aB as ut,R as vn,M as _e,b1 as G,cQ as yn,j as $e,y as ft,cn as en,b as ht,o as bn,e as gt,h as vt,i as yt,f as De,N as bt,_ as kt}from"./index-MyDFJZSo.js";import{C as mt}from"./CopyOutline-DvfV0-Ur.js";import{N as pt}from"./Checkbox-BKTiaMKv.js";import{V as xt}from"./Select-XrnkiBu4.js";import"./GDataFormModal-DNztNj_r.js";function Cn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const wt=de({name:"Switcher",render(){return k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},k("path",{d:"M12 8l10 8l-10 8z"}))}}),Nn=pn("n-tree-select");function kn({position:e,offsetLevel:o,indent:t,el:s}){const c={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")c.left=0,c.top=0,c.bottom=0,c.borderRadius="inherit",c.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const r=e==="before"?"top":"bottom";c[r]=0,c.left=`${s.offsetLeft+6-o*t}px`,c.height="2px",c.backgroundColor="var(--n-drop-mark-color)",c.transformOrigin=r,c.borderRadius="1px",c.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return k("div",{style:c})}function Ct({dropPosition:e,node:o}){return o.isLeaf===!1||o.children?!0:e!=="inside"}const Le=pn("n-tree");function Nt({props:e,fNodesRef:o,mergedExpandedKeysRef:t,mergedSelectedKeysRef:s,mergedCheckedKeysRef:c,handleCheck:r,handleSelect:p,handleSwitcherClick:x}){const{value:i}=s,g=pe(Nn,null),d=g?g.pendingNodeKeyRef:B(i.length?i[i.length-1]:null);function m(b){var R;if(!e.keyboard)return{enterBehavior:null};const{value:w}=d;let N=null;if(w===null){if((b.key==="ArrowDown"||b.key==="ArrowUp")&&b.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(b.key)&&w===null){const{value:y}=o;let v=0;for(;v<y.length;){if(!y[v].disabled){d.value=y[v].key;break}v+=1}}}else{const{value:y}=o;let v=y.findIndex(L=>L.key===w);if(!~v)return{enterBehavior:null};if(b.key==="Enter"){const L=y[v];switch(N=((R=e.overrideDefaultNodeClickBehavior)===null||R===void 0?void 0:R.call(e,{option:L.rawNode}))||null,N){case"toggleCheck":r(L,!c.value.includes(L.key));break;case"toggleSelect":p(L);break;case"toggleExpand":x(L);break;case"none":break;case"default":default:N="default",p(L)}}else if(b.key==="ArrowDown")for(b.preventDefault(),v+=1;v<y.length;){if(!y[v].disabled){d.value=y[v].key;break}v+=1}else if(b.key==="ArrowUp")for(b.preventDefault(),v-=1;v>=0;){if(!y[v].disabled){d.value=y[v].key;break}v-=1}else if(b.key==="ArrowLeft"){const L=y[v];if(L.isLeaf||!t.value.includes(w)){const K=L.getParent();K&&(d.value=K.key)}else x(L)}else if(b.key==="ArrowRight"){const L=y[v];if(L.isLeaf)return{enterBehavior:null};if(!t.value.includes(w))x(L);else for(v+=1;v<y.length;){if(!y[v].disabled){d.value=y[v].key;break}v+=1}}}return{enterBehavior:N}}return{pendingNodeKeyRef:d,handleKeydown:m}}const Rt=de({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const o=pe(Le);function t(c){const{onCheck:r}=e;r&&r(c)}function s(c){t(c)}return{handleUpdateValue:s,mergedTheme:o.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:o,checked:t,indeterminate:s,disabled:c,focusable:r,indent:p,handleUpdateValue:x}=this;return k("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${p}px`},"data-checkbox":!0},k(pt,{focusable:r,disabled:c,theme:o.peers.Checkbox,themeOverrides:o.peerOverrides.Checkbox,checked:t,indeterminate:s,onUpdateChecked:x}))}}),St=de({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:o,renderPrefixRef:t,renderSuffixRef:s,labelFieldRef:c}=pe(Le),r=B(null);function p(i){const{onClick:g}=e;g&&g(i)}function x(i){p(i)}return{selfRef:r,renderLabel:o,renderPrefix:t,renderSuffix:s,labelField:c,handleClick:x}},render(){const{clsPrefix:e,labelField:o,nodeProps:t,checked:s=!1,selected:c=!1,renderLabel:r,renderPrefix:p,renderSuffix:x,handleClick:i,onDragstart:g,tmNode:{rawNode:d,rawNode:{prefix:m,suffix:b,[o]:R}}}=this;return k("span",Object.assign({},t,{ref:"selfRef",class:[`${e}-tree-node-content`,t==null?void 0:t.class],onClick:i,draggable:g===void 0?void 0:!0,onDragstart:g}),p||m?k("div",{class:`${e}-tree-node-content__prefix`},p?p({option:d,selected:c,checked:s}):Qe(m)):null,k("div",{class:`${e}-tree-node-content__text`},r?r({option:d,selected:c,checked:s}):Qe(R)),x||b?k("div",{class:`${e}-tree-node-content__suffix`},x?x({option:d,selected:c,checked:s}):Qe(b)):null)}}),Kt=de({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:o}=pe(Le,null);return()=>{const{clsPrefix:t,expanded:s,hide:c,indent:r,onClick:p}=e;return k("span",{"data-switcher":!0,class:[`${t}-tree-node-switcher`,s&&`${t}-tree-node-switcher--expanded`,c&&`${t}-tree-node-switcher--hide`],style:{width:`${r}px`},onClick:p},k("div",{class:`${t}-tree-node-switcher__icon`},k(Jn,null,{default:()=>{if(e.loading)return k(Zn,{clsPrefix:t,key:"loading",radius:85,strokeWidth:20});const{value:x}=o;return x?x({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):k(et,{clsPrefix:t,key:"switcher"},{default:()=>k(wt,null)})}})))}}});function Dt(e){return _(()=>e.leafOnly?"child":e.checkStrategy)}function re(e,o){return!!e.rawNode[o]}function Rn(e,o,t,s){e==null||e.forEach(c=>{t(c),Rn(c[o],o,t,s),s(c)})}function Lt(e,o,t,s,c){const r=new Set,p=new Set,x=[];return Rn(e,s,i=>{if(x.push(i),c(o,i)){p.add(i[t]);for(let g=x.length-2;g>=0;--g)if(!r.has(x[g][t]))r.add(x[g][t]);else return}},()=>{x.pop()}),{expandedKeys:Array.from(r),highlightKeySet:p}}if(nt&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Tt(e,o,t,s,c){const r=new Set,p=new Set,x=new Set,i=[],g=[],d=[];function m(R){R.forEach(w=>{if(d.push(w),o(t,w)){r.add(w[s]),x.add(w[s]);for(let y=d.length-2;y>=0;--y){const v=d[y][s];if(!p.has(v))p.add(v),r.has(v)&&r.delete(v);else break}}const N=w[c];N&&m(N),d.pop()})}m(e);function b(R,w){R.forEach(N=>{const y=N[s],v=r.has(y),L=p.has(y);if(!v&&!L)return;const K=N[c];if(K)if(v)w.push(N);else{i.push(y);const M=Object.assign(Object.assign({},N),{[c]:[]});w.push(M),b(K,M[c])}else w.push(N)})}return b(e,g),{filteredTree:g,highlightKeySet:x,expandedKeys:i}}const Sn=de({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const o=pe(Le),{droppingNodeParentRef:t,droppingMouseNodeRef:s,draggingNodeRef:c,droppingPositionRef:r,droppingOffsetLevelRef:p,nodePropsRef:x,indentRef:i,blockLineRef:g,checkboxPlacementRef:d,checkOnClickRef:m,disabledFieldRef:b,showLineRef:R,renderSwitcherIconRef:w,overrideDefaultNodeClickBehaviorRef:N}=o,y=H(()=>!!e.tmNode.rawNode.checkboxDisabled),v=H(()=>re(e.tmNode,b.value)),L=H(()=>o.disabledRef.value||v.value),K=_(()=>{const{value:u}=x;if(u)return u({option:e.tmNode.rawNode})}),M=B(null),C={value:null};tt(()=>{C.value=M.value.$el});function D(){const u=()=>{const{tmNode:S}=e;if(!S.isLeaf&&!S.shallowLoaded){if(!o.loadingKeysRef.value.has(S.key))o.loadingKeysRef.value.add(S.key);else return;const{onLoadRef:{value:E}}=o;E&&E(S.rawNode).then($=>{$!==!1&&o.handleSwitcherClick(S)}).finally(()=>{o.loadingKeysRef.value.delete(S.key)})}else o.handleSwitcherClick(S)};w.value?setTimeout(u,0):u()}const j=H(()=>!v.value&&o.selectableRef.value&&(o.internalTreeSelect?o.mergedCheckStrategyRef.value!=="child"||o.multipleRef.value&&o.cascadeRef.value||e.tmNode.isLeaf:!0)),Y=H(()=>o.checkableRef.value&&(o.cascadeRef.value||o.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),V=H(()=>o.displayedCheckedKeysRef.value.includes(e.tmNode.key)),se=H(()=>{const{value:u}=Y;if(!u)return!1;const{value:S}=m,{tmNode:E}=e;return typeof S=="boolean"?!E.disabled&&S:S(e.tmNode.rawNode)});function xe(u){const{value:S}=o.expandOnClickRef,{value:E}=j,{value:$}=se;if(!E&&!S&&!$||Ae(u,"checkbox")||Ae(u,"switcher"))return;const{tmNode:z}=e;E&&o.handleSelect(z),S&&!z.isLeaf&&D(),$&&le(!V.value)}function we(u){var S,E;if(!(Ae(u,"checkbox")||Ae(u,"switcher"))){if(!L.value){const $=N.value;let z=!1;if($)switch($({option:e.tmNode.rawNode})){case"toggleCheck":z=!0,le(!V.value);break;case"toggleSelect":z=!0,o.handleSelect(e.tmNode);break;case"toggleExpand":z=!0,D(),z=!0;break;case"none":z=!0,z=!0;return}z||xe(u)}(E=(S=K.value)===null||S===void 0?void 0:S.onClick)===null||E===void 0||E.call(S,u)}}function Me(u){g.value||we(u)}function Q(u){g.value&&we(u)}function le(u){o.handleCheck(e.tmNode,u)}function oe(u){o.handleDragStart({event:u,node:e.tmNode})}function Ue(u){u.currentTarget===u.target&&o.handleDragEnter({event:u,node:e.tmNode})}function ee(u){u.preventDefault(),o.handleDragOver({event:u,node:e.tmNode})}function ae(u){o.handleDragEnd({event:u,node:e.tmNode})}function Ce(u){u.currentTarget===u.target&&o.handleDragLeave({event:u,node:e.tmNode})}function je(u){u.preventDefault(),r.value!==null&&o.handleDrop({event:u,node:e.tmNode,dropPosition:r.value})}const ze=_(()=>{const{clsPrefix:u}=e,{value:S}=i;if(R.value){const E=[];let $=e.tmNode.parent;for(;$;)$.isLastChild?E.push(k("div",{class:`${u}-tree-node-indent`},k("div",{style:{width:`${S}px`}}))):E.push(k("div",{class:[`${u}-tree-node-indent`,`${u}-tree-node-indent--show-line`]},k("div",{style:{width:`${S}px`}}))),$=$.parent;return E.reverse()}else return lt(e.tmNode.level,k("div",{class:`${e.clsPrefix}-tree-node-indent`},k("div",{style:{width:`${S}px`}})))});return{showDropMark:H(()=>{const{value:u}=c;if(!u)return;const{value:S}=r;if(!S)return;const{value:E}=s;if(!E)return;const{tmNode:$}=e;return $.key===E.key}),showDropMarkAsParent:H(()=>{const{value:u}=t;if(!u)return!1;const{tmNode:S}=e,{value:E}=r;return E==="before"||E==="after"?u.key===S.key:!1}),pending:H(()=>o.pendingNodeKeyRef.value===e.tmNode.key),loading:H(()=>o.loadingKeysRef.value.has(e.tmNode.key)),highlight:H(()=>{var u;return(u=o.highlightKeySetRef.value)===null||u===void 0?void 0:u.has(e.tmNode.key)}),checked:V,indeterminate:H(()=>o.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:H(()=>o.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:H(()=>o.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:L,checkable:Y,mergedCheckOnClick:se,checkboxDisabled:y,selectable:j,expandOnClick:o.expandOnClickRef,internalScrollable:o.internalScrollableRef,draggable:o.draggableRef,blockLine:g,nodeProps:K,checkboxFocusable:o.internalCheckboxFocusableRef,droppingPosition:r,droppingOffsetLevel:p,indent:i,checkboxPlacement:d,showLine:R,contentInstRef:M,contentElRef:C,indentNodes:ze,handleCheck:le,handleDrop:je,handleDragStart:oe,handleDragEnter:Ue,handleDragOver:ee,handleDragEnd:ae,handleDragLeave:Ce,handleLineClick:Q,handleContentClick:Me,handleSwitcherClick:D}},render(){const{tmNode:e,clsPrefix:o,checkable:t,expandOnClick:s,selectable:c,selected:r,checked:p,highlight:x,draggable:i,blockLine:g,indent:d,indentNodes:m,disabled:b,pending:R,internalScrollable:w,nodeProps:N,checkboxPlacement:y}=this,v=i&&!b?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,L=w?Cn(e.key):void 0,K=y==="right",M=t?k(Rt,{indent:d,right:K,focusable:this.checkboxFocusable,disabled:b||this.checkboxDisabled,clsPrefix:o,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return k("div",Object.assign({class:`${o}-tree-node-wrapper`},v),k("div",Object.assign({},g?N:void 0,{class:[`${o}-tree-node`,{[`${o}-tree-node--selected`]:r,[`${o}-tree-node--checkable`]:t,[`${o}-tree-node--highlight`]:x,[`${o}-tree-node--pending`]:R,[`${o}-tree-node--disabled`]:b,[`${o}-tree-node--selectable`]:c,[`${o}-tree-node--clickable`]:c||s||this.mergedCheckOnClick},N==null?void 0:N.class],"data-key":L,draggable:i&&g,onClick:this.handleLineClick,onDragstart:i&&g&&!b?this.handleDragStart:void 0}),m,e.isLeaf&&this.showLine?k("div",{class:[`${o}-tree-node-indent`,`${o}-tree-node-indent--show-line`,e.isLeaf&&`${o}-tree-node-indent--is-leaf`,e.isLastChild&&`${o}-tree-node-indent--last-child`]},k("div",{style:{width:`${d}px`}})):k(Kt,{clsPrefix:o,expanded:this.expanded,selected:r,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:d,onClick:this.handleSwitcherClick}),K?null:M,k(St,{ref:"contentInstRef",clsPrefix:o,checked:p,selected:r,onClick:this.handleContentClick,nodeProps:g?void 0:N,onDragstart:i&&!g&&!b?this.handleDragStart:void 0,tmNode:e}),i?this.showDropMark?kn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:d}):this.showDropMarkAsParent?kn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:d}):null:null,K?M:null))}}),Ft=de({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return k(ot,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>k("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:xn(this.height)}},this.nodes.map(o=>k(Sn,{clsPrefix:e,tmNode:o})))})}}),Ze=at(),Pt=A("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[te("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),te(">",[A("tree-node",[te("&:first-child","margin-top: 0;")])]),A("tree-motion-wrapper",[I("expand",[un({duration:"0.2s"})]),I("collapse",[un({duration:"0.2s",reverse:!0})])]),A("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),A("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[I("highlight",[A("tree-node-content",[me("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),I("disabled",[A("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),ke("disabled",[I("clickable",[A("tree-node-content",`
 cursor: pointer;
 `)])])]),I("block-node",[A("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),ke("block-line",[A("tree-node",[ke("disabled",[A("tree-node-content",[te("&:hover","background: var(--n-node-color-hover);")]),I("selectable",[A("tree-node-content",[te("&:active","background: var(--n-node-color-pressed);")])]),I("pending",[A("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),I("selected",[A("tree-node-content","background: var(--n-node-color-active);")])]),I("selected",[A("tree-node-content","background: var(--n-node-color-active);")])])]),I("block-line",[A("tree-node",[ke("disabled",[te("&:hover","background: var(--n-node-color-hover);"),I("pending",`
 background: var(--n-node-color-hover);
 `),I("selectable",[ke("selected",[te("&:active","background: var(--n-node-color-pressed);")])]),I("selected","background: var(--n-node-color-active);")]),I("selected","background: var(--n-node-color-active);"),I("disabled",`
 cursor: not-allowed;
 `)])]),A("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[I("show-line","position: relative",[te("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),I("last-child",[te("&::before",`
 bottom: 50%;
 `)]),I("is-leaf",[te("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),ke("show-line","height: 0;")]),A("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[me("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[A("icon",[Ze]),A("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[Ze]),A("base-icon",[Ze])]),I("hide","visibility: hidden;"),I("expanded","transform: rotate(90deg);")]),A("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),A("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[te("&:last-child","margin-bottom: 0;"),me("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),me("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),me("suffix",`
 display: inline-flex;
 `)]),me("empty","margin: auto;")]);var Et=function(e,o,t,s){function c(r){return r instanceof t?r:new t(function(p){p(r)})}return new(t||(t=Promise))(function(r,p){function x(d){try{g(s.next(d))}catch(m){p(m)}}function i(d){try{g(s.throw(d))}catch(m){p(m)}}function g(d){d.done?r(d.value):c(d.value).then(x,i)}g((s=s.apply(e,[])).next())})};function mn(e,o,t,s){return{getIsGroup(){return!1},getKey(r){return r[e]},getChildren:s||(r=>r[o]),getDisabled(r){return!!(r[t]||r.checkboxDisabled)}}}const Ot={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},At=Object.assign(Object.assign(Object.assign(Object.assign({},wn.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:Ct},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Ot),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Bt=de({name:"Tree",props:At,slots:Object,setup(e){const{mergedClsPrefixRef:o,inlineThemeDisabled:t,mergedRtlRef:s}=it(e),c=rt("Tree",s,o),r=wn("Tree","-tree",Pt,dt,e,o),p=B(null),x=B(null),i=B(null);function g(){var n;return(n=i.value)===null||n===void 0?void 0:n.listElRef}function d(){var n;return(n=i.value)===null||n===void 0?void 0:n.itemsElRef}const m=_(()=>{const{filter:n}=e;if(n)return n;const{labelField:l}=e;return(a,f)=>{if(!a.length)return!0;const h=f[l];return typeof h=="string"?h.toLowerCase().includes(a.toLowerCase()):!1}}),b=_(()=>{const{pattern:n}=e;return n?!n.length||!m.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Tt(e.data,m.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),R=_(()=>gn(e.showIrrelevantNodes?e.data:b.value.filteredTree,mn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),w=pe(Nn,null),N=e.internalTreeSelect?w.dataTreeMate:_(()=>e.showIrrelevantNodes?R.value:gn(e.data,mn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:y}=e,v=B([]);y!=null&&y.includes("defaultCheckedKeys")?Ke(()=>{v.value=e.defaultCheckedKeys}):v.value=e.defaultCheckedKeys;const L=P(e,"checkedKeys"),K=Be(L,v),M=_(()=>N.value.getCheckedKeys(K.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),C=Dt(e),D=_(()=>M.value.checkedKeys),j=_(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:M.value.indeterminateKeys}),Y=B([]);y!=null&&y.includes("defaultSelectedKeys")?Ke(()=>{Y.value=e.defaultSelectedKeys}):Y.value=e.defaultSelectedKeys;const V=P(e,"selectedKeys"),se=Be(V,Y),xe=B([]),we=n=>{xe.value=e.defaultExpandAll?N.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};y!=null&&y.includes("defaultExpandedKeys")?Ke(()=>{we(void 0)}):Ke(()=>{we(e.defaultExpandedKeys)});const Me=P(e,"expandedKeys"),Q=Be(Me,xe),le=_(()=>R.value.getFlattenedNodes(Q.value)),{pendingNodeKeyRef:oe,handleKeydown:Ue}=Nt({props:e,mergedCheckedKeysRef:K,mergedSelectedKeysRef:se,fNodesRef:le,mergedExpandedKeysRef:Q,handleCheck:We,handleSelect:Xe,handleSwitcherClick:ln});let ee=null,ae=null;const Ce=B(new Set),je=_(()=>e.internalHighlightKeySet||b.value.highlightKeySet),ze=Be(je,Ce),u=B(new Set),S=_(()=>Q.value.filter(n=>!u.value.has(n)));let E=0;const $=B(null),z=B(null),Te=B(null),Fe=B(null),Pe=B(0),Kn=_(()=>{const{value:n}=z;return n?n.parent:null});let He=!1;Ie(P(e,"data"),()=>{He=!0,_e(()=>{He=!1}),u.value.clear(),oe.value=null,Re()},{deep:!1});let Ve=!1;const qe=()=>{Ve=!0,_e(()=>{Ve=!1})};let Ne;Ie(P(e,"pattern"),(n,l)=>{if(e.showIrrelevantNodes)if(Ne=void 0,n){const{expandedKeys:a,highlightKeySet:f}=Lt(e.data,e.pattern,e.keyField,e.childrenField,m.value);Ce.value=f,qe(),fe(a,W(a),{node:null,action:"filter"})}else Ce.value=new Set;else if(!n.length)Ne!==void 0&&(qe(),fe(Ne,W(Ne),{node:null,action:"filter"}));else{l.length||(Ne=Q.value);const{expandedKeys:a}=b.value;a!==void 0&&(qe(),fe(a,W(a),{node:null,action:"filter"}))}});function nn(n){return Et(this,void 0,void 0,function*(){const{onLoad:l}=e;if(!l){yield Promise.resolve();return}const{value:a}=u;if(!a.has(n.key)){a.add(n.key);try{(yield l(n.rawNode))===!1&&he()}catch(f){console.error(f),he()}a.delete(n.key)}})}Ke(()=>{var n;const{value:l}=R;if(!l)return;const{getNode:a}=l;(n=Q.value)===null||n===void 0||n.forEach(f=>{const h=a(f);h&&!h.shallowLoaded&&nn(h)})});const ue=B(!1),ie=B([]);Ie(S,(n,l)=>{if(!e.animated||Ve){_e(Ee);return}if(He)return;const a=Se(r.value.self.nodeHeight),f=new Set(l);let h=null,O=null;for(const F of n)if(!f.has(F)){if(h!==null)return;h=F}const q=new Set(n);for(const F of l)if(!q.has(F)){if(O!==null)return;O=F}if(h===null&&O===null)return;const{virtualScroll:X}=e,ve=(X?i.value.listElRef:p.value).offsetHeight,ye=Math.ceil(ve/a)+1;let J;if(h!==null&&(J=l),O!==null&&(J===void 0?J=n:J=J.filter(F=>F!==O)),ue.value=!0,ie.value=R.value.getFlattenedNodes(J),h!==null){const F=ie.value.findIndex(Z=>Z.key===h);if(~F){const Z=ie.value[F].children;if(Z){const ne=yn(Z,n);ie.value.splice(F+1,0,{__motion:!0,mode:"expand",height:X?ne.length*a:void 0,nodes:X?ne.slice(0,ye):ne})}}}if(O!==null){const F=ie.value.findIndex(Z=>Z.key===O);if(~F){const Z=ie.value[F].children;if(!Z)return;ue.value=!0;const ne=yn(Z,n);ie.value.splice(F+1,0,{__motion:!0,mode:"collapse",height:X?ne.length*a:void 0,nodes:X?ne.slice(0,ye):ne})}}});const Dn=_(()=>st(le.value)),Ln=_(()=>ue.value?ie.value:le.value);function Ee(){const{value:n}=x;n&&n.sync()}function Tn(){ue.value=!1,e.virtualScroll&&_e(Ee)}function W(n){const{getNode:l}=N.value;return n.map(a=>{var f;return((f=l(a))===null||f===void 0?void 0:f.rawNode)||null})}function fe(n,l,a){const{"onUpdate:expandedKeys":f,onUpdateExpandedKeys:h}=e;xe.value=n,f&&G(f,n,l,a),h&&G(h,n,l,a)}function tn(n,l,a){const{"onUpdate:checkedKeys":f,onUpdateCheckedKeys:h}=e;v.value=n,h&&G(h,n,l,a),f&&G(f,n,l,a)}function Fn(n,l){const{"onUpdate:indeterminateKeys":a,onUpdateIndeterminateKeys:f}=e;a&&G(a,n,l),f&&G(f,n,l)}function Ge(n,l,a){const{"onUpdate:selectedKeys":f,onUpdateSelectedKeys:h}=e;Y.value=n,h&&G(h,n,l,a),f&&G(f,n,l,a)}function Pn(n){const{onDragenter:l}=e;l&&G(l,n)}function En(n){const{onDragleave:l}=e;l&&G(l,n)}function On(n){const{onDragend:l}=e;l&&G(l,n)}function An(n){const{onDragstart:l}=e;l&&G(l,n)}function Bn(n){const{onDragover:l}=e;l&&G(l,n)}function In(n){const{onDrop:l}=e;l&&G(l,n)}function Re(){_n(),ce()}function _n(){$.value=null}function ce(){Pe.value=0,z.value=null,Te.value=null,Fe.value=null,he()}function he(){ee&&(window.clearTimeout(ee),ee=null),ae=null}function We(n,l){if(e.disabled||re(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){Xe(n);return}const a=l?"check":"uncheck",{checkedKeys:f,indeterminateKeys:h}=N.value[a](n.key,D.value,{cascade:e.cascade,checkStrategy:C.value,allowNotLoaded:e.allowCheckingNotLoaded});tn(f,W(f),{node:n.rawNode,action:a}),Fn(h,W(h))}function $n(n){if(e.disabled)return;const{key:l}=n,{value:a}=Q,f=a.findIndex(h=>h===l);if(~f){const h=Array.from(a);h.splice(f,1),fe(h,W(h),{node:n.rawNode,action:"collapse"})}else{const h=R.value.getNode(l);if(!h||h.isLeaf)return;let O;if(e.accordion){const q=new Set(n.siblings.map(({key:X})=>X));O=a.filter(X=>!q.has(X)),O.push(l)}else O=a.concat(l);fe(O,W(O),{node:n.rawNode,action:"expand"})}}function ln(n){e.disabled||ue.value||$n(n)}function Xe(n){if(!(e.disabled||!e.selectable)){if(oe.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:l,indeterminateKeys:a}}=M;e.multiple?We(n,!(l.includes(n.key)||a.includes(n.key))):tn([n.key],W([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const l=Array.from(se.value),a=l.findIndex(f=>f===n.key);~a?e.cancelable&&l.splice(a,1):~a||l.push(n.key),Ge(l,W(l),{node:n.rawNode,action:~a?"unselect":"select"})}else se.value.includes(n.key)?e.cancelable&&Ge([],[],{node:n.rawNode,action:"unselect"}):Ge([n.key],W([n.key]),{node:n.rawNode,action:"select"})}}function Mn(n){if(ee&&(window.clearTimeout(ee),ee=null),n.isLeaf)return;ae=n.key;const l=()=>{if(ae!==n.key)return;const{value:a}=Te;if(a&&a.key===n.key&&!Q.value.includes(n.key)){const f=Q.value.concat(n.key);fe(f,W(f),{node:n.rawNode,action:"expand"})}ee=null,ae=null};n.shallowLoaded?ee=window.setTimeout(()=>{l()},1e3):ee=window.setTimeout(()=>{nn(n).then(()=>{l()})},1e3)}function Un({event:n,node:l}){!e.draggable||e.disabled||re(l,e.disabledField)||(on({event:n,node:l},!1),Pn({event:n,node:l.rawNode}))}function jn({event:n,node:l}){!e.draggable||e.disabled||re(l,e.disabledField)||En({event:n,node:l.rawNode})}function zn(n){n.target===n.currentTarget&&ce()}function Hn({event:n,node:l}){Re(),!(!e.draggable||e.disabled||re(l,e.disabledField))&&On({event:n,node:l.rawNode})}function Vn({event:n,node:l}){!e.draggable||e.disabled||re(l,e.disabledField)||(E=n.clientX,$.value=l,An({event:n,node:l.rawNode}))}function on({event:n,node:l},a=!0){var f;if(!e.draggable||e.disabled||re(l,e.disabledField))return;const{value:h}=$;if(!h)return;const{allowDrop:O,indent:q}=e;a&&Bn({event:n,node:l.rawNode});const X=n.currentTarget,{height:ve,top:ye}=X.getBoundingClientRect(),J=n.clientY-ye;let F;O({node:l.rawNode,dropPosition:"inside",phase:"drag"})?J<=8?F="before":J>=ve-8?F="after":F="inside":J<=ve/2?F="before":F="after";const{value:ne}=Dn;let T,U;const be=ne(l.key);if(be===null){ce();return}let Oe=!1;F==="inside"?(T=l,U="inside"):F==="before"?l.isFirstChild?(T=l,U="before"):(T=le.value[be-1],U="after"):(T=l,U="after"),!T.isLeaf&&Q.value.includes(T.key)&&(Oe=!0,U==="after"&&(T=le.value[be+1],T?U="before":(T=l,U="inside")));const rn=T;if(Te.value=rn,!Oe&&h.isLastChild&&h.key===T.key&&(U="after"),U==="after"){let dn=E-n.clientX,Ye=0;for(;dn>=q/2&&T.parent!==null&&T.isLastChild&&Ye<1;)dn-=q,Ye+=1,T=T.parent;Pe.value=Ye}else Pe.value=0;if((h.contains(T)||U==="inside"&&((f=h.parent)===null||f===void 0?void 0:f.key)===T.key)&&!(h.key===rn.key&&h.key===T.key)){ce();return}if(!O({node:T.rawNode,dropPosition:U,phase:"drag"})){ce();return}if(h.key===T.key)he();else if(ae!==T.key)if(U==="inside"){if(e.expandOnDragenter){if(Mn(T),!T.shallowLoaded&&ae!==T.key){Re();return}}else if(!T.shallowLoaded){Re();return}}else he();else U!=="inside"&&he();Fe.value=U,z.value=T}function qn({event:n,node:l,dropPosition:a}){if(!e.draggable||e.disabled||re(l,e.disabledField))return;const{value:f}=$,{value:h}=z,{value:O}=Fe;if(!(!f||!h||!O)&&e.allowDrop({node:h.rawNode,dropPosition:O,phase:"drag"})&&f.key!==h.key){if(O==="before"){const q=f.getNext({includeDisabled:!0});if(q&&q.key===h.key){ce();return}}if(O==="after"){const q=f.getPrev({includeDisabled:!0});if(q&&q.key===h.key){ce();return}}In({event:n,node:h.rawNode,dragNode:f.rawNode,dropPosition:a}),Re()}}function Gn(){Ee()}function Wn(){Ee()}function Xn(n){var l;if(e.virtualScroll||e.internalScrollable){const{value:a}=x;if(!((l=a==null?void 0:a.containerRef)===null||l===void 0)&&l.contains(n.relatedTarget))return;oe.value=null}else{const{value:a}=p;if(a!=null&&a.contains(n.relatedTarget))return;oe.value=null}}Ie(oe,n=>{var l,a;if(n!==null){if(e.virtualScroll)(l=i.value)===null||l===void 0||l.scrollTo({key:n});else if(e.internalScrollable){const{value:f}=x;if(f===null)return;const h=(a=f.contentRef)===null||a===void 0?void 0:a.querySelector(`[data-key="${Cn(n)}"]`);if(!h)return;f.scrollTo({el:h})}}}),ct(Le,{loadingKeysRef:u,highlightKeySetRef:ze,displayedCheckedKeysRef:D,displayedIndeterminateKeysRef:j,mergedSelectedKeysRef:se,mergedExpandedKeysRef:Q,mergedThemeRef:r,mergedCheckStrategyRef:C,nodePropsRef:P(e,"nodeProps"),disabledRef:P(e,"disabled"),checkableRef:P(e,"checkable"),selectableRef:P(e,"selectable"),expandOnClickRef:P(e,"expandOnClick"),onLoadRef:P(e,"onLoad"),draggableRef:P(e,"draggable"),blockLineRef:P(e,"blockLine"),indentRef:P(e,"indent"),cascadeRef:P(e,"cascade"),checkOnClickRef:P(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Te,droppingNodeParentRef:Kn,draggingNodeRef:$,droppingPositionRef:Fe,droppingOffsetLevelRef:Pe,fNodesRef:le,pendingNodeKeyRef:oe,showLineRef:P(e,"showLine"),disabledFieldRef:P(e,"disabledField"),internalScrollableRef:P(e,"internalScrollable"),internalCheckboxFocusableRef:P(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:P(e,"renderLabel"),renderPrefixRef:P(e,"renderPrefix"),renderSuffixRef:P(e,"renderSuffix"),renderSwitcherIconRef:P(e,"renderSwitcherIcon"),labelFieldRef:P(e,"labelField"),multipleRef:P(e,"multiple"),overrideDefaultNodeClickBehaviorRef:P(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:ln,handleDragEnd:Hn,handleDragEnter:Un,handleDragLeave:jn,handleDragStart:Vn,handleDrop:qn,handleDragOver:on,handleSelect:Xe,handleCheck:We});function Yn(n,l){var a,f;typeof n=="number"?(a=i.value)===null||a===void 0||a.scrollTo(n,l||0):(f=i.value)===null||f===void 0||f.scrollTo(n)}const Qn={handleKeydown:Ue,scrollTo:Yn,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=M.value;return{keys:n,options:W(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=M.value;return{keys:n,options:W(n)}}},an=_(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:l,nodeBorderRadius:a,nodeColorHover:f,nodeColorPressed:h,nodeColorActive:O,arrowColor:q,loadingColor:X,nodeTextColor:ve,nodeTextColorDisabled:ye,dropMarkColor:J,nodeWrapperPadding:F,nodeHeight:Z,lineHeight:ne,lineColor:T}}=r.value,U=Je(F,"top"),be=Je(F,"bottom"),Oe=xn(Se(Z)-Se(U)-Se(be));return{"--n-arrow-color":q,"--n-loading-color":X,"--n-bezier":n,"--n-font-size":l,"--n-node-border-radius":a,"--n-node-color-active":O,"--n-node-color-hover":f,"--n-node-color-pressed":h,"--n-node-text-color":ve,"--n-node-text-color-disabled":ye,"--n-drop-mark-color":J,"--n-node-wrapper-padding":F,"--n-line-offset-top":`-${U}`,"--n-line-offset-bottom":`-${be}`,"--n-node-content-height":Oe,"--n-line-height":ne,"--n-line-color":T}}),ge=t?ut("tree",void 0,an,e):void 0;return Object.assign(Object.assign({},Qn),{mergedClsPrefix:o,mergedTheme:r,rtlEnabled:c,fNodes:Ln,aip:ue,selfElRef:p,virtualListInstRef:i,scrollbarInstRef:x,handleFocusout:Xn,handleDragLeaveTree:zn,handleScroll:Gn,getScrollContainer:g,getScrollContent:d,handleAfterEnter:Tn,handleResize:Wn,cssVars:t?void 0:an,themeClass:ge==null?void 0:ge.themeClass,onRender:ge==null?void 0:ge.onRender})},render(){var e;const{fNodes:o,internalRenderEmpty:t}=this;if(!o.length&&t)return t();const{mergedClsPrefix:s,blockNode:c,blockLine:r,draggable:p,disabled:x,internalFocusable:i,checkable:g,handleKeydown:d,rtlEnabled:m,handleFocusout:b,scrollbarProps:R}=this,w=i&&!x,N=w?"0":void 0,y=[`${s}-tree`,m&&`${s}-tree--rtl`,g&&`${s}-tree--checkable`,(r||c)&&`${s}-tree--block-node`,r&&`${s}-tree--block-line`],v=K=>"__motion"in K?k(Ft,{height:K.height,nodes:K.nodes,clsPrefix:s,mode:K.mode,onAfterEnter:this.handleAfterEnter}):k(Sn,{key:K.key,tmNode:K,clsPrefix:s});if(this.virtualScroll){const{mergedTheme:K,internalScrollablePadding:M}=this,C=Je(M||"0");return k(hn,Object.assign({},R,{ref:"scrollbarInstRef",onDragleave:p?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:y,theme:K.peers.Scrollbar,themeOverrides:K.peerOverrides.Scrollbar,tabindex:N,onKeydown:w?d:void 0,onFocusout:w?b:void 0}),{default:()=>{var D;return(D=this.onRender)===null||D===void 0||D.call(this),o.length?k(xt,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Se(K.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:C.top,paddingBottom:C.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:C.left,paddingRight:C.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:j})=>v(j)}):fn(this.$slots.empty,()=>[k(vn,{class:`${s}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:L}=this;return y.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),L?k(hn,Object.assign({},R,{class:y,tabindex:N,onKeydown:w?d:void 0,onFocusout:w?b:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>k("div",{onDragleave:p?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(v))}):k("div",{class:y,tabindex:N,ref:"selfElRef",style:this.cssVars,onKeydown:w?d:void 0,onFocusout:w?b:void 0,onDragleave:p?this.handleDragLeaveTree:void 0},o.length?o.map(v):fn(this.$slots.empty,()=>[k(vn,{class:`${s}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}});function It(e,o,t){const s=i=>{if(!o)return!0;const g=`${o}:${i}`;return ft.user.hasButton(g)},c=(i,g)=>{if(!i)return;const d=i||g;if(typeof d=="string")try{return()=>en(d,$e)()}catch{return}else if(typeof d=="function")return d},r=i=>{const g=s(i.code),d={key:i.code,label:i.name,disabled:i.disabled||!g,show:i.visible!==!1};if(i.prefixIcon){const m=c(i.prefixIcon);m&&(d.icon=m)}return i.children&&i.children.length>0&&(d.children=i.children.map(m=>{const b=s(m.code),R={key:m.code,label:m.name,disabled:m.disabled||!b,show:m.visible!==!1};if(m.prefixIcon){const w=c(m.prefixIcon);w&&(R.icon=w)}return R})),d};return{dropdownOptions:_(()=>{if(!e||e.enabled===!1)return[];const i=[],g=e.showCopyNode!==!1,d=e.showCopyRow!==!1;if((g||d)&&i.push({key:"copyNode",label:d?"复制行数据":"复制节点数据",icon:()=>k($e,null,{default:()=>k(mt)})}),e.customMenus&&e.customMenus.length>0){const m=e.customMenus.filter(b=>b.visible!==!1).map(r);i.push(...m)}return i}),handleMenuClick:(i,g,d,m)=>{const b=String(i);if(b==="copyNode"||b==="copyRow"){const w=g||d;if(w){const N=JSON.stringify(w,null,2);sn(N)}}else if(b==="copyCell"){const w=d==null?void 0:d[m==null?void 0:m.field];sn(String(w??""))}const R={code:b,node:g,row:d,column:m};t&&t(R),e!=null&&e.onMenuClick&&e.onMenuClick(R)}}}const _t={class:"g-tree-wrapper"},$t=de({name:"GTree",__name:"GTree",props:{data:{default:()=>[]},defaultExpandedKeys:{default:()=>[]},defaultCheckedKeys:{default:()=>[]},checkedKeys:{},checkable:{type:Boolean,default:!1},cascade:{type:Boolean,default:!0},checkStrategy:{default:"all"},draggable:{type:Boolean,default:!1},showLine:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},blockLine:{type:Boolean,default:!0},keyField:{default:"key"},labelField:{default:"label"},childrenField:{default:"children"},nodeHeight:{default:28},virtualScroll:{type:Boolean,default:!1},renderLabel:{},renderPrefix:{},renderSuffix:{},ellipsis:{type:Boolean,default:!1},ellipsisLineClamp:{default:1},ellipsisTooltip:{type:[Boolean,Object],default:!0},moduleId:{},menuConfig:{}},emits:["update:checkedKeys","update:expandedKeys","select","dblclick","menu-click"],setup(e,{emit:o}){const t=e,s=o,c=_(()=>{if(!t.data||t.data.length===0)return[];const C=D=>{const j={key:t.keyField==="key"?D.key:D[t.keyField],label:t.labelField==="label"?D.label:D[t.labelField]},Y=D[t.childrenField]||D.children;return Y&&Array.isArray(Y)&&Y.length>0&&(j.children=Y.map(C)),Object.keys(D).forEach(V=>{V!==t.keyField&&V!==t.labelField&&V!==t.childrenField&&V!=="key"&&V!=="label"&&V!=="children"&&(j[V]=D[V])}),j};return t.data.map(C)}),r=B(!1),p=B(0),x=B(0),i=B(null),g=()=>{r.value=!1,i.value=null},{dropdownOptions:d,handleMenuClick:m}=It(t.menuConfig,t.moduleId,C=>{s("menu-click",{code:C.code,node:C.node??i.value})}),b=C=>{m(C,i.value,void 0,void 0),g()},R=_(()=>({option:C})=>{const D={style:{height:`${t.nodeHeight}px`},onClick:()=>{K([C.key],C)},"data-key":C.key};return t.menuConfig&&t.menuConfig.enabled!==!1&&(D.onContextmenu=j=>{j.preventDefault(),j.stopPropagation(),i.value=C,p.value=j.clientX,x.value=j.clientY,r.value=!0}),D}),w=t.renderPrefix?typeof t.renderPrefix=="string"?(()=>{const C=en(t.renderPrefix,$e);return()=>C()})():t.renderPrefix:void 0,N=t.renderSuffix?typeof t.renderSuffix=="string"?(()=>{const C=en(t.renderSuffix,$e);return()=>C()})():t.renderSuffix:void 0,y=_(()=>{if(!(!t.renderLabel&&!t.ellipsis))return({option:C})=>{if(t.renderLabel){const D=t.renderLabel({option:C});return t.ellipsis&&D?k(cn,{lineClamp:t.ellipsisLineClamp,tooltip:t.ellipsisTooltip},{default:()=>D}):D}if(t.ellipsis)return k(cn,{text:C.label,lineClamp:t.ellipsisLineClamp,tooltip:t.ellipsisTooltip})}}),v=C=>{s("update:checkedKeys",C)},L=C=>{s("update:expandedKeys",C)},K=(C,D)=>{s("select",C,D)},M=C=>{s("dblclick",C)};return(C,D)=>(bn(),ht("div",_t,[gt(De(Bt),{data:c.value,"default-expanded-keys":t.defaultExpandedKeys,"checked-keys":t.checkedKeys!==void 0?t.checkedKeys:void 0,"default-checked-keys":t.checkedKeys===void 0?t.defaultCheckedKeys:void 0,checkable:t.checkable,cascade:t.cascade,"check-strategy":t.checkStrategy,draggable:t.draggable,"show-line":t.showLine,"show-icon":t.showIcon,"block-line":t.blockLine,"node-props":R.value,"render-label":y.value,"render-prefix":De(w),"render-suffix":De(N),"virtual-scroll":t.virtualScroll,"onUpdate:checkedKeys":v,"onUpdate:expandedKeys":L,onSelect:K,onDblclick:M},null,8,["data","default-expanded-keys","checked-keys","default-checked-keys","checkable","cascade","check-strategy","draggable","show-line","show-icon","block-line","node-props","render-label","render-prefix","render-suffix","virtual-scroll"]),t.menuConfig&&t.menuConfig.enabled!==!1?(bn(),vt(De(bt),{key:0,options:De(d),show:r.value,x:p.value,y:x.value,trigger:"manual",placement:"bottom-start",onClickoutside:g,onSelect:b},null,8,["options","show","x","y"])):yt("",!0)]))}}),qt=kt($t,[["__scopeId","data-v-c8fa88aa"]]);export{qt as G};
