import{e as sn,f as cn}from"./SearchForm-YJ2LWOI7.js";import{d as de,T as b,bm as pn,ak as pe,r as I,aw as Qe,bE as Jn,aD as Zn,ay as et,j as $,ch as nt,ai as H,q as tt,aH as Ae,bH as lt,cg as ot,at as xn,P as E,S as te,Q as B,aA as me,R as ue,cf as un,bM as at,aK as Je,U as fn,ab as hn,a0 as Se,cM as gn,V as it,aF as rt,W as wn,X as Ke,Y as Be,a7 as Ie,aj as dt,Z as st,cN as ct,M as $e,a1 as W,b6 as vn,a3 as P,cO as yn,aI as ut,i as _e,y as ft,cD as en,c as ht,o as bn,b as gt,g as vt,h as yt,e as De,N as bt,_ as kt}from"./index-talhFt-3.js";import{C as mt}from"./CopyOutline-BYxst-d8.js";import{N as pt}from"./Checkbox-kG9momXt.js";import{V as xt}from"./Select-B2cdGhy0.js";function Cn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const wt=de({name:"Switcher",render(){return b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},b("path",{d:"M12 8l10 8l-10 8z"}))}}),Nn=pn("n-tree-select");function kn({position:e,offsetLevel:o,indent:t,el:d}){const s={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")s.left=0,s.top=0,s.bottom=0,s.borderRadius="inherit",s.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const r=e==="before"?"top":"bottom";s[r]=0,s.left=`${d.offsetLeft+6-o*t}px`,s.height="2px",s.backgroundColor="var(--n-drop-mark-color)",s.transformOrigin=r,s.borderRadius="1px",s.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return b("div",{style:s})}function Ct({dropPosition:e,node:o}){return o.isLeaf===!1||o.children?!0:e!=="inside"}const Le=pn("n-tree");function Nt({props:e,fNodesRef:o,mergedExpandedKeysRef:t,mergedSelectedKeysRef:d,mergedCheckedKeysRef:s,handleCheck:r,handleSelect:p,handleSwitcherClick:x}){const{value:i}=d,g=pe(Nn,null),f=g?g.pendingNodeKeyRef:I(i.length?i[i.length-1]:null);function k(m){var R;if(!e.keyboard)return{enterBehavior:null};const{value:N}=f;let w=null;if(N===null){if((m.key==="ArrowDown"||m.key==="ArrowUp")&&m.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(m.key)&&N===null){const{value:y}=o;let v=0;for(;v<y.length;){if(!y[v].disabled){f.value=y[v].key;break}v+=1}}}else{const{value:y}=o;let v=y.findIndex(S=>S.key===N);if(!~v)return{enterBehavior:null};if(m.key==="Enter"){const S=y[v];switch(w=((R=e.overrideDefaultNodeClickBehavior)===null||R===void 0?void 0:R.call(e,{option:S.rawNode}))||null,w){case"toggleCheck":r(S,!s.value.includes(S.key));break;case"toggleSelect":p(S);break;case"toggleExpand":x(S);break;case"none":break;case"default":default:w="default",p(S)}}else if(m.key==="ArrowDown")for(m.preventDefault(),v+=1;v<y.length;){if(!y[v].disabled){f.value=y[v].key;break}v+=1}else if(m.key==="ArrowUp")for(m.preventDefault(),v-=1;v>=0;){if(!y[v].disabled){f.value=y[v].key;break}v-=1}else if(m.key==="ArrowLeft"){const S=y[v];if(S.isLeaf||!t.value.includes(N)){const _=S.getParent();_&&(f.value=_.key)}else x(S)}else if(m.key==="ArrowRight"){const S=y[v];if(S.isLeaf)return{enterBehavior:null};if(!t.value.includes(N))x(S);else for(v+=1;v<y.length;){if(!y[v].disabled){f.value=y[v].key;break}v+=1}}}return{enterBehavior:w}}return{pendingNodeKeyRef:f,handleKeydown:k}}const Rt=de({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const o=pe(Le);function t(s){const{onCheck:r}=e;r&&r(s)}function d(s){t(s)}return{handleUpdateValue:d,mergedTheme:o.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:o,checked:t,indeterminate:d,disabled:s,focusable:r,indent:p,handleUpdateValue:x}=this;return b("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${p}px`},"data-checkbox":!0},b(pt,{focusable:r,disabled:s,theme:o.peers.Checkbox,themeOverrides:o.peerOverrides.Checkbox,checked:t,indeterminate:d,onUpdateChecked:x}))}}),St=de({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:o,renderPrefixRef:t,renderSuffixRef:d,labelFieldRef:s}=pe(Le),r=I(null);function p(i){const{onClick:g}=e;g&&g(i)}function x(i){p(i)}return{selfRef:r,renderLabel:o,renderPrefix:t,renderSuffix:d,labelField:s,handleClick:x}},render(){const{clsPrefix:e,labelField:o,nodeProps:t,checked:d=!1,selected:s=!1,renderLabel:r,renderPrefix:p,renderSuffix:x,handleClick:i,onDragstart:g,tmNode:{rawNode:f,rawNode:{prefix:k,suffix:m,[o]:R}}}=this;return b("span",Object.assign({},t,{ref:"selfRef",class:[`${e}-tree-node-content`,t==null?void 0:t.class],onClick:i,draggable:g===void 0?void 0:!0,onDragstart:g}),p||k?b("div",{class:`${e}-tree-node-content__prefix`},p?p({option:f,selected:s,checked:d}):Qe(k)):null,b("div",{class:`${e}-tree-node-content__text`},r?r({option:f,selected:s,checked:d}):Qe(R)),x||m?b("div",{class:`${e}-tree-node-content__suffix`},x?x({option:f,selected:s,checked:d}):Qe(m)):null)}}),Kt=de({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:o}=pe(Le,null);return()=>{const{clsPrefix:t,expanded:d,hide:s,indent:r,onClick:p}=e;return b("span",{"data-switcher":!0,class:[`${t}-tree-node-switcher`,d&&`${t}-tree-node-switcher--expanded`,s&&`${t}-tree-node-switcher--hide`],style:{width:`${r}px`},onClick:p},b("div",{class:`${t}-tree-node-switcher__icon`},b(Jn,null,{default:()=>{if(e.loading)return b(Zn,{clsPrefix:t,key:"loading",radius:85,strokeWidth:20});const{value:x}=o;return x?x({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):b(et,{clsPrefix:t,key:"switcher"},{default:()=>b(wt,null)})}})))}}});function Dt(e){return $(()=>e.leafOnly?"child":e.checkStrategy)}function re(e,o){return!!e.rawNode[o]}function Rn(e,o,t,d){e==null||e.forEach(s=>{t(s),Rn(s[o],o,t,d),d(s)})}function Lt(e,o,t,d,s){const r=new Set,p=new Set,x=[];return Rn(e,d,i=>{if(x.push(i),s(o,i)){p.add(i[t]);for(let g=x.length-2;g>=0;--g)if(!r.has(x[g][t]))r.add(x[g][t]);else return}},()=>{x.pop()}),{expandedKeys:Array.from(r),highlightKeySet:p}}if(nt&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Tt(e,o,t,d,s){const r=new Set,p=new Set,x=new Set,i=[],g=[],f=[];function k(R){R.forEach(N=>{if(f.push(N),o(t,N)){r.add(N[d]),x.add(N[d]);for(let y=f.length-2;y>=0;--y){const v=f[y][d];if(!p.has(v))p.add(v),r.has(v)&&r.delete(v);else break}}const w=N[s];w&&k(w),f.pop()})}k(e);function m(R,N){R.forEach(w=>{const y=w[d],v=r.has(y),S=p.has(y);if(!v&&!S)return;const _=w[s];if(_)if(v)N.push(w);else{i.push(y);const T=Object.assign(Object.assign({},w),{[s]:[]});N.push(T),m(_,T[s])}else N.push(w)})}return m(e,g),{filteredTree:g,highlightKeySet:x,expandedKeys:i}}const Sn=de({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const o=pe(Le),{droppingNodeParentRef:t,droppingMouseNodeRef:d,draggingNodeRef:s,droppingPositionRef:r,droppingOffsetLevelRef:p,nodePropsRef:x,indentRef:i,blockLineRef:g,checkboxPlacementRef:f,checkOnClickRef:k,disabledFieldRef:m,showLineRef:R,renderSwitcherIconRef:N,overrideDefaultNodeClickBehaviorRef:w}=o,y=H(()=>!!e.tmNode.rawNode.checkboxDisabled),v=H(()=>re(e.tmNode,m.value)),S=H(()=>o.disabledRef.value||v.value),_=$(()=>{const{value:c}=x;if(c)return c({option:e.tmNode.rawNode})}),T=I(null),C={value:null};tt(()=>{C.value=T.value.$el});function K(){const c=()=>{const{tmNode:D}=e;if(!D.isLeaf&&!D.shallowLoaded){if(!o.loadingKeysRef.value.has(D.key))o.loadingKeysRef.value.add(D.key);else return;const{onLoadRef:{value:O}}=o;O&&O(D.rawNode).then(M=>{M!==!1&&o.handleSwitcherClick(D)}).finally(()=>{o.loadingKeysRef.value.delete(D.key)})}else o.handleSwitcherClick(D)};N.value?setTimeout(c,0):c()}const U=H(()=>!v.value&&o.selectableRef.value&&(o.internalTreeSelect?o.mergedCheckStrategyRef.value!=="child"||o.multipleRef.value&&o.cascadeRef.value||e.tmNode.isLeaf:!0)),V=H(()=>o.checkableRef.value&&(o.cascadeRef.value||o.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),q=H(()=>o.displayedCheckedKeysRef.value.includes(e.tmNode.key)),se=H(()=>{const{value:c}=V;if(!c)return!1;const{value:D}=k,{tmNode:O}=e;return typeof D=="boolean"?!O.disabled&&D:D(e.tmNode.rawNode)});function xe(c){const{value:D}=o.expandOnClickRef,{value:O}=U,{value:M}=se;if(!O&&!D&&!M||Ae(c,"checkbox")||Ae(c,"switcher"))return;const{tmNode:z}=e;O&&o.handleSelect(z),D&&!z.isLeaf&&K(),M&&le(!q.value)}function we(c){var D,O;if(!(Ae(c,"checkbox")||Ae(c,"switcher"))){if(!S.value){const M=w.value;let z=!1;if(M)switch(M({option:e.tmNode.rawNode})){case"toggleCheck":z=!0,le(!q.value);break;case"toggleSelect":z=!0,o.handleSelect(e.tmNode);break;case"toggleExpand":z=!0,K(),z=!0;break;case"none":z=!0,z=!0;return}z||xe(c)}(O=(D=_.value)===null||D===void 0?void 0:D.onClick)===null||O===void 0||O.call(D,c)}}function Me(c){g.value||we(c)}function Q(c){g.value&&we(c)}function le(c){o.handleCheck(e.tmNode,c)}function oe(c){o.handleDragStart({event:c,node:e.tmNode})}function Ue(c){c.currentTarget===c.target&&o.handleDragEnter({event:c,node:e.tmNode})}function ee(c){c.preventDefault(),o.handleDragOver({event:c,node:e.tmNode})}function ae(c){o.handleDragEnd({event:c,node:e.tmNode})}function Ce(c){c.currentTarget===c.target&&o.handleDragLeave({event:c,node:e.tmNode})}function je(c){c.preventDefault(),r.value!==null&&o.handleDrop({event:c,node:e.tmNode,dropPosition:r.value})}const ze=$(()=>{const{clsPrefix:c}=e,{value:D}=i;if(R.value){const O=[];let M=e.tmNode.parent;for(;M;)M.isLastChild?O.push(b("div",{class:`${c}-tree-node-indent`},b("div",{style:{width:`${D}px`}}))):O.push(b("div",{class:[`${c}-tree-node-indent`,`${c}-tree-node-indent--show-line`]},b("div",{style:{width:`${D}px`}}))),M=M.parent;return O.reverse()}else return lt(e.tmNode.level,b("div",{class:`${e.clsPrefix}-tree-node-indent`},b("div",{style:{width:`${D}px`}})))});return{showDropMark:H(()=>{const{value:c}=s;if(!c)return;const{value:D}=r;if(!D)return;const{value:O}=d;if(!O)return;const{tmNode:M}=e;return M.key===O.key}),showDropMarkAsParent:H(()=>{const{value:c}=t;if(!c)return!1;const{tmNode:D}=e,{value:O}=r;return O==="before"||O==="after"?c.key===D.key:!1}),pending:H(()=>o.pendingNodeKeyRef.value===e.tmNode.key),loading:H(()=>o.loadingKeysRef.value.has(e.tmNode.key)),highlight:H(()=>{var c;return(c=o.highlightKeySetRef.value)===null||c===void 0?void 0:c.has(e.tmNode.key)}),checked:q,indeterminate:H(()=>o.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:H(()=>o.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:H(()=>o.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:S,checkable:V,mergedCheckOnClick:se,checkboxDisabled:y,selectable:U,expandOnClick:o.expandOnClickRef,internalScrollable:o.internalScrollableRef,draggable:o.draggableRef,blockLine:g,nodeProps:_,checkboxFocusable:o.internalCheckboxFocusableRef,droppingPosition:r,droppingOffsetLevel:p,indent:i,checkboxPlacement:f,showLine:R,contentInstRef:T,contentElRef:C,indentNodes:ze,handleCheck:le,handleDrop:je,handleDragStart:oe,handleDragEnter:Ue,handleDragOver:ee,handleDragEnd:ae,handleDragLeave:Ce,handleLineClick:Q,handleContentClick:Me,handleSwitcherClick:K}},render(){const{tmNode:e,clsPrefix:o,checkable:t,expandOnClick:d,selectable:s,selected:r,checked:p,highlight:x,draggable:i,blockLine:g,indent:f,indentNodes:k,disabled:m,pending:R,internalScrollable:N,nodeProps:w,checkboxPlacement:y}=this,v=i&&!m?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,S=N?Cn(e.key):void 0,_=y==="right",T=t?b(Rt,{indent:f,right:_,focusable:this.checkboxFocusable,disabled:m||this.checkboxDisabled,clsPrefix:o,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return b("div",Object.assign({class:`${o}-tree-node-wrapper`},v),b("div",Object.assign({},g?w:void 0,{class:[`${o}-tree-node`,{[`${o}-tree-node--selected`]:r,[`${o}-tree-node--checkable`]:t,[`${o}-tree-node--highlight`]:x,[`${o}-tree-node--pending`]:R,[`${o}-tree-node--disabled`]:m,[`${o}-tree-node--selectable`]:s,[`${o}-tree-node--clickable`]:s||d||this.mergedCheckOnClick},w==null?void 0:w.class],"data-key":S,draggable:i&&g,onClick:this.handleLineClick,onDragstart:i&&g&&!m?this.handleDragStart:void 0}),k,e.isLeaf&&this.showLine?b("div",{class:[`${o}-tree-node-indent`,`${o}-tree-node-indent--show-line`,e.isLeaf&&`${o}-tree-node-indent--is-leaf`,e.isLastChild&&`${o}-tree-node-indent--last-child`]},b("div",{style:{width:`${f}px`}})):b(Kt,{clsPrefix:o,expanded:this.expanded,selected:r,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:f,onClick:this.handleSwitcherClick}),_?null:T,b(St,{ref:"contentInstRef",clsPrefix:o,checked:p,selected:r,onClick:this.handleContentClick,nodeProps:g?void 0:w,onDragstart:i&&!g&&!m?this.handleDragStart:void 0,tmNode:e}),i?this.showDropMark?kn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:f}):this.showDropMarkAsParent?kn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:f}):null:null,_?T:null))}}),Ft=de({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return b(ot,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>b("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:xn(this.height)}},this.nodes.map(o=>b(Sn,{clsPrefix:e,tmNode:o})))})}}),Ze=at(),Pt=E("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[te("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),te(">",[E("tree-node",[te("&:first-child","margin-top: 0;")])]),E("tree-motion-wrapper",[B("expand",[un({duration:"0.2s"})]),B("collapse",[un({duration:"0.2s",reverse:!0})])]),E("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),E("tree-node",`
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[B("highlight",[E("tree-node-content",[ue("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),B("disabled",[E("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),me("disabled",[B("clickable",[E("tree-node-content",`
 cursor: pointer;
 `)])])]),B("block-node",[E("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),me("block-line",[E("tree-node",[me("disabled",[E("tree-node-content",[te("&:hover","background: var(--n-node-color-hover);")]),B("selectable",[E("tree-node-content",[te("&:active","background: var(--n-node-color-pressed);")])]),B("pending",[E("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),B("selected",[E("tree-node-content","background: var(--n-node-color-active);")])]),B("selected",[E("tree-node-content","background: var(--n-node-color-active);")])])]),B("block-line",[E("tree-node",[me("disabled",[te("&:hover","background: var(--n-node-color-hover);"),B("pending",`
 background: var(--n-node-color-hover);
 `),B("selectable",[me("selected",[te("&:active","background: var(--n-node-color-pressed);")])]),B("selected","background: var(--n-node-color-active);")]),B("selected","background: var(--n-node-color-active);"),B("disabled",`
 cursor: not-allowed;
 `)])]),B("ellipsis",[E("tree-node",[E("tree-node-content",`
 overflow: hidden;
 `,[ue("text",`
 text-overflow: ellipsis;
 white-space: nowrap;
 overflow: hidden;
 `)])])]),E("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[B("show-line","position: relative",[te("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),B("last-child",[te("&::before",`
 bottom: 50%;
 `)]),B("is-leaf",[te("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),me("show-line","height: 0;")]),E("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[ue("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[E("icon",[Ze]),E("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[Ze]),E("base-icon",[Ze])]),B("hide","visibility: hidden;"),B("expanded","transform: rotate(90deg);")]),E("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),E("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[te("&:last-child","margin-bottom: 0;"),ue("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),ue("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),ue("suffix",`
 display: inline-flex;
 `)]),ue("empty","margin: auto;")]);var Et=function(e,o,t,d){function s(r){return r instanceof t?r:new t(function(p){p(r)})}return new(t||(t=Promise))(function(r,p){function x(f){try{g(d.next(f))}catch(k){p(k)}}function i(f){try{g(d.throw(f))}catch(k){p(k)}}function g(f){f.done?r(f.value):s(f.value).then(x,i)}g((d=d.apply(e,[])).next())})};function mn(e,o,t,d){return{getIsGroup(){return!1},getKey(r){return r[e]},getChildren:d||(r=>r[o]),getDisabled(r){return!!(r[t]||r.checkboxDisabled)}}}const Ot={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indent:{type:Number,default:24},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},At=Object.assign(Object.assign(Object.assign(Object.assign({},wn.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,allowDrop:{type:Function,default:Ct},animated:{type:Boolean,default:!0},ellipsis:Boolean,checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Ot),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Bt=de({name:"Tree",props:At,slots:Object,setup(e){const{mergedClsPrefixRef:o,inlineThemeDisabled:t,mergedRtlRef:d}=it(e),s=rt("Tree",d,o),r=wn("Tree","-tree",Pt,ct,e,o),p=I(null),x=I(null),i=I(null);function g(){var n;return(n=i.value)===null||n===void 0?void 0:n.listElRef}function f(){var n;return(n=i.value)===null||n===void 0?void 0:n.itemsElRef}const k=$(()=>{const{filter:n}=e;if(n)return n;const{labelField:l}=e;return(a,u)=>{if(!a.length)return!0;const h=u[l];return typeof h=="string"?h.toLowerCase().includes(a.toLowerCase()):!1}}),m=$(()=>{const{pattern:n}=e;return n?!n.length||!k.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Tt(e.data,k.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),R=$(()=>vn(e.showIrrelevantNodes?e.data:m.value.filteredTree,mn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),N=pe(Nn,null),w=e.internalTreeSelect?N.dataTreeMate:$(()=>e.showIrrelevantNodes?R.value:vn(e.data,mn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:y}=e,v=I([]);y!=null&&y.includes("defaultCheckedKeys")?Ke(()=>{v.value=e.defaultCheckedKeys}):v.value=e.defaultCheckedKeys;const S=P(e,"checkedKeys"),_=Be(S,v),T=$(()=>w.value.getCheckedKeys(_.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),C=Dt(e),K=$(()=>T.value.checkedKeys),U=$(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:T.value.indeterminateKeys}),V=I([]);y!=null&&y.includes("defaultSelectedKeys")?Ke(()=>{V.value=e.defaultSelectedKeys}):V.value=e.defaultSelectedKeys;const q=P(e,"selectedKeys"),se=Be(q,V),xe=I([]),we=n=>{xe.value=e.defaultExpandAll?w.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};y!=null&&y.includes("defaultExpandedKeys")?Ke(()=>{we(void 0)}):Ke(()=>{we(e.defaultExpandedKeys)});const Me=P(e,"expandedKeys"),Q=Be(Me,xe),le=$(()=>R.value.getFlattenedNodes(Q.value)),{pendingNodeKeyRef:oe,handleKeydown:Ue}=Nt({props:e,mergedCheckedKeysRef:_,mergedSelectedKeysRef:se,fNodesRef:le,mergedExpandedKeysRef:Q,handleCheck:We,handleSelect:Xe,handleSwitcherClick:ln});let ee=null,ae=null;const Ce=I(new Set),je=$(()=>e.internalHighlightKeySet||m.value.highlightKeySet),ze=Be(je,Ce),c=I(new Set),D=$(()=>Q.value.filter(n=>!c.value.has(n)));let O=0;const M=I(null),z=I(null),Te=I(null),Fe=I(null),Pe=I(0),Kn=$(()=>{const{value:n}=z;return n?n.parent:null});let He=!1;Ie(P(e,"data"),()=>{He=!0,$e(()=>{He=!1}),c.value.clear(),oe.value=null,Re()},{deep:!1});let Ve=!1;const qe=()=>{Ve=!0,$e(()=>{Ve=!1})};let Ne;Ie(P(e,"pattern"),(n,l)=>{if(e.showIrrelevantNodes)if(Ne=void 0,n){const{expandedKeys:a,highlightKeySet:u}=Lt(e.data,e.pattern,e.keyField,e.childrenField,k.value);Ce.value=u,qe(),he(a,X(a),{node:null,action:"filter"})}else Ce.value=new Set;else if(!n.length)Ne!==void 0&&(qe(),he(Ne,X(Ne),{node:null,action:"filter"}));else{l.length||(Ne=Q.value);const{expandedKeys:a}=m.value;a!==void 0&&(qe(),he(a,X(a),{node:null,action:"filter"}))}});function nn(n){return Et(this,void 0,void 0,function*(){const{onLoad:l}=e;if(!l){yield Promise.resolve();return}const{value:a}=c;if(!a.has(n.key)){a.add(n.key);try{(yield l(n.rawNode))===!1&&ge()}catch(u){console.error(u),ge()}a.delete(n.key)}})}Ke(()=>{var n;const{value:l}=R;if(!l)return;const{getNode:a}=l;(n=Q.value)===null||n===void 0||n.forEach(u=>{const h=a(u);h&&!h.shallowLoaded&&nn(h)})});const fe=I(!1),ie=I([]);Ie(D,(n,l)=>{if(!e.animated||Ve){$e(Ee);return}if(He)return;const a=Se(r.value.self.nodeHeight),u=new Set(l);let h=null,A=null;for(const F of n)if(!u.has(F)){if(h!==null)return;h=F}const G=new Set(n);for(const F of l)if(!G.has(F)){if(A!==null)return;A=F}if(h===null&&A===null)return;const{virtualScroll:Y}=e,ye=(Y?i.value.listElRef:p.value).offsetHeight,be=Math.ceil(ye/a)+1;let J;if(h!==null&&(J=l),A!==null&&(J===void 0?J=n:J=J.filter(F=>F!==A)),fe.value=!0,ie.value=R.value.getFlattenedNodes(J),h!==null){const F=ie.value.findIndex(Z=>Z.key===h);if(~F){const Z=ie.value[F].children;if(Z){const ne=yn(Z,n);ie.value.splice(F+1,0,{__motion:!0,mode:"expand",height:Y?ne.length*a:void 0,nodes:Y?ne.slice(0,be):ne})}}}if(A!==null){const F=ie.value.findIndex(Z=>Z.key===A);if(~F){const Z=ie.value[F].children;if(!Z)return;fe.value=!0;const ne=yn(Z,n);ie.value.splice(F+1,0,{__motion:!0,mode:"collapse",height:Y?ne.length*a:void 0,nodes:Y?ne.slice(0,be):ne})}}});const Dn=$(()=>ut(le.value)),Ln=$(()=>fe.value?ie.value:le.value);function Ee(){const{value:n}=x;n&&n.sync()}function Tn(){fe.value=!1,e.virtualScroll&&$e(Ee)}function X(n){const{getNode:l}=w.value;return n.map(a=>{var u;return((u=l(a))===null||u===void 0?void 0:u.rawNode)||null})}function he(n,l,a){const{"onUpdate:expandedKeys":u,onUpdateExpandedKeys:h}=e;xe.value=n,u&&W(u,n,l,a),h&&W(h,n,l,a)}function tn(n,l,a){const{"onUpdate:checkedKeys":u,onUpdateCheckedKeys:h}=e;v.value=n,h&&W(h,n,l,a),u&&W(u,n,l,a)}function Fn(n,l){const{"onUpdate:indeterminateKeys":a,onUpdateIndeterminateKeys:u}=e;a&&W(a,n,l),u&&W(u,n,l)}function Ge(n,l,a){const{"onUpdate:selectedKeys":u,onUpdateSelectedKeys:h}=e;V.value=n,h&&W(h,n,l,a),u&&W(u,n,l,a)}function Pn(n){const{onDragenter:l}=e;l&&W(l,n)}function En(n){const{onDragleave:l}=e;l&&W(l,n)}function On(n){const{onDragend:l}=e;l&&W(l,n)}function An(n){const{onDragstart:l}=e;l&&W(l,n)}function Bn(n){const{onDragover:l}=e;l&&W(l,n)}function In(n){const{onDrop:l}=e;l&&W(l,n)}function Re(){$n(),ce()}function $n(){M.value=null}function ce(){Pe.value=0,z.value=null,Te.value=null,Fe.value=null,ge()}function ge(){ee&&(window.clearTimeout(ee),ee=null),ae=null}function We(n,l){if(e.disabled||re(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){Xe(n);return}const a=l?"check":"uncheck",{checkedKeys:u,indeterminateKeys:h}=w.value[a](n.key,K.value,{cascade:e.cascade,checkStrategy:C.value,allowNotLoaded:e.allowCheckingNotLoaded});tn(u,X(u),{node:n.rawNode,action:a}),Fn(h,X(h))}function _n(n){if(e.disabled)return;const{key:l}=n,{value:a}=Q,u=a.findIndex(h=>h===l);if(~u){const h=Array.from(a);h.splice(u,1),he(h,X(h),{node:n.rawNode,action:"collapse"})}else{const h=R.value.getNode(l);if(!h||h.isLeaf)return;let A;if(e.accordion){const G=new Set(n.siblings.map(({key:Y})=>Y));A=a.filter(Y=>!G.has(Y)),A.push(l)}else A=a.concat(l);he(A,X(A),{node:n.rawNode,action:"expand"})}}function ln(n){e.disabled||fe.value||_n(n)}function Xe(n){if(!(e.disabled||!e.selectable)){if(oe.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:l,indeterminateKeys:a}}=T;e.multiple?We(n,!(l.includes(n.key)||a.includes(n.key))):tn([n.key],X([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const l=Array.from(se.value),a=l.findIndex(u=>u===n.key);~a?e.cancelable&&l.splice(a,1):~a||l.push(n.key),Ge(l,X(l),{node:n.rawNode,action:~a?"unselect":"select"})}else se.value.includes(n.key)?e.cancelable&&Ge([],[],{node:n.rawNode,action:"unselect"}):Ge([n.key],X([n.key]),{node:n.rawNode,action:"select"})}}function Mn(n){if(ee&&(window.clearTimeout(ee),ee=null),n.isLeaf)return;ae=n.key;const l=()=>{if(ae!==n.key)return;const{value:a}=Te;if(a&&a.key===n.key&&!Q.value.includes(n.key)){const u=Q.value.concat(n.key);he(u,X(u),{node:n.rawNode,action:"expand"})}ee=null,ae=null};n.shallowLoaded?ee=window.setTimeout(()=>{l()},1e3):ee=window.setTimeout(()=>{nn(n).then(()=>{l()})},1e3)}function Un({event:n,node:l}){!e.draggable||e.disabled||re(l,e.disabledField)||(on({event:n,node:l},!1),Pn({event:n,node:l.rawNode}))}function jn({event:n,node:l}){!e.draggable||e.disabled||re(l,e.disabledField)||En({event:n,node:l.rawNode})}function zn(n){n.target===n.currentTarget&&ce()}function Hn({event:n,node:l}){Re(),!(!e.draggable||e.disabled||re(l,e.disabledField))&&On({event:n,node:l.rawNode})}function Vn({event:n,node:l}){!e.draggable||e.disabled||re(l,e.disabledField)||(O=n.clientX,M.value=l,An({event:n,node:l.rawNode}))}function on({event:n,node:l},a=!0){var u;if(!e.draggable||e.disabled||re(l,e.disabledField))return;const{value:h}=M;if(!h)return;const{allowDrop:A,indent:G}=e;a&&Bn({event:n,node:l.rawNode});const Y=n.currentTarget,{height:ye,top:be}=Y.getBoundingClientRect(),J=n.clientY-be;let F;A({node:l.rawNode,dropPosition:"inside",phase:"drag"})?J<=8?F="before":J>=ye-8?F="after":F="inside":J<=ye/2?F="before":F="after";const{value:ne}=Dn;let L,j;const ke=ne(l.key);if(ke===null){ce();return}let Oe=!1;F==="inside"?(L=l,j="inside"):F==="before"?l.isFirstChild?(L=l,j="before"):(L=le.value[ke-1],j="after"):(L=l,j="after"),!L.isLeaf&&Q.value.includes(L.key)&&(Oe=!0,j==="after"&&(L=le.value[ke+1],L?j="before":(L=l,j="inside")));const rn=L;if(Te.value=rn,!Oe&&h.isLastChild&&h.key===L.key&&(j="after"),j==="after"){let dn=O-n.clientX,Ye=0;for(;dn>=G/2&&L.parent!==null&&L.isLastChild&&Ye<1;)dn-=G,Ye+=1,L=L.parent;Pe.value=Ye}else Pe.value=0;if((h.contains(L)||j==="inside"&&((u=h.parent)===null||u===void 0?void 0:u.key)===L.key)&&!(h.key===rn.key&&h.key===L.key)){ce();return}if(!A({node:L.rawNode,dropPosition:j,phase:"drag"})){ce();return}if(h.key===L.key)ge();else if(ae!==L.key)if(j==="inside"){if(e.expandOnDragenter){if(Mn(L),!L.shallowLoaded&&ae!==L.key){Re();return}}else if(!L.shallowLoaded){Re();return}}else ge();else j!=="inside"&&ge();Fe.value=j,z.value=L}function qn({event:n,node:l,dropPosition:a}){if(!e.draggable||e.disabled||re(l,e.disabledField))return;const{value:u}=M,{value:h}=z,{value:A}=Fe;if(!(!u||!h||!A)&&e.allowDrop({node:h.rawNode,dropPosition:A,phase:"drag"})&&u.key!==h.key){if(A==="before"){const G=u.getNext({includeDisabled:!0});if(G&&G.key===h.key){ce();return}}if(A==="after"){const G=u.getPrev({includeDisabled:!0});if(G&&G.key===h.key){ce();return}}In({event:n,node:h.rawNode,dragNode:u.rawNode,dropPosition:a}),Re()}}function Gn(){Ee()}function Wn(){Ee()}function Xn(n){var l;if(e.virtualScroll||e.internalScrollable){const{value:a}=x;if(!((l=a==null?void 0:a.containerRef)===null||l===void 0)&&l.contains(n.relatedTarget))return;oe.value=null}else{const{value:a}=p;if(a!=null&&a.contains(n.relatedTarget))return;oe.value=null}}Ie(oe,n=>{var l,a;if(n!==null){if(e.virtualScroll)(l=i.value)===null||l===void 0||l.scrollTo({key:n});else if(e.internalScrollable){const{value:u}=x;if(u===null)return;const h=(a=u.contentRef)===null||a===void 0?void 0:a.querySelector(`[data-key="${Cn(n)}"]`);if(!h)return;u.scrollTo({el:h})}}}),dt(Le,{loadingKeysRef:c,highlightKeySetRef:ze,displayedCheckedKeysRef:K,displayedIndeterminateKeysRef:U,mergedSelectedKeysRef:se,mergedExpandedKeysRef:Q,mergedThemeRef:r,mergedCheckStrategyRef:C,nodePropsRef:P(e,"nodeProps"),disabledRef:P(e,"disabled"),checkableRef:P(e,"checkable"),selectableRef:P(e,"selectable"),expandOnClickRef:P(e,"expandOnClick"),onLoadRef:P(e,"onLoad"),draggableRef:P(e,"draggable"),blockLineRef:P(e,"blockLine"),indentRef:P(e,"indent"),cascadeRef:P(e,"cascade"),checkOnClickRef:P(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Te,droppingNodeParentRef:Kn,draggingNodeRef:M,droppingPositionRef:Fe,droppingOffsetLevelRef:Pe,fNodesRef:le,pendingNodeKeyRef:oe,showLineRef:P(e,"showLine"),disabledFieldRef:P(e,"disabledField"),internalScrollableRef:P(e,"internalScrollable"),internalCheckboxFocusableRef:P(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:P(e,"renderLabel"),renderPrefixRef:P(e,"renderPrefix"),renderSuffixRef:P(e,"renderSuffix"),renderSwitcherIconRef:P(e,"renderSwitcherIcon"),labelFieldRef:P(e,"labelField"),multipleRef:P(e,"multiple"),overrideDefaultNodeClickBehaviorRef:P(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:ln,handleDragEnd:Hn,handleDragEnter:Un,handleDragLeave:jn,handleDragStart:Vn,handleDrop:qn,handleDragOver:on,handleSelect:Xe,handleCheck:We});function Yn(n,l){var a,u;typeof n=="number"?(a=i.value)===null||a===void 0||a.scrollTo(n,l||0):(u=i.value)===null||u===void 0||u.scrollTo(n)}const Qn={handleKeydown:Ue,scrollTo:Yn,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=T.value;return{keys:n,options:X(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=T.value;return{keys:n,options:X(n)}}},an=$(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:l,nodeBorderRadius:a,nodeColorHover:u,nodeColorPressed:h,nodeColorActive:A,arrowColor:G,loadingColor:Y,nodeTextColor:ye,nodeTextColorDisabled:be,dropMarkColor:J,nodeWrapperPadding:F,nodeHeight:Z,lineHeight:ne,lineColor:L}}=r.value,j=Je(F,"top"),ke=Je(F,"bottom"),Oe=xn(Se(Z)-Se(j)-Se(ke));return{"--n-arrow-color":G,"--n-loading-color":Y,"--n-bezier":n,"--n-font-size":l,"--n-node-border-radius":a,"--n-node-color-active":A,"--n-node-color-hover":u,"--n-node-color-pressed":h,"--n-node-text-color":ye,"--n-node-text-color-disabled":be,"--n-drop-mark-color":J,"--n-node-wrapper-padding":F,"--n-line-offset-top":`-${j}`,"--n-line-offset-bottom":`-${ke}`,"--n-node-content-height":Oe,"--n-line-height":ne,"--n-line-color":L}}),ve=t?st("tree",void 0,an,e):void 0;return Object.assign(Object.assign({},Qn),{mergedClsPrefix:o,mergedTheme:r,rtlEnabled:s,fNodes:Ln,aip:fe,selfElRef:p,virtualListInstRef:i,scrollbarInstRef:x,handleFocusout:Xn,handleDragLeaveTree:zn,handleScroll:Gn,getScrollContainer:g,getScrollContent:f,handleAfterEnter:Tn,handleResize:Wn,cssVars:t?void 0:an,themeClass:ve==null?void 0:ve.themeClass,onRender:ve==null?void 0:ve.onRender})},render(){var e;const{fNodes:o,internalRenderEmpty:t}=this;if(!o.length&&t)return t();const{mergedClsPrefix:d,blockNode:s,blockLine:r,draggable:p,disabled:x,ellipsis:i,internalFocusable:g,checkable:f,handleKeydown:k,rtlEnabled:m,handleFocusout:R,scrollbarProps:N}=this,w=g&&!x,y=w?"0":void 0,v=[`${d}-tree`,m&&`${d}-tree--rtl`,f&&`${d}-tree--checkable`,(r||s)&&`${d}-tree--block-node`,r&&`${d}-tree--block-line`,i&&`${d}-tree--ellipsis`],S=T=>"__motion"in T?b(Ft,{height:T.height,nodes:T.nodes,clsPrefix:d,mode:T.mode,onAfterEnter:this.handleAfterEnter}):b(Sn,{key:T.key,tmNode:T,clsPrefix:d});if(this.virtualScroll){const{mergedTheme:T,internalScrollablePadding:C}=this,K=Je(C||"0");return b(gn,Object.assign({},N,{ref:"scrollbarInstRef",onDragleave:p?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:v,theme:T.peers.Scrollbar,themeOverrides:T.peerOverrides.Scrollbar,tabindex:y,onKeydown:w?k:void 0,onFocusout:w?R:void 0}),{default:()=>{var U;return(U=this.onRender)===null||U===void 0||U.call(this),o.length?b(xt,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Se(T.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:K.top,paddingBottom:K.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:K.left,paddingRight:K.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:V})=>S(V)}):fn(this.$slots.empty,()=>[b(hn,{class:`${d}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:_}=this;return v.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),_?b(gn,Object.assign({},N,{class:v,tabindex:y,onKeydown:w?k:void 0,onFocusout:w?R:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>b("div",{onDragleave:p?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(S))}):b("div",{class:v,tabindex:y,ref:"selfElRef",style:this.cssVars,onKeydown:w?k:void 0,onFocusout:w?R:void 0,onDragleave:p?this.handleDragLeaveTree:void 0},o.length?o.map(S):fn(this.$slots.empty,()=>[b(hn,{class:`${d}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}});function It(e,o,t){const d=i=>{if(!o)return!0;const g=`${o}:${i}`;return ft.user.hasButton(g)},s=(i,g)=>{if(!i&&!g)return;const f=i||g;if(typeof f=="string")try{return()=>en(f,_e)()}catch{return}else if(typeof f=="function")return f},r=i=>{const g=d(i.code),f={key:i.code,label:i.name,disabled:i.disabled||!g,show:i.visible!==!1};if(i.prefixIcon){const k=s(i.prefixIcon);k&&(f.icon=k)}return i.children&&i.children.length>0&&(f.children=i.children.map(k=>{const m=d(k.code),R={key:k.code,label:k.name,disabled:k.disabled||!m,show:k.visible!==!1};if(k.prefixIcon){const N=s(k.prefixIcon);N&&(R.icon=N)}return R})),f};return{dropdownOptions:$(()=>{if(!e||e.enabled===!1)return[];const i=[],g=e.showCopyNode!==!1,f=e.showCopyRow!==!1;if((g||f)&&i.push({key:"copyNode",label:f?"复制行数据":"复制节点数据",icon:()=>b(_e,null,{default:()=>b(mt)})}),e.customMenus&&e.customMenus.length>0){const k=e.customMenus.filter(m=>m.visible!==!1).map(r);i.push(...k)}return i}),handleMenuClick:(i,g,f,k)=>{const m=String(i);if(m==="copyNode"||m==="copyRow"){const N=g||f;if(N){const w=JSON.stringify(N,null,2);sn(w)}}else if(m==="copyCell"){const N=f==null?void 0:f[k==null?void 0:k.field];sn(String(N??""))}const R={code:m,node:g,row:f,column:k};t&&t(R),e!=null&&e.onMenuClick&&e.onMenuClick(R)}}}const $t={class:"g-tree-wrapper"},_t=de({name:"GTree",__name:"GTree",props:{data:{default:()=>[]},defaultExpandedKeys:{default:()=>[]},defaultCheckedKeys:{default:()=>[]},checkedKeys:{},checkable:{type:Boolean,default:!1},cascade:{type:Boolean,default:!0},checkStrategy:{default:"all"},draggable:{type:Boolean,default:!1},showLine:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},blockLine:{type:Boolean,default:!0},keyField:{default:"key"},labelField:{default:"label"},childrenField:{default:"children"},nodeHeight:{default:28},virtualScroll:{type:Boolean,default:!1},renderLabel:{},renderPrefix:{},renderSuffix:{},ellipsis:{type:Boolean,default:!1},ellipsisLineClamp:{default:1},ellipsisTooltip:{type:[Boolean,Object],default:!0},moduleId:{},menuConfig:{}},emits:["update:checkedKeys","update:expandedKeys","select","dblclick","menu-click"],setup(e,{emit:o}){const t=e,d=o,s=$(()=>{if(!t.data||t.data.length===0)return[];const C=K=>{const U={key:t.keyField==="key"?K.key:K[t.keyField],label:t.labelField==="label"?K.label:K[t.labelField]},V=K[t.childrenField]||K.children;return V&&Array.isArray(V)&&V.length>0&&(U.children=V.map(C)),Object.keys(K).forEach(q=>{q!==t.keyField&&q!==t.labelField&&q!==t.childrenField&&q!=="key"&&q!=="label"&&q!=="children"&&(U[q]=K[q])}),U};return t.data.map(C)}),r=I(!1),p=I(0),x=I(0),i=I(null),g=()=>{r.value=!1,i.value=null},{dropdownOptions:f,handleMenuClick:k}=It(t.menuConfig,t.moduleId,C=>{d("menu-click",{code:C.code,node:C.node??i.value})}),m=C=>{k(C,i.value,void 0,void 0),g()},R=$(()=>({option:C})=>{const K={style:{height:`${t.nodeHeight}px`},onClick:()=>{_([C.key],C)},"data-key":C.key};return t.menuConfig&&t.menuConfig.enabled!==!1&&(K.onContextmenu=U=>{U.preventDefault(),U.stopPropagation(),i.value=C,p.value=U.clientX,x.value=U.clientY,r.value=!0}),K}),N=t.renderPrefix?typeof t.renderPrefix=="string"?(()=>{const C=en(t.renderPrefix,_e);return()=>C()})():t.renderPrefix:void 0,w=t.renderSuffix?typeof t.renderSuffix=="string"?(()=>{const C=en(t.renderSuffix,_e);return()=>C()})():t.renderSuffix:void 0,y=$(()=>{if(!(!t.renderLabel&&!t.ellipsis))return({option:C})=>{if(t.renderLabel){const K=t.renderLabel({option:C});return t.ellipsis&&K?b(cn,{lineClamp:t.ellipsisLineClamp,tooltip:t.ellipsisTooltip},{default:()=>K}):K}if(t.ellipsis)return b(cn,{text:C.label,lineClamp:t.ellipsisLineClamp,tooltip:t.ellipsisTooltip})}}),v=C=>{d("update:checkedKeys",C)},S=C=>{d("update:expandedKeys",C)},_=(C,K)=>{d("select",C,K)},T=C=>{d("dblclick",C)};return(C,K)=>(bn(),ht("div",$t,[gt(De(Bt),{data:s.value,"default-expanded-keys":t.defaultExpandedKeys,"checked-keys":t.checkedKeys!==void 0?t.checkedKeys:void 0,"default-checked-keys":t.checkedKeys===void 0?t.defaultCheckedKeys:void 0,checkable:t.checkable,cascade:t.cascade,"check-strategy":t.checkStrategy,draggable:t.draggable,"show-line":t.showLine,"show-icon":t.showIcon,"block-line":t.blockLine,"node-props":R.value,"render-label":y.value,"render-prefix":De(N),"render-suffix":De(w),"virtual-scroll":t.virtualScroll,"onUpdate:checkedKeys":v,"onUpdate:expandedKeys":S,onSelect:_,onDblclick:T},null,8,["data","default-expanded-keys","checked-keys","default-checked-keys","checkable","cascade","check-strategy","draggable","show-line","show-icon","block-line","node-props","render-label","render-prefix","render-suffix","virtual-scroll"]),t.menuConfig&&t.menuConfig.enabled!==!1?(bn(),vt(De(bt),{key:0,options:De(f),show:r.value,x:p.value,y:x.value,trigger:"manual",placement:"bottom-start",onClickoutside:g,onSelect:m},null,8,["options","show","x","y"])):yt("",!0)]))}}),Vt=kt(_t,[["__scopeId","data-v-c8fa88aa"]]);export{Vt as G};
