import{G as Yt}from"./GDataFormModal-jCrkrfPz.js";import{C as Jt,F as Zt,P as Xt,E as Qt,i as el,j as tl,l as ll,m as al,n as rl,T as ol,o as nl,p as il,q as sl,r as dl,t as ul,u as cl,v as pl,w as gl,x as ml,c as fl,G as vl,S as hl}from"./SearchForm-DCaazdSn.js";import{G as bl}from"./GPane-BTUOh7ra.js";import{cz as ue,de as pe,df as xe,dg as qe,dh as ge,di as fe,dj as ve,dk as Ae,dl as ke,dm as $t,dn as et,dp as tt,dq as lt,d as re,T as p,j as J,r as T,$ as _e,a2 as ze,bm as yl,G as at,ak as Ut,X as dt,dr as Pe,ds as rt,dt as ot,du as nt,bt as xl,S as P,P as j,aB as kl,R as oe,Q as Te,aU as wl,aV as Cl,aW as Sl,aX as it,az as Tl,aY as Al,a_ as _l,b0 as zl,a$ as $l,V as Rt,W as je,dv as Ul,Y as gt,a7 as st,Z as Mt,b1 as Rl,b3 as Ml,a1 as Ve,J as C,M as Pt,a3 as Ge,aJ as Fe,aj as Pl,bK as Fl,bL as Ol,aA as Vl,dw as Il,aF as Nl,q as Dl,dx as Ll,av as ut,d0 as Hl,dy as ql,e as t,cx as Bl,c as L,o as I,h as E,g as El,b as n,w as i,K as z,i as O,ag as V,f as ne,H as mt,bV as ft,aR as We,C as jl,D as vt,aQ as Ie,bY as ht,n as Ye,t as Be,dz as Kl,a5 as Gl,_ as Ft,aO as Ee,aa as bt,m as ct,z as $e,B as Ue,A as yt,d2 as Wl,cr as Yl,am as xt}from"./index-DFGZIhYV.js";import{N as Jl}from"./GPagination.vue_vue_type_style_index_0_scoped_2c35df38_lang-DHrAwNdU.js";import{u as Zl}from"./useGDialog-Drbk1sbt.js";import{C as Je,D as Ze,A as Xl,d as Ql,u as ea,c as ta,g as la,q as aa}from"./index-BswjA7z5.js";import{G as Xe}from"./GCodeMirror-CFcAEhxO.js";import{T as Qe,R as Ne,M as ra,I as oa,A as kt,a as wt}from"./TextOutline-B59Pqzdn.js";import{N as na}from"./InputGroup-CeDzPNaS.js";import{O as Re}from"./RefreshOutline-Bblwr7zk.js";import{L as Ct}from"./ListOutline-BhLBpUF7.js";import{L as ia}from"./LinkOutline-Dsm43y8B.js";import{C as St}from"./CodeOutline-B_7H-bTU.js";import{N as Tt}from"./Select-BxZMQlCt.js";import{N as sa}from"./Upload-B0GKjiF_.js";import{A as da}from"./AddOutline-DgCmJB8N.js";import{T as ua}from"./TrashOutline-DQN-WA1t.js";import"./GModal-BU-dfYjc.js";import"./ContractOutline-BOuVM6SO.js";import"./CloseOutline-DXK2Avno.js";import"./index-DURQnJ_r.js";import"./DownloadOutline-DDFeFH05.js";import"./DocumentOutline-B9-kJVq4.js";import"./GDialog-CJ7WdD4F.js";import"./download-C2161hUv.js";function ca(e,o){switch(e[0]){case"hex":return o?"#000000FF":"#000000";case"rgb":return o?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return o?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return o?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return"#000000"}function Oe(e){return e===null?null:/^ *#/.test(e)?"hex":e.includes("rgb")?"rgb":e.includes("hsl")?"hsl":e.includes("hsv")?"hsv":null}function pa(e,o=[255,255,255],s="AA"){const[r,d,l,g]=ue(pe(e));if(g===1){const $=De([r,d,l]),R=De(o);return(Math.max($,R)+.05)/(Math.min($,R)+.05)>=(s==="AA"?4.5:7)}const v=Math.round(r*g+o[0]*(1-g)),x=Math.round(d*g+o[1]*(1-g)),y=Math.round(l*g+o[2]*(1-g)),S=De([v,x,y]),M=De(o);return(Math.max(S,M)+.05)/(Math.min(S,M)+.05)>=(s==="AA"?4.5:7)}function De(e){const[o,s,r]=e.map(d=>(d/=255,d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4)));return .2126*o+.7152*s+.0722*r}function ga(e){return e=Math.round(e),e>=360?359:e<0?0:e}function ma(e){return e=Math.round(e*100)/100,e>1?1:e<0?0:e}const fa={rgb:{hex(e){return ve(ue(e))},hsl(e){const[o,s,r,d]=ue(e);return pe([...lt(o,s,r),d])},hsv(e){const[o,s,r,d]=ue(e);return ke([...tt(o,s,r),d])}},hex:{rgb(e){return ge(ue(e))},hsl(e){const[o,s,r,d]=ue(e);return pe([...lt(o,s,r),d])},hsv(e){const[o,s,r,d]=ue(e);return ke([...tt(o,s,r),d])}},hsl:{hex(e){const[o,s,r,d]=Ae(e);return ve([...et(o,s,r),d])},rgb(e){const[o,s,r,d]=Ae(e);return ge([...et(o,s,r),d])},hsv(e){const[o,s,r,d]=Ae(e);return ke([...$t(o,s,r),d])}},hsv:{hex(e){const[o,s,r,d]=xe(e);return ve([...fe(o,s,r),d])},rgb(e){const[o,s,r,d]=xe(e);return ge([...fe(o,s,r),d])},hsl(e){const[o,s,r,d]=xe(e);return pe([...qe(o,s,r),d])}}};function Ot(e,o,s){return s=s||Oe(e),s?s===o?e:fa[s][o](e):null}const Me="12px",va=12,be="6px",ha=re({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(e){const o=T(null);function s(l){!o.value||!e.rgba||(_e("mousemove",document,r),_e("mouseup",document,d),r(l))}function r(l){const{value:g}=o;if(!g)return;const{width:v,left:x}=g.getBoundingClientRect(),y=(l.clientX-x)/(v-va);e.onUpdateAlpha(ma(y))}function d(){var l;ze("mousemove",document,r),ze("mouseup",document,d),(l=e.onComplete)===null||l===void 0||l.call(e)}return{railRef:o,railBackgroundImage:J(()=>{const{rgba:l}=e;return l?`linear-gradient(to right, rgba(${l[0]}, ${l[1]}, ${l[2]}, 0) 0%, rgba(${l[0]}, ${l[1]}, ${l[2]}, 1) 100%)`:""}),handleMouseDown:s}},render(){const{clsPrefix:e}=this;return p("div",{class:`${e}-color-picker-slider`,ref:"railRef",style:{height:Me,borderRadius:be},onMousedown:this.handleMouseDown},p("div",{style:{borderRadius:be,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},p("div",{class:`${e}-color-picker-checkboard`}),p("div",{class:`${e}-color-picker-slider__image`,style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&p("div",{style:{position:"absolute",left:be,right:be,top:0,bottom:0}},p("div",{class:`${e}-color-picker-handle`,style:{left:`calc(${this.alpha*100}% - ${be})`,borderRadius:be,width:Me,height:Me}},p("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:ge(this.rgba),borderRadius:be,width:Me,height:Me}}))))}}),pt=yl("n-color-picker");function ba(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),255)):!1}function ya(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),360)):!1}function xa(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),100)):!1}function ka(e){const o=e.trim();return/^#[0-9a-fA-F]+$/.test(o)?[4,5,7,9].includes(o.length):!1}function wa(e){return/^\d{1,3}\.?\d*%$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e)/100,100)):!1}const Ca={paddingSmall:"0 4px"},At=re({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(e){const o=T(""),{themeRef:s}=Ut(pt,null);dt(()=>{o.value=r()});function r(){const{value:g}=e;if(g===null)return"";const{label:v}=e;return v==="HEX"?g:v==="A"?`${Math.floor(g*100)}%`:String(Math.floor(g))}function d(g){o.value=g}function l(g){let v,x;switch(e.label){case"HEX":x=ka(g),x&&e.onUpdateValue(g),o.value=r();break;case"H":v=ya(g),v===!1?o.value=r():e.onUpdateValue(v);break;case"S":case"L":case"V":v=xa(g),v===!1?o.value=r():e.onUpdateValue(v);break;case"A":v=wa(g),v===!1?o.value=r():e.onUpdateValue(v);break;case"R":case"G":case"B":v=ba(g),v===!1?o.value=r():e.onUpdateValue(v);break}}return{mergedTheme:s,inputValue:o,handleInputChange:l,handleInputUpdateValue:d}},render(){const{mergedTheme:e}=this;return p(at,{size:"small",placeholder:this.label,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,builtinThemeOverrides:Ca,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:this.label==="A"?"flex-grow: 1.25;":""})}}),Sa=re({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup(e){return{handleUnitUpdateValue(o,s){const{showAlpha:r}=e;if(e.mode==="hex"){e.onUpdateValue((r?ve:Pe)(s));return}let d;switch(e.valueArr===null?d=[0,0,0,0]:d=Array.from(e.valueArr),e.mode){case"hsv":d[o]=s,e.onUpdateValue((r?ke:nt)(d));break;case"rgb":d[o]=s,e.onUpdateValue((r?ge:ot)(d));break;case"hsl":d[o]=s,e.onUpdateValue((r?pe:rt)(d));break}}}},render(){const{clsPrefix:e,modes:o}=this;return p("div",{class:`${e}-color-picker-input`},p("div",{class:`${e}-color-picker-input__mode`,onClick:this.onUpdateMode,style:{cursor:o.length===1?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),p(na,null,{default:()=>{const{mode:s,valueArr:r,showAlpha:d}=this;if(s==="hex"){let l=null;try{l=r===null?null:(d?ve:Pe)(r)}catch{}return p(At,{label:"HEX",showAlpha:d,value:l,onUpdateValue:g=>{this.handleUnitUpdateValue(0,g)}})}return(s+(d?"a":"")).split("").map((l,g)=>p(At,{label:l.toUpperCase(),value:r===null?null:r[g],onUpdateValue:v=>{this.handleUnitUpdateValue(g,v)}}))}}))}});function Ta(e,o){if(o==="hsv"){const[s,r,d,l]=xe(e);return ge([...fe(s,r,d),l])}return e}function Aa(e){const o=document.createElement("canvas").getContext("2d");return o?(o.fillStyle=e,o.fillStyle):"#000000"}const _a=re({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(e){const o=J(()=>e.swatches.map(l=>{const g=Oe(l);return{value:l,mode:g,legalValue:Ta(l,g)}}));function s(l){const{mode:g}=e;let{value:v,mode:x}=l;return x||(x="hex",/^[a-zA-Z]+$/.test(v)?v=Aa(v):(xl("color-picker",`color ${v} in swatches is invalid.`),v="#000000")),x===g?v:Ot(v,g,x)}function r(l){e.onUpdateColor(s(l))}function d(l,g){l.key==="Enter"&&r(g)}return{parsedSwatchesRef:o,handleSwatchSelect:r,handleSwatchKeyDown:d}},render(){const{clsPrefix:e}=this;return p("div",{class:`${e}-color-picker-swatches`},this.parsedSwatchesRef.map(o=>p("div",{class:`${e}-color-picker-swatch`,tabindex:0,onClick:()=>{this.handleSwatchSelect(o)},onKeydown:s=>{this.handleSwatchKeyDown(s,o)}},p("div",{class:`${e}-color-picker-swatch__fill`,style:{background:o.legalValue}}))))}}),za=re({name:"ColorPickerTrigger",slots:Object,props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(e){const{colorPickerSlots:o,renderLabelRef:s}=Ut(pt,null);return()=>{const{hsla:r,value:d,clsPrefix:l,onClick:g,disabled:v}=e,x=o.label||s.value;return p("div",{class:[`${l}-color-picker-trigger`,v&&`${l}-color-picker-trigger--disabled`],onClick:v?void 0:g},p("div",{class:`${l}-color-picker-trigger__fill`},p("div",{class:`${l}-color-picker-checkboard`}),p("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:r?pe(r):""}}),d&&r?p("div",{class:`${l}-color-picker-trigger__value`,style:{color:pa(r)?"white":"black"}},x?x(d):d):null))}}}),$a=re({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:e=>{const o=Oe(e);return!!(!e||o&&o!=="hsv")}},onUpdateColor:{type:Function,required:!0}},setup(e){function o(s){var r;const d=s.target.value;(r=e.onUpdateColor)===null||r===void 0||r.call(e,Ot(d.toUpperCase(),e.mode,"hex")),s.stopPropagation()}return{handleChange:o}},render(){const{clsPrefix:e}=this;return p("div",{class:`${e}-color-picker-preview__preview`},p("span",{class:`${e}-color-picker-preview__fill`,style:{background:this.color||"#000000"}}),p("input",{class:`${e}-color-picker-preview__input`,type:"color",value:this.color,onChange:this.handleChange}))}}),Se="12px",Ua=12,ye="6px",Ra=6,Ma="linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",Pa=re({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(e){const o=T(null);function s(l){o.value&&(_e("mousemove",document,r),_e("mouseup",document,d),r(l))}function r(l){const{value:g}=o;if(!g)return;const{width:v,left:x}=g.getBoundingClientRect(),y=ga((l.clientX-x-Ra)/(v-Ua)*360);e.onUpdateHue(y)}function d(){var l;ze("mousemove",document,r),ze("mouseup",document,d),(l=e.onComplete)===null||l===void 0||l.call(e)}return{railRef:o,handleMouseDown:s}},render(){const{clsPrefix:e}=this;return p("div",{class:`${e}-color-picker-slider`,style:{height:Se,borderRadius:ye}},p("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:Ma,height:Se,borderRadius:ye,position:"relative"},onMousedown:this.handleMouseDown},p("div",{style:{position:"absolute",left:ye,right:ye,top:0,bottom:0}},p("div",{class:`${e}-color-picker-handle`,style:{left:`calc((${this.hue}%) / 359 * 100 - ${ye})`,borderRadius:ye,width:Se,height:Se}},p("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:`hsl(${this.hue}, 100%, 50%)`,borderRadius:ye,width:Se,height:Se}})))))}}),Le="12px",He="6px",Fa=re({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(e){const o=T(null);function s(l){o.value&&(_e("mousemove",document,r),_e("mouseup",document,d),r(l))}function r(l){const{value:g}=o;if(!g)return;const{width:v,height:x,left:y,bottom:S}=g.getBoundingClientRect(),M=(S-l.clientY)/x,F=(l.clientX-y)/v,$=100*(F>1?1:F<0?0:F),R=100*(M>1?1:M<0?0:M);e.onUpdateSV($,R)}function d(){var l;ze("mousemove",document,r),ze("mouseup",document,d),(l=e.onComplete)===null||l===void 0||l.call(e)}return{palleteRef:o,handleColor:J(()=>{const{rgba:l}=e;return l?`rgb(${l[0]}, ${l[1]}, ${l[2]})`:""}),handleMouseDown:s}},render(){const{clsPrefix:e}=this;return p("div",{class:`${e}-color-picker-pallete`,onMousedown:this.handleMouseDown,ref:"palleteRef"},p("div",{class:`${e}-color-picker-pallete__layer`,style:{backgroundImage:`linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`}}),p("div",{class:`${e}-color-picker-pallete__layer ${e}-color-picker-pallete__layer--shadowed`,style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&p("div",{class:`${e}-color-picker-handle`,style:{width:Le,height:Le,borderRadius:He,left:`calc(${this.displayedSv[0]}% - ${He})`,bottom:`calc(${this.displayedSv[1]}% - ${He})`}},p("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:this.handleColor,borderRadius:He,width:Le,height:Le}})))}}),Oa=P([j("color-picker",`
 display: inline-block;
 box-sizing: border-box;
 height: var(--n-height);
 font-size: var(--n-font-size);
 width: 100%;
 position: relative;
 `),j("color-picker-panel",`
 margin: 4px 0;
 width: 240px;
 font-size: var(--n-panel-font-size);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition:
 box-shadow .3s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 `,[kl(),j("input",`
 text-align: center;
 `)]),j("color-picker-checkboard",`
 background: white; 
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[P("&::after",`
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 12px 12px;
 background-position: 0 0, 0 6px, 6px -6px, -6px 0px;
 background-repeat: repeat;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),j("color-picker-slider",`
 margin-bottom: 8px;
 position: relative;
 box-sizing: border-box;
 `,[oe("image",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `),P("&::after",`
 content: "";
 position: absolute;
 border-radius: inherit;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 pointer-events: none;
 `)]),j("color-picker-handle",`
 z-index: 1;
 box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);
 position: absolute;
 background-color: white;
 overflow: hidden;
 `,[oe("fill",`
 box-sizing: border-box;
 border: 2px solid white;
 `)]),j("color-picker-pallete",`
 height: 180px;
 position: relative;
 margin-bottom: 8px;
 cursor: crosshair;
 `,[oe("layer",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[Te("shadowed",`
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 `)])]),j("color-picker-preview",`
 display: flex;
 `,[oe("sliders",`
 flex: 1 0 auto;
 `),oe("preview",`
 position: relative;
 height: 30px;
 width: 30px;
 margin: 0 0 8px 6px;
 border-radius: 50%;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 overflow: hidden;
 `),oe("fill",`
 display: block;
 width: 30px;
 height: 30px;
 `),oe("input",`
 position: absolute;
 top: 0;
 left: 0;
 width: 30px;
 height: 30px;
 opacity: 0;
 z-index: 1;
 `)]),j("color-picker-input",`
 display: flex;
 align-items: center;
 `,[j("input",`
 flex-grow: 1;
 flex-basis: 0;
 `),oe("mode",`
 width: 72px;
 text-align: center;
 `)]),j("color-picker-control",`
 padding: 12px;
 `),j("color-picker-action",`
 display: flex;
 margin-top: -4px;
 border-top: 1px solid var(--n-divider-color);
 padding: 8px 12px;
 justify-content: flex-end;
 `,[j("button","margin-left: 8px;")]),j("color-picker-trigger",`
 border: var(--n-border);
 height: 100%;
 box-sizing: border-box;
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 cursor: pointer;
 `,[oe("value",`
 white-space: nowrap;
 position: relative;
 `),oe("fill",`
 border-radius: var(--n-border-radius);
 position: absolute;
 display: flex;
 align-items: center;
 justify-content: center;
 left: 4px;
 right: 4px;
 top: 4px;
 bottom: 4px;
 `),Te("disabled","cursor: not-allowed"),j("color-picker-checkboard",`
 border-radius: var(--n-border-radius);
 `,[P("&::after",`
 --n-block-size: calc((var(--n-height) - 8px) / 3);
 background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);
 background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; 
 `)])]),j("color-picker-swatches",`
 display: grid;
 grid-gap: 8px;
 flex-wrap: wrap;
 position: relative;
 grid-template-columns: repeat(auto-fill, 18px);
 margin-top: 10px;
 `,[j("color-picker-swatch",`
 width: 18px;
 height: 18px;
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 8px 8px;
 background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;
 background-repeat: repeat;
 `,[oe("fill",`
 position: relative;
 width: 100%;
 height: 100%;
 border-radius: 3px;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 cursor: pointer;
 `),P("&:focus",`
 outline: none;
 `,[oe("fill",[P("&::after",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 background: inherit;
 filter: blur(2px);
 content: "";
 `)])])])])]),Va=Object.assign(Object.assign({},je.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:it.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,onClear:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),Ia=re({name:"ColorPicker",props:Va,slots:Object,setup(e,{slots:o}){const s=T(null);let r=null;const d=zl(e),{mergedSizeRef:l,mergedDisabledRef:g}=d,{localeRef:v}=$l("global"),{mergedClsPrefixRef:x,namespaceRef:y,inlineThemeDisabled:S}=Rt(e),M=je("ColorPicker","-color-picker",Oa,Ul,e,x);Pl(pt,{themeRef:M,renderLabelRef:Ge(e,"renderLabel"),colorPickerSlots:o});const F=T(e.defaultShow),$=gt(Ge(e,"show"),F);function R(c){const{onUpdateShow:_,"onUpdate:show":H}=e;_&&Ve(_,c),H&&Ve(H,c),F.value=c}const{defaultValue:A}=e,f=T(A===void 0?ca(e.modes,e.showAlpha):A),h=gt(Ge(e,"value"),f),G=T([h.value]),k=T(0),U=J(()=>Oe(h.value)),{modes:X}=e,B=T(Oe(h.value)||X[0]||"rgb");function we(){const{modes:c}=e,{value:_}=B,H=c.findIndex(q=>q===_);~H?B.value=c[(H+1)%c.length]:B.value="rgb"}let W,Z,ie,se,te,le,de,ee;const me=J(()=>{const{value:c}=h;if(!c)return null;switch(U.value){case"hsv":return xe(c);case"hsl":return[W,Z,ie,ee]=Ae(c),[...$t(W,Z,ie),ee];case"rgb":case"hex":return[te,le,de,ee]=ue(c),[...tt(te,le,de),ee]}}),u=J(()=>{const{value:c}=h;if(!c)return null;switch(U.value){case"rgb":case"hex":return ue(c);case"hsv":return[W,Z,se,ee]=xe(c),[...fe(W,Z,se),ee];case"hsl":return[W,Z,ie,ee]=Ae(c),[...et(W,Z,ie),ee]}}),a=J(()=>{const{value:c}=h;if(!c)return null;switch(U.value){case"hsl":return Ae(c);case"hsv":return[W,Z,se,ee]=xe(c),[...qe(W,Z,se),ee];case"rgb":case"hex":return[te,le,de,ee]=ue(c),[...lt(te,le,de),ee]}}),N=J(()=>{switch(B.value){case"rgb":case"hex":return u.value;case"hsv":return me.value;case"hsl":return a.value}}),m=T(0),b=T(1),w=T([0,0]);function Vt(c,_){const{value:H}=me,q=m.value,K=H?H[3]:1;w.value=[c,_];const{showAlpha:D}=e;switch(B.value){case"hsv":Y((D?ke:nt)([q,c,_,K]),"cursor");break;case"hsl":Y((D?pe:rt)([...qe(q,c,_),K]),"cursor");break;case"rgb":Y((D?ge:ot)([...fe(q,c,_),K]),"cursor");break;case"hex":Y((D?ve:Pe)([...fe(q,c,_),K]),"cursor");break}}function It(c){m.value=c;const{value:_}=me;if(!_)return;const[,H,q,K]=_,{showAlpha:D}=e;switch(B.value){case"hsv":Y((D?ke:nt)([c,H,q,K]),"cursor");break;case"rgb":Y((D?ge:ot)([...fe(c,H,q),K]),"cursor");break;case"hex":Y((D?ve:Pe)([...fe(c,H,q),K]),"cursor");break;case"hsl":Y((D?pe:rt)([...qe(c,H,q),K]),"cursor");break}}function Nt(c){switch(B.value){case"hsv":[W,Z,se]=me.value,Y(ke([W,Z,se,c]),"cursor");break;case"rgb":[te,le,de]=u.value,Y(ge([te,le,de,c]),"cursor");break;case"hex":[te,le,de]=u.value,Y(ve([te,le,de,c]),"cursor");break;case"hsl":[W,Z,ie]=a.value,Y(pe([W,Z,ie,c]),"cursor");break}b.value=c}function Y(c,_){_==="cursor"?r=c:r=null;const{nTriggerFormChange:H,nTriggerFormInput:q}=d,{onUpdateValue:K,"onUpdate:value":D}=e;K&&Ve(K,c),D&&Ve(D,c),H(),q(),f.value=c}function Dt(c){Y(c,"input"),Pt(Ce)}function Ce(c=!0){const{value:_}=h;if(_){const{nTriggerFormChange:H,nTriggerFormInput:q}=d,{onComplete:K}=e;K&&K(_);const{value:D}=G,{value:ae}=k;c&&(D.splice(ae+1,D.length,_),k.value=ae+1),H(),q()}}function Lt(){const{value:c}=k;c-1<0||(Y(G.value[c-1],"input"),Ce(!1),k.value=c-1)}function Ht(){const{value:c}=k;c<0||c+1>=G.value.length||(Y(G.value[c+1],"input"),Ce(!1),k.value=c+1)}function qt(){Y(null,"input");const{onClear:c}=e;c&&c(),R(!1)}function Bt(){const{value:c}=h,{onConfirm:_}=e;_&&_(c),R(!1)}const Et=J(()=>k.value>=1),jt=J(()=>{const{value:c}=G;return c.length>1&&k.value<c.length-1});st($,c=>{c||(G.value=[h.value],k.value=0)}),dt(()=>{if(!(r&&r===h.value)){const{value:c}=me;c&&(m.value=c[0],b.value=c[3],w.value=[c[1],c[2]])}r=null});const Ke=J(()=>{const{value:c}=l,{common:{cubicBezierEaseInOut:_},self:{textColor:H,color:q,panelFontSize:K,boxShadow:D,border:ae,borderRadius:Q,dividerColor:he,[Fe("height",c)]:Gt,[Fe("fontSize",c)]:Wt}}=M.value;return{"--n-bezier":_,"--n-text-color":H,"--n-color":q,"--n-panel-font-size":K,"--n-font-size":Wt,"--n-box-shadow":D,"--n-border":ae,"--n-border-radius":Q,"--n-height":Gt,"--n-divider-color":he}}),ce=S?Mt("color-picker",J(()=>l.value[0]),Ke,e):void 0;function Kt(){var c;const{value:_}=u,{value:H}=m,{internalActions:q,modes:K,actions:D}=e,{value:ae}=M,{value:Q}=x;return p("div",{class:[`${Q}-color-picker-panel`,ce==null?void 0:ce.themeClass.value],onDragstart:he=>{he.preventDefault()},style:S?void 0:Ke.value},p("div",{class:`${Q}-color-picker-control`},p(Fa,{clsPrefix:Q,rgba:_,displayedHue:H,displayedSv:w.value,onUpdateSV:Vt,onComplete:Ce}),p("div",{class:`${Q}-color-picker-preview`},p("div",{class:`${Q}-color-picker-preview__sliders`},p(Pa,{clsPrefix:Q,hue:H,onUpdateHue:It,onComplete:Ce}),e.showAlpha?p(ha,{clsPrefix:Q,rgba:_,alpha:b.value,onUpdateAlpha:Nt,onComplete:Ce}):null),e.showPreview?p($a,{clsPrefix:Q,mode:B.value,color:u.value&&Pe(u.value),onUpdateColor:he=>{Y(he,"input")}}):null),p(Sa,{clsPrefix:Q,showAlpha:e.showAlpha,mode:B.value,modes:K,onUpdateMode:we,value:h.value,valueArr:N.value,onUpdateValue:Dt}),((c=e.swatches)===null||c===void 0?void 0:c.length)&&p(_a,{clsPrefix:Q,mode:B.value,swatches:e.swatches,onUpdateColor:he=>{Y(he,"input")}})),D!=null&&D.length?p("div",{class:`${Q}-color-picker-action`},D.includes("confirm")&&p(C,{size:"small",onClick:Bt,theme:ae.peers.Button,themeOverrides:ae.peerOverrides.Button},{default:()=>v.value.confirm}),D.includes("clear")&&p(C,{size:"small",onClick:qt,disabled:!h.value,theme:ae.peers.Button,themeOverrides:ae.peerOverrides.Button},{default:()=>v.value.clear})):null,o.action?p("div",{class:`${Q}-color-picker-action`},{default:o.action}):q?p("div",{class:`${Q}-color-picker-action`},q.includes("undo")&&p(C,{size:"small",onClick:Lt,disabled:!Et.value,theme:ae.peers.Button,themeOverrides:ae.peerOverrides.Button},{default:()=>v.value.undo}),q.includes("redo")&&p(C,{size:"small",onClick:Ht,disabled:!jt.value,theme:ae.peers.Button,themeOverrides:ae.peerOverrides.Button},{default:()=>v.value.redo})):null)}return{mergedClsPrefix:x,namespace:y,selfRef:s,hsla:a,rgba:u,mergedShow:$,mergedDisabled:g,isMounted:Rl(),adjustedTo:it(e),mergedValue:h,handleTriggerClick(){R(!0)},handleClickOutside(c){var _;!((_=s.value)===null||_===void 0)&&_.contains(Ml(c))||R(!1)},renderPanel:Kt,cssVars:S?void 0:Ke,themeClass:ce==null?void 0:ce.themeClass,onRender:ce==null?void 0:ce.onRender}},render(){const{mergedClsPrefix:e,onRender:o}=this;return o==null||o(),p("div",{class:[this.themeClass,`${e}-color-picker`],ref:"selfRef",style:this.cssVars},p(wl,null,{default:()=>[p(Cl,null,{default:()=>p(za,{clsPrefix:e,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick})}),p(Sl,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===it.tdkey,to:this.adjustedTo},{default:()=>p(Tl,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?Al(this.renderPanel(),[[_l,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}}),Na=P([j("table",`
 font-size: var(--n-font-size);
 font-variant-numeric: tabular-nums;
 line-height: var(--n-line-height);
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 text-align: left;
 border-collapse: separate;
 border-spacing: 0;
 overflow: hidden;
 background-color: var(--n-td-color);
 border-color: var(--n-merged-border-color);
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 --n-merged-border-color: var(--n-border-color);
 `,[P("th",`
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 text-align: inherit;
 padding: var(--n-th-padding);
 vertical-align: inherit;
 text-transform: none;
 border: 0px solid var(--n-merged-border-color);
 font-weight: var(--n-th-font-weight);
 color: var(--n-th-text-color);
 background-color: var(--n-th-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 `,[P("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),P("td",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 padding: var(--n-td-padding);
 color: var(--n-td-text-color);
 background-color: var(--n-td-color);
 border: 0px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 `,[P("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),Te("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `,[P("tr",[P("&:last-child",[P("td",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `)])])]),Te("single-line",[P("th",`
 border-right: 0px solid var(--n-merged-border-color);
 `),P("td",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),Te("single-column",[P("tr",[P("&:not(:last-child)",[P("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])]),Te("striped",[P("tr:nth-of-type(even)",[P("td","background-color: var(--n-td-color-striped)")])]),Vl("bottom-bordered",[P("tr",[P("&:last-child",[P("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])])]),Fl(j("table",`
 background-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `,[P("th",`
 background-color: var(--n-th-color-modal);
 `),P("td",`
 background-color: var(--n-td-color-modal);
 `)])),Ol(j("table",`
 background-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `,[P("th",`
 background-color: var(--n-th-color-popover);
 `),P("td",`
 background-color: var(--n-td-color-popover);
 `)]))]),Da=Object.assign(Object.assign({},je.props),{bordered:{type:Boolean,default:!0},bottomBordered:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!0},striped:Boolean,singleColumn:Boolean,size:{type:String,default:"medium"}}),La=re({name:"Table",props:Da,setup(e){const{mergedClsPrefixRef:o,inlineThemeDisabled:s,mergedRtlRef:r}=Rt(e),d=je("Table","-table",Na,Il,e,o),l=Nl("Table",r,o),g=J(()=>{const{size:x}=e,{self:{borderColor:y,tdColor:S,tdColorModal:M,tdColorPopover:F,thColor:$,thColorModal:R,thColorPopover:A,thTextColor:f,tdTextColor:h,borderRadius:G,thFontWeight:k,lineHeight:U,borderColorModal:X,borderColorPopover:B,tdColorStriped:we,tdColorStripedModal:W,tdColorStripedPopover:Z,[Fe("fontSize",x)]:ie,[Fe("tdPadding",x)]:se,[Fe("thPadding",x)]:te},common:{cubicBezierEaseInOut:le}}=d.value;return{"--n-bezier":le,"--n-td-color":S,"--n-td-color-modal":M,"--n-td-color-popover":F,"--n-td-text-color":h,"--n-border-color":y,"--n-border-color-modal":X,"--n-border-color-popover":B,"--n-border-radius":G,"--n-font-size":ie,"--n-th-color":$,"--n-th-color-modal":R,"--n-th-color-popover":A,"--n-th-font-weight":k,"--n-th-text-color":f,"--n-line-height":U,"--n-td-padding":se,"--n-th-padding":te,"--n-td-color-striped":we,"--n-td-color-striped-modal":W,"--n-td-color-striped-popover":Z}}),v=s?Mt("table",J(()=>e.size[0]),g,e):void 0;return{rtlEnabled:l,mergedClsPrefix:o,cssVars:s?void 0:g,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){var e;const{mergedClsPrefix:o}=this;return(e=this.onRender)===null||e===void 0||e.call(this),p("table",{class:[`${o}-table`,this.themeClass,{[`${o}-table--rtl`]:this.rtlEnabled,[`${o}-table--bottom-bordered`]:this.bottomBordered,[`${o}-table--bordered`]:this.bordered,[`${o}-table--single-line`]:this.singleLine,[`${o}-table--single-column`]:this.singleColumn,[`${o}-table--striped`]:this.striped}],style:this.cssVars},this.$slots)}});var Ha=Jt,qa=Zt,Ba=Xt;function _t(e){return ql((o,s)=>({get(){return o(),e},set(r){e=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{s()})})}}))}var Ea=class extends Qt{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=_t(this.view.state),this.reactiveExtensionStorage=_t(this.extensionStorage),this.on("beforeTransaction",({nextState:o})=>{this.reactiveState.value=o,this.reactiveExtensionStorage.value=this.extensionStorage}),Hl(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,o){const s=super.registerPlugin(e,o);return this.reactiveState&&(this.reactiveState.value=s),s}unregisterPlugin(e){const o=super.unregisterPlugin(e);return this.reactiveState&&o&&(this.reactiveState.value=o),o}},ja=re({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const o=T(),s=Bl();return dt(()=>{const r=e.editor;r&&r.options.element&&o.value&&Pt(()=>{var d;if(!o.value||!((d=r.view.dom)!=null&&d.parentNode))return;const l=t(o.value);o.value.append(...r.view.dom.parentNode.childNodes),r.contentComponent=s.ctx._,s&&(r.appContext={...s.appContext,provides:s.provides}),r.setOptions({element:l}),r.createNodeViews()})}),ut(()=>{const r=e.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:o}},render(){return p("div",{ref:e=>{this.rootEl=e}})}}),Ka=(e={})=>{const o=Ll();return Dl(()=>{o.value=new Ea(e)}),ut(()=>{var s,r,d,l;const g=(r=(s=o.value)==null?void 0:s.view.dom)==null?void 0:r.parentNode,v=g==null?void 0:g.cloneNode(!0);(d=g==null?void 0:g.parentNode)==null||d.replaceChild(v,g),(l=o.value)==null||l.destroy()}),o};const Ga={key:0,class:"g-richtext__toolbar"},Wa={key:0,class:"g-richtext__toolbar-group"},Ya={key:1,class:"g-richtext__divider"},Ja={key:2,class:"g-richtext__toolbar-group"},Za={key:3,class:"g-richtext__divider"},Xa={key:4,class:"g-richtext__toolbar-group"},Qa={key:5,class:"g-richtext__divider"},er={key:6,class:"g-richtext__toolbar-group"},tr={key:7,class:"g-richtext__divider"},lr={key:8,class:"g-richtext__toolbar-group"},ar={key:9,class:"g-richtext__divider"},rr={key:10,class:"g-richtext__toolbar-group"},or={key:11,class:"g-richtext__toolbar-group"},nr={class:"g-richtext__link-dialog"},ir={key:12,class:"g-richtext__toolbar-group"},sr={class:"g-richtext__image-dialog"},dr={key:0,style:{"margin-top":"8px","text-align":"center"}},ur=["src"],cr={key:13,class:"g-richtext__toolbar-group"},pr={class:"g-richtext__table-dialog"},gr={class:"g-richtext__table-grid"},mr=["onMouseenter","onClick"],fr={style:{"margin-top":"8px","text-align":"center","font-size":"12px",color:"#666"}},vr={key:14,class:"g-richtext__divider"},hr={class:"g-richtext__toolbar-group"},br=re({name:"GRichText",__name:"GRichText",props:{modelValue:{default:""},readonly:{type:Boolean,default:!1},placeholder:{default:"请输入内容..."},minHeight:{},maxHeight:{},height:{},width:{},class:{},style:{},showToolbar:{type:Boolean,default:!0},toolbarOptions:{default:()=>({fontStyle:!0,fontFamily:!0,textColor:!0,textAlign:!0,list:!0,link:!0,image:!0,heading:!0,table:!0,other:!0})},extensions:{}},emits:["update:modelValue","change","focus","blur","ready"],setup(e,{expose:o,emit:s}){var me;const r=e,d=s,l=Ka({extensions:[el.configure({bold:!1,italic:!1,strike:!1,heading:!1,horizontalRule:!1,link:!1,underline:!1,bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}}),tl,ll,al,rl,ol,Ha,qa,nl.configure({levels:[1,2,3,4,5,6]}),il.configure({types:["heading","paragraph"]}),sl.configure({openOnClick:!1,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow"}}),dl.configure({inline:!1,allowBase64:!0,HTMLAttributes:{class:"g-richtext-image"}}),ul,cl.configure({resizable:!0}),pl,gl,ml,Ba.configure({placeholder:r.placeholder}),...((me=r.extensions)==null?void 0:me.filter(u=>{const a=u.name;return!["bold","italic","strike","underline","heading","horizontalRule","link","image","textStyle","color","fontFamily","textAlign","bulletList","orderedList","table","tableRow","tableHeader","tableCell","placeholder"].includes(a)}))||[]],content:r.modelValue,editable:!r.readonly,onUpdate:({editor:u})=>{const a=u.getHTML();d("update:modelValue",a),d("change",a)},onFocus:()=>{d("focus")},onBlur:()=>{d("blur")},onCreate:({editor:u})=>{d("ready",u)}}),g=T(!1),v=T(!1),x=T(!1),y=T(""),S=T(""),M=T("url"),F=T([]),$=T(""),R=T(3),A=T(3),f=[{label:"默认",value:""},{label:"Arial",value:"Arial"},{label:"Comic Sans MS",value:"Comic Sans MS"},{label:"Courier New",value:"Courier New"},{label:"Georgia",value:"Georgia"},{label:"Helvetica",value:"Helvetica"},{label:"Impact",value:"Impact"},{label:"Lucida Console",value:"Lucida Console"},{label:"Tahoma",value:"Tahoma"},{label:"Times New Roman",value:"Times New Roman"},{label:"Trebuchet MS",value:"Trebuchet MS"},{label:"Verdana",value:"Verdana"},{label:"宋体",value:"SimSun"},{label:"黑体",value:"SimHei"},{label:"微软雅黑",value:"Microsoft YaHei"},{label:"楷体",value:"KaiTi"}],h=[{label:"正文",value:0},{label:"标题 1",value:1},{label:"标题 2",value:2},{label:"标题 3",value:3},{label:"标题 4",value:4},{label:"标题 5",value:5},{label:"标题 6",value:6}],G=J({get:()=>{if(l.value)return l.value.getAttributes("textStyle").fontFamily||void 0},set:u=>{var a,N;u?(a=l.value)==null||a.chain().focus().setFontFamily(u).run():(N=l.value)==null||N.chain().focus().unsetFontFamily().run()}}),k=J({get:()=>l.value&&l.value.getAttributes("textStyle").color||"#000000",set:u=>{}}),U=J({get:()=>l.value?l.value.isActive("heading",{level:1})?1:l.value.isActive("heading",{level:2})?2:l.value.isActive("heading",{level:3})?3:l.value.isActive("heading",{level:4})?4:l.value.isActive("heading",{level:5})?5:l.value.isActive("heading",{level:6})?6:0:0,set:u=>{l.value&&(u===0?l.value.chain().focus().setParagraph().run():l.value.chain().focus().toggleHeading({level:u}).run())}}),X=u=>{var a,N;u?(a=l.value)==null||a.chain().focus().setFontFamily(u).run():(N=l.value)==null||N.chain().focus().unsetFontFamily().run()},B=u=>{var N;if(!u)return;let a=u;typeof u=="string"&&(u.startsWith("#")?a=u.toUpperCase():a=`#${u}`.toUpperCase()),(N=l.value)==null||N.chain().focus().setColor(a).run()},we=u=>{var a,N;u===0?(a=l.value)==null||a.chain().focus().setParagraph().run():(N=l.value)==null||N.chain().focus().toggleHeading({level:u}).run()},W=()=>{var u;if((u=l.value)!=null&&u.isActive("link")){const a=l.value.getAttributes("link");y.value=a.href||""}g.value=!g.value},Z=()=>{var u;y.value&&((u=l.value)==null||u.chain().focus().extendMarkRange("link").setLink({href:y.value}).run()),g.value=!1,y.value=""},ie=()=>{var u;(u=l.value)==null||u.chain().focus().unsetLink().run(),g.value=!1,y.value=""},se=u=>{const{file:a}=u;if(a.file){if(!a.file.type.startsWith("image/"))return;const N=new FileReader;N.onload=m=>{var w;const b=(w=m.target)==null?void 0:w.result;$.value=b},N.readAsDataURL(a.file)}},te=()=>{v.value=!1,S.value="",$.value="",F.value=[],M.value="url"},le=()=>{var a;let u="";M.value==="url"?u=S.value.trim():M.value==="upload"&&$.value&&(u=$.value),u&&((a=l.value)==null||a.chain().focus().setImage({src:u,alt:"图片",title:"图片"}).run()),te()},de=(u,a)=>{var N;(N=l.value)==null||N.chain().focus().insertTable({rows:u,cols:a,withHeaderRow:!0}).run(),x.value=!1,R.value=3,A.value=3},ee=J(()=>{const u={};if(r.width&&(u.width=typeof r.width=="number"?`${r.width}px`:r.width),r.height?u.height=typeof r.height=="number"?`${r.height}px`:r.height:(r.minHeight&&(u.minHeight=typeof r.minHeight=="number"?`${r.minHeight}px`:r.minHeight),r.maxHeight&&(u.maxHeight=typeof r.maxHeight=="number"?`${r.maxHeight}px`:r.maxHeight)),r.style){if(typeof r.style=="string")return r.style;Object.assign(u,r.style)}return u});return st(()=>r.modelValue,u=>{l.value&&l.value.getHTML()!==u&&l.value.commands.setContent(u||"",{emitUpdate:!1})}),st(()=>r.readonly,u=>{var a;(a=l.value)==null||a.setEditable(!u)}),ut(()=>{var u;(u=l.value)==null||u.destroy()}),o({getEditor:()=>l.value??null,getHTML:()=>{var u;return((u=l.value)==null?void 0:u.getHTML())||""},setHTML:u=>{var a;return(a=l.value)==null?void 0:a.commands.setContent(u,{emitUpdate:!1})},getText:()=>{var u;return((u=l.value)==null?void 0:u.getText())||""},setText:u=>{var a;return(a=l.value)==null?void 0:a.commands.setContent(u,{emitUpdate:!1})},getJSON:()=>{var u;return((u=l.value)==null?void 0:u.getJSON())||null},setJSON:u=>{var a;return(a=l.value)==null?void 0:a.commands.setContent(u,{emitUpdate:!1})},focus:()=>{var u;return(u=l.value)==null?void 0:u.commands.focus()},blur:()=>{var u;return(u=l.value)==null?void 0:u.commands.blur()},clear:()=>{var u;return(u=l.value)==null?void 0:u.commands.clearContent()}}),(u,a)=>{var N;return I(),L("div",{class:Ye(["g-richtext",r.class,{"g-richtext--readonly":r.readonly}]),style:Gl(ee.value)},[e.showToolbar?(I(),L("div",Ga,[e.toolbarOptions.fontStyle?(I(),L("div",Wa,[n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive("bold")?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[0]||(a[0]=b=>{var w;return(w=t(l))==null?void 0:w.chain().focus().toggleBold().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Qe))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[31]||(a[31]=z(" 粗体 (Ctrl+B) ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive("italic")?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[1]||(a[1]=b=>{var w;return(w=t(l))==null?void 0:w.chain().focus().toggleItalic().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Qe))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[32]||(a[32]=z(" 斜体 (Ctrl+I) ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive("underline")?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[2]||(a[2]=b=>{var w;return(w=t(l))==null?void 0:w.chain().focus().toggleUnderline().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Qe))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[33]||(a[33]=z(" 下划线 (Ctrl+U) ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive("strike")?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[3]||(a[3]=b=>{var w;return(w=t(l))==null?void 0:w.chain().focus().toggleStrike().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Ne))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[34]||(a[34]=z(" 删除线 ",-1))]),_:1})])):E("",!0),e.toolbarOptions.fontStyle&&e.toolbarOptions.fontFamily?(I(),L("div",Ya)):E("",!0),e.toolbarOptions.fontFamily?(I(),L("div",Ja,[n(t(Tt),{value:G.value,"onUpdate:value":[a[4]||(a[4]=m=>G.value=m),X],options:f,disabled:!t(l),size:"small",style:{width:"120px"},placeholder:"字体"},null,8,["value","disabled"])])):E("",!0),e.toolbarOptions.fontFamily&&e.toolbarOptions.textColor?(I(),L("div",Za)):E("",!0),e.toolbarOptions.textColor?(I(),L("div",Xa,[n(t(Ia),{value:k.value,"show-alpha":!1,modes:["hex"],actions:["confirm"],disabled:!t(l),size:"small","onUpdate:value":B},null,8,["value","disabled"])])):E("",!0),e.toolbarOptions.textColor&&e.toolbarOptions.textAlign?(I(),L("div",Qa)):E("",!0),e.toolbarOptions.textAlign?(I(),L("div",er,[n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive({textAlign:"left"})?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[5]||(a[5]=b=>{var w;return(w=t(l))==null?void 0:w.chain().focus().setTextAlign("left").run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Re))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[35]||(a[35]=z(" 左对齐 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive({textAlign:"center"})?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[6]||(a[6]=b=>{var w;return(w=t(l))==null?void 0:w.chain().focus().setTextAlign("center").run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Re))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[36]||(a[36]=z(" 居中 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive({textAlign:"right"})?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[7]||(a[7]=b=>{var w;return(w=t(l))==null?void 0:w.chain().focus().setTextAlign("right").run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Re))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[37]||(a[37]=z(" 右对齐 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive({textAlign:"justify"})?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[8]||(a[8]=b=>{var w;return(w=t(l))==null?void 0:w.chain().focus().setTextAlign("justify").run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(ra))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[38]||(a[38]=z(" 两端对齐 ",-1))]),_:1})])):E("",!0),e.toolbarOptions.textAlign&&e.toolbarOptions.list?(I(),L("div",tr)):E("",!0),e.toolbarOptions.list?(I(),L("div",lr,[n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive("bulletList")?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[9]||(a[9]=b=>{var w;return(w=t(l))==null?void 0:w.chain().focus().toggleBulletList().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Ct))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[39]||(a[39]=z(" 无序列表 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive("orderedList")?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[10]||(a[10]=b=>{var w;return(w=t(l))==null?void 0:w.chain().focus().toggleOrderedList().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Ct))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[40]||(a[40]=z(" 有序列表 ",-1))]),_:1})])):E("",!0),e.toolbarOptions.list&&(e.toolbarOptions.heading||e.toolbarOptions.link||e.toolbarOptions.image||e.toolbarOptions.table)?(I(),L("div",ar)):E("",!0),e.toolbarOptions.heading?(I(),L("div",rr,[n(t(Tt),{value:U.value,"onUpdate:value":[a[11]||(a[11]=m=>U.value=m),we],options:h,disabled:!t(l),size:"small",style:{width:"100px"},placeholder:"标题"},null,8,["value","disabled"])])):E("",!0),e.toolbarOptions.link?(I(),L("div",or,[n(t(We),{trigger:"click",show:g.value,"onUpdate:show":a[13]||(a[13]=m=>g.value=m)},{trigger:i(()=>[n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive("link")?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:W},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(ia))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[41]||(a[41]=z(" 插入链接 ",-1))]),_:1})]),default:i(()=>[ne("div",nr,[n(t(at),{value:y.value,"onUpdate:value":a[12]||(a[12]=m=>y.value=m),placeholder:"输入链接地址",size:"small",style:{"margin-bottom":"8px"},onKeyup:mt(Z,["enter"])},null,8,["value"]),n(t(ft),{justify:"end"},{default:i(()=>[n(t(C),{size:"small",onClick:ie},{default:i(()=>[...a[42]||(a[42]=[z("移除链接",-1)])]),_:1}),n(t(C),{type:"primary",size:"small",onClick:Z},{default:i(()=>[...a[43]||(a[43]=[z("确定",-1)])]),_:1})]),_:1})])]),_:1},8,["show"])])):E("",!0),e.toolbarOptions.image?(I(),L("div",ir,[n(t(We),{trigger:"click",show:v.value,"onUpdate:show":a[17]||(a[17]=m=>v.value=m)},{trigger:i(()=>[n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[14]||(a[14]=m=>v.value=!v.value)},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(oa))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[44]||(a[44]=z(" 插入图片 ",-1))]),_:1})]),default:i(()=>[ne("div",sr,[n(t(jl),{value:M.value,"onUpdate:value":a[16]||(a[16]=m=>M.value=m),size:"small"},{default:i(()=>[n(t(vt),{name:"url",tab:"图片地址"},{default:i(()=>[n(t(at),{value:S.value,"onUpdate:value":a[15]||(a[15]=m=>S.value=m),placeholder:"输入图片地址",size:"small",style:{"margin-bottom":"8px"},onKeyup:mt(le,["enter"])},null,8,["value"])]),_:1}),n(t(vt),{name:"upload",tab:"本地上传"},{default:i(()=>[n(t(sa),{"file-list":F.value,max:1,accept:"image/*","show-file-list":!1,onChange:se},{default:i(()=>[n(t(C),{size:"small",style:{width:"100%"}},{default:i(()=>[...a[45]||(a[45]=[z("选择图片",-1)])]),_:1})]),_:1},8,["file-list"]),$.value?(I(),L("div",dr,[ne("img",{src:$.value,alt:"预览",style:{"max-width":"100%","max-height":"150px","border-radius":"4px"}},null,8,ur)])):E("",!0)]),_:1})]),_:1},8,["value"]),n(t(ft),{justify:"end",style:{"margin-top":"12px"}},{default:i(()=>[n(t(C),{size:"small",onClick:te},{default:i(()=>[...a[46]||(a[46]=[z("取消",-1)])]),_:1}),n(t(C),{type:"primary",size:"small",onClick:le,disabled:!S.value&&!$.value},{default:i(()=>[...a[47]||(a[47]=[z("确定",-1)])]),_:1},8,["disabled"])]),_:1})])]),_:1},8,["show"])])):E("",!0),e.toolbarOptions.table?(I(),L("div",cr,[n(t(We),{trigger:"click",placement:"bottom",show:x.value,"onUpdate:show":a[19]||(a[19]=m=>x.value=m)},{trigger:i(()=>[n(t(V),{trigger:"hover"},{trigger:i(()=>{var m;return[n(t(C),{type:(m=t(l))!=null&&m.isActive("table")?"primary":"default",disabled:!t(l),quaternary:"",size:"small",onClick:a[18]||(a[18]=b=>x.value=!x.value)},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Kl))]),_:1})]),_:1},8,["type","disabled"])]}),default:i(()=>[a[48]||(a[48]=z(" 插入表格 ",-1))]),_:1})]),default:i(()=>[ne("div",pr,[a[49]||(a[49]=ne("div",{style:{"margin-bottom":"8px","font-size":"12px",color:"#666"}},"选择表格大小",-1)),ne("div",gr,[(I(),L(Ie,null,ht(10,m=>ne("div",{key:m,class:"g-richtext__table-grid-row"},[(I(),L(Ie,null,ht(10,b=>ne("div",{key:b,class:Ye(["g-richtext__table-grid-cell",{"g-richtext__table-grid-cell--selected":m<=R.value&&b<=A.value}]),onMouseenter:w=>{R.value=m,A.value=b},onClick:w=>de(m,b)},null,42,mr)),64))])),64))]),ne("div",fr,Be(R.value)+" × "+Be(A.value),1)])]),_:1},8,["show"]),(N=t(l))!=null&&N.isActive("table")?(I(),L(Ie,{key:0},[n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[20]||(a[20]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().addRowBefore().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(kt))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[50]||(a[50]=z(" 在上方插入行 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[21]||(a[21]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().addRowAfter().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(wt))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[51]||(a[51]=z(" 在下方插入行 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[22]||(a[22]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().deleteRow().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Ne))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[52]||(a[52]=z(" 删除行 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[23]||(a[23]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().addColumnBefore().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Re))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[53]||(a[53]=z(" 在左侧插入列 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[24]||(a[24]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().addColumnAfter().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Re))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[54]||(a[54]=z(" 在右侧插入列 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[25]||(a[25]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().deleteColumn().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Ne))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[55]||(a[55]=z(" 删除列 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[26]||(a[26]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().deleteTable().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(St))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[56]||(a[56]=z(" 删除表格 ",-1))]),_:1})],64)):E("",!0)])):E("",!0),e.toolbarOptions.table&&e.toolbarOptions.other?(I(),L("div",vr)):E("",!0),e.toolbarOptions.other?(I(),L(Ie,{key:15},[a[61]||(a[61]=ne("div",{class:"g-richtext__divider"},null,-1)),ne("div",hr,[n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[27]||(a[27]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().setHorizontalRule().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(Ne))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[57]||(a[57]=z(" 插入水平线 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[28]||(a[28]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().clearNodes().unsetAllMarks().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(St))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[58]||(a[58]=z(" 清除格式 ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[29]||(a[29]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().undo().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(kt))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[59]||(a[59]=z(" 撤销 (Ctrl+Z) ",-1))]),_:1}),n(t(V),{trigger:"hover"},{trigger:i(()=>[n(t(C),{disabled:!t(l),quaternary:"",size:"small",onClick:a[30]||(a[30]=m=>{var b;return(b=t(l))==null?void 0:b.chain().focus().redo().run()})},{icon:i(()=>[n(t(O),null,{default:i(()=>[n(t(wt))]),_:1})]),_:1},8,["disabled"])]),default:i(()=>[a[60]||(a[60]=z(" 重做 (Ctrl+Y) ",-1))]),_:1})])],64)):E("",!0)])):E("",!0),t(l)?(I(),El(t(ja),{key:1,editor:t(l),class:Ye(["g-richtext__editor",{"g-richtext__editor--readonly":r.readonly}])},null,8,["editor","class"])):E("",!0)],6)}}}),yr=Ft(br,[["__scopeId","data-v-aafb667f"]]);function xr(){const e="hub0081:alert-template",o=T(!1),s=T([]),r=T(),d=f=>{const h=f||"email";return h==="sms"?"告警短信 - {{title}}":h==="webhook"?"告警Webhook - {{title}}":h==="dingtalk"?"告警通知(钉钉) - {{title}}":h==="wechat_work"?"告警通知(企微) - {{title}}":h==="qq"?"告警通知(QQ) - {{title}}":"告警通知 - {{title}}"},l=f=>(f||"email")==="email"?["<!DOCTYPE html>","<html>","<head>",'  <meta charset="UTF-8">','  <meta name="viewport" content="width=device-width, initial-scale=1.0">',"</head>",'<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, PingFang SC, Microsoft YaHei, sans-serif; background-color: #f5f5f5;">','  <div style="max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden;">',"    <!-- 头部 -->",'    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 24px; color: #ffffff;">','      <h1 style="margin: 0; font-size: 24px; font-weight: 600;">🚨 告警通知</h1>','      <div style="margin-top: 8px; font-size: 14px; opacity: 0.9;">{{title}}</div>',"    </div>","    <!-- 时间信息 -->",'    <div style="padding: 16px 24px; background-color: #f8f9fa; border-bottom: 1px solid #e9ecef;">','      <div style="display: flex; align-items: center; color: #6c757d; font-size: 13px;">','        <span style="margin-right: 8px;">⏰</span>',"        <span>{{timestamp}}（{{timestamp_iso}}）</span>","      </div>","    </div>","    <!-- 内容区域 -->",'    <div style="padding: 24px;">','      <div style="margin-bottom: 20px;">','        <h3 style="margin: 0 0 12px; font-size: 16px; color: #212529; font-weight: 600;">📋 告警内容</h3>','        <div style="padding: 16px; background-color: #f8f9fa; border-left: 4px solid #667eea; border-radius: 4px; white-space: pre-wrap; line-height: 1.6; color: #495057;">{{content}}</div>',"      </div>","      <!-- 标签信息 -->",'      <div style="margin-bottom: 20px;">','        <h3 style="margin: 0 0 12px; font-size: 16px; color: #212529; font-weight: 600;">🏷️ 标签信息</h3>','        <div style="display: flex; flex-wrap: wrap; gap: 8px;">','          <span style="display: inline-block; padding: 4px 12px; background-color: #e7f3ff; color: #0066cc; border-radius: 12px; font-size: 12px;">标签：{{tags}}</span>','          <span style="display: inline-block; padding: 4px 12px; background-color: #fff3cd; color: #856404; border-radius: 12px; font-size: 12px;">严重级别：{{tag.severity}}</span>','          <span style="display: inline-block; padding: 4px 12px; background-color: #d1ecf1; color: #0c5460; border-radius: 12px; font-size: 12px;">来源：{{tag.source}}</span>',"        </div>","      </div>","      <!-- 表格字段 -->","      <div>",'        <h3 style="margin: 0 0 12px; font-size: 16px; color: #212529; font-weight: 600;">📊 详细信息</h3>','        <table cellspacing="0" cellpadding="12" border="0" style="width: 100%; border-collapse: collapse; border: 1px solid #e9ecef; border-radius: 4px; overflow: hidden;">','          <tr style="background-color: #f8f9fa;">','            <td style="font-weight: 600; color: #495057; border-bottom: 1px solid #e9ecef;">service_name</td>','            <td style="color: #212529; border-bottom: 1px solid #e9ecef;">{{table.service_name}}</td>',"          </tr>","          <tr>",'            <td style="font-weight: 600; color: #495057; border-bottom: 1px solid #e9ecef;">instance_id</td>','            <td style="color: #212529; border-bottom: 1px solid #e9ecef;">{{table.instance_id}}</td>',"          </tr>","        </table>","      </div>","    </div>","    <!-- 底部 -->",'    <div style="padding: 16px 24px; background-color: #f8f9fa; border-top: 1px solid #e9ecef; text-align: center; color: #6c757d; font-size: 12px;">',"      此邮件由系统自动发送，请勿回复","    </div>","  </div>","</body>","</html>"].join(`
`):["━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","🚨 告警通知","━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","","📌 告警标题","   {{title}}","","⏰ 告警时间","   {{timestamp}}","   ISO格式：{{timestamp_iso}}","","📋 告警内容","   {{content}}","","🏷️ 标签信息","   标签汇总：{{tags}}","   严重级别：{{tag.severity}}","   来源：{{tag.source}}","","📊 详细信息","   服务名称：{{table.service_name}}","   实例ID：{{table.instance_id}}","","💡 自定义字段","   {{extra.custom_field}}","","━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"].join(`
`),g={fields:[{field:"templateName",label:"模板名称",type:"input",placeholder:"请输入模板名称",span:6,clearable:!0},{field:"channelType",label:"渠道类型",type:"select",placeholder:"请选择渠道类型",span:6,clearable:!0,options:[{label:"全部",value:""},...Je.map(f=>({label:f.label,value:f.value}))]},{field:"displayFormat",label:"显示格式",type:"select",placeholder:"请选择显示格式",span:6,clearable:!0,options:[{label:"全部",value:""},...Ze.map(f=>({label:f.label,value:f.value}))]},{field:"activeFlag",label:"启用状态",type:"select",placeholder:"请选择启用状态",span:6,clearable:!0,options:[{label:"全部",value:""},...Xl.map(f=>({label:f.label,value:f.value}))]}],toolbarButtons:[{key:"add",label:"新增模板",icon:da,type:"primary",tooltip:"新增预警模板"},{key:"delete",label:"删除",icon:ua,type:"error",tooltip:"批量删除选中的模板"}],showSearchButton:!0,showResetButton:!0},v=f=>{if(!f)return"";const h=Je.find(G=>G.value===f);return(h==null?void 0:h.label)||String(f)},x=f=>{if(!f)return"";const h=Ze.find(G=>G.value===f);return(h==null?void 0:h.label)||String(f)},y={columns:[{field:"templateName",title:"模板名称",align:"center",showOverflow:"tooltip",width:180},{field:"channelType",title:"渠道类型",align:"center",width:120,slots:{default:"channelType"}},{field:"displayFormat",title:"显示格式",align:"center",width:120,slots:{default:"displayFormat"}},{field:"activeFlag",title:"启用状态",align:"center",width:100,slots:{default:"activeFlag"}},{field:"templateDesc",title:"模板描述",align:"center",showOverflow:"tooltip",width:240},{field:"addTime",title:"创建时间",align:"center",width:160,formatter:({row:f})=>bt(f.addTime)},{field:"addWho",title:"创建人",align:"center",width:120,showOverflow:"tooltip"},{field:"editTime",title:"修改时间",align:"center",width:160,formatter:({row:f})=>bt(f.editTime)},{field:"editWho",title:"修改人",align:"center",width:120,showOverflow:"tooltip"}],showCheckbox:!0,paginationConfig:{show:!0,pageInfo:r,align:"right"},menuConfig:{enabled:!0,showCopyRow:!0,customMenus:[{code:"view",name:"查看详情",prefixIcon:"vxe-icon-eye-fill"},{code:"edit",name:"编辑",prefixIcon:"vxe-icon-edit"},{code:"delete",name:"删除",prefixIcon:"vxe-icon-delete"}]}},S=[{key:"basic",label:"基本信息"},{key:"template",label:"模板内容"},{key:"other",label:"其他信息"}],M=[{field:"templateName",label:"模板名称",type:"input",span:12,primary:!0,tabKey:"basic",required:!0,rules:[{required:!0,message:"请输入模板名称",trigger:["blur","input"]},{max:64,message:"模板名称不能超过64个字符",trigger:["blur","input"]},{pattern:/^[a-zA-Z0-9_]+$/,message:"模板名称只能包含英文字母、数字和下划线",trigger:["blur","input"]}]},{field:"tenantId",label:"租户ID",type:"input",span:12,show:!1},{field:"channelType",label:"渠道类型",type:"select",span:12,tabKey:"basic",placeholder:"请选择渠道类型（可选，空为通用模板）",clearable:!0,defaultValue:"email",options:[{label:"通用(不限制)",value:""},...Je.map(f=>({label:f.label,value:f.value}))],props:{onUpdateValue:(f,h)=>{const G=h.titleTemplate===null||h.titleTemplate===void 0||h.titleTemplate==="",k=h.contentTemplate===null||h.contentTemplate===void 0||h.contentTemplate==="";G&&(h.titleTemplate=d(h.channelType)),k&&(h.contentTemplate=l(h.channelType))}}},{field:"displayFormat",label:"显示格式",type:"select",span:12,tabKey:"basic",required:!0,defaultValue:"table",options:Ze.map(f=>({label:f.label,value:f.value})),rules:[{required:!0,message:"请选择显示格式",trigger:["change","blur"]}]},{field:"activeFlag",label:"启用状态",type:"switch",span:12,tabKey:"basic",defaultValue:"Y",props:{checkedValue:"Y",uncheckedValue:"N"}},{field:"templateDesc",label:"模板描述",type:"input",span:24,tabKey:"basic",props:{type:"textarea",rows:2,maxlength:500,showCount:!0}},{field:"titleTemplate",label:"标题模板",type:"custom",span:24,tabKey:"template",defaultValue:d("email"),tips:"支持变量占位符，例如：{{title}} / {{tag.severity}}",render:f=>p(Xe,{modelValue:f.titleTemplate||"","onUpdate:modelValue":h=>f.titleTemplate=h,language:"plaintext",height:120,lineNumbers:!0,lineWrapping:!0,placeholder:"例如：告警通知 - {{title}}"})},{field:"contentTemplate",label:"内容模板",type:"custom",span:24,tabKey:"template",tips:"支持变量占位符，建议使用多行编辑",defaultValue:l("email"),render:f=>f.channelType==="email"?p(yr,{modelValue:f.contentTemplate||"","onUpdate:modelValue":h=>f.contentTemplate=h,placeholder:"请输入邮件内容（支持占位符，如 {{title}} / {{content}}）",minHeight:260,showToolbar:!0,readonly:!1}):p(Xe,{modelValue:f.contentTemplate||"","onUpdate:modelValue":h=>f.contentTemplate=h,language:"markdown",height:260,lineNumbers:!0,lineWrapping:!0,placeholder:"请输入内容模板（支持变量占位符）"})},{field:"__templateHelp",label:"占位符说明",type:"custom",span:24,tabKey:"template",tips:"与后端占位符替换规则一致：使用 {{...}} 引用字段；找不到字段时将保留原样",render:()=>{const f=[{key:"title",desc:"消息标题",example:"{{title}}"},{key:"content",desc:"消息内容",example:"{{content}}"},{key:"timestamp",desc:"时间戳（2006-01-02 15:04:05）",example:"{{timestamp}}"},{key:"timestamp_iso",desc:"时间戳（RFC3339/ISO）",example:"{{timestamp_iso}}"},{key:"timestamp_unix",desc:"Unix 秒时间戳",example:"{{timestamp_unix}}"},{key:"timestamp_unix_ms",desc:"Unix 毫秒时间戳",example:"{{timestamp_unix_ms}}"},{key:"tags",desc:"所有标签（key: value | ...）",example:"{{tags}}"},{key:"tag.<key>",desc:"指定标签值（如 severity）",example:"{{tag.severity}}"},{key:"extra.<key>",desc:"额外字段（来自 Extra，跳过 send_config）",example:"{{extra.custom_field}}"},{key:"table",desc:"所有表格字段（key: value | ...）",example:"{{table}}"},{key:"table.<key>",desc:"指定表格字段（如 service_name）",example:"{{table.service_name}}"}];return p("div",{style:"width: 100%;"},[p("div",{style:"display:flex; gap:8px; align-items:center; margin-bottom:8px;"},[p(Ee,{size:"small",type:"info"},{default:()=>"占位符格式：{{field}} / {{tag.key}} / {{extra.key}} / {{table.key}}"}),p(Ee,{size:"small",type:"warning"},{default:()=>"未匹配到字段：原样保留"})]),p(La,{bordered:!0,striped:!0,size:"small"},{default:()=>[p("thead",[p("tr",[p("th",{style:"width: 240px;"},"字段"),p("th","说明"),p("th",{style:"width: 220px;"},"示例")])]),p("tbody",f.map(h=>p("tr",[p("td",{style:'font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;'},h.key),p("td",h.desc),p("td",{style:'font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;'},h.example||"")])))]})])}},{field:"attachmentConfig",label:"附件配置(JSON)",type:"custom",span:24,tabKey:"template",tips:"邮件附件等配置（可选，JSON）",render:f=>p(Xe,{modelValue:f.attachmentConfig||"","onUpdate:modelValue":h=>f.attachmentConfig=h,language:"json",height:160,lineNumbers:!0,lineWrapping:!0,placeholder:"可选：附件配置 JSON"})},{field:"noteText",label:"备注信息",type:"input",span:24,tabKey:"other",props:{type:"textarea",rows:3,maxlength:500,showCount:!0}},{field:"addTime",label:"创建时间",type:"datetime",span:12,tabKey:"other",disabled:!0},{field:"addWho",label:"创建人",type:"input",span:12,tabKey:"other",disabled:!0},{field:"editTime",label:"修改时间",type:"datetime",span:12,tabKey:"other",disabled:!0},{field:"editWho",label:"修改人",type:"input",span:12,tabKey:"other",disabled:!0}];function F(f){s.value=f}function $(f){o.value=f}function R(){r.value=void 0}function A(f){r.value?Object.assign(r.value,f):r.value=f}return{moduleId:e,loading:o,templateList:s,pageInfo:r,searchFormConfig:g,gridConfig:y,formTabs:S,formFields:M,getChannelTypeLabel:v,getDisplayFormatLabel:x,setTemplateList:F,setLoading:$,resetPagination:R,updatePagination:A}}function kr(e){const o=ct(),s=xr(),r=async x=>{var y,S,M;try{s.setLoading(!0);let F=x;!F&&((y=e==null?void 0:e.value)!=null&&y.getFormData)&&(F=e.value.getFormData()||{});const R={...F?Object.fromEntries(Object.entries(F).filter(([,f])=>f!==""&&f!==null&&f!==void 0)):{},...fl((S=s.pageInfo.value)==null?void 0:S.pageIndex,(M=s.pageInfo.value)==null?void 0:M.pageSize)},A=await aa(R);if($e(A)){const f=yt(A,[])||[];s.setTemplateList(f);const h=Wl(A);h&&Object.keys(h).length>0?s.updatePagination(h):s.resetPagination()}else o.error(Ue(A,"加载模板列表失败")),s.setTemplateList([]),s.resetPagination()}catch(F){console.error("加载模板列表失败:",F),o.error(F.message||"加载模板列表失败"),s.setTemplateList([]),s.resetPagination()}finally{s.setLoading(!1)}};return{model:s,loadTemplateList:r,getTemplateDetail:async x=>{try{const y=await la(x);return $e(y)?yt(y):(o.error(Ue(y,"获取模板详情失败")),null)}catch(y){return console.error("获取模板详情失败:",y),o.error(y.message||"获取模板详情失败"),null}},addTemplate:async x=>{try{s.setLoading(!0);const y=await ta(x);return $e(y)?(o.success("新增模板成功"),await r(),!0):(o.error(Ue(y,"新增模板失败")),!1)}catch(y){return console.error("新增模板失败:",y),o.error(y.message||"新增模板失败"),!1}finally{s.setLoading(!1)}},editTemplate:async(x,y)=>{try{s.setLoading(!0);const S=await ea({...y,templateName:x});return $e(S)?(o.success("更新模板成功"),await r(),!0):(o.error(Ue(S,"更新模板失败")),!1)}catch(S){return console.error("更新模板失败:",S),o.error(S.message||"更新模板失败"),!1}finally{s.setLoading(!1)}},removeTemplate:async x=>{try{s.setLoading(!0);const y=await Ql(x);return $e(y)?(o.success("删除模板成功"),await r(),!0):(o.error(Ue(y,"删除模板失败")),!1)}catch(y){return console.error("删除模板失败:",y),o.error(y.message||"删除模板失败"),!1}finally{s.setLoading(!1)}}}}function wr(e,o){const s=ct(),r=Zl(),d=kr(o),l=T(!1),g=T("create"),v=T(null),x=async k=>{d.model.resetPagination(),await d.loadTemplateList(k)},y=async({currentPage:k,pageSize:U})=>{d.model.updatePagination({pageIndex:k,pageSize:U}),await d.loadTemplateList()},S=()=>{g.value="create",v.value=null,l.value=!0},M=async k=>{g.value="edit";const U=await d.getTemplateDetail(k.templateName);v.value=U||k,l.value=!0},F=async k=>{g.value="view";const U=await d.getTemplateDetail(k.templateName);v.value=U||k,l.value=!0},$=()=>{l.value=!1,v.value=null},R=k=>{const U={...k};return delete U.__templateHelp,U},A=async k=>{if(!k)return;if(g.value==="view"){$();return}const U=R(k);if(g.value==="create")await d.addTemplate(U)&&$();else if(g.value==="edit"){const X=String(k.templateName||"").trim();if(!X){s.warning("模板名称不能为空");return}await d.editTemplate(X,U)&&$()}},f=async k=>{await r.warning({title:"确认删除",content:`确定要删除模板"${k.templateName}"吗？此操作不可恢复。`,positiveText:"删除",negativeText:"取消"})&&await d.removeTemplate(k.templateName)};return{service:d,formDialogVisible:l,formDialogMode:g,currentEditTemplate:v,handleSearch:x,handlePageChange:y,handleToolbarClick:async k=>{var U,X;if(k==="add"){S();return}if(k==="delete"){const B=((X=(U=e==null?void 0:e.value)==null?void 0:U.getSelectedRows)==null?void 0:X.call(U))||[];if(!B||B.length===0){s.warning("请先选择要删除的模板");return}if(!await r.warning({title:"确认删除",content:`确定要删除选中的 ${B.length} 个模板吗？此操作不可恢复。`,positiveText:"删除",negativeText:"取消"}))return;for(const W of B)await d.removeTemplate(W.templateName);return}},handleMenuClick:async({menu:k,row:U})=>{const X=k==null?void 0:k.code;if(X==="view")return F(U);if(X==="edit")return M(U);if(X==="delete")return f(U)},openAddDialog:S,openEditDialog:M,openViewDialog:F,closeFormDialog:$,handleFormSubmit:A}}const zt="hub0081-alert-template",Cr=re({name:"AlertTemplateManagement",__name:"AlertTemplateManagement",setup(e){ct();const o=T(),s=T(),{service:r,formDialogVisible:d,formDialogMode:l,currentEditTemplate:g,handleFormSubmit:v,handleToolbarClick:x,handleMenuClick:y,handleSearch:S,handlePageChange:M}=wr(s,o),F=async $=>{const R=$.activeFlag==="Y"?"N":"Y";await r.editTemplate($.templateName,{...$,activeFlag:R})};return($,R)=>(I(),L("div",{class:"alert-template-management",id:zt},[n(t(bl),{direction:"vertical","no-resize":!0},{1:i(()=>[n(hl,xt({ref_key:"searchFormRef",ref:o,"module-id":t(r).model.moduleId},t(r).model.searchFormConfig,{onSearch:t(S),onToolbarClick:t(x)}),null,16,["module-id","onSearch","onToolbarClick"])]),2:i(()=>[n(t(vl),xt({ref_key:"gridRef",ref:s,"module-id":t(r).model.moduleId,data:t(r).model.templateList,loading:t(r).model.loading},t(r).model.gridConfig,{onPageChange:t(M),onMenuClick:R[0]||(R[0]=({code:A,row:f})=>t(y)({menu:{code:A},row:f}))}),{channelType:i(({row:A})=>[n(t(Ee),{size:"small",type:"info"},{default:i(()=>[z(Be(t(r).model.getChannelTypeLabel(A.channelType)||"通用"),1)]),_:2},1024)]),displayFormat:i(({row:A})=>[n(t(Ee),{size:"small",type:A.displayFormat==="table"?"warning":"default"},{default:i(()=>[z(Be(t(r).model.getDisplayFormatLabel(A.displayFormat)),1)]),_:2},1032,["type"])]),activeFlag:i(({row:A})=>[n(t(Jl),{value:A.activeFlag==="Y",size:"small","onUpdate:value":()=>F(A)},null,8,["value","onUpdate:value"])]),_:1},16,["module-id","data","loading","onPageChange"])]),_:1}),n(Yt,{visible:t(d),"onUpdate:visible":R[1]||(R[1]=A=>Yl(d)?d.value=A:null),mode:t(l),title:t(l)==="create"?"新增预警模板":t(l)==="edit"?"编辑预警模板":"查看预警模板",to:`#${zt}`,"form-fields":t(r).model.formFields,"form-tabs":t(r).model.formTabs,"initial-data":t(g)||void 0,"auto-close-on-confirm":!1,"confirm-loading":t(r).model.loading.value,onSubmit:t(v)},null,8,["visible","mode","title","to","form-fields","form-tabs","initial-data","confirm-loading","onSubmit"])]))}}),Jr=Ft(Cr,[["__scopeId","data-v-f90165c9"]]);export{Jr as default};
