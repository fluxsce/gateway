import{d as j,c as V,a as U,o as M,$ as ye,bP as ue,g as x,cO as be,m as l,n as e,w as n,aO as ge,bU as ke,q as H,V as me,p as _e,v as E,x as N,_ as Z,W as ce,a8 as P,aM as $,I as R,bR as X,b as de,cT as Ce,r as g,f as Te,a0 as F,a2 as D,h as ve,E as I,cU as we,t as K,J as B,a1 as J,dj as Ne,e as pe,R as Se,B as Pe,M as xe,A as q,C as v,H as De,co as Ue}from"./index-2fJuYE9W.js";import{C as Me}from"./CheckmarkCircleOutline-oCPbp87B.js";import{C as Ie}from"./CloseCircleOutline-BZvqUJeS.js";import{A as Ae}from"./AlertCircleOutline-B4NPmBYq.js";import{L as Be}from"./LinkOutline-DsJyhcnJ.js";import{a as ze,_ as Re}from"./Grid-Bcw7BDe2.js";import{N as Fe}from"./Popconfirm-CNoy-XXi.js";import{A as Oe}from"./AddOutline-CkIJ1zcN.js";import{T as He}from"./TrashOutline-CvI0Y2Yt.js";import{_ as L,b as Ye,a as he}from"./RadioGroup-BZdw_79m.js";import{_ as $e}from"./DataTable-j6x_03X-.js";import{f as qe}from"./index-C1SzIv5G.js";import{N as W}from"./InputNumber-CwEQyyC1.js";import{N as ie}from"./Switch-Bco2TRoA.js";import{R as Ke}from"./RefreshOutline-YIyYHhq5.js";const Ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Je=j({name:"CloudDownloadOutline",render:function(m,c){return M(),V("svg",Ee,c[0]||(c[0]=[U("path",{d:"M320 336h76c55 0 100-21.21 100-75.6s-53-73.47-96-75.6C391.11 99.74 329 48 256 48c-69 0-113.44 45.79-128 91.2c-60 5.7-112 35.88-112 98.4S70 336 136 336h56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),U("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M192 400.1l64 63.9l64-63.9"},null,-1),U("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 224v224.03"},null,-1)]))}}),O=ye("/gateway/hub0061"),Le=async i=>O.post("/queryServerNodes",i),Ve=async i=>O.post("/getServerNode",{serverNodeId:i}),je=async i=>O.post("/createServerNode",i),Ge=async i=>O.post("/updateServerNode",i),fe=async i=>O.post("/deleteServerNode",{serverNodeId:i}),Qe=async i=>O.post("/checkPortConflict",i),We=async i=>O.post("/getNodeStats",{tunnelServerId:i}),Xe=async i=>O.post("/enableServerNode",{serverNodeId:i}),Ze=async i=>O.post("/disableServerNode",{serverNodeId:i}),et=async i=>Promise.all(i.map(m=>fe(m))),tt={class:"server-node-stats"},at={class:"stat-content"},ot={class:"stat-icon"},lt={class:"stat-info"},st={class:"stat-value"},rt={class:"stat-label"},nt=j({__name:"ServerNodeStats",props:{statistics:{}},setup(i){const m=i,{t:c}=ue(),k=s=>{if(s===0)return"0 B";const f=1024,y=["B","KB","MB","GB","TB"],T=Math.floor(Math.log(s)/Math.log(f));return Math.round(s/Math.pow(f,T)*100)/100+" "+y[T]},t=x(()=>[{key:"total",label:c("hub0061.stats.totalNodes"),value:m.statistics.totalNodes,icon:be,type:"primary"},{key:"active",label:c("hub0061.stats.activeNodes"),value:m.statistics.activeNodes,icon:Me,type:"success"},{key:"inactive",label:c("hub0061.stats.inactiveNodes"),value:m.statistics.inactiveNodes,icon:Ie,type:"warning"},{key:"error",label:c("hub0061.stats.errorNodes"),value:m.statistics.errorNodes,icon:Ae,type:"error"},{key:"connections",label:c("hub0061.stats.totalConnections"),value:m.statistics.totalConnections,icon:Be,type:"info"},{key:"traffic",label:c("hub0061.stats.totalTraffic"),value:k(m.statistics.totalTraffic),icon:Je,type:"info"}]);return(s,f)=>(M(),V("div",tt,[l(e(Re),{cols:6,"x-gap":16,"y-gap":16,responsive:"screen"},{default:n(()=>[(M(!0),V(ge,null,ke(t.value,y=>(M(),H(e(ze),{key:y.key},{default:n(()=>[l(e(me),{bordered:!1,class:_e(["stat-card",`stat-card-${y.type}`])},{default:n(()=>[U("div",at,[U("div",ot,[l(e(E),{component:y.icon,size:32},null,8,["component"])]),U("div",lt,[U("div",st,N(y.value),1),U("div",rt,N(y.label),1)])])]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})]))}}),it=Z(nt,[["__scopeId","data-v-ac1eab0e"]]),ut=i=>({active:"success",inactive:"warning",error:"error"})[i]||"default",dt=i=>({tcp:"info",udp:"success",http:"warning",https:"error",stcp:"info",sudp:"success"})[i]||"default",ct=i=>{if(i===0)return"0 B";const m=1024,c=["B","KB","MB","GB","TB"],k=Math.floor(Math.log(i)/Math.log(m));return Math.round(i/Math.pow(m,k)*100)/100+" "+c[k]},pt=(i,m,c,k,t)=>[{type:"selection",fixed:"left"},{title:t("hub0061.table.nodeName"),key:"nodeName",width:180,fixed:"left",ellipsis:{tooltip:!0}},{title:t("hub0061.table.nodeType"),key:"nodeType",width:100,render:s=>P($,{type:s.nodeType==="static"?"info":"success",size:"small"},{default:()=>t(`hub0061.nodeType.${s.nodeType}`)})},{title:t("hub0061.table.proxyType"),key:"proxyType",width:100,render:s=>P($,{type:dt(s.proxyType),size:"small"},{default:()=>s.proxyType.toUpperCase()})},{title:t("hub0061.table.listenPort"),key:"listenPort",width:120,render:s=>`${s.listenAddress}:${s.listenPort}`},{title:t("hub0061.table.targetPort"),key:"targetPort",width:180,render:s=>`${s.targetAddress}:${s.targetPort}`},{title:t("hub0061.table.nodeStatus"),key:"nodeStatus",width:100,render:s=>P($,{type:ut(s.nodeStatus),size:"small"},{default:()=>t(`hub0061.nodeStatus.${s.nodeStatus}`)})},{title:t("hub0061.table.connectionCount"),key:"connectionCount",width:120,align:"right"},{title:t("hub0061.table.totalConnections"),key:"totalConnections",width:120,align:"right"},{title:t("hub0061.table.totalBytes"),key:"totalBytes",width:120,align:"right",render:s=>ct(s.totalBytes)},{title:t("hub0061.table.maxConnections"),key:"maxConnections",width:120,align:"right"},{title:t("hub0061.table.compression"),key:"compression",width:80,render:s=>P($,{type:s.compression==="Y"?"success":"default",size:"small"},{default:()=>s.compression==="Y"?t("common.yes"):t("common.no")})},{title:t("hub0061.table.encryption"),key:"encryption",width:80,render:s=>P($,{type:s.encryption==="Y"?"success":"default",size:"small"},{default:()=>s.encryption==="Y"?t("common.yes"):t("common.no")})},{title:t("hub0061.table.healthCheckType"),key:"healthCheckType",width:120,render:s=>s.healthCheckType?P($,{type:"info",size:"small"},{default:()=>s.healthCheckType.toUpperCase()}):"-"},{title:t("hub0061.table.lastHealthCheck"),key:"lastHealthCheck",width:180,render:s=>s.lastHealthCheck?ce(s.lastHealthCheck,"YYYY-MM-DD HH:mm:ss"):"-"},{title:t("hub0061.table.createdTime"),key:"createdTime",width:180,render:s=>s.addTime?ce(s.addTime,"YYYY-MM-DD HH:mm:ss"):"-"},{title:t("common.actions"),key:"actions",width:280,fixed:"right",render:s=>P(X,{size:"small"},{default:()=>[P(R,{size:"small",type:"primary",onClick:()=>i(s)},{default:()=>t("common.edit")}),s.nodeStatus==="active"?P(R,{size:"small",type:"warning",onClick:()=>k(s)},{default:()=>t("common.disable")}):P(R,{size:"small",type:"success",onClick:()=>c(s)},{default:()=>t("common.enable")}),P(Fe,{onPositiveClick:()=>m(s)},{default:()=>t("common.confirmDelete"),trigger:()=>P(R,{size:"small",type:"error"},{default:()=>t("common.delete")})})]})}],ht={class:"server-node-table"},mt={class:"table-toolbar"},vt=j({__name:"ServerNodeTable",emits:["create","edit"],setup(i,{expose:m,emit:c}){const k=c,{t}=ue(),s=de(),f=Ce(),y=g([]),T=g(!1),C=g([]),r=g(""),z=g(null),A=g(null),b=Te({page:1,pageSize:20,itemCount:0,showSizePicker:!0,pageSizes:[10,20,50,100],prefix:p=>t("common.totalItems",{count:p.itemCount})}),_=x(()=>[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"},{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"},{label:"STCP",value:"stcp"},{label:"SUDP",value:"sudp"}]),S=x(()=>[{label:t("hub0061.nodeStatus.active"),value:"active"},{label:t("hub0061.nodeStatus.inactive"),value:"inactive"},{label:t("hub0061.nodeStatus.error"),value:"error"}]),Y=x(()=>pt(oe,le,se,re,t)),ee=()=>({keyword:r.value||void 0,proxyType:z.value||void 0,nodeStatus:A.value||void 0,pageIndex:b.page||1,pageSize:b.pageSize||20}),w=async()=>{T.value=!0;try{const p=ee(),u=await Le(p);if(F(u)){y.value=J(u,[]);const h=Ne(u);b.itemCount=h.itemCount}else{const h=D(u,t("common.loadFailed"));s.error(h)}}catch(p){console.error("加载静态端口映射列表失败:",p),s.error(t("common.loadFailed"))}finally{T.value=!1}},G=async()=>{await w()},te=()=>{b.page=1,w()},Q=()=>{b.page=1,w()},ae=()=>{k("create")},oe=p=>{k("edit",p)},le=async p=>{try{const u=await fe(p.serverNodeId);if(F(u)){const h=D(u,t("common.deleteSuccess"));s.success(h),await w()}else{const h=D(u,t("common.deleteFailed"));s.error(h)}}catch(u){console.error("删除静态端口映射失败:",u),s.error(t("common.deleteFailed"))}},se=async p=>{try{const u=await Xe(p.serverNodeId);if(F(u)){const h=D(u,t("common.operationSuccess"));s.success(h),await w()}else{const h=D(u,t("common.operationFailed"));s.error(h)}}catch(u){console.error("启用静态端口映射失败:",u),s.error(t("common.operationFailed"))}},re=async p=>{try{const u=await Ze(p.serverNodeId);if(F(u)){const h=D(u,t("common.operationSuccess"));s.success(h),await w()}else{const h=D(u,t("common.operationFailed"));s.error(h)}}catch(u){console.error("禁用静态端口映射失败:",u),s.error(t("common.operationFailed"))}},ne=()=>{f.warning({title:t("common.confirmDelete"),content:t("common.confirmBatchDelete",{count:C.value.length}),positiveText:t("common.confirm"),negativeText:t("common.cancel"),onPositiveClick:async()=>{try{await et(C.value),s.success(t("common.deleteSuccess")),C.value=[],await w()}catch(p){console.error("批量删除失败:",p),s.error(t("common.deleteFailed"))}}})},d=p=>{C.value=p},o=p=>{b.page=p,w()},a=p=>{b.pageSize=p,b.page=1,w()};return m({initialize:G,loadData:w}),ve(()=>{G()}),(p,u)=>(M(),V("div",ht,[U("div",mt,[l(e(X),{size:16},{default:n(()=>[l(e(I),{value:r.value,"onUpdate:value":[u[0]||(u[0]=h=>r.value=h),te],placeholder:e(t)("common.searchPlaceholder"),clearable:"",style:{width:"300px"}},{prefix:n(()=>[l(e(E),{component:e(we)},null,8,["component"])]),_:1},8,["value","placeholder"]),l(e(L),{value:z.value,"onUpdate:value":[u[1]||(u[1]=h=>z.value=h),Q],placeholder:e(t)("hub0061.filter.proxyType"),options:_.value,clearable:"",style:{width:"150px"}},null,8,["value","placeholder","options"]),l(e(L),{value:A.value,"onUpdate:value":[u[2]||(u[2]=h=>A.value=h),Q],placeholder:e(t)("hub0061.filter.nodeStatus"),options:S.value,clearable:"",style:{width:"150px"}},null,8,["value","placeholder","options"])]),_:1}),l(e(X),{size:16},{default:n(()=>[l(e(R),{type:"primary",onClick:ae},{icon:n(()=>[l(e(E),{component:e(Oe)},null,8,["component"])]),default:n(()=>[B(" "+N(e(t)("common.create")),1)]),_:1}),C.value.length>0?(M(),H(e(R),{key:0,type:"error",onClick:ne},{icon:n(()=>[l(e(E),{component:e(He)},null,8,["component"])]),default:n(()=>[B(" "+N(e(t)("common.batchDelete"))+" ("+N(C.value.length)+") ",1)]),_:1})):K("",!0)]),_:1})]),l(e($e),{columns:Y.value,data:y.value,loading:T.value,pagination:b,"row-key":h=>h.serverNodeId,"checked-row-keys":C.value,"scroll-x":2400,"max-height":600,"onUpdate:checkedRowKeys":u[3]||(u[3]=h=>d(h)),"onUpdate:page":o,"onUpdate:pageSize":a},null,8,["columns","data","loading","pagination","row-key","checked-row-keys"])]))}}),ft=Z(vt,[["__scopeId","data-v-37596fa6"]]),yt=j({__name:"ServerNodeDialog",props:{show:{type:Boolean},editData:{default:null}},emits:["update:show","success"],setup(i,{emit:m}){const c=i,k=m,{t}=pe("hub0061"),{t:s}=pe("common"),f=de(),y=g(null),T=x({get:()=>c.show,set:d=>k("update:show",d)}),C=x(()=>!!c.editData),r=g({tunnelServerId:"",nodeName:"",nodeType:"static",proxyType:"tcp",listenAddress:"0.0.0.0",listenPort:0,targetAddress:"",targetPort:0,compression:"Y",encryption:"N",maxConnections:100,healthCheckInterval:60,activeFlag:"Y"}),z=g(!1),A=g(!1),b=g(!1),_=x({get:()=>r.value.compression==="Y",set:d=>r.value.compression=d?"Y":"N"}),S=x({get:()=>r.value.encryption==="Y",set:d=>r.value.encryption=d?"Y":"N"}),Y=x({get:()=>r.value.activeFlag==="Y",set:d=>r.value.activeFlag=d?"Y":"N"}),ee=x(()=>r.value.proxyType==="http"||r.value.proxyType==="https"),w=g([]),G=x(()=>[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"},{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"},{label:"STCP",value:"stcp"},{label:"SUDP",value:"sudp"}]),te=x(()=>[{label:"TCP",value:"tcp"},{label:"HTTP",value:"http"}]),Q={tunnelServerId:[{required:!0,message:t("hub0061.form.tunnelServerIdRequired"),trigger:"change"}],nodeName:[{required:!0,message:t("hub0061.form.nodeNameRequired"),trigger:"blur"},{min:2,max:100,message:t("hub0061.form.nodeNameLength"),trigger:"blur"}],nodeType:[{required:!0,message:t("hub0061.form.nodeTypeRequired"),trigger:"change"}],proxyType:[{required:!0,message:t("hub0061.form.proxyTypeRequired"),trigger:"change"}],listenAddress:[{required:!0,message:t("hub0061.form.listenAddressRequired"),trigger:"blur"}],listenPort:[{required:!0,type:"number",message:t("hub0061.form.listenPortRequired"),trigger:"blur"}],targetAddress:[{required:!0,message:t("hub0061.form.targetAddressRequired"),trigger:"blur"}],targetPort:[{required:!0,type:"number",message:t("hub0061.form.targetPortRequired"),trigger:"blur"}]},ae=async()=>{A.value=!0;try{const d=await qe();if(F(d)){const o=J(d,[]);w.value=o.map(a=>({label:a.serverName,value:a.tunnelServerId}))}else{const o=D(d,"加载隧道服务器列表失败");f.error(o)}}catch(d){console.error("加载隧道服务器列表失败:",d),f.error("加载隧道服务器列表失败")}finally{A.value=!1}},oe=async d=>{b.value=!0;try{const o=await Ve(d);if(F(o)){const a=J(o,{});r.value={tunnelServerId:a.tunnelServerId,nodeName:a.nodeName,nodeType:a.nodeType,proxyType:a.proxyType,listenAddress:a.listenAddress,listenPort:a.listenPort,targetAddress:a.targetAddress,targetPort:a.targetPort,subDomain:a.subDomain,httpUser:a.httpUser,httpPassword:a.httpPassword,hostHeaderRewrite:a.hostHeaderRewrite,compression:a.compression,encryption:a.encryption,secretKey:a.secretKey,healthCheckType:a.healthCheckType,healthCheckUrl:a.healthCheckUrl,healthCheckInterval:a.healthCheckInterval,maxConnections:a.maxConnections,activeFlag:a.activeFlag,noteText:a.noteText};try{a.customDomains&&(r.value.customDomains=typeof a.customDomains=="string"?JSON.parse(a.customDomains):a.customDomains),a.headers&&(r.value.headers=typeof a.headers=="string"?JSON.parse(a.headers):a.headers),a.locations&&(r.value.locations=typeof a.locations=="string"?JSON.parse(a.locations):a.locations)}catch(p){console.error("解析JSON字段失败:",p)}}else{const a=D(o,"加载节点详情失败");f.error(a)}}catch(o){console.error("加载节点详情失败:",o),f.error("加载节点详情失败")}finally{b.value=!1}},le=async()=>{var d;if(r.value.listenPort&&r.value.listenAddress&&r.value.proxyType)try{const o=await Qe({listenAddress:r.value.listenAddress,listenPort:r.value.listenPort,proxyType:r.value.proxyType,serverNodeId:C.value?(d=c.editData)==null?void 0:d.serverNodeId:void 0});if(F(o)){const a=J(o,{});a!=null&&a.hasConflict&&f.warning(t("hub0061.message.portConflict"))}else{const a=D(o,"检查端口冲突失败");console.error("检查端口冲突失败:",a)}}catch(o){console.error("检查端口冲突失败:",o)}},se=async()=>{var d;try{await((d=y.value)==null?void 0:d.validate()),z.value=!0;const o={...r.value};o.customDomains&&Array.isArray(o.customDomains)&&(o.customDomains=JSON.stringify(o.customDomains)),o.headers&&typeof o.headers=="object"&&(o.headers=JSON.stringify(o.headers)),o.locations&&Array.isArray(o.locations)&&(o.locations=JSON.stringify(o.locations));let a;if(C.value&&c.editData?a=await Ge({...o,serverNodeId:c.editData.serverNodeId}):a=await je(o),F(a)){const p=D(a,s(C.value?"updateSuccess":"createSuccess"));f.success(p),k("success"),T.value=!1}else{const p=D(a,s("operationFailed"));f.error(p)}}catch(o){if(o!=null&&o.errors)return;console.error("提交失败:",o),f.error(s("operationFailed"))}finally{z.value=!1}},re=()=>{T.value=!1},ne=()=>{var d;(d=y.value)==null||d.restoreValidation(),r.value={tunnelServerId:"",nodeName:"",nodeType:"static",proxyType:"tcp",listenAddress:"0.0.0.0",listenPort:0,targetAddress:"",targetPort:0,compression:"Y",encryption:"N",maxConnections:100,healthCheckInterval:60,activeFlag:"Y"}};return Se(()=>c.show,d=>{d&&(ae(),c.editData&&c.editData.serverNodeId&&oe(c.editData.serverNodeId))}),(d,o)=>(M(),H(e(Ue),{show:T.value,"onUpdate:show":o[21]||(o[21]=a=>T.value=a),"mask-closable":!1,preset:"card",title:C.value?e(t)("dialog.editTitle"):e(t)("dialog.createTitle"),style:{width:"800px"},onAfterLeave:ne},{footer:n(()=>[l(e(X),{justify:"end"},{default:n(()=>[l(e(R),{onClick:re},{default:n(()=>[B(N(e(s)("cancel")),1)]),_:1}),l(e(R),{type:"primary",loading:z.value,onClick:se},{default:n(()=>[B(N(e(s)("confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:n(()=>[l(e(De),{show:b.value},{default:n(()=>[l(e(Pe),{ref_key:"formRef",ref:y,model:r.value,rules:Q,"label-placement":"left","label-width":"140px","require-mark-placement":"right-hanging",disabled:b.value},{default:n(()=>[l(e(xe),{type:"line",animated:""},{default:n(()=>[l(e(q),{name:"basic",tab:e(t)("hub0061.dialog.tabs.basic")},{default:n(()=>[l(e(v),{label:e(t)("hub0061.form.tunnelServerId"),path:"tunnelServerId"},{default:n(()=>[l(e(L),{value:r.value.tunnelServerId,"onUpdate:value":o[0]||(o[0]=a=>r.value.tunnelServerId=a),placeholder:e(t)("hub0061.form.tunnelServerIdPlaceholder"),options:w.value,loading:A.value,filterable:""},null,8,["value","placeholder","options","loading"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.nodeName"),path:"nodeName"},{default:n(()=>[l(e(I),{value:r.value.nodeName,"onUpdate:value":o[1]||(o[1]=a=>r.value.nodeName=a),placeholder:e(t)("hub0061.form.nodeNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.nodeType"),path:"nodeType"},{default:n(()=>[l(e(Ye),{value:r.value.nodeType,"onUpdate:value":o[2]||(o[2]=a=>r.value.nodeType=a)},{default:n(()=>[l(e(he),{value:"static"},{default:n(()=>[B(N(e(t)("hub0061.nodeType.static")),1)]),_:1}),l(e(he),{value:"dynamic"},{default:n(()=>[B(N(e(t)("hub0061.nodeType.dynamic")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.proxyType"),path:"proxyType"},{default:n(()=>[l(e(L),{value:r.value.proxyType,"onUpdate:value":o[3]||(o[3]=a=>r.value.proxyType=a),placeholder:e(t)("hub0061.form.proxyTypePlaceholder"),options:G.value},null,8,["value","placeholder","options"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.listenAddress"),path:"listenAddress"},{default:n(()=>[l(e(I),{value:r.value.listenAddress,"onUpdate:value":o[4]||(o[4]=a=>r.value.listenAddress=a),placeholder:e(t)("hub0061.form.listenAddressPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.listenPort"),path:"listenPort"},{default:n(()=>[l(e(W),{value:r.value.listenPort,"onUpdate:value":o[5]||(o[5]=a=>r.value.listenPort=a),placeholder:e(t)("hub0061.form.listenPortPlaceholder"),min:1,max:65535,style:{width:"100%"},onBlur:le},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.targetAddress"),path:"targetAddress"},{default:n(()=>[l(e(I),{value:r.value.targetAddress,"onUpdate:value":o[6]||(o[6]=a=>r.value.targetAddress=a),placeholder:e(t)("hub0061.form.targetAddressPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.targetPort"),path:"targetPort"},{default:n(()=>[l(e(W),{value:r.value.targetPort,"onUpdate:value":o[7]||(o[7]=a=>r.value.targetPort=a),placeholder:e(t)("hub0061.form.targetPortPlaceholder"),min:1,max:65535,style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["tab"]),l(e(q),{name:"advanced",tab:e(t)("hub0061.dialog.tabs.advanced")},{default:n(()=>[l(e(v),{label:e(t)("hub0061.form.maxConnections"),path:"maxConnections"},{default:n(()=>[l(e(W),{value:r.value.maxConnections,"onUpdate:value":o[8]||(o[8]=a=>r.value.maxConnections=a),placeholder:e(t)("hub0061.form.maxConnectionsPlaceholder"),min:1,max:1e4,style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.compression"),path:"compression"},{default:n(()=>[l(e(ie),{value:_.value,"onUpdate:value":o[9]||(o[9]=a=>_.value=a)},null,8,["value"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.encryption"),path:"encryption"},{default:n(()=>[l(e(ie),{value:S.value,"onUpdate:value":o[10]||(o[10]=a=>S.value=a)},null,8,["value"])]),_:1},8,["label"]),S.value?(M(),H(e(v),{key:0,label:e(t)("hub0061.form.secretKey"),path:"secretKey"},{default:n(()=>[l(e(I),{value:r.value.secretKey,"onUpdate:value":o[11]||(o[11]=a=>r.value.secretKey=a),placeholder:e(t)("hub0061.form.secretKeyPlaceholder"),type:"password","show-password-on":"click"},null,8,["value","placeholder"])]),_:1},8,["label"])):K("",!0)]),_:1},8,["tab"]),l(e(q),{name:"health",tab:e(t)("hub0061.dialog.tabs.health")},{default:n(()=>[l(e(v),{label:e(t)("hub0061.form.healthCheckType"),path:"healthCheckType"},{default:n(()=>[l(e(L),{value:r.value.healthCheckType,"onUpdate:value":o[12]||(o[12]=a=>r.value.healthCheckType=a),placeholder:e(t)("hub0061.form.healthCheckTypePlaceholder"),options:te.value,clearable:""},null,8,["value","placeholder","options"])]),_:1},8,["label"]),r.value.healthCheckType==="http"?(M(),H(e(v),{key:0,label:e(t)("hub0061.form.healthCheckUrl"),path:"healthCheckUrl"},{default:n(()=>[l(e(I),{value:r.value.healthCheckUrl,"onUpdate:value":o[13]||(o[13]=a=>r.value.healthCheckUrl=a),placeholder:e(t)("hub0061.form.healthCheckUrlPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])):K("",!0),r.value.healthCheckType?(M(),H(e(v),{key:1,label:e(t)("hub0061.form.healthCheckInterval"),path:"healthCheckInterval"},{default:n(()=>[l(e(W),{value:r.value.healthCheckInterval,"onUpdate:value":o[14]||(o[14]=a=>r.value.healthCheckInterval=a),placeholder:e(t)("hub0061.form.healthCheckIntervalPlaceholder"),min:10,max:3600,style:{width:"100%"}},{suffix:n(()=>[B(N(e(s)("seconds")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])):K("",!0)]),_:1},8,["tab"]),ee.value?(M(),H(e(q),{key:0,name:"http",tab:e(t)("hub0061.dialog.tabs.http")},{default:n(()=>[l(e(v),{label:e(t)("hub0061.form.subDomain"),path:"subDomain"},{default:n(()=>[l(e(I),{value:r.value.subDomain,"onUpdate:value":o[15]||(o[15]=a=>r.value.subDomain=a),placeholder:e(t)("hub0061.form.subDomainPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.httpUser"),path:"httpUser"},{default:n(()=>[l(e(I),{value:r.value.httpUser,"onUpdate:value":o[16]||(o[16]=a=>r.value.httpUser=a),placeholder:e(t)("hub0061.form.httpUserPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.httpPassword"),path:"httpPassword"},{default:n(()=>[l(e(I),{value:r.value.httpPassword,"onUpdate:value":o[17]||(o[17]=a=>r.value.httpPassword=a),placeholder:e(t)("hub0061.form.httpPasswordPlaceholder"),type:"password","show-password-on":"click"},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.hostHeaderRewrite"),path:"hostHeaderRewrite"},{default:n(()=>[l(e(I),{value:r.value.hostHeaderRewrite,"onUpdate:value":o[18]||(o[18]=a=>r.value.hostHeaderRewrite=a),placeholder:e(t)("hub0061.form.hostHeaderRewritePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["tab"])):K("",!0),l(e(q),{name:"note",tab:e(t)("hub0061.dialog.tabs.note")},{default:n(()=>[l(e(v),{label:e(t)("hub0061.form.activeFlag"),path:"activeFlag"},{default:n(()=>[l(e(ie),{value:Y.value,"onUpdate:value":o[19]||(o[19]=a=>Y.value=a)},{checked:n(()=>[B(N(e(s)("active")),1)]),unchecked:n(()=>[B(N(e(s)("inactive")),1)]),_:1},8,["value"])]),_:1},8,["label"]),l(e(v),{label:e(t)("hub0061.form.noteText"),path:"noteText"},{default:n(()=>[l(e(I),{value:r.value.noteText,"onUpdate:value":o[20]||(o[20]=a=>r.value.noteText=a),type:"textarea",placeholder:e(t)("hub0061.form.noteTextPlaceholder"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["tab"])]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["show"])]),_:1},8,["show","title"]))}}),bt=Z(yt,[["__scopeId","data-v-86be89bd"]]),gt={class:"static-mapping-management"},kt={class:"stats-section"},_t={class:"main-content"},Ct={class:"table-header"},Tt=j({__name:"StaticMappingManagement",setup(i){const{t:m}=ue(),c=de(),k=g(null),t=g(!1),s=g({totalNodes:0,activeNodes:0,inactiveNodes:0,errorNodes:0,totalConnections:0,totalTraffic:0}),f=g(!1),y=g(null),T=async()=>{try{const _=await We();if(F(_)){const S=J(_,{totalNodes:0,activeNodes:0,inactiveNodes:0,errorNodes:0,totalConnections:0,totalTraffic:0});s.value=S}}catch(_){console.error("获取统计信息失败:",_)}},C=()=>{y.value=null,f.value=!0},r=_=>{y.value=_,f.value=!0},z=()=>{y.value=null,f.value=!1,b()},A=async()=>{var _;t.value=!0;try{await Promise.all([T(),(_=k.value)==null?void 0:_.initialize()]),c.success(m("common.refreshSuccess"))}catch(S){console.error("刷新数据失败:",S),c.error(m("common.refreshFailed"))}finally{t.value=!1}},b=async()=>{await A()};return ve(()=>{b()}),(_,S)=>(M(),V("div",gt,[U("div",kt,[l(it,{statistics:s.value},null,8,["statistics"])]),U("div",_t,[l(e(me),{bordered:!1,class:"content-card"},{default:n(()=>[U("div",Ct,[l(e(R),{onClick:A,loading:t.value},{icon:n(()=>[l(e(E),{component:e(Ke)},null,8,["component"])]),default:n(()=>[B(" "+N(e(m)("common.refresh")),1)]),_:1},8,["loading"])]),l(ft,{ref_key:"tableRef",ref:k,onCreate:C,onEdit:r},null,512)]),_:1})]),l(bt,{show:f.value,"onUpdate:show":S[0]||(S[0]=Y=>f.value=Y),"edit-data":y.value,onSuccess:z},null,8,["show","edit-data"])]))}}),Ht=Z(Tt,[["__scopeId","data-v-c15dd6fa"]]);export{Ht as default};
