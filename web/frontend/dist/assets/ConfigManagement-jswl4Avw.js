import{d as X,r as T,j as K,a7 as R,c as B,b as N,h as J,e as l,E as Ne,w as D,a4 as Te,o as v,g as L,aQ as $,bY as ae,C as Le,K as ie,t as xe,J as se,bV as Ve,D as Me,F as ne,ah as z,am as E,T as A,G as ce,_ as Z,av as Ue,f as fe,aO as Fe,i as me,aa as de,af as Oe,m as re,z as W,B as Y,M as te,q as He,dc as Pe,aY as De,aZ as Ie}from"./index-talhFt-3.js";import{N as oe,a as ee,b as Be,d as ze,G as ge,S as ye,c as Ae}from"./SearchForm-YJ2LWOI7.js";import{N as Ee}from"./GPagination.vue_vue_type_style_index_0_scoped_2c35df38_lang-Ds-H5BDS.js";import{G as ve}from"./GPane-MizfBz4X.js";import{a as _e,b as Ge,_ as $e,G as Ke}from"./GDataFormModal-CVDITwbR.js";import{N as Ye}from"./Select-B2cdGhy0.js";import{u as qe}from"./useNamespaceService-Ci56zPwP.js";/* empty css                                                                              */import{u as be}from"./useGDialog-DyYy8db0.js";import{G as je}from"./GModal-CCcCEJqk.js";import{E as Je}from"./EllipsisHorizontalOutline-CQvCckwd.js";import{N as Re}from"./InputGroup-C4T1Hgnm.js";import{A as he}from"./ArrowBackOutline-Jb9aqebj.js";import{G as Qe}from"./GCodeMirror-D3ww0dQz.js";import{A as We}from"./AddOutline-_WyjpAxi.js";import{C as Xe}from"./CreateOutline-5HZeJ_Zc.js";import{T as Ze}from"./TrashOutline-B0_nSqhO.js";import{N as le,a as et}from"./RadioGroup-Dny1k1zE.js";import{W as tt}from"./WarningOutline-DmMvjmvd.js";import"./index-Do6tdfLc.js";import"./RefreshOutline-CA3DFaJQ.js";import"./DownloadOutline-BSXu5v1r.js";import"./Upload-CvnZ1nba.js";import"./download-C2161hUv.js";import"./DocumentOutline-BjVf7Dk_.js";import"./useServiceCenterInstanceService-DxFF0nHi.js";import"./KeyOutline-CIJanbLW.js";import"./DynamicTags-6ZvqYpG4.js";import"./prop-NnGblK-3.js";import"./CheckmarkCircleOutline-DgcYcMd5.js";import"./AlertCircleOutline-KYOuJ1zE.js";import"./HourglassOutline-WUU1QmOO.js";import"./StopCircleOutline-Dq9VUHq4.js";import"./GDialog-CQwmJXZh.js";import"./CloseOutline-Dpm_uP78.js";import"./ContractOutline-BiyZGpf6.js";const at={class:"g-data-form"},lt={key:0,class:"g-data-form__footer"},nt=X({name:"GDataForm",__name:"GDataForm",props:{mode:{default:"create"},formFields:{default:()=>[]},formTabs:{default:()=>[]},initialData:{default:()=>({})},showFooter:{type:Boolean,default:!1},showSubmit:{type:Boolean,default:!1},submitText:{default:"保存"},submitLoading:{type:Boolean,default:!1}},emits:["submit","update:modelValue","reset"],setup(s,{expose:u,emit:g}){var H;const r=s,m=g,y=T(null),n=T({}),k=K(()=>{let e=[];if(r.formTabs&&r.formTabs.length>0)e=r.formTabs;else{const p=Array.from(new Set((r.formFields||[]).map(o=>o.tabKey).filter(o=>!!o)));p.length>0?e=p.map(o=>({key:o,label:o})):e=[{key:"default",label:"表单"}]}return e.filter(p=>typeof p.show=="function"?p.show(n.value):p.show!==!1)}),a=T(((H=k.value[0])==null?void 0:H.key)||"default");R(k,e=>{var p;e.length>0&&!e.some(o=>o.key===a.value)&&(a.value=((p=e[0])==null?void 0:p.key)||"default")},{immediate:!1});const w=e=>{const p=(o,t)=>o.filter(i=>{var C;return(i.tabKey||t||((C=k.value[0])==null?void 0:C.key)||"default")===e}).map(i=>{var I;if(i.type==="fieldset"&&i.children){const C=i.tabKey||t||((I=k.value[0])==null?void 0:I.key)||"default";return{...i,children:p(i.children,C)}}return i});return p(r.formFields)},d=(e,p,o)=>{const t=e.field;if(e.type==="fieldset"){e.children&&e.children.forEach(i=>{d(i,p,o)});return}if(Object.prototype.hasOwnProperty.call(o,t)&&o[t]!==void 0)p[t]=o[t];else if(Object.prototype.hasOwnProperty.call(e,"defaultValue"))p[t]=e.defaultValue;else switch(e.type){case"date":case"datetime":case"daterange":case"datetimerange":p[t]=null;break;case"number":p[t]=null;break;case"switch":p[t]=!1;break;case"file":p[t]=[];break;default:p[t]=p[t]??""}},f=()=>{var o;const e={},p=r.initialData?JSON.parse(JSON.stringify(r.initialData)):{};r.formFields.forEach(t=>{d(t,e,p)}),n.value=e,(o=y.value)==null||o.restoreValidation(),m("update:modelValue",n.value)},P=(e,p)=>{if(e.type==="fieldset"){e.children&&e.children.forEach(o=>{P(o,p)});return}if(e.rules)p[e.field]=e.rules;else if(e.required){const o=e.type==="select"||e.type==="date"||e.type==="datetime"||e.type==="daterange"||e.type==="datetimerange"||e.type==="switch";e.type==="number"?p[e.field]=[{required:!0,type:"number",message:`请输入${M(e)}`,trigger:"blur",validator:(t,i)=>{const I=M(e);if(i==null||i==="")return new Error(`请输入${I}`);const C=typeof i=="number"?i:Number(i);return isNaN(C)?new Error(`${I}必须是数字`):!0}}]:p[e.field]=[{required:!0,message:`请输入${M(e)}`,trigger:o?"change":"blur"}]}},V=K(()=>{const e={};return r.formFields.forEach(p=>{P(p,e)}),e}),M=e=>typeof e.label=="function"?e.label(n.value):e.label,c=e=>{const p=M(e);return e.tips?()=>A("span",{class:"g-form-label-with-tips"},[p,A("span",{class:"g-form-label-tips"},[(()=>{if(!e.tips)return null;let o;return typeof e.tips=="function"?o=e.tips(n.value):o=e.tips,typeof o=="string"?A(Be,{content:o}):o})()])]):()=>p},b=e=>{switch(e.type){case"select":return Ye;case"number":return ze;case"switch":return Ee;case"date":case"datetime":case"daterange":case"datetimerange":return $e;case"file":return Ge;case"textarea":return ce;case"input":default:return ce}},x=e=>{var o,t,i,I,C,h,_;const p={disabled:r.mode==="view"||r.mode==="edit"&&e.primary===!0?!0:e.disabled??!1,...e.props??{}};switch(e.type){case"textarea":return{placeholder:e.placeholder,type:"textarea",...p};case"select":return{placeholder:e.placeholder,options:e.options,clearable:e.clearable??!0,...p};case"number":return{placeholder:e.placeholder,...p};case"switch":return{...p};case"date":case"datetime":case"daterange":case"datetimerange":return{placeholder:e.placeholder,type:e.type,...p};case"file":return{...p,config:(o=e.props)==null?void 0:o.config,title:(t=e.props)==null?void 0:t.title,titleIcon:(i=e.props)==null?void 0:i.titleIcon,titleIconColor:(I=e.props)==null?void 0:I.titleIconColor,showDownload:((C=e.props)==null?void 0:C.showDownload)??!1,downloadText:(h=e.props)==null?void 0:h.downloadText,callbacks:(_=e.props)==null?void 0:_.callbacks};case"input":default:return{placeholder:e.placeholder,clearable:e.clearable??!0,...p}}},S=(e,p)=>{var o;n.value[e.field]=p,(o=e.props)!=null&&o.onUpdateValue&&typeof e.props.onUpdateValue=="function"&&e.props.onUpdateValue(p,n.value),m("update:modelValue",n.value)},O=async()=>{if(y.value)try{await y.value.validate()}catch{return}const e={...n.value};m("submit",e)};return R(()=>r.initialData,()=>{f()},{deep:!0,immediate:!0}),u({validate:async()=>{if(y.value)return await y.value.validate()},reset:()=>{f(),m("reset")},getFormData:()=>({...n.value}),setFormData:e=>{n.value={...e},m("update:modelValue",n.value)},formRef:y}),(e,p)=>(v(),B("div",at,[N(l(Ne),{ref_key:"formRef",ref:y,model:n.value,rules:V.value,"label-placement":"left","label-width":"auto",size:"small"},{default:D(()=>[k.value.length>1?(v(),L(l(Le),{key:0,value:a.value,"onUpdate:value":p[0]||(p[0]=o=>a.value=o),type:"line",size:"small",class:"g-data-form__tabs"},{default:D(()=>[(v(!0),B($,null,ae(k.value,o=>(v(),L(l(Me),{key:o.key,name:o.key,tab:o.label,style:{padding:"var(--n-pane-padding-top) var(--n-pane-padding-right) var(--n-pane-padding-bottom) var(--n-pane-padding-left) !important"}},{default:D(()=>[N(l(oe),{cols:24,"x-gap":16,"y-gap":8},{default:D(()=>[(v(!0),B($,null,ae(w(o.key),t=>(v(),B($,{key:t.field},[t.type==="fieldset"&&(typeof t.show=="function"?t.show(n.value):t.show!==!1)?(v(),L(l(ee),{key:0,span:24},{default:D(()=>{var i,I,C,h;return[N(l(_e),{title:M(t),"title-strong":((i=t.props)==null?void 0:i.titleStrong)??!1,"title-size":((I=t.props)==null?void 0:I.titleSize)??300,"border-style":(C=t.props)==null?void 0:C.borderStyle,selected:((h=t.props)==null?void 0:h.selected)??!1,disabled:t.disabled??!1},{default:D(()=>[N(l(oe),{cols:24,"x-gap":16,"y-gap":8},{default:D(()=>[(v(!0),B($,null,ae(t.children,_=>(v(),B($,{key:_.field},[(typeof _.show=="function"?_.show(n.value):_.show!==!1)?(v(),L(l(ee),{key:0,span:_.span??12},{default:D(()=>[N(l(ne),{path:_.field,style:{width:"100%"}},{label:D(()=>[(v(),L(z(c(_))))]),default:D(()=>[_.type==="custom"&&_.render?(v(),L(z(_.render(n.value)),{key:0})):_.type==="file"?(v(),L(z(b(_)),E({key:1,ref_for:!0},x(_),{"file-list":n.value[_.field],"onUpdate:fileList":j=>n.value[_.field]=j}),null,16,["file-list","onUpdate:fileList"])):(v(),L(z(b(_)),E({key:2,ref_for:!0},x(_),{value:n.value[_.field],"onUpdate:value":[j=>n.value[_.field]=j,j=>S(_,j)]}),null,16,["value","onUpdate:value"]))]),_:2},1032,["path"])]),_:2},1032,["span"])):J("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["title","title-strong","title-size","border-style","selected","disabled"])]}),_:2},1024)):(v(),B($,{key:1},[(typeof t.show=="function"?t.show(n.value):t.show!==!1)?(v(),L(l(ee),{key:0,span:t.span??12},{default:D(()=>[N(l(ne),{path:t.field,style:{width:"100%"}},{label:D(()=>[(v(),L(z(c(t))))]),default:D(()=>[t.type==="custom"&&t.render?(v(),L(z(t.render(n.value)),{key:0})):t.type==="file"?(v(),L(z(b(t)),E({key:1,ref_for:!0},x(t),{"file-list":n.value[t.field],"onUpdate:fileList":i=>n.value[t.field]=i}),null,16,["file-list","onUpdate:fileList"])):(v(),L(z(b(t)),E({key:2,ref_for:!0},x(t),{value:n.value[t.field],"onUpdate:value":[i=>n.value[t.field]=i,i=>S(t,i)]}),null,16,["value","onUpdate:value"]))]),_:2},1032,["path"])]),_:2},1032,["span"])):J("",!0)],64))],64))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])):(v(),L(l(oe),{key:1,cols:24,"x-gap":16,"y-gap":8},{default:D(()=>[(v(!0),B($,null,ae(r.formFields,o=>(v(),B($,{key:o.field},[o.type==="fieldset"&&(typeof o.show=="function"?o.show(n.value):o.show!==!1)?(v(),L(l(ee),{key:0,span:24},{default:D(()=>{var t,i,I,C;return[N(l(_e),{title:M(o),"title-strong":((t=o.props)==null?void 0:t.titleStrong)??!1,"title-size":((i=o.props)==null?void 0:i.titleSize)??"normal","border-style":(I=o.props)==null?void 0:I.borderStyle,selected:((C=o.props)==null?void 0:C.selected)??!1,disabled:o.disabled??!1},{default:D(()=>[N(l(oe),{cols:24,"x-gap":16,"y-gap":8},{default:D(()=>[(v(!0),B($,null,ae(o.children,h=>(v(),B($,{key:h.field},[(typeof h.show=="function"?h.show(n.value):h.show!==!1)?(v(),L(l(ee),{key:0,span:h.span??12},{default:D(()=>[N(l(ne),{path:h.field},{label:D(()=>[(v(),L(z(c(h))))]),default:D(()=>[h.type==="custom"&&h.render?(v(),L(z(h.render(n.value)),{key:0})):h.type==="file"?(v(),L(z(b(h)),E({key:1,ref_for:!0},x(h),{"file-list":n.value[h.field],"onUpdate:fileList":_=>n.value[h.field]=_}),null,16,["file-list","onUpdate:fileList"])):(v(),L(z(b(h)),E({key:2,ref_for:!0},x(h),{value:n.value[h.field],"onUpdate:value":[_=>n.value[h.field]=_,_=>S(h,_)]}),null,16,["value","onUpdate:value"]))]),_:2},1032,["path"])]),_:2},1032,["span"])):J("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["title","title-strong","title-size","border-style","selected","disabled"])]}),_:2},1024)):(v(),B($,{key:1},[(typeof o.show=="function"?o.show(n.value):o.show!==!1)?(v(),L(l(ee),{key:0,span:o.span??12},{default:D(()=>[N(l(ne),{path:o.field},{label:D(()=>[(v(),L(z(c(o))))]),default:D(()=>[o.type==="custom"&&o.render?(v(),L(z(o.render(n.value)),{key:0})):o.type==="file"?(v(),L(z(b(o)),E({key:1,ref_for:!0},x(o),{"file-list":n.value[o.field],"onUpdate:fileList":t=>n.value[o.field]=t}),null,16,["file-list","onUpdate:fileList"])):(v(),L(z(b(o)),E({key:2,ref_for:!0},x(o),{value:n.value[o.field],"onUpdate:value":[t=>n.value[o.field]=t,t=>S(o,t)]}),null,16,["value","onUpdate:value"]))]),_:2},1032,["path"])]),_:2},1032,["span"])):J("",!0)],64))],64))),128))]),_:1}))]),_:1},8,["model","rules"]),s.showFooter?(v(),B("div",lt,[Te(e.$slots,"footer",{formData:n.value,formRef:y.value,onSubmit:O},()=>[N(l(Ve),{justify:"end",size:8},{default:D(()=>[s.showSubmit?(v(),L(l(se),{key:0,type:"primary",size:"small",loading:s.submitLoading,onClick:O},{default:D(()=>[ie(xe(s.submitText),1)]),_:1},8,["loading"])):J("",!0)]),_:1})],!0)])):J("",!0)]))}}),Se=Z(nt,[["__scopeId","data-v-12d0587d"]]),ot=["id"],it=X({name:"NamespaceListModal",__name:"NamespaceListModal",props:{visible:{type:Boolean,default:!1},title:{default:""},width:{default:1200},to:{default:void 0},modelValue:{default:""}},emits:["update:visible","after-leave","select","update:modelValue"],setup(s,{emit:u}){const g=s,r=u,m=T(),y=T(),n=T(g.visible),k=qe(m),a=K(()=>({...k.model.searchFormConfig,toolbarButtons:[],showSearchButton:!0,showResetButton:!0})),w=R(()=>g.visible,c=>{n.value=c,c&&P()}),d=c=>{n.value=c,r("update:visible",c)},f=()=>{r("after-leave")},P=()=>{k.handleSearch()},V=()=>{k.handleReset()},M=({row:c})=>{c&&(r("update:modelValue",c.namespaceId),r("select",c),d(!1))};return Ue(()=>{w()}),(c,b)=>(v(),L(l(je),{visible:n.value,title:g.title||"选择命名空间",width:g.width||1200,to:g.to,"show-footer":!1,"onUpdate:visible":d,onAfterLeave:f},{default:D(()=>[fe("div",{class:"namespace-list-modal",id:l(k).model.moduleId},[N(l(ve),{direction:"vertical","no-resize":!0},{1:D(()=>[N(ye,E({ref_key:"searchFormRef",ref:m,"module-id":l(k).model.moduleId},a.value,{onSearch:P,onReset:V}),null,16,["module-id"])]),2:D(()=>[N(l(ge),E({ref_key:"gridRef",ref:y,"module-id":l(k).model.moduleId,data:l(k).model.namespaceList,loading:l(k).model.loading},l(k).model.gridConfig,{onPageChange:l(k).handlePageChange,onRowClick:M}),{activeFlag:D(({row:x})=>[N(l(Fe),{type:x.activeFlag==="Y"?"success":"default",size:"small"},{default:D(()=>[ie(xe(x.activeFlag==="Y"?"活动":"非活动"),1)]),_:2},1032,["type"])]),_:1},16,["module-id","data","loading","onPageChange"])]),_:1})],8,ot)]),_:1},8,["visible","title","width","to"]))}}),st=Z(it,[["__scopeId","data-v-2c998e02"]]),rt=X({name:"NamespaceNameSelector",__name:"NamespaceNameSelector",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","select"],setup(s,{emit:u}){const g=s,r=u,m=T(!1),y=T(g.modelValue);R(()=>g.modelValue,w=>{y.value=w}),R(y,w=>{r("update:modelValue",w)});const n=w=>{y.value=w},k=()=>{m.value=!0},a=w=>{w&&(y.value=w.namespaceId,r("select",w))};return(w,d)=>(v(),B($,null,[N(l(Re),null,{default:D(()=>[N(l(ce),{value:s.modelValue,placeholder:"请输入命名空间ID或点击选择",disabled:s.disabled,clearable:"",size:"small","onUpdate:value":n},null,8,["value","disabled"]),N(l(se),{type:"primary",size:"small",disabled:s.disabled,onClick:k},{icon:D(()=>[N(l(me),null,{default:D(()=>[N(l(Je))]),_:1})]),_:1},8,["disabled"])]),_:1}),N(st,{visible:m.value,"onUpdate:visible":d[0]||(d[0]=f=>m.value=f),"model-value":y.value,"onUpdate:modelValue":d[1]||(d[1]=f=>y.value=f),title:"选择命名空间",width:1200,onSelect:a},null,8,["visible","model-value"])],64))}}),pe=Z(rt,[["__scopeId","data-v-e79e1d99"]]);function ut(){const s="hub0043-history",u=T(!1),g=T([]);return{moduleId:s,loading:u,historyList:g,searchFormConfig:{fields:[{field:"namespaceId",label:"命名空间",type:"custom",span:6,required:!0,render:a=>A(pe,{modelValue:a.namespaceId||"","onUpdate:modelValue":w=>{a.namespaceId=w},onSelect:w=>{w&&(a.namespaceId=w.namespaceId)}})},{field:"groupName",label:"分组名称",type:"input",placeholder:"请输入分组名称，默认DEFAULT_GROUP",span:6,clearable:!0,required:!0},{field:"configDataId",label:"配置ID",type:"input",placeholder:"请输入配置ID",span:6,clearable:!0,required:!0},{field:"limit",label:"限制数量",type:"number",placeholder:"限制数量，默认50",span:6,defaultValue:50}],toolbarButtons:[{key:"back",label:"返回配置列表",icon:he,tooltip:"返回配置列表"}],showSearchButton:!0,showResetButton:!0},gridConfig:{columns:[{field:"configHistoryId",title:"历史ID",sortable:!0,align:"center",width:120},{field:"namespaceId",title:"命名空间",sortable:!0,align:"center",showOverflow:!0,width:150},{field:"groupName",title:"分组名称",sortable:!0,align:"center",showOverflow:!0,width:150},{field:"configDataId",title:"配置ID",sortable:!0,align:"center",showOverflow:!0,width:200},{field:"changeType",title:"变更类型",align:"center",width:100,cellRender:{name:"VxeRender",options:{render:({row:a})=>{const w={CREATE:{label:"创建",type:"success"},UPDATE:{label:"更新",type:"info"},DELETE:{label:"删除",type:"error"},ROLLBACK:{label:"回滚",type:"warning"}},d=a.changeType,f=w[d]||{label:d||"-",type:"default"};return A("n-tag",{type:f.type,size:"small"},{default:()=>f.label})}}}},{field:"oldVersion",title:"旧版本",align:"center",width:80},{field:"newVersion",title:"新版本",align:"center",width:80,formatter:({row:a})=>a.newVersion||a.configVersion||"-"},{field:"oldMd5Value",title:"旧MD5",align:"center",showOverflow:!0,width:120},{field:"newMd5Value",title:"新MD5",align:"center",showOverflow:!0,width:120},{field:"changeReason",title:"变更原因",align:"left",showOverflow:!0,width:200},{field:"changedBy",title:"变更人",align:"center",width:120},{field:"changedAt",title:"变更时间",align:"center",width:180,formatter:({cellValue:a})=>a?de(a,"YYYY-MM-DD HH:mm:ss"):a||"-"},{field:"addTime",title:"创建时间",align:"center",width:180,formatter:({cellValue:a})=>a?de(a,"YYYY-MM-DD HH:mm:ss"):a||"-"},{field:"addWho",title:"创建人",align:"center",width:120}],paginationConfig:{show:!1},menuConfig:{enabled:!0,showCopyRow:!0,showCopyCell:!0,customMenus:[{code:"view",name:"查看详情",prefixIcon:"vxe-icon-eye-fill"},{code:"rollback",name:"回滚",prefixIcon:"vxe-icon-undo"}]},height:"100%"},detailFormConfig:{tabs:[{key:"basic",label:"基本信息"},{key:"content",label:"配置内容"}],fields:[{field:"configHistoryId",label:"历史ID",type:"input",span:12,tabKey:"basic",disabled:!0},{field:"namespaceId",label:"命名空间ID",type:"input",span:12,tabKey:"basic",disabled:!0},{field:"groupName",label:"分组名称",type:"input",span:12,tabKey:"basic",disabled:!0},{field:"configDataId",label:"配置数据ID",type:"input",span:12,tabKey:"basic",disabled:!0},{field:"changeType",label:"变更类型",type:"input",span:12,tabKey:"basic",disabled:!0},{field:"oldVersion",label:"旧版本",type:"number",span:12,tabKey:"basic",disabled:!0},{field:"newVersion",label:"新版本",type:"number",span:12,tabKey:"basic",disabled:!0},{field:"oldMd5Value",label:"旧MD5值",type:"input",span:12,tabKey:"basic",disabled:!0},{field:"newMd5Value",label:"新MD5值",type:"input",span:12,tabKey:"basic",disabled:!0},{field:"changeReason",label:"变更原因",type:"textarea",span:24,tabKey:"basic",disabled:!0,props:{rows:3}},{field:"changedBy",label:"变更人",type:"input",span:12,tabKey:"basic",disabled:!0},{field:"changedAt",label:"变更时间",type:"datetime",span:12,tabKey:"basic",disabled:!0},{field:"addTime",label:"创建时间",type:"datetime",span:12,tabKey:"basic",disabled:!0},{field:"addWho",label:"创建人",type:"input",span:12,tabKey:"basic",disabled:!0},{field:"editTime",label:"最后修改时间",type:"datetime",span:12,tabKey:"basic",disabled:!0},{field:"editWho",label:"最后修改人",type:"input",span:12,tabKey:"basic",disabled:!0},{field:"oldContent",label:"旧配置内容",type:"textarea",span:24,tabKey:"content",disabled:!0,props:{rows:15}},{field:"newContent",label:"新配置内容",type:"textarea",span:24,tabKey:"content",disabled:!0,props:{rows:15}}]},setHistoryList:a=>{g.value=a},clearHistoryList:()=>{g.value=[]}}}const Q=Oe("/serviceCenter/hub0043");async function ct(s){return Q.post("/queryConfigs",s)}async function dt(s,u,g){return Q.post("/getConfig",{namespaceId:s,groupName:u,configDataId:g})}async function pt(s){return Q.post("/addConfig",s)}async function ft(s){return Q.post("/editConfig",s)}async function mt(s,u,g){return Q.post("/deleteConfig",{namespaceId:s,groupName:u,configDataId:g})}async function gt(s){return Q.post("/queryConfigHistory",{...s,limit:s.limit||50})}async function yt(s){return Q.post("/getHistoryById",{configHistoryId:s})}async function vt(s){return Q.post("/rollbackConfig",s)}function bt(s){const u=re(),g=ut(),{loading:r,historyList:m,setHistoryList:y}=g;return{model:g,loadHistory:async w=>{var d;r.value=!0;try{let f=w;if(!f&&((d=s==null?void 0:s.value)!=null&&d.getFormData)&&(f=s.value.getFormData()||{}),!(f!=null&&f.namespaceId)){u.warning("请先选择命名空间"),r.value=!1;return}if(!(f!=null&&f.groupName)){u.warning("请输入分组名称"),r.value=!1;return}if(!(f!=null&&f.configDataId)){u.warning("请输入配置ID"),r.value=!1;return}const P={namespaceId:f.namespaceId,groupName:f.groupName||"DEFAULT_GROUP",configDataId:f.configDataId,limit:f.limit||50},V=await gt(P);if(W(V)&&V.bizData){const M=JSON.parse(V.bizData);y(Array.isArray(M)?M:[])}else u.error(Y(V,"获取配置历史失败"))}catch{u.error("获取配置历史失败")}finally{r.value=!1}},getHistoryDetail:async w=>{r.value=!0;try{const d=await yt(w);return W(d)&&d.bizData?JSON.parse(d.bizData):(u.error(Y(d,"获取历史详情失败")),null)}catch{return u.error("获取历史详情失败"),null}finally{r.value=!1}},rollback:async w=>{r.value=!0;try{const d=await vt(w);return W(d)?(u.success("配置回滚成功"),!0):(u.error(Y(d,"配置回滚失败")),!1)}catch{return u.error("配置回滚失败"),!1}finally{r.value=!1}}}}function ht(s){re();const u=be(),g=bt(s),r=T("list"),m=T(null),y=T(null),n=T(!1),k=T(null),a=T(!1),w=async S=>{var q,U;const O=((U=(q=s==null?void 0:s.value)==null?void 0:q.getFormData)==null?void 0:U.call(q))||{};y.value={...O};const G=await g.getHistoryDetail(String(S.configHistoryId));G?(m.value=G,r.value="detail"):m.value=null},d=()=>{r.value="list",m.value=null};R(()=>r.value,S=>{S==="list"&&y.value&&te(()=>{te(()=>{var O;(O=s==null?void 0:s.value)!=null&&O.setFormData&&s.value.setFormData(y.value)})})});const f=S=>{k.value=S,n.value=!0},P=()=>{n.value=!1,k.value=null};return{service:g,currentView:r,currentHistoryDetail:m,rollbackDialogVisible:n,currentRollbackHistory:k,submitting:a,openDetailView:w,handleBackToList:d,openRollbackDialog:f,closeRollbackDialog:P,handleRollbackConfirm:async S=>{if(!(!k.value||!await u.warning({title:"确认回滚",subtitle:`确定要将配置回滚到版本 ${k.value.newVersion||k.value.configVersion} 吗？`,content:"此操作会创建新的配置版本",positiveText:"确定",negativeText:"取消",width:500}))){a.value=!0;try{await g.rollback(S)&&(P(),await g.loadHistory())}finally{a.value=!1}}},handleToolbarClick:S=>{},handleMenuClick:async S=>{if(!S.row)return;const O=S.row;switch(S.code){case"view":await w(O);break;case"rollback":f(O);break}},handleSearch:()=>{g.loadHistory()},handlePageChange:({currentPage:S,pageSize:O})=>{}}}const wt=X({name:"RollbackDialog",__name:"RollbackDialog",props:{visible:{type:Boolean,default:!1},history:{default:null},submitting:{type:Boolean,default:!1}},emits:["update:visible","confirm","cancel"],setup(s,{emit:u}){const g=s,r=u,m=K({get:()=>g.visible,set:d=>r("update:visible",d)}),y=K(()=>g.history),n=K(()=>{var d,f;return[{field:"version",label:"目标版本",type:"input",span:24,disabled:!0,defaultValue:String(((d=y.value)==null?void 0:d.newVersion)||((f=y.value)==null?void 0:f.configVersion)||"-")},{field:"changeReason",label:"变更原因",type:"textarea",placeholder:"请输入变更原因（可选）",span:24,props:{rows:3}}]}),k=K(()=>{var d,f;return{version:String(((d=y.value)==null?void 0:d.newVersion)||((f=y.value)==null?void 0:f.configVersion)||"-"),changeReason:""}}),a=d=>{if(!y.value)return;const f={configHistoryId:String(y.value.configHistoryId),changeReason:(d==null?void 0:d.changeReason)||""};r("confirm",f)},w=()=>{r("cancel"),m.value=!1};return(d,f)=>(v(),L(Ke,{visible:m.value,"onUpdate:visible":f[0]||(f[0]=P=>m.value=P),mode:"create",title:"配置回滚",width:500,"mask-closable":!1,"form-fields":n.value,"initial-data":k.value,"confirm-loading":s.submitting,"confirm-text":"确定",onSubmit:a,onCancel:w},null,8,["visible","form-fields","initial-data","confirm-loading"]))}}),Ct=Z(wt,[["__scopeId","data-v-16e589fc"]]),kt=["id"],Dt={key:1,class:"config-history-detail-view"},It={class:"config-history-detail-header"},_t=X({name:"ConfigHistoryPage",__name:"index",props:{initialQuery:{default:null}},emits:["back"],setup(s,{expose:u,emit:g}){const r=s,m=g,y=T(),n=T(),k=T(),a=ht(y),w=b=>{b==="back"?m("back"):a.handleToolbarClick(b)},d=K(()=>a.currentView.value),f=K({get:()=>a.rollbackDialogVisible.value,set:b=>{a.rollbackDialogVisible.value=b}}),P=K(()=>a.currentRollbackHistory.value),V=K(()=>a.submitting.value),M=K(()=>{const b=a.currentHistoryDetail.value;return b?Pe(b):null}),c=()=>{var b;r.initialQuery&&((b=y.value)!=null&&b.setFormData)&&(y.value.setFormData({namespaceId:r.initialQuery.namespaceId,groupName:r.initialQuery.groupName,configDataId:r.initialQuery.configDataId,limit:50}),a.handleSearch())};return R(()=>r.initialQuery,b=>{b&&c()},{immediate:!0}),He(()=>{r.initialQuery&&c()}),u({searchFormRef:y,gridRef:n,service:a.service}),(b,x)=>(v(),B("div",{class:"config-history-page",id:l(a).service.model.moduleId},[d.value==="list"?(v(),L(l(ve),{key:0,direction:"vertical","default-size":"80px"},{1:D(()=>[N(ye,E({ref_key:"searchFormRef",ref:y,"module-id":l(a).service.model.moduleId},l(a).service.model.searchFormConfig,{onSearch:l(a).handleSearch,onToolbarClick:w}),null,16,["module-id","onSearch"])]),2:D(()=>[N(l(ge),E({ref_key:"gridRef",ref:n,"module-id":l(a).service.model.moduleId,data:l(a).service.model.historyList,loading:l(a).service.model.loading},l(a).service.model.gridConfig,{onPageChange:l(a).handlePageChange,onMenuClick:l(a).handleMenuClick}),null,16,["module-id","data","loading","onPageChange","onMenuClick"])]),_:1})):d.value==="detail"?(v(),B("div",Dt,[fe("div",It,[N(l(se),{size:"small",onClick:l(a).handleBackToList},{icon:D(()=>[N(l(me),null,{default:D(()=>[N(l(he))]),_:1})]),default:D(()=>[x[1]||(x[1]=ie(" 返回列表 ",-1))]),_:1},8,["onClick"])]),M.value?(v(),L(l(Se),{key:0,ref_key:"detailFormRef",ref:k,mode:"view","form-fields":l(a).service.model.detailFormConfig.fields,"form-tabs":l(a).service.model.detailFormConfig.tabs,"initial-data":M.value},null,8,["form-fields","form-tabs","initial-data"])):J("",!0)])):J("",!0),N(Ct,{visible:f.value,"onUpdate:visible":x[0]||(x[0]=S=>f.value=S),history:P.value,submitting:V.value,onConfirm:l(a).handleRollbackConfirm,onCancel:l(a).closeRollbackDialog},null,8,["visible","history","submitting","onConfirm","onCancel"])],8,kt))}}),xt=Z(_t,[["__scopeId","data-v-acd5cafa"]]);function St(){const s="hub0043",u=T(!1),g=T([]),r=T(),m={fields:[{field:"namespaceId",label:"命名空间",type:"custom",span:6,required:!0,render:c=>A(pe,{modelValue:c.namespaceId||"","onUpdate:modelValue":b=>{c.namespaceId=b},onSelect:b=>{b&&(c.namespaceId=b.namespaceId)}})},{field:"groupName",label:"分组名称",type:"input",placeholder:"请输入分组名称，为空时查询全部",span:6,clearable:!0,defaultValue:""},{field:"configDataId",label:"配置ID",type:"input",placeholder:"请输入配置ID（模糊查询）",span:6,clearable:!0},{field:"contentType",label:"内容类型",type:"select",placeholder:"请选择内容类型",span:6,clearable:!0,options:[{label:"全部",value:""},{label:"文本",value:"text"},{label:"JSON",value:"json"},{label:"XML",value:"xml"},{label:"YAML",value:"yaml"},{label:"Properties",value:"properties"}]}],toolbarButtons:[{key:"add",label:"新建配置",icon:We,type:"primary",tooltip:"新建配置"},{key:"edit",label:"编辑",icon:Xe,tooltip:"编辑选中的配置"},{key:"delete",label:"删除",icon:Ze,type:"error",tooltip:"删除选中的配置"}],showSearchButton:!0,showResetButton:!0},y={fields:[{field:"namespaceId",label:"命名空间ID",type:"custom",span:12,required:!0,primary:!0,disabled:!0,render:c=>A(pe,{modelValue:c.namespaceId||"",disabled:!0,"onUpdate:modelValue":x=>{c.namespaceId=x},onSelect:x=>{x&&(c.namespaceId=x.namespaceId)}})},{field:"groupName",label:"分组名称",type:"input",placeholder:"DEFAULT_GROUP",span:12,defaultValue:"DEFAULT_GROUP",tips:"分组名称，默认为DEFAULT_GROUP"},{field:"configDataId",label:"配置数据ID",type:"input",placeholder:"请输入配置数据ID",span:12,primary:!0,required:!0,tips:"配置的唯一标识（主键）"},{field:"configDescription",label:"配置描述",type:"textarea",placeholder:"请输入配置描述",span:24,props:{rows:3}},{field:"changeReason",label:"变更原因",type:"textarea",placeholder:"请输入变更原因（可选）",span:24,props:{rows:2}},{field:"version",label:"版本号",type:"number",span:12,disabled:!0},{field:"md5Value",label:"MD5值",type:"input",span:12,disabled:!0},{field:"contentType",label:"内容类型",type:"custom",span:24,defaultValue:"text",render:c=>A(et,{value:c.contentType||"text","onUpdate:value":b=>{c.contentType=b}},{default:()=>[A(le,{label:"文本",value:"text"}),A(le,{label:"JSON",value:"json"}),A(le,{label:"XML",value:"xml"}),A(le,{label:"YAML",value:"yaml"}),A(le,{label:"Properties",value:"properties"})]})},{field:"configContent",label:"配置内容",type:"custom",span:24,required:!0,render:c=>{const x={text:"plaintext",json:"json",xml:"xml",yaml:"yaml",properties:"properties"}[c.contentType||"text"]||"plaintext";return A(Qe,{modelValue:c.configContent||"",language:x,"onUpdate:modelValue":S=>{c.configContent=S},height:"400px",placeholder:"请输入配置内容"})}}]},n={columns:[{field:"configDataId",title:"配置ID",sortable:!0,align:"center",showOverflow:!0,width:200},{field:"namespaceId",title:"命名空间",sortable:!0,align:"center",showOverflow:!0,width:150},{field:"groupName",title:"分组名称",sortable:!0,align:"center",showOverflow:!0,width:150},{field:"contentType",title:"内容类型",align:"center",showOverflow:!0,width:120,formatter:({cellValue:c})=>({text:"文本",json:"JSON",xml:"XML",yaml:"YAML",properties:"Properties"})[c]||c},{field:"configDescription",title:"描述",align:"left",showOverflow:!0,width:200},{field:"version",title:"版本",align:"center",width:80},{field:"md5Value",title:"MD5",align:"center",showOverflow:!0,width:120},{field:"addTime",title:"创建时间",align:"center",showOverflow:!0,width:160,formatter:({cellValue:c})=>c?de(c,"YYYY-MM-DD HH:mm:ss"):""},{field:"addWho",title:"创建人",align:"center",showOverflow:!0,width:120}],showCheckbox:!0,paginationConfig:{show:!0,pageInfo:r,align:"right"},menuConfig:{enabled:!0,showCopyRow:!0,showCopyCell:!0,customMenus:[{code:"view",name:"查看详情",prefixIcon:"vxe-icon-eye-fill"},{code:"edit",name:"编辑",prefixIcon:"vxe-icon-edit"},{code:"history",name:"历史版本",prefixIcon:"vxe-icon-time"},{code:"delete",name:"删除",prefixIcon:"vxe-icon-delete"}]},height:"100%"},k=()=>{r.value=void 0},a=c=>{r.value?Object.assign(r.value,c):r.value=c},w=c=>{g.value=c},d=()=>{g.value=[]},f=c=>{g.value.unshift(c)},P=(c,b,x,S)=>{const O=g.value.findIndex(G=>G.namespaceId===c&&G.groupName===b&&G.configDataId===x);O!==-1&&Object.assign(g.value[O],S)},V=(c,b,x)=>{const S=g.value.findIndex(O=>O.namespaceId===c&&O.groupName===b&&O.configDataId===x);S!==-1&&g.value.splice(S,1)};return{moduleId:s,loading:u,configList:g,pageInfo:r,searchFormConfig:m,configFormConfig:y,gridConfig:n,resetPagination:k,updatePagination:a,setConfigList:w,clearConfigList:d,addConfigToList:f,updateConfigInList:P,removeConfigFromList:V,removeConfigsFromList:c=>{c.forEach(b=>{V(b.namespaceId,b.groupName,b.configDataId)})}}}function Nt(s){const u=re(),g=be(),r=St(),{loading:m,configList:y,pageInfo:n,setConfigList:k,updatePagination:a,addConfigToList:w,updateConfigInList:d,removeConfigFromList:f,removeConfigsFromList:P}=r,V=async U=>{var F,H,e;m.value=!0;try{let p=U;if(!p&&((F=s==null?void 0:s.value)!=null&&F.getFormData)&&(p=s.value.getFormData()||{}),!(p!=null&&p.namespaceId)){u.warning("请先选择命名空间"),m.value=!1;return}const o=p?Object.fromEntries(Object.entries(p).filter(([,C])=>C!==""&&C!==null&&C!==void 0)):{},t=Ae((H=n.value)==null?void 0:H.pageIndex,(e=n.value)==null?void 0:e.pageSize),i={...o};t.pageIndex!==void 0&&(i.page=t.pageIndex),t.pageSize!==void 0&&(i.pageSize=t.pageSize);const I=await ct(i);if(I.oK){if(I.bizData){const C=JSON.parse(I.bizData),h=Array.isArray(C)?C:[];k(h)}if(I.pageQueryData){const C=JSON.parse(I.pageQueryData);a(C)}}else u.error(I.errMsg||"查询配置列表失败")}catch{u.error("加载配置列表失败")}finally{m.value=!1}};return{model:r,loadConfigs:V,handleSearch:async U=>{await V(U)},handleReset:async()=>{r.resetPagination(),await V()},handlePageChange:async({currentPage:U,pageSize:F})=>{a({pageIndex:U,pageSize:F}),await V()},handleRefresh:async()=>{await V()},addConfig:async U=>{m.value=!0;try{const F=await pt(U);if(W(F)){const H=Y(F,"配置创建成功");if(u.success(H),F.bizData){const e=JSON.parse(F.bizData);w(e)}else await V();return!0}else{const H=Y(F,"新增配置失败");return u.error(H),!1}}catch{return u.error("新增配置失败"),!1}finally{m.value=!1}},editConfig:async U=>{m.value=!0;try{const F=await ft(U);if(W(F)){const H=Y(F,"配置更新成功");if(u.success(H),F.bizData){const e=JSON.parse(F.bizData);d(e.namespaceId,e.groupName,e.configDataId,e)}return!0}else{const H=Y(F,"编辑配置失败");return u.error(H),!1}}catch{return u.error("编辑配置失败"),!1}finally{m.value=!1}},deleteConfig:async(U,F=!1)=>{if(!F&&!await g.warning({title:"确认删除",subtitle:"此操作不可恢复，请谨慎操作",content:`确定要删除配置吗？

配置ID: ${U.configDataId}
命名空间: ${U.namespaceId}
分组: ${U.groupName||"DEFAULT_GROUP"}`,icon:tt,headerStyle:"gradient",positiveText:"确定删除",negativeText:"取消",width:500}))return!1;m.value=!0;try{const H=await mt(U.namespaceId,U.groupName||"DEFAULT_GROUP",U.configDataId);if(W(H)){if(!F){const e=Y(H,"配置删除成功");u.success(e)}return f(U.namespaceId,U.groupName||"DEFAULT_GROUP",U.configDataId),!0}else{if(!F){const e=Y(H,"删除配置失败");u.error(e)}return!1}}catch{return u.error("删除配置失败"),!1}finally{m.value=!1}},getConfigDetail:async(U,F,H)=>{m.value=!0;try{const e=await dt(U,F,H);return W(e)&&e.bizData?JSON.parse(e.bizData):(u.error(Y(e,"获取配置详情失败")),null)}catch{return u.error("获取配置详情失败"),null}finally{m.value=!1}}}}function Tt(s,u,g,r){const m=re(),y=be(),n=Nt(u),k=r==null?void 0:r.useViewMode,a=r==null?void 0:r.onViewChange,w=r==null?void 0:r.onHistoryClick,d=T("list"),f=T(null),P=T(!1),V=T("create"),M=T(null),c=T(!1),b=()=>{var t,i;V.value="create",M.value=null;{const I=((i=(t=u==null?void 0:u.value)==null?void 0:t.getFormData)==null?void 0:i.call(t))||{};f.value={...I};const C=I.namespaceId;d.value="form",a==null||a("form"),C&&te(()=>{te(()=>{var h;if((h=g==null?void 0:g.value)!=null&&h.setFormData){const _=g.value.getFormData()||{};g.value.setFormData({..._,namespaceId:C})}})})}},x=async t=>{var i,I;try{const C=await n.getConfigDetail(t.namespaceId,t.groupName||"DEFAULT_GROUP",t.configDataId);if(!C){m.error("获取配置详情失败");return}if(V.value="edit",M.value=C,k){const h=((I=(i=u==null?void 0:u.value)==null?void 0:i.getFormData)==null?void 0:I.call(i))||{};f.value={...h},d.value="form",a==null||a("form")}}catch{m.error("获取配置详情失败")}},S=async t=>{var i,I;try{const C=await n.getConfigDetail(t.namespaceId,t.groupName||"DEFAULT_GROUP",t.configDataId);if(!C){m.error("获取配置详情失败");return}if(V.value="view",M.value=C,k){const h=((I=(i=u==null?void 0:u.value)==null?void 0:i.getFormData)==null?void 0:I.call(i))||{};f.value={...h},d.value="form",a==null||a("form")}}catch{m.error("获取配置详情失败")}},O=()=>{P.value=!1,M.value=null},G=async t=>{c.value=!0;try{let i=!1;return V.value==="create"?i=await n.addConfig({...t,namespaceId:t.namespaceId,configDataId:t.configDataId,configContent:t.configContent}):V.value==="edit"&&(i=await n.editConfig({...t,namespaceId:M.value.namespaceId,groupName:M.value.groupName||"DEFAULT_GROUP",configDataId:M.value.configDataId,configContent:t.configContent})),i&&k&&q(),i}finally{c.value=!1}},q=()=>{d.value="list",a==null||a("list"),M.value&&(M.value=null)};R(()=>d.value,t=>{t==="list"&&f.value&&te(()=>{var i;(i=u==null?void 0:u.value)!=null&&i.setFormData&&te(()=>{u.value.setFormData(f.value)})})},{immediate:!1});const U=()=>{var i,I;return(((I=(i=u==null?void 0:u.value)==null?void 0:i.getFormData)==null?void 0:I.call(i))||{}).namespaceId?!0:(m.warning("请先选择命名空间"),!1)},F=t=>{var i,I,C,h,_,j;if(U())switch(t){case"add":b();break;case"edit":const we=(I=(i=s==null?void 0:s.value)==null?void 0:i.getCurrentRecord)==null?void 0:I.call(i);if(we){x(we);break}const ue=((C=s==null?void 0:s.value)==null?void 0:C.getCheckboxRecords())||[];if(ue.length===0){m.warning("请先选择要编辑的配置");return}if(ue.length>1){m.warning("只能编辑一个配置");return}x(ue[0]);break;case"delete":{const Ce=(_=(h=s==null?void 0:s.value)==null?void 0:h.getCurrentRecord)==null?void 0:_.call(h);if(Ce){H([Ce]);break}const ke=((j=s==null?void 0:s.value)==null?void 0:j.getCheckboxRecords())||[];if(ke.length===0){m.warning("请先选择要删除的配置");return}H(ke);break}}},H=async t=>{const i=t.map(_=>_.configDataId).join(`
`);if(!await y.warning({title:"确认批量删除",subtitle:`将删除 ${t.length} 个配置`,content:`此操作不可恢复，请谨慎操作

配置ID列表:
${i}`,positiveText:"确定删除",negativeText:"取消",width:500}))return;let C=0,h=0;for(const _ of t)await n.deleteConfig(_,!0)?C++:h++;C>0&&h===0?(m.success(`成功删除 ${C} 个配置`),await n.handleRefresh()):C>0&&h>0?(m.warning(`成功删除 ${C} 个配置，${h} 个配置删除失败`),await n.handleRefresh()):h>0&&m.error(`删除失败，共 ${h} 个配置删除失败`)};return{service:n,currentView:d,formDialogVisible:P,formDialogMode:V,currentEditConfig:M,submitting:c,openAddDialog:b,openEditDialog:x,openViewDialog:S,closeFormDialog:O,handleSubmit:G,handleFormSubmit:async t=>{if(t){if(!t.namespaceId){m.warning("请先选择命名空间");return}await G(t)}},handleBackToList:q,handleToolbarClick:F,handleMenuClick:async t=>{if(!t.row||t.code!=="history"&&!U())return;const i=t.row;switch(t.code){case"view":await S(i);break;case"edit":await x(i);break;case"history":w==null||w(i);break;case"delete":await n.deleteConfig(i),await n.handleRefresh();break}},handleSearch:()=>{n.handleSearch()}}}const Lt=["id"],Vt={key:1,class:"config-form-view"},Mt={class:"config-form-header"},Ut=X({name:"ConfigManagement",__name:"index",props:{showHistoryButton:{type:Boolean,default:!0}},emits:["view-history"],setup(s,{expose:u,emit:g}){const r=s,m=g,y=T(),n=T(),k=T(),{service:a,currentView:w,formDialogMode:d,currentEditConfig:f,submitting:P,handleFormSubmit:V,handleToolbarClick:M,handleMenuClick:c,handleSearch:b,handleBackToList:x}=Tt(n,y,k,{useViewMode:!0,onViewChange:S=>{},onHistoryClick:S=>{r.showHistoryButton&&m("view-history",S)}});return u({refresh:a.handleRefresh,loadConfigs:a.loadConfigs}),(S,O)=>(v(),B("div",{class:"config-management",id:l(a).model.moduleId},[l(w)==="list"?(v(),L(l(ve),{key:0,direction:"vertical","default-size":"80px"},{1:D(()=>[N(ye,E({ref_key:"searchFormRef",ref:y,"module-id":l(a).model.moduleId},l(a).model.searchFormConfig,{onSearch:l(b),onToolbarClick:l(M)}),null,16,["module-id","onSearch","onToolbarClick"])]),2:D(()=>[N(l(ge),E({ref_key:"gridRef",ref:n,"module-id":l(a).model.moduleId,data:l(a).model.configList,loading:l(a).model.loading},l(a).model.gridConfig,{onPageChange:l(a).handlePageChange,onMenuClick:l(c)}),null,16,["module-id","data","loading","onPageChange","onMenuClick"])]),_:1})):l(w)==="form"?(v(),B("div",Vt,[fe("div",Mt,[N(l(se),{size:"small",onClick:l(x)},{icon:D(()=>[N(l(me),null,{default:D(()=>[N(l(he))]),_:1})]),default:D(()=>[O[0]||(O[0]=ie(" 返回列表 ",-1))]),_:1},8,["onClick"])]),N(l(Se),{ref_key:"formRef",ref:k,mode:l(d),"form-fields":l(a).model.configFormConfig.fields,"initial-data":l(f)||void 0,"show-footer":!0,"show-submit":l(d)!=="view","submit-text":l(d)==="create"?"发布":"保存","submit-loading":l(P),onSubmit:l(V)},null,8,["mode","form-fields","initial-data","show-submit","submit-text","submit-loading","onSubmit"])])):J("",!0)],8,Lt))}}),Ft=Z(Ut,[["__scopeId","data-v-f7ea282e"]]),Ot={class:"config-management-wrapper"},Ht=X({name:"ConfigManagement",__name:"ConfigManagement",setup(s){const u=T("config"),g=T(null),r=y=>{g.value={namespaceId:y.namespaceId,groupName:y.groupName||"DEFAULT_GROUP",configDataId:y.configDataId},u.value="history"},m=()=>{u.value="config",g.value=null};return(y,n)=>(v(),B("div",Ot,[De(N(Ft,{onViewHistory:r},null,512),[[Ie,u.value==="config"]]),De(N(xt,{"initial-query":g.value,onBack:m},null,8,["initial-query"]),[[Ie,u.value==="history"]])]))}}),ha=Z(Ht,[["__scopeId","data-v-4555cfd3"]]);export{ha as default};
