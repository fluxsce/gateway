import{C as St,R as bn}from"./RefreshOutline-Cc9mnX-A.js";import{A as kt,P as yn,T as wn,C as _t,a as Cn}from"./TrashOutline-m_TMMv8r.js";import{aH as Rt,aI as we,a9 as o,d as ne,aB as Fe,aJ as et,az as Q,ax as D,aK as lt,aL as xn,aM as Sn,aN as oe,a5 as je,aO as kn,aP as xe,aQ as _n,aR as We,aS as Re,aT as X,aU as Rn,r as Y,aV as Tn,O as Ge,aq as Tt,aW as $e,aX as De,g as j,aA as Ne,aE as tt,aY as Dn,aZ as qe,aa as Pn,a1 as Ie,a_ as zn,a$ as Ze,b0 as nt,b1 as In,b2 as Dt,b3 as Bn,h as Xe,b4 as Ke,b5 as Fn,b6 as Pt,b7 as zt,b8 as It,b9 as Bt,ba as ze,bb as J,bc as On,bd as rt,be as it,ay as be,bf as Ln,bg as Ye,bh as Ft,bi as Mn,bj as st,H as ve,bk as An,bl as Nn,bm as $n,bn as En,bo as Un,bp as Hn,bq as jn,br as Yn,bs as Vn,L as Wn,bt as ut,c as Pe,o as ke,a as I,aj as dt,v as Se,aw as qn,a7 as Ve,bu as Gn,m as t,w as n,am as Ot,I as z,x as Te,n as A,_ as ot,b as Lt,q as Zn,T as Mt,ar as Xn,B as Kn,J as At,A as Nt,W as $t,C as Jn,E as Qn,K as ct,t as eo,av as Je,ah as Et,ae as Ut,Y as to,f as no,$ as oo,X as ao,Z as Ee,a0 as Ce,bv as lo}from"./index-BWGkTP3E.js";import{f as Ht,_ as ro,a as io}from"./DataTable-Wmy4yEx3.js";import{_ as jt,a as Yt,b as so,c as uo}from"./Switch-DV7n8EG8.js";import{_ as Vt}from"./Alert-BCjH2kFw.js";import{_ as co}from"./DynamicTags-BRHRNNvN.js";import{S as fo,C as go,A as po,R as ho}from"./RateLimitConfigForm-BoG4EfNx.js";import"./FormItemGridItem-B0Vyz3vV.js";import"./ShieldCheckmarkOutline-p2P-FjJl.js";function mo(e,r,l,d){for(var u=-1,f=e==null?0:e.length;++u<f;)l=r(l,e[u],u,e);return l}function vo(e){return function(r){return e==null?void 0:e[r]}}var bo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},yo=vo(bo),wo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Co="\\u0300-\\u036f",xo="\\ufe20-\\ufe2f",So="\\u20d0-\\u20ff",ko=Co+xo+So,_o="["+ko+"]",Ro=RegExp(_o,"g");function To(e){return e=Rt(e),e&&e.replace(wo,yo).replace(Ro,"")}var Do=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Po(e){return e.match(Do)||[]}var zo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Io(e){return zo.test(e)}var Wt="\\ud800-\\udfff",Bo="\\u0300-\\u036f",Fo="\\ufe20-\\ufe2f",Oo="\\u20d0-\\u20ff",Lo=Bo+Fo+Oo,qt="\\u2700-\\u27bf",Gt="a-z\\xdf-\\xf6\\xf8-\\xff",Mo="\\xac\\xb1\\xd7\\xf7",Ao="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",No="\\u2000-\\u206f",$o=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zt="A-Z\\xc0-\\xd6\\xd8-\\xde",Eo="\\ufe0e\\ufe0f",Xt=Mo+Ao+No+$o,Kt="['’]",ft="["+Xt+"]",Uo="["+Lo+"]",Jt="\\d+",Ho="["+qt+"]",Qt="["+Gt+"]",en="[^"+Wt+Xt+Jt+qt+Gt+Zt+"]",jo="\\ud83c[\\udffb-\\udfff]",Yo="(?:"+Uo+"|"+jo+")",Vo="[^"+Wt+"]",tn="(?:\\ud83c[\\udde6-\\uddff]){2}",nn="[\\ud800-\\udbff][\\udc00-\\udfff]",Be="["+Zt+"]",Wo="\\u200d",gt="(?:"+Qt+"|"+en+")",qo="(?:"+Be+"|"+en+")",pt="(?:"+Kt+"(?:d|ll|m|re|s|t|ve))?",ht="(?:"+Kt+"(?:D|LL|M|RE|S|T|VE))?",on=Yo+"?",an="["+Eo+"]?",Go="(?:"+Wo+"(?:"+[Vo,tn,nn].join("|")+")"+an+on+")*",Zo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ko=an+on+Go,Jo="(?:"+[Ho,tn,nn].join("|")+")"+Ko,Qo=RegExp([Be+"?"+Qt+"+"+pt+"(?="+[ft,Be,"$"].join("|")+")",qo+"+"+ht+"(?="+[ft,Be+gt,"$"].join("|")+")",Be+"?"+gt+"+"+pt,Be+"+"+ht,Xo,Zo,Jt,Jo].join("|"),"g");function ea(e){return e.match(Qo)||[]}function ta(e,r,l){return e=Rt(e),r=r,r===void 0?Io(e)?ea(e):Po(e):e.match(r)||[]}var na="['’]",oa=RegExp(na,"g");function aa(e){return function(r){return mo(ta(To(r).replace(oa,"")),e,"")}}var la=aa(function(e,r,l){return e+(l?"-":"")+r.toLowerCase()});const ra=we("attach",()=>o("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},o("g",{fill:"currentColor","fill-rule":"nonzero"},o("path",{d:"M3.25735931,8.70710678 L7.85355339,4.1109127 C8.82986412,3.13460197 10.4127766,3.13460197 11.3890873,4.1109127 C12.365398,5.08722343 12.365398,6.67013588 11.3890873,7.64644661 L6.08578644,12.9497475 C5.69526215,13.3402718 5.06209717,13.3402718 4.67157288,12.9497475 C4.28104858,12.5592232 4.28104858,11.9260582 4.67157288,11.5355339 L9.97487373,6.23223305 C10.1701359,6.0369709 10.1701359,5.72038841 9.97487373,5.52512627 C9.77961159,5.32986412 9.4630291,5.32986412 9.26776695,5.52512627 L3.96446609,10.8284271 C3.18341751,11.6094757 3.18341751,12.8758057 3.96446609,13.6568542 C4.74551468,14.4379028 6.01184464,14.4379028 6.79289322,13.6568542 L12.0961941,8.35355339 C13.4630291,6.98671837 13.4630291,4.77064094 12.0961941,3.40380592 C10.7293591,2.0369709 8.51328163,2.0369709 7.14644661,3.40380592 L2.55025253,8 C2.35499039,8.19526215 2.35499039,8.51184464 2.55025253,8.70710678 C2.74551468,8.90236893 3.06209717,8.90236893 3.25735931,8.70710678 Z"}))))),ia=we("cancel",()=>o("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},o("g",{fill:"currentColor","fill-rule":"nonzero"},o("path",{d:"M2.58859116,2.7156945 L2.64644661,2.64644661 C2.82001296,2.47288026 3.08943736,2.45359511 3.2843055,2.58859116 L3.35355339,2.64644661 L8,7.293 L12.6464466,2.64644661 C12.8417088,2.45118446 13.1582912,2.45118446 13.3535534,2.64644661 C13.5488155,2.84170876 13.5488155,3.15829124 13.3535534,3.35355339 L8.707,8 L13.3535534,12.6464466 C13.5271197,12.820013 13.5464049,13.0894374 13.4114088,13.2843055 L13.3535534,13.3535534 C13.179987,13.5271197 12.9105626,13.5464049 12.7156945,13.4114088 L12.6464466,13.3535534 L8,8.707 L3.35355339,13.3535534 C3.15829124,13.5488155 2.84170876,13.5488155 2.64644661,13.3535534 C2.45118446,13.1582912 2.45118446,12.8417088 2.64644661,12.6464466 L7.293,8 L2.64644661,3.35355339 C2.47288026,3.17998704 2.45359511,2.91056264 2.58859116,2.7156945 L2.64644661,2.64644661 L2.58859116,2.7156945 Z"}))))),ln=we("download",()=>o("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},o("g",{fill:"currentColor","fill-rule":"nonzero"},o("path",{d:"M3.5,13 L12.5,13 C12.7761424,13 13,13.2238576 13,13.5 C13,13.7454599 12.8231248,13.9496084 12.5898756,13.9919443 L12.5,14 L3.5,14 C3.22385763,14 3,13.7761424 3,13.5 C3,13.2545401 3.17687516,13.0503916 3.41012437,13.0080557 L3.5,13 L12.5,13 L3.5,13 Z M7.91012437,1.00805567 L8,1 C8.24545989,1 8.44960837,1.17687516 8.49194433,1.41012437 L8.5,1.5 L8.5,10.292 L11.1819805,7.6109127 C11.3555469,7.43734635 11.6249713,7.4180612 11.8198394,7.55305725 L11.8890873,7.6109127 C12.0626536,7.78447906 12.0819388,8.05390346 11.9469427,8.2487716 L11.8890873,8.31801948 L8.35355339,11.8535534 C8.17998704,12.0271197 7.91056264,12.0464049 7.7156945,11.9114088 L7.64644661,11.8535534 L4.1109127,8.31801948 C3.91565056,8.12275734 3.91565056,7.80617485 4.1109127,7.6109127 C4.28447906,7.43734635 4.55390346,7.4180612 4.7487716,7.55305725 L4.81801948,7.6109127 L7.5,10.292 L7.5,1.5 C7.5,1.25454011 7.67687516,1.05039163 7.91012437,1.00805567 L8,1 L7.91012437,1.00805567 Z"}))))),sa=ne({name:"ResizeSmall",render(){return o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},o("g",{fill:"none"},o("path",{d:"M5.5 4A1.5 1.5 0 0 0 4 5.5v1a.5.5 0 0 1-1 0v-1A2.5 2.5 0 0 1 5.5 3h1a.5.5 0 0 1 0 1h-1zM16 5.5A1.5 1.5 0 0 0 14.5 4h-1a.5.5 0 0 1 0-1h1A2.5 2.5 0 0 1 17 5.5v1a.5.5 0 0 1-1 0v-1zm0 9a1.5 1.5 0 0 1-1.5 1.5h-1a.5.5 0 0 0 0 1h1a2.5 2.5 0 0 0 2.5-2.5v-1a.5.5 0 0 0-1 0v1zm-12 0A1.5 1.5 0 0 0 5.5 16h1.25a.5.5 0 0 1 0 1H5.5A2.5 2.5 0 0 1 3 14.5v-1.25a.5.5 0 0 1 1 0v1.25zM8.5 7A1.5 1.5 0 0 0 7 8.5v3A1.5 1.5 0 0 0 8.5 13h3a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 11.5 7h-3zM8 8.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3z",fill:"currentColor"})))}}),ua=we("retry",()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},o("path",{d:"M320,146s24.36-12-64-12A160,160,0,1,0,416,294",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-miterlimit: 10; stroke-width: 32px;"}),o("polyline",{points:"256 58 336 138 256 218",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),da=we("rotateClockwise",()=>o("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 12.7916 15.3658 15.2026 13 16.3265V14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5V17.5C12 17.7761 12.2239 18 12.5 18H15.5C15.7761 18 16 17.7761 16 17.5C16 17.2239 15.7761 17 15.5 17H13.8758C16.3346 15.6357 18 13.0128 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 10.2761 2.22386 10.5 2.5 10.5C2.77614 10.5 3 10.2761 3 10Z",fill:"currentColor"}),o("path",{d:"M10 12C11.1046 12 12 11.1046 12 10C12 8.89543 11.1046 8 10 8C8.89543 8 8 8.89543 8 10C8 11.1046 8.89543 12 10 12ZM10 11C9.44772 11 9 10.5523 9 10C9 9.44772 9.44772 9 10 9C10.5523 9 11 9.44772 11 10C11 10.5523 10.5523 11 10 11Z",fill:"currentColor"}))),ca=we("rotateClockwise",()=>o("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M17 10C17 6.13401 13.866 3 10 3C6.13401 3 3 6.13401 3 10C3 12.7916 4.63419 15.2026 7 16.3265V14.5C7 14.2239 7.22386 14 7.5 14C7.77614 14 8 14.2239 8 14.5V17.5C8 17.7761 7.77614 18 7.5 18H4.5C4.22386 18 4 17.7761 4 17.5C4 17.2239 4.22386 17 4.5 17H6.12422C3.66539 15.6357 2 13.0128 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 10.2761 17.7761 10.5 17.5 10.5C17.2239 10.5 17 10.2761 17 10Z",fill:"currentColor"}),o("path",{d:"M10 12C8.89543 12 8 11.1046 8 10C8 8.89543 8.89543 8 10 8C11.1046 8 12 8.89543 12 10C12 11.1046 11.1046 12 10 12ZM10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10C9 10.5523 9.44772 11 10 11Z",fill:"currentColor"}))),fa=we("trash",()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},o("path",{d:"M432,144,403.33,419.74A32,32,0,0,1,371.55,448H140.46a32,32,0,0,1-31.78-28.26L80,144",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),o("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),o("line",{x1:"312",y1:"240",x2:"200",y2:"352",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),o("line",{x1:"312",y1:"352",x2:"200",y2:"240",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),ga=we("zoomIn",()=>o("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M11.5 8.5C11.5 8.22386 11.2761 8 11 8H9V6C9 5.72386 8.77614 5.5 8.5 5.5C8.22386 5.5 8 5.72386 8 6V8H6C5.72386 8 5.5 8.22386 5.5 8.5C5.5 8.77614 5.72386 9 6 9H8V11C8 11.2761 8.22386 11.5 8.5 11.5C8.77614 11.5 9 11.2761 9 11V9H11C11.2761 9 11.5 8.77614 11.5 8.5Z",fill:"currentColor"}),o("path",{d:"M8.5 3C11.5376 3 14 5.46243 14 8.5C14 9.83879 13.5217 11.0659 12.7266 12.0196L16.8536 16.1464C17.0488 16.3417 17.0488 16.6583 16.8536 16.8536C16.68 17.0271 16.4106 17.0464 16.2157 16.9114L16.1464 16.8536L12.0196 12.7266C11.0659 13.5217 9.83879 14 8.5 14C5.46243 14 3 11.5376 3 8.5C3 5.46243 5.46243 3 8.5 3ZM8.5 4C6.01472 4 4 6.01472 4 8.5C4 10.9853 6.01472 13 8.5 13C10.9853 13 13 10.9853 13 8.5C13 6.01472 10.9853 4 8.5 4Z",fill:"currentColor"}))),pa=we("zoomOut",()=>o("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M11 8C11.2761 8 11.5 8.22386 11.5 8.5C11.5 8.77614 11.2761 9 11 9H6C5.72386 9 5.5 8.77614 5.5 8.5C5.5 8.22386 5.72386 8 6 8H11Z",fill:"currentColor"}),o("path",{d:"M14 8.5C14 5.46243 11.5376 3 8.5 3C5.46243 3 3 5.46243 3 8.5C3 11.5376 5.46243 14 8.5 14C9.83879 14 11.0659 13.5217 12.0196 12.7266L16.1464 16.8536L16.2157 16.9114C16.4106 17.0464 16.68 17.0271 16.8536 16.8536C17.0488 16.6583 17.0488 16.3417 16.8536 16.1464L12.7266 12.0196C13.5217 11.0659 14 9.83879 14 8.5ZM4 8.5C4 6.01472 6.01472 4 8.5 4C10.9853 4 13 6.01472 13 8.5C13 10.9853 10.9853 13 8.5 13C6.01472 13 4 10.9853 4 8.5Z",fill:"currentColor"})));function ha(){return o("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M6 5C5.75454 5 5.55039 5.17688 5.50806 5.41012L5.5 5.5V14.5C5.5 14.7761 5.72386 15 6 15C6.24546 15 6.44961 14.8231 6.49194 14.5899L6.5 14.5V5.5C6.5 5.22386 6.27614 5 6 5ZM13.8536 5.14645C13.68 4.97288 13.4106 4.9536 13.2157 5.08859L13.1464 5.14645L8.64645 9.64645C8.47288 9.82001 8.4536 10.0894 8.58859 10.2843L8.64645 10.3536L13.1464 14.8536C13.3417 15.0488 13.6583 15.0488 13.8536 14.8536C14.0271 14.68 14.0464 14.4106 13.9114 14.2157L13.8536 14.1464L9.70711 10L13.8536 5.85355C14.0488 5.65829 14.0488 5.34171 13.8536 5.14645Z",fill:"currentColor"}))}function ma(){return o("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M13.5 5C13.7455 5 13.9496 5.17688 13.9919 5.41012L14 5.5V14.5C14 14.7761 13.7761 15 13.5 15C13.2545 15 13.0504 14.8231 13.0081 14.5899L13 14.5V5.5C13 5.22386 13.2239 5 13.5 5ZM5.64645 5.14645C5.82001 4.97288 6.08944 4.9536 6.28431 5.08859L6.35355 5.14645L10.8536 9.64645C11.0271 9.82001 11.0464 10.0894 10.9114 10.2843L10.8536 10.3536L6.35355 14.8536C6.15829 15.0488 5.84171 15.0488 5.64645 14.8536C5.47288 14.68 5.4536 14.4106 5.58859 14.2157L5.64645 14.1464L9.79289 10L5.64645 5.85355C5.45118 5.65829 5.45118 5.34171 5.64645 5.14645Z",fill:"currentColor"}))}function va(){return o("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M4.089 4.216l.057-.07a.5.5 0 0 1 .638-.057l.07.057L10 9.293l5.146-5.147a.5.5 0 0 1 .638-.057l.07.057a.5.5 0 0 1 .057.638l-.057.07L10.707 10l5.147 5.146a.5.5 0 0 1 .057.638l-.057.07a.5.5 0 0 1-.638.057l-.07-.057L10 10.707l-5.146 5.147a.5.5 0 0 1-.638.057l-.07-.057a.5.5 0 0 1-.057-.638l.057-.07L9.293 10L4.146 4.854a.5.5 0 0 1-.057-.638l.057-.07l-.057.07z",fill:"currentColor"}))}const at=Object.assign(Object.assign({},Fe.props),{onPreviewPrev:Function,onPreviewNext:Function,showToolbar:{type:Boolean,default:!0},showToolbarTooltip:Boolean,renderToolbar:Function}),rn=et("n-image"),ba=Q([Q("body >",[D("image-container","position: fixed;")]),D("image-preview-container",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 `),D("image-preview-overlay",`
 z-index: -1;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 background: rgba(0, 0, 0, .3);
 `,[lt()]),D("image-preview-toolbar",`
 z-index: 1;
 position: absolute;
 left: 50%;
 transform: translateX(-50%);
 border-radius: var(--n-toolbar-border-radius);
 height: 48px;
 bottom: 40px;
 padding: 0 12px;
 background: var(--n-toolbar-color);
 box-shadow: var(--n-toolbar-box-shadow);
 color: var(--n-toolbar-icon-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 align-items: center;
 `,[D("base-icon",`
 padding: 0 8px;
 font-size: 28px;
 cursor: pointer;
 `),lt()]),D("image-preview-wrapper",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 pointer-events: none;
 `,[xn()]),D("image-preview",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: all;
 margin: auto;
 max-height: calc(100vh - 32px);
 max-width: calc(100vw - 32px);
 transition: transform .3s var(--n-bezier);
 `),D("image",`
 display: inline-flex;
 max-height: 100%;
 max-width: 100%;
 `,[Sn("preview-disabled",`
 cursor: pointer;
 `),Q("img",`
 border-radius: inherit;
 `)])]),Ue=32,sn=ne({name:"ImagePreview",props:Object.assign(Object.assign({},at),{onNext:Function,onPrev:Function,clsPrefix:{type:String,required:!0}}),setup(e){const r=Fe("Image","-image",ba,Rn,e,X(e,"clsPrefix"));let l=null;const d=Y(null),u=Y(null),f=Y(void 0),p=Y(!1),v=Y(!1),{localeRef:s}=Tn("Image");function c(){const{value:x}=u;if(!l||!x)return;const{style:L}=x,_=l.getBoundingClientRect(),q=_.left+_.width/2,G=_.top+_.height/2;L.transformOrigin=`${q}px ${G}px`}function g(x){var L,_;switch(x.key){case" ":x.preventDefault();break;case"ArrowLeft":(L=e.onPrev)===null||L===void 0||L.call(e);break;case"ArrowRight":(_=e.onNext)===null||_===void 0||_.call(e);break;case"Escape":ie();break}}Ge(p,x=>{x?qe("keydown",document,g):$e("keydown",document,g)}),Tt(()=>{$e("keydown",document,g)});let y=0,R=0,B=0,S=0,F=0,U=0,$=0,T=0,N=!1;function m(x){const{clientX:L,clientY:_}=x;B=L-y,S=_-R,zn(te)}function i(x){const{mouseUpClientX:L,mouseUpClientY:_,mouseDownClientX:q,mouseDownClientY:G}=x,de=q-L,fe=G-_,pe=`vertical${fe>0?"Top":"Bottom"}`,ye=`horizontal${de>0?"Left":"Right"}`;return{moveVerticalDirection:pe,moveHorizontalDirection:ye,deltaHorizontal:de,deltaVertical:fe}}function C(x){const{value:L}=d;if(!L)return{offsetX:0,offsetY:0};const _=L.getBoundingClientRect(),{moveVerticalDirection:q,moveHorizontalDirection:G,deltaHorizontal:de,deltaVertical:fe}=x||{};let pe=0,ye=0;return _.width<=window.innerWidth?pe=0:_.left>0?pe=(_.width-window.innerWidth)/2:_.right<window.innerWidth?pe=-(_.width-window.innerWidth)/2:G==="horizontalRight"?pe=Math.min((_.width-window.innerWidth)/2,F-(de??0)):pe=Math.max(-((_.width-window.innerWidth)/2),F-(de??0)),_.height<=window.innerHeight?ye=0:_.top>0?ye=(_.height-window.innerHeight)/2:_.bottom<window.innerHeight?ye=-(_.height-window.innerHeight)/2:q==="verticalBottom"?ye=Math.min((_.height-window.innerHeight)/2,U-(fe??0)):ye=Math.max(-((_.height-window.innerHeight)/2),U-(fe??0)),{offsetX:pe,offsetY:ye}}function w(x){$e("mousemove",document,m),$e("mouseup",document,w);const{clientX:L,clientY:_}=x;N=!1;const q=i({mouseUpClientX:L,mouseUpClientY:_,mouseDownClientX:$,mouseDownClientY:T}),G=C(q);B=G.offsetX,S=G.offsetY,te()}const P=De(rn,null);function k(x){var L,_;if((_=(L=P==null?void 0:P.previewedImgPropsRef.value)===null||L===void 0?void 0:L.onMousedown)===null||_===void 0||_.call(L,x),x.button!==0)return;const{clientX:q,clientY:G}=x;N=!0,y=q-B,R=G-S,F=B,U=S,$=q,T=G,te(),qe("mousemove",document,m),qe("mouseup",document,w)}const V=1.5;let E=0,H=1,K=0;function ae(x){var L,_;(_=(L=P==null?void 0:P.previewedImgPropsRef.value)===null||L===void 0?void 0:L.onDblclick)===null||_===void 0||_.call(L,x);const q=a();H=H===q?1:q,te()}function Z(){H=1,E=0}function W(){var x;Z(),K=0,(x=e.onPrev)===null||x===void 0||x.call(e)}function le(){var x;Z(),K=0,(x=e.onNext)===null||x===void 0||x.call(e)}function re(){K-=90,te()}function ge(){K+=90,te()}function h(){const{value:x}=d;if(!x)return 1;const{innerWidth:L,innerHeight:_}=window,q=Math.max(1,x.naturalHeight/(_-Ue)),G=Math.max(1,x.naturalWidth/(L-Ue));return Math.max(3,q*2,G*2)}function a(){const{value:x}=d;if(!x)return 1;const{innerWidth:L,innerHeight:_}=window,q=x.naturalHeight/(_-Ue),G=x.naturalWidth/(L-Ue);return q<1&&G<1?1:Math.max(q,G)}function he(){const x=h();H<x&&(E+=1,H=Math.min(x,Math.pow(V,E)),te())}function _e(){if(H>.5){const x=H;E-=1,H=Math.max(.5,Math.pow(V,E));const L=x-H;te(!1);const _=C();H+=L,te(!1),H-=L,B=_.offsetX,S=_.offsetY,te()}}function ee(){const x=f.value;x&&Ht(x,void 0)}function te(x=!0){var L;const{value:_}=d;if(!_)return;const{style:q}=_,G=Pn((L=P==null?void 0:P.previewedImgPropsRef.value)===null||L===void 0?void 0:L.style);let de="";if(typeof G=="string")de=`${G};`;else for(const pe in G)de+=`${la(pe)}: ${G[pe]};`;const fe=`transform-origin: center; transform: translateX(${B}px) translateY(${S}px) rotate(${K}deg) scale(${H});`;N?q.cssText=`${de}cursor: grabbing; transition: none;${fe}`:q.cssText=`${de}cursor: grab;${fe}${x?"":"transition: none;"}`,x||_.offsetHeight}function ie(){p.value=!p.value,v.value=!0}function M(){H=a(),E=Math.ceil(Math.log(H)/Math.log(V)),B=0,S=0,te()}const O={setPreviewSrc:x=>{f.value=x},setThumbnailEl:x=>{l=x},toggleShow:ie};function se(x,L){if(e.showToolbarTooltip){const{value:_}=r;return o(Ie,{to:!1,theme:_.peers.Tooltip,themeOverrides:_.peerOverrides.Tooltip,keepAliveOnHover:!1},{default:()=>s.value[L],trigger:()=>x})}else return x}const ce=j(()=>{const{common:{cubicBezierEaseInOut:x},self:{toolbarIconColor:L,toolbarBorderRadius:_,toolbarBoxShadow:q,toolbarColor:G}}=r.value;return{"--n-bezier":x,"--n-toolbar-icon-color":L,"--n-toolbar-color":G,"--n-toolbar-border-radius":_,"--n-toolbar-box-shadow":q}}),{inlineThemeDisabled:ue}=Ne(),me=ue?tt("image-preview",void 0,ce,e):void 0;return Object.assign({previewRef:d,previewWrapperRef:u,previewSrc:f,show:p,appear:Dn(),displayed:v,previewedImgProps:P==null?void 0:P.previewedImgPropsRef,handleWheel(x){x.preventDefault()},handlePreviewMousedown:k,handlePreviewDblclick:ae,syncTransformOrigin:c,handleAfterLeave:()=>{Z(),K=0,v.value=!1},handleDragStart:x=>{var L,_;(_=(L=P==null?void 0:P.previewedImgPropsRef.value)===null||L===void 0?void 0:L.onDragstart)===null||_===void 0||_.call(L,x),x.preventDefault()},zoomIn:he,zoomOut:_e,handleDownloadClick:ee,rotateCounterclockwise:re,rotateClockwise:ge,handleSwitchPrev:W,handleSwitchNext:le,withTooltip:se,resizeToOrignalImageSize:M,cssVars:ue?void 0:ce,themeClass:me==null?void 0:me.themeClass,onRender:me==null?void 0:me.onRender},O)},render(){var e,r;const{clsPrefix:l,renderToolbar:d,withTooltip:u}=this,f=u(o(oe,{clsPrefix:l,onClick:this.handleSwitchPrev},{default:ha}),"tipPrevious"),p=u(o(oe,{clsPrefix:l,onClick:this.handleSwitchNext},{default:ma}),"tipNext"),v=u(o(oe,{clsPrefix:l,onClick:this.rotateCounterclockwise},{default:()=>o(ca,null)}),"tipCounterclockwise"),s=u(o(oe,{clsPrefix:l,onClick:this.rotateClockwise},{default:()=>o(da,null)}),"tipClockwise"),c=u(o(oe,{clsPrefix:l,onClick:this.resizeToOrignalImageSize},{default:()=>o(sa,null)}),"tipOriginalSize"),g=u(o(oe,{clsPrefix:l,onClick:this.zoomOut},{default:()=>o(pa,null)}),"tipZoomOut"),y=u(o(oe,{clsPrefix:l,onClick:this.handleDownloadClick},{default:()=>o(ln,null)}),"tipDownload"),R=u(o(oe,{clsPrefix:l,onClick:this.toggleShow},{default:va}),"tipClose"),B=u(o(oe,{clsPrefix:l,onClick:this.zoomIn},{default:()=>o(ga,null)}),"tipZoomIn");return o(je,null,(r=(e=this.$slots).default)===null||r===void 0?void 0:r.call(e),o(kn,{show:this.show},{default:()=>{var S;return this.show||this.displayed?((S=this.onRender)===null||S===void 0||S.call(this),xe(o("div",{class:[`${l}-image-preview-container`,this.themeClass],style:this.cssVars,onWheel:this.handleWheel},o(We,{name:"fade-in-transition",appear:this.appear},{default:()=>this.show?o("div",{class:`${l}-image-preview-overlay`,onClick:this.toggleShow}):null}),this.showToolbar?o(We,{name:"fade-in-transition",appear:this.appear},{default:()=>this.show?o("div",{class:`${l}-image-preview-toolbar`},d?d({nodes:{prev:f,next:p,rotateCounterclockwise:v,rotateClockwise:s,resizeToOriginalSize:c,zoomOut:g,zoomIn:B,download:y,close:R}}):o(je,null,this.onPrev?o(je,null,f,p):null,v,s,c,g,B,y,R)):null}):null,o(We,{name:"fade-in-scale-up-transition",onAfterLeave:this.handleAfterLeave,appear:this.appear,onEnter:this.syncTransformOrigin,onBeforeLeave:this.syncTransformOrigin},{default:()=>{const{previewedImgProps:F={}}=this;return xe(o("div",{class:`${l}-image-preview-wrapper`,ref:"previewWrapperRef"},o("img",Object.assign({},F,{draggable:!1,onMousedown:this.handlePreviewMousedown,onDblclick:this.handlePreviewDblclick,class:[`${l}-image-preview`,F.class],key:this.previewSrc,src:this.previewSrc,ref:"previewRef",onDragstart:this.handleDragStart}))),[[Re,this.show]])}})),[[_n,{enabled:this.show}]])):null}}))}}),un=et("n-image-group"),ya=at,wa=ne({name:"ImageGroup",props:ya,setup(e){let r;const{mergedClsPrefixRef:l}=Ne(e),d=`c${Ze()}`,u=In(),f=Y(null),p=s=>{var c;r=s,(c=f.value)===null||c===void 0||c.setPreviewSrc(s)};function v(s){var c,g;if(!(u!=null&&u.proxy))return;const R=u.proxy.$el.parentElement.querySelectorAll(`[data-group-id=${d}]:not([data-error=true])`);if(!R.length)return;const B=Array.from(R).findIndex(S=>S.dataset.previewSrc===r);~B?p(R[(B+s+R.length)%R.length].dataset.previewSrc):p(R[0].dataset.previewSrc),s===1?(c=e.onPreviewNext)===null||c===void 0||c.call(e):(g=e.onPreviewPrev)===null||g===void 0||g.call(e)}return nt(un,{mergedClsPrefixRef:l,setPreviewSrc:p,setThumbnailEl:s=>{var c;(c=f.value)===null||c===void 0||c.setThumbnailEl(s)},toggleShow:()=>{var s;(s=f.value)===null||s===void 0||s.toggleShow()},groupId:d,renderToolbarRef:X(e,"renderToolbar")}),{mergedClsPrefix:l,previewInstRef:f,next:()=>{v(1)},prev:()=>{v(-1)}}},render(){return o(sn,{theme:this.theme,themeOverrides:this.themeOverrides,clsPrefix:this.mergedClsPrefix,ref:"previewInstRef",onPrev:this.prev,onNext:this.next,showToolbar:this.showToolbar,showToolbarTooltip:this.showToolbarTooltip,renderToolbar:this.renderToolbar},this.$slots)}}),Ca=Object.assign({alt:String,height:[String,Number],imgProps:Object,previewedImgProps:Object,lazy:Boolean,intersectionObserverOptions:Object,objectFit:{type:String,default:"fill"},previewSrc:String,fallbackSrc:String,width:[String,Number],src:String,previewDisabled:Boolean,loadDescription:String,onError:Function,onLoad:Function},at),xa=ne({name:"Image",props:Ca,slots:Object,inheritAttrs:!1,setup(e){const r=Y(null),l=Y(!1),d=Y(null),u=De(un,null),{mergedClsPrefixRef:f}=u||Ne(e),p={click:()=>{if(e.previewDisabled||l.value)return;const c=e.previewSrc||e.src;if(u){u.setPreviewSrc(c),u.setThumbnailEl(r.value),u.toggleShow();return}const{value:g}=d;g&&(g.setPreviewSrc(c),g.setThumbnailEl(r.value),g.toggleShow())}},v=Y(!e.lazy);Xe(()=>{var c;(c=r.value)===null||c===void 0||c.setAttribute("data-group-id",(u==null?void 0:u.groupId)||"")}),Xe(()=>{if(e.lazy&&e.intersectionObserverOptions){let c;const g=Ke(()=>{c==null||c(),c=void 0,c=Fn(r.value,e.intersectionObserverOptions,v)});Tt(()=>{g(),c==null||c()})}}),Ke(()=>{var c;e.src||((c=e.imgProps)===null||c===void 0||c.src),l.value=!1});const s=Y(!1);return nt(rn,{previewedImgPropsRef:X(e,"previewedImgProps")}),Object.assign({mergedClsPrefix:f,groupId:u==null?void 0:u.groupId,previewInstRef:d,imageRef:r,showError:l,shouldStartLoading:v,loaded:s,mergedOnClick:c=>{var g,y;p.click(),(y=(g=e.imgProps)===null||g===void 0?void 0:g.onClick)===null||y===void 0||y.call(g,c)},mergedOnError:c=>{if(!v.value)return;l.value=!0;const{onError:g,imgProps:{onError:y}={}}=e;g==null||g(c),y==null||y(c)},mergedOnLoad:c=>{const{onLoad:g,imgProps:{onLoad:y}={}}=e;g==null||g(c),y==null||y(c),s.value=!0}},p)},render(){var e,r;const{mergedClsPrefix:l,imgProps:d={},loaded:u,$attrs:f,lazy:p}=this,v=Dt(this.$slots.error,()=>[]),s=(r=(e=this.$slots).placeholder)===null||r===void 0?void 0:r.call(e),c=this.src||d.src,g=this.showError&&v.length?v:o("img",Object.assign(Object.assign({},d),{ref:"imageRef",width:this.width||d.width,height:this.height||d.height,src:this.showError?this.fallbackSrc:p&&this.intersectionObserverOptions?this.shouldStartLoading?c:void 0:c,alt:this.alt||d.alt,"aria-label":this.alt||d.alt,onClick:this.mergedOnClick,onError:this.mergedOnError,onLoad:this.mergedOnLoad,loading:Bn&&p&&!this.intersectionObserverOptions?"lazy":"eager",style:[d.style||"",s&&!u?{height:"0",width:"0",visibility:"hidden"}:"",{objectFit:this.objectFit}],"data-error":this.showError,"data-preview-src":this.previewSrc||this.src}));return o("div",Object.assign({},f,{role:"none",class:[f.class,`${l}-image`,(this.previewDisabled||this.showError)&&`${l}-image--preview-disabled`]}),this.groupId?g:o(sn,{theme:this.theme,themeOverrides:this.themeOverrides,clsPrefix:l,ref:"previewInstRef",showToolbar:this.showToolbar,showToolbarTooltip:this.showToolbarTooltip,renderToolbar:this.renderToolbar},{default:()=>g}),!u&&s)}}),Sa={success:o(Bt,null),error:o(It,null),warning:o(zt,null),info:o(Pt,null)},ka=ne({name:"ProgressCircle",props:{clsPrefix:{type:String,required:!0},status:{type:String,required:!0},strokeWidth:{type:Number,required:!0},fillColor:[String,Object],railColor:String,railStyle:[String,Object],percentage:{type:Number,default:0},offsetDegree:{type:Number,default:0},showIndicator:{type:Boolean,required:!0},indicatorTextColor:String,unit:String,viewBoxWidth:{type:Number,required:!0},gapDegree:{type:Number,required:!0},gapOffsetDegree:{type:Number,default:0}},setup(e,{slots:r}){function l(u,f,p,v){const{gapDegree:s,viewBoxWidth:c,strokeWidth:g}=e,y=50,R=0,B=y,S=0,F=2*y,U=50+g/2,$=`M ${U},${U} m ${R},${B}
      a ${y},${y} 0 1 1 ${S},-100
      a ${y},${y} 0 1 1 0,${F}`,T=Math.PI*2*y,N={stroke:v==="rail"?p:typeof e.fillColor=="object"?"url(#gradient)":p,strokeDasharray:`${u/100*(T-s)}px ${c*8}px`,strokeDashoffset:`-${s/2}px`,transformOrigin:f?"center":void 0,transform:f?`rotate(${f}deg)`:void 0};return{pathString:$,pathStyle:N}}const d=()=>{const u=typeof e.fillColor=="object",f=u?e.fillColor.stops[0]:"",p=u?e.fillColor.stops[1]:"";return u&&o("defs",null,o("linearGradient",{id:"gradient",x1:"0%",y1:"100%",x2:"100%",y2:"0%"},o("stop",{offset:"0%","stop-color":f}),o("stop",{offset:"100%","stop-color":p})))};return()=>{const{fillColor:u,railColor:f,strokeWidth:p,offsetDegree:v,status:s,percentage:c,showIndicator:g,indicatorTextColor:y,unit:R,gapOffsetDegree:B,clsPrefix:S}=e,{pathString:F,pathStyle:U}=l(100,0,f,"rail"),{pathString:$,pathStyle:T}=l(c,v,u,"fill"),N=100+p;return o("div",{class:`${S}-progress-content`,role:"none"},o("div",{class:`${S}-progress-graph`,"aria-hidden":!0},o("div",{class:`${S}-progress-graph-circle`,style:{transform:B?`rotate(${B}deg)`:void 0}},o("svg",{viewBox:`0 0 ${N} ${N}`},d(),o("g",null,o("path",{class:`${S}-progress-graph-circle-rail`,d:F,"stroke-width":p,"stroke-linecap":"round",fill:"none",style:U})),o("g",null,o("path",{class:[`${S}-progress-graph-circle-fill`,c===0&&`${S}-progress-graph-circle-fill--empty`],d:$,"stroke-width":p,"stroke-linecap":"round",fill:"none",style:T}))))),g?o("div",null,r.default?o("div",{class:`${S}-progress-custom-content`,role:"none"},r.default()):s!=="default"?o("div",{class:`${S}-progress-icon`,"aria-hidden":!0},o(oe,{clsPrefix:S},{default:()=>Sa[s]})):o("div",{class:`${S}-progress-text`,style:{color:y},role:"none"},o("span",{class:`${S}-progress-text__percentage`},c),o("span",{class:`${S}-progress-text__unit`},R))):null)}}}),_a={success:o(Bt,null),error:o(It,null),warning:o(zt,null),info:o(Pt,null)},Ra=ne({name:"ProgressLine",props:{clsPrefix:{type:String,required:!0},percentage:{type:Number,default:0},railColor:String,railStyle:[String,Object],fillColor:[String,Object],status:{type:String,required:!0},indicatorPlacement:{type:String,required:!0},indicatorTextColor:String,unit:{type:String,default:"%"},processing:{type:Boolean,required:!0},showIndicator:{type:Boolean,required:!0},height:[String,Number],railBorderRadius:[String,Number],fillBorderRadius:[String,Number]},setup(e,{slots:r}){const l=j(()=>ze(e.height)),d=j(()=>{var p,v;return typeof e.fillColor=="object"?`linear-gradient(to right, ${(p=e.fillColor)===null||p===void 0?void 0:p.stops[0]} , ${(v=e.fillColor)===null||v===void 0?void 0:v.stops[1]})`:e.fillColor}),u=j(()=>e.railBorderRadius!==void 0?ze(e.railBorderRadius):e.height!==void 0?ze(e.height,{c:.5}):""),f=j(()=>e.fillBorderRadius!==void 0?ze(e.fillBorderRadius):e.railBorderRadius!==void 0?ze(e.railBorderRadius):e.height!==void 0?ze(e.height,{c:.5}):"");return()=>{const{indicatorPlacement:p,railColor:v,railStyle:s,percentage:c,unit:g,indicatorTextColor:y,status:R,showIndicator:B,processing:S,clsPrefix:F}=e;return o("div",{class:`${F}-progress-content`,role:"none"},o("div",{class:`${F}-progress-graph`,"aria-hidden":!0},o("div",{class:[`${F}-progress-graph-line`,{[`${F}-progress-graph-line--indicator-${p}`]:!0}]},o("div",{class:`${F}-progress-graph-line-rail`,style:[{backgroundColor:v,height:l.value,borderRadius:u.value},s]},o("div",{class:[`${F}-progress-graph-line-fill`,S&&`${F}-progress-graph-line-fill--processing`],style:{maxWidth:`${e.percentage}%`,background:d.value,height:l.value,lineHeight:l.value,borderRadius:f.value}},p==="inside"?o("div",{class:`${F}-progress-graph-line-indicator`,style:{color:y}},r.default?r.default():`${c}${g}`):null)))),B&&p==="outside"?o("div",null,r.default?o("div",{class:`${F}-progress-custom-content`,style:{color:y},role:"none"},r.default()):R==="default"?o("div",{role:"none",class:`${F}-progress-icon ${F}-progress-icon--as-text`,style:{color:y}},c,g):o("div",{class:`${F}-progress-icon`,"aria-hidden":!0},o(oe,{clsPrefix:F},{default:()=>_a[R]}))):null)}}});function mt(e,r,l=100){return`m ${l/2} ${l/2-e} a ${e} ${e} 0 1 1 0 ${2*e} a ${e} ${e} 0 1 1 0 -${2*e}`}const Ta=ne({name:"ProgressMultipleCircle",props:{clsPrefix:{type:String,required:!0},viewBoxWidth:{type:Number,required:!0},percentage:{type:Array,default:[0]},strokeWidth:{type:Number,required:!0},circleGap:{type:Number,required:!0},showIndicator:{type:Boolean,required:!0},fillColor:{type:Array,default:()=>[]},railColor:{type:Array,default:()=>[]},railStyle:{type:Array,default:()=>[]}},setup(e,{slots:r}){const l=j(()=>e.percentage.map((f,p)=>`${Math.PI*f/100*(e.viewBoxWidth/2-e.strokeWidth/2*(1+2*p)-e.circleGap*p)*2}, ${e.viewBoxWidth*8}`)),d=(u,f)=>{const p=e.fillColor[f],v=typeof p=="object"?p.stops[0]:"",s=typeof p=="object"?p.stops[1]:"";return typeof e.fillColor[f]=="object"&&o("linearGradient",{id:`gradient-${f}`,x1:"100%",y1:"0%",x2:"0%",y2:"100%"},o("stop",{offset:"0%","stop-color":v}),o("stop",{offset:"100%","stop-color":s}))};return()=>{const{viewBoxWidth:u,strokeWidth:f,circleGap:p,showIndicator:v,fillColor:s,railColor:c,railStyle:g,percentage:y,clsPrefix:R}=e;return o("div",{class:`${R}-progress-content`,role:"none"},o("div",{class:`${R}-progress-graph`,"aria-hidden":!0},o("div",{class:`${R}-progress-graph-circle`},o("svg",{viewBox:`0 0 ${u} ${u}`},o("defs",null,y.map((B,S)=>d(B,S))),y.map((B,S)=>o("g",{key:S},o("path",{class:`${R}-progress-graph-circle-rail`,d:mt(u/2-f/2*(1+2*S)-p*S,f,u),"stroke-width":f,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:c[S]},g[S]]}),o("path",{class:[`${R}-progress-graph-circle-fill`,B===0&&`${R}-progress-graph-circle-fill--empty`],d:mt(u/2-f/2*(1+2*S)-p*S,f,u),"stroke-width":f,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:l.value[S],strokeDashoffset:0,stroke:typeof s[S]=="object"?`url(#gradient-${S})`:s[S]}})))))),v&&r.default?o("div",null,o("div",{class:`${R}-progress-text`},r.default())):null)}}}),Da=Q([D("progress",{display:"inline-block"},[D("progress-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 `),J("line",`
 width: 100%;
 display: block;
 `,[D("progress-content",`
 display: flex;
 align-items: center;
 `,[D("progress-graph",{flex:1})]),D("progress-custom-content",{marginLeft:"14px"}),D("progress-icon",`
 width: 30px;
 padding-left: 14px;
 height: var(--n-icon-size-line);
 line-height: var(--n-icon-size-line);
 font-size: var(--n-icon-size-line);
 `,[J("as-text",`
 color: var(--n-text-color-line-outer);
 text-align: center;
 width: 40px;
 font-size: var(--n-font-size);
 padding-left: 4px;
 transition: color .3s var(--n-bezier);
 `)])]),J("circle, dashboard",{width:"120px"},[D("progress-custom-content",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `),D("progress-text",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: inherit;
 font-size: var(--n-font-size-circle);
 color: var(--n-text-color-circle);
 font-weight: var(--n-font-weight-circle);
 transition: color .3s var(--n-bezier);
 white-space: nowrap;
 `),D("progress-icon",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: var(--n-icon-color);
 font-size: var(--n-icon-size-circle);
 `)]),J("multiple-circle",`
 width: 200px;
 color: inherit;
 `,[D("progress-text",`
 font-weight: var(--n-font-weight-circle);
 color: var(--n-text-color-circle);
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 transition: color .3s var(--n-bezier);
 `)]),D("progress-content",{position:"relative"}),D("progress-graph",{position:"relative"},[D("progress-graph-circle",[Q("svg",{verticalAlign:"bottom"}),D("progress-graph-circle-fill",`
 stroke: var(--n-fill-color);
 transition:
 opacity .3s var(--n-bezier),
 stroke .3s var(--n-bezier),
 stroke-dasharray .3s var(--n-bezier);
 `,[J("empty",{opacity:0})]),D("progress-graph-circle-rail",`
 transition: stroke .3s var(--n-bezier);
 overflow: hidden;
 stroke: var(--n-rail-color);
 `)]),D("progress-graph-line",[J("indicator-inside",[D("progress-graph-line-rail",`
 height: 16px;
 line-height: 16px;
 border-radius: 10px;
 `,[D("progress-graph-line-fill",`
 height: inherit;
 border-radius: 10px;
 `),D("progress-graph-line-indicator",`
 background: #0000;
 white-space: nowrap;
 text-align: right;
 margin-left: 14px;
 margin-right: 14px;
 height: inherit;
 font-size: 12px;
 color: var(--n-text-color-line-inner);
 transition: color .3s var(--n-bezier);
 `)])]),J("indicator-inside-label",`
 height: 16px;
 display: flex;
 align-items: center;
 `,[D("progress-graph-line-rail",`
 flex: 1;
 transition: background-color .3s var(--n-bezier);
 `),D("progress-graph-line-indicator",`
 background: var(--n-fill-color);
 font-size: 12px;
 transform: translateZ(0);
 display: flex;
 vertical-align: middle;
 height: 16px;
 line-height: 16px;
 padding: 0 10px;
 border-radius: 10px;
 position: absolute;
 white-space: nowrap;
 color: var(--n-text-color-line-inner);
 transition:
 right .2s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `)]),D("progress-graph-line-rail",`
 position: relative;
 overflow: hidden;
 height: var(--n-rail-height);
 border-radius: 5px;
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 `,[D("progress-graph-line-fill",`
 background: var(--n-fill-color);
 position: relative;
 border-radius: 5px;
 height: inherit;
 width: 100%;
 max-width: 0%;
 transition:
 background-color .3s var(--n-bezier),
 max-width .2s var(--n-bezier);
 `,[J("processing",[Q("&::after",`
 content: "";
 background-image: var(--n-line-bg-processing);
 animation: progress-processing-animation 2s var(--n-bezier) infinite;
 `)])])])])])]),Q("@keyframes progress-processing-animation",`
 0% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 100%;
 opacity: 1;
 }
 66% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 100% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 `)]),Pa=Object.assign(Object.assign({},Fe.props),{processing:Boolean,type:{type:String,default:"line"},gapDegree:Number,gapOffsetDegree:Number,status:{type:String,default:"default"},railColor:[String,Array],railStyle:[String,Array],color:[String,Array,Object],viewBoxWidth:{type:Number,default:100},strokeWidth:{type:Number,default:7},percentage:[Number,Array],unit:{type:String,default:"%"},showIndicator:{type:Boolean,default:!0},indicatorPosition:{type:String,default:"outside"},indicatorPlacement:{type:String,default:"outside"},indicatorTextColor:String,circleGap:{type:Number,default:1},height:Number,borderRadius:[String,Number],fillBorderRadius:[String,Number],offsetDegree:Number}),za=ne({name:"Progress",props:Pa,setup(e){const r=j(()=>e.indicatorPlacement||e.indicatorPosition),l=j(()=>{if(e.gapDegree||e.gapDegree===0)return e.gapDegree;if(e.type==="dashboard")return 75}),{mergedClsPrefixRef:d,inlineThemeDisabled:u}=Ne(e),f=Fe("Progress","-progress",Da,On,e,d),p=j(()=>{const{status:s}=e,{common:{cubicBezierEaseInOut:c},self:{fontSize:g,fontSizeCircle:y,railColor:R,railHeight:B,iconSizeCircle:S,iconSizeLine:F,textColorCircle:U,textColorLineInner:$,textColorLineOuter:T,lineBgProcessing:N,fontWeightCircle:m,[rt("iconColor",s)]:i,[rt("fillColor",s)]:C}}=f.value;return{"--n-bezier":c,"--n-fill-color":C,"--n-font-size":g,"--n-font-size-circle":y,"--n-font-weight-circle":m,"--n-icon-color":i,"--n-icon-size-circle":S,"--n-icon-size-line":F,"--n-line-bg-processing":N,"--n-rail-color":R,"--n-rail-height":B,"--n-text-color-circle":U,"--n-text-color-line-inner":$,"--n-text-color-line-outer":T}}),v=u?tt("progress",j(()=>e.status[0]),p,e):void 0;return{mergedClsPrefix:d,mergedIndicatorPlacement:r,gapDeg:l,cssVars:u?void 0:p,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){const{type:e,cssVars:r,indicatorTextColor:l,showIndicator:d,status:u,railColor:f,railStyle:p,color:v,percentage:s,viewBoxWidth:c,strokeWidth:g,mergedIndicatorPlacement:y,unit:R,borderRadius:B,fillBorderRadius:S,height:F,processing:U,circleGap:$,mergedClsPrefix:T,gapDeg:N,gapOffsetDegree:m,themeClass:i,$slots:C,onRender:w}=this;return w==null||w(),o("div",{class:[i,`${T}-progress`,`${T}-progress--${e}`,`${T}-progress--${u}`],style:r,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":s,role:e==="circle"||e==="line"||e==="dashboard"?"progressbar":"none"},e==="circle"||e==="dashboard"?o(ka,{clsPrefix:T,status:u,showIndicator:d,indicatorTextColor:l,railColor:f,fillColor:v,railStyle:p,offsetDegree:this.offsetDegree,percentage:s,viewBoxWidth:c,strokeWidth:g,gapDegree:N===void 0?e==="dashboard"?75:0:N,gapOffsetDegree:m,unit:R},C):e==="line"?o(Ra,{clsPrefix:T,status:u,showIndicator:d,indicatorTextColor:l,railColor:f,fillColor:v,railStyle:p,percentage:s,processing:U,indicatorPlacement:y,unit:R,fillBorderRadius:S,railBorderRadius:B,height:F},C):e==="multiple-circle"?o(Ta,{clsPrefix:T,strokeWidth:g,railColor:f,fillColor:v,railStyle:p,viewBoxWidth:c,percentage:s,showIndicator:d,circleGap:$},C):null)}}),Oe=et("n-upload"),Ia=Q([D("upload","width: 100%;",[J("dragger-inside",[D("upload-trigger",`
 display: block;
 `)]),J("drag-over",[D("upload-dragger",`
 border: var(--n-dragger-border-hover);
 `)])]),D("upload-dragger",`
 cursor: pointer;
 box-sizing: border-box;
 width: 100%;
 text-align: center;
 border-radius: var(--n-border-radius);
 padding: 24px;
 opacity: 1;
 transition:
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-dragger-color);
 border: var(--n-dragger-border);
 `,[Q("&:hover",`
 border: var(--n-dragger-border-hover);
 `),J("disabled",`
 cursor: not-allowed;
 `)]),D("upload-trigger",`
 display: inline-block;
 box-sizing: border-box;
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[Q("+",[D("upload-file-list","margin-top: 8px;")]),J("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `),J("image-card",`
 width: 96px;
 height: 96px;
 `,[D("base-icon",`
 font-size: 24px;
 `),D("upload-dragger",`
 padding: 0;
 height: 100%;
 width: 100%;
 display: flex;
 align-items: center;
 justify-content: center;
 `)])]),D("upload-file-list",`
 line-height: var(--n-line-height);
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[Q("a, img","outline: none;"),J("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `,[D("upload-file","cursor: not-allowed;")]),J("grid",`
 display: grid;
 grid-template-columns: repeat(auto-fill, 96px);
 grid-gap: 8px;
 margin-top: 0;
 `),D("upload-file",`
 display: block;
 box-sizing: border-box;
 cursor: default;
 padding: 0px 12px 0 6px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `,[it(),D("progress",[it({foldPadding:!0})]),Q("&:hover",`
 background-color: var(--n-item-color-hover);
 `,[D("upload-file-info",[be("action",`
 opacity: 1;
 `)])]),J("image-type",`
 border-radius: var(--n-border-radius);
 text-decoration: underline;
 text-decoration-color: #0000;
 `,[D("upload-file-info",`
 padding-top: 0px;
 padding-bottom: 0px;
 width: 100%;
 height: 100%;
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 6px 0;
 `,[D("progress",`
 padding: 2px 0;
 margin-bottom: 0;
 `),be("name",`
 padding: 0 8px;
 `),be("thumbnail",`
 width: 32px;
 height: 32px;
 font-size: 28px;
 display: flex;
 justify-content: center;
 align-items: center;
 `,[Q("img",`
 width: 100%;
 `)])])]),J("text-type",[D("progress",`
 box-sizing: border-box;
 padding-bottom: 6px;
 margin-bottom: 6px;
 `)]),J("image-card-type",`
 position: relative;
 width: 96px;
 height: 96px;
 border: var(--n-item-border-image-card);
 border-radius: var(--n-border-radius);
 padding: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: border-color .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 overflow: hidden;
 `,[D("progress",`
 position: absolute;
 left: 8px;
 bottom: 8px;
 right: 8px;
 width: unset;
 `),D("upload-file-info",`
 padding: 0;
 width: 100%;
 height: 100%;
 `,[be("thumbnail",`
 width: 100%;
 height: 100%;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 font-size: 36px;
 `,[Q("img",`
 width: 100%;
 `)])]),Q("&::before",`
 position: absolute;
 z-index: 1;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 opacity: 0;
 transition: opacity .2s var(--n-bezier);
 content: "";
 `),Q("&:hover",[Q("&::before","opacity: 1;"),D("upload-file-info",[be("thumbnail","opacity: .12;")])])]),J("error-status",[Q("&:hover",`
 background-color: var(--n-item-color-hover-error);
 `),D("upload-file-info",[be("name","color: var(--n-item-text-color-error);"),be("thumbnail","color: var(--n-item-text-color-error);")]),J("image-card-type",`
 border: var(--n-item-border-image-card-error);
 `)]),J("with-url",`
 cursor: pointer;
 `,[D("upload-file-info",[be("name",`
 color: var(--n-item-text-color-success);
 text-decoration-color: var(--n-item-text-color-success);
 `,[Q("a",`
 text-decoration: underline;
 `)])])]),D("upload-file-info",`
 position: relative;
 padding-top: 6px;
 padding-bottom: 6px;
 display: flex;
 flex-wrap: nowrap;
 `,[be("thumbnail",`
 font-size: 18px;
 opacity: 1;
 transition: opacity .2s var(--n-bezier);
 color: var(--n-item-icon-color);
 `,[D("base-icon",`
 margin-right: 2px;
 vertical-align: middle;
 transition: color .3s var(--n-bezier);
 `)]),be("action",`
 padding-top: inherit;
 padding-bottom: inherit;
 position: absolute;
 right: 0;
 top: 0;
 bottom: 0;
 width: 80px;
 display: flex;
 align-items: center;
 transition: opacity .2s var(--n-bezier);
 justify-content: flex-end;
 opacity: 0;
 `,[D("button",[Q("&:not(:last-child)",{marginRight:"4px"}),D("base-icon",[Q("svg",[Ln()])])]),J("image-type",`
 position: relative;
 max-width: 80px;
 width: auto;
 `),J("image-card-type",`
 z-index: 2;
 position: absolute;
 width: 100%;
 height: 100%;
 left: 0;
 right: 0;
 bottom: 0;
 top: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 `)]),be("name",`
 color: var(--n-item-text-color);
 flex: 1;
 display: flex;
 justify-content: center;
 text-overflow: ellipsis;
 overflow: hidden;
 flex-direction: column;
 text-decoration-color: #0000;
 font-size: var(--n-font-size);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier); 
 `,[Q("a",`
 color: inherit;
 text-decoration: underline;
 `)])])])]),D("upload-file-input",`
 display: none;
 width: 0;
 height: 0;
 opacity: 0;
 `)]),dn="__UPLOAD_DRAGGER__",cn=ne({name:"UploadDragger",[dn]:!0,setup(e,{slots:r}){const l=De(Oe,null);return l||Ye("upload-dragger","`n-upload-dragger` must be placed inside `n-upload`."),()=>{const{mergedClsPrefixRef:{value:d},mergedDisabledRef:{value:u},maxReachedRef:{value:f}}=l;return o("div",{class:[`${d}-upload-dragger`,(u||f)&&`${d}-upload-dragger--disabled`]},r)}}}),Ba=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},o("g",{fill:"none"},o("path",{d:"M21.75 3A3.25 3.25 0 0 1 25 6.25v15.5A3.25 3.25 0 0 1 21.75 25H6.25A3.25 3.25 0 0 1 3 21.75V6.25A3.25 3.25 0 0 1 6.25 3h15.5zm.583 20.4l-7.807-7.68a.75.75 0 0 0-.968-.07l-.084.07l-7.808 7.68c.183.065.38.1.584.1h15.5c.204 0 .4-.035.583-.1l-7.807-7.68l7.807 7.68zM21.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v15.5c0 .208.036.408.103.593l7.82-7.692a2.25 2.25 0 0 1 3.026-.117l.129.117l7.82 7.692c.066-.185.102-.385.102-.593V6.25a1.75 1.75 0 0 0-1.75-1.75zm-3.25 3a2.5 2.5 0 1 1 0 5a2.5 2.5 0 0 1 0-5zm0 1.5a1 1 0 1 0 0 2a1 1 0 0 0 0-2z",fill:"currentColor"}))),Fa=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},o("g",{fill:"none"},o("path",{d:"M6.4 2A2.4 2.4 0 0 0 4 4.4v19.2A2.4 2.4 0 0 0 6.4 26h15.2a2.4 2.4 0 0 0 2.4-2.4V11.578c0-.729-.29-1.428-.805-1.944l-6.931-6.931A2.4 2.4 0 0 0 14.567 2H6.4zm-.9 2.4a.9.9 0 0 1 .9-.9H14V10a2 2 0 0 0 2 2h6.5v11.6a.9.9 0 0 1-.9.9H6.4a.9.9 0 0 1-.9-.9V4.4zm16.44 6.1H16a.5.5 0 0 1-.5-.5V4.06l6.44 6.44z",fill:"currentColor"}))),Oa=ne({name:"UploadProgress",props:{show:Boolean,percentage:{type:Number,required:!0},status:{type:String,required:!0}},setup(){return{mergedTheme:De(Oe).mergedThemeRef}},render(){return o(Ft,null,{default:()=>this.show?o(za,{type:"line",showIndicator:!1,percentage:this.percentage,status:this.status,height:2,theme:this.mergedTheme.peers.Progress,themeOverrides:this.mergedTheme.peerOverrides.Progress}):null})}});var Qe=function(e,r,l,d){function u(f){return f instanceof l?f:new l(function(p){p(f)})}return new(l||(l=Promise))(function(f,p){function v(g){try{c(d.next(g))}catch(y){p(y)}}function s(g){try{c(d.throw(g))}catch(y){p(y)}}function c(g){g.done?f(g.value):u(g.value).then(v,s)}c((d=d.apply(e,r||[])).next())})};function fn(e){return e.includes("image/")}function vt(e=""){const r=e.split("/"),d=r[r.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(d)||[""])[0]}const bt=/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i,gn=e=>{if(e.type)return fn(e.type);const r=vt(e.name||"");if(bt.test(r))return!0;const l=e.thumbnailUrl||e.url||"",d=vt(l);return!!(/^data:image\//.test(l)||bt.test(d))};function La(e){return Qe(this,void 0,void 0,function*(){return yield new Promise(r=>{if(!e.type||!fn(e.type)){r("");return}r(window.URL.createObjectURL(e))})})}const Ma=Mn&&window.FileReader&&window.File;function Aa(e){return e.isDirectory}function Na(e){return e.isFile}function $a(e,r){return Qe(this,void 0,void 0,function*(){const l=[];function d(u){return Qe(this,void 0,void 0,function*(){for(const f of u)if(f){if(r&&Aa(f)){const p=f.createReader();let v=[],s;try{do s=yield new Promise((c,g)=>{p.readEntries(c,g)}),v=v.concat(s);while(s.length>0)}catch(c){st("upload","error happens when handling directory upload",c)}yield d(v)}else if(Na(f))try{const p=yield new Promise((v,s)=>{f.file(v,s)});l.push({file:p,entry:f,source:"dnd"})}catch(p){st("upload","error happens when handling file upload",p)}}})}return yield d(e),l})}function Ae(e){const{id:r,name:l,percentage:d,status:u,url:f,file:p,thumbnailUrl:v,type:s,fullPath:c,batchId:g}=e;return{id:r,name:l,percentage:d??null,status:u,url:f??null,file:p??null,thumbnailUrl:v??null,type:s??null,fullPath:c??null,batchId:g??null}}function Ea(e,r,l){return e=e.toLowerCase(),r=r.toLocaleLowerCase(),l=l.toLocaleLowerCase(),l.split(",").map(u=>u.trim()).filter(Boolean).some(u=>{if(u.startsWith(".")){if(e.endsWith(u))return!0}else if(u.includes("/")){const[f,p]=r.split("/"),[v,s]=u.split("/");if((v==="*"||f&&v&&v===f)&&(s==="*"||p&&s&&s===p))return!0}else return!0;return!1})}var yt=function(e,r,l,d){function u(f){return f instanceof l?f:new l(function(p){p(f)})}return new(l||(l=Promise))(function(f,p){function v(g){try{c(d.next(g))}catch(y){p(y)}}function s(g){try{c(d.throw(g))}catch(y){p(y)}}function c(g){g.done?f(g.value):u(g.value).then(v,s)}c((d=d.apply(e,r||[])).next())})};const He={paddingMedium:"0 3px",heightMedium:"24px",iconSizeMedium:"18px"},Ua=ne({name:"UploadFile",props:{clsPrefix:{type:String,required:!0},file:{type:Object,required:!0},listType:{type:String,required:!0},index:{type:Number,required:!0}},setup(e){const r=De(Oe),l=Y(null),d=Y(""),u=j(()=>{const{file:i}=e;return i.status==="finished"?"success":i.status==="error"?"error":"info"}),f=j(()=>{const{file:i}=e;if(i.status==="error")return"error"}),p=j(()=>{const{file:i}=e;return i.status==="uploading"}),v=j(()=>{if(!r.showCancelButtonRef.value)return!1;const{file:i}=e;return["uploading","pending","error"].includes(i.status)}),s=j(()=>{if(!r.showRemoveButtonRef.value)return!1;const{file:i}=e;return["finished"].includes(i.status)}),c=j(()=>{if(!r.showDownloadButtonRef.value)return!1;const{file:i}=e;return["finished"].includes(i.status)}),g=j(()=>{if(!r.showRetryButtonRef.value)return!1;const{file:i}=e;return["error"].includes(i.status)}),y=$n(()=>d.value||e.file.thumbnailUrl||e.file.url),R=j(()=>{if(!r.showPreviewButtonRef.value)return!1;const{file:{status:i},listType:C}=e;return["finished"].includes(i)&&y.value&&C==="image-card"});function B(){return yt(this,void 0,void 0,function*(){const i=r.onRetryRef.value;i&&(yield i({file:e.file}))===!1||r.submit(e.file.id)})}function S(i){i.preventDefault();const{file:C}=e;["finished","pending","error"].includes(C.status)?U(C):["uploading"].includes(C.status)?T(C):En("upload","The button clicked type is unknown.")}function F(i){i.preventDefault(),$(e.file)}function U(i){const{xhrMap:C,doChange:w,onRemoveRef:{value:P},mergedFileListRef:{value:k}}=r;Promise.resolve(P?P({file:Object.assign({},i),fileList:k,index:e.index}):!0).then(V=>{if(V===!1)return;const E=Object.assign({},i,{status:"removed"});C.delete(i.id),w(E,void 0,{remove:!0})})}function $(i){const{onDownloadRef:{value:C}}=r;Promise.resolve(C?C(Object.assign({},i)):!0).then(w=>{w!==!1&&Ht(i.url,i.name)})}function T(i){const{xhrMap:C}=r,w=C.get(i.id);w==null||w.abort(),U(Object.assign({},i))}function N(i){const{onPreviewRef:{value:C}}=r;if(C)C(e.file,{event:i});else if(e.listType==="image-card"){const{value:w}=l;if(!w)return;w.click()}}const m=()=>yt(this,void 0,void 0,function*(){const{listType:i}=e;i!=="image"&&i!=="image-card"||r.shouldUseThumbnailUrlRef.value(e.file)&&(d.value=yield r.getFileThumbnailUrlResolver(e.file))});return Ke(()=>{m()}),{mergedTheme:r.mergedThemeRef,progressStatus:u,buttonType:f,showProgress:p,disabled:r.mergedDisabledRef,showCancelButton:v,showRemoveButton:s,showDownloadButton:c,showRetryButton:g,showPreviewButton:R,mergedThumbnailUrl:y,shouldUseThumbnailUrl:r.shouldUseThumbnailUrlRef,renderIcon:r.renderIconRef,imageRef:l,handleRemoveOrCancelClick:S,handleDownloadClick:F,handleRetryClick:B,handlePreviewClick:N}},render(){const{clsPrefix:e,mergedTheme:r,listType:l,file:d,renderIcon:u}=this;let f;const p=l==="image";p||l==="image-card"?f=!this.shouldUseThumbnailUrl(d)||!this.mergedThumbnailUrl?o("span",{class:`${e}-upload-file-info__thumbnail`},u?u(d):gn(d)?o(oe,{clsPrefix:e},{default:Ba}):o(oe,{clsPrefix:e},{default:Fa})):o("a",{rel:"noopener noreferer",target:"_blank",href:d.url||void 0,class:`${e}-upload-file-info__thumbnail`,onClick:this.handlePreviewClick},l==="image-card"?o(xa,{src:this.mergedThumbnailUrl||void 0,previewSrc:d.url||void 0,alt:d.name,ref:"imageRef"}):o("img",{src:this.mergedThumbnailUrl||void 0,alt:d.name})):f=o("span",{class:`${e}-upload-file-info__thumbnail`},u?u(d):o(oe,{clsPrefix:e},{default:()=>o(ra,null)}));const s=o(Oa,{show:this.showProgress,percentage:d.percentage||0,status:this.progressStatus}),c=l==="text"||l==="image";return o("div",{class:[`${e}-upload-file`,`${e}-upload-file--${this.progressStatus}-status`,d.url&&d.status!=="error"&&l!=="image-card"&&`${e}-upload-file--with-url`,`${e}-upload-file--${l}-type`]},o("div",{class:`${e}-upload-file-info`},f,o("div",{class:`${e}-upload-file-info__name`},c&&(d.url&&d.status!=="error"?o("a",{rel:"noopener noreferer",target:"_blank",href:d.url||void 0,onClick:this.handlePreviewClick},d.name):o("span",{onClick:this.handlePreviewClick},d.name)),p&&s),o("div",{class:[`${e}-upload-file-info__action`,`${e}-upload-file-info__action--${l}-type`]},this.showPreviewButton?o(ve,{key:"preview",quaternary:!0,type:this.buttonType,onClick:this.handlePreviewClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:He},{icon:()=>o(oe,{clsPrefix:e},{default:()=>o(An,null)})}):null,(this.showRemoveButton||this.showCancelButton)&&!this.disabled&&o(ve,{key:"cancelOrTrash",theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,quaternary:!0,builtinThemeOverrides:He,type:this.buttonType,onClick:this.handleRemoveOrCancelClick},{icon:()=>o(Nn,null,{default:()=>this.showRemoveButton?o(oe,{clsPrefix:e,key:"trash"},{default:()=>o(fa,null)}):o(oe,{clsPrefix:e,key:"cancel"},{default:()=>o(ia,null)})})}),this.showRetryButton&&!this.disabled&&o(ve,{key:"retry",quaternary:!0,type:this.buttonType,onClick:this.handleRetryClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:He},{icon:()=>o(oe,{clsPrefix:e},{default:()=>o(ua,null)})}),this.showDownloadButton?o(ve,{key:"download",quaternary:!0,type:this.buttonType,onClick:this.handleDownloadClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:He},{icon:()=>o(oe,{clsPrefix:e},{default:()=>o(ln,null)})}):null)),!p&&s)}}),pn=ne({name:"UploadTrigger",props:{abstract:Boolean},slots:Object,setup(e,{slots:r}){const l=De(Oe,null);l||Ye("upload-trigger","`n-upload-trigger` must be placed inside `n-upload`.");const{mergedClsPrefixRef:d,mergedDisabledRef:u,maxReachedRef:f,listTypeRef:p,dragOverRef:v,openOpenFileDialog:s,draggerInsideRef:c,handleFileAddition:g,mergedDirectoryDndRef:y,triggerClassRef:R,triggerStyleRef:B}=l,S=j(()=>p.value==="image-card");function F(){u.value||f.value||s()}function U(m){m.preventDefault(),v.value=!0}function $(m){m.preventDefault(),v.value=!0}function T(m){m.preventDefault(),v.value=!1}function N(m){var i;if(m.preventDefault(),!c.value||u.value||f.value){v.value=!1;return}const C=(i=m.dataTransfer)===null||i===void 0?void 0:i.items;C!=null&&C.length?$a(Array.from(C).map(w=>w.webkitGetAsEntry()),y.value).then(w=>{g(w)}).finally(()=>{v.value=!1}):v.value=!1}return()=>{var m;const{value:i}=d;return e.abstract?(m=r.default)===null||m===void 0?void 0:m.call(r,{handleClick:F,handleDrop:N,handleDragOver:U,handleDragEnter:$,handleDragLeave:T}):o("div",{class:[`${i}-upload-trigger`,(u.value||f.value)&&`${i}-upload-trigger--disabled`,S.value&&`${i}-upload-trigger--image-card`,R.value],style:B.value,onClick:F,onDrop:N,onDragover:U,onDragenter:$,onDragleave:T},S.value?o(cn,null,{default:()=>Dt(r.default,()=>[o(oe,{clsPrefix:i},{default:()=>o(Un,null)})])}):r)}}}),Ha=ne({name:"UploadFileList",setup(e,{slots:r}){const l=De(Oe,null);l||Ye("upload-file-list","`n-upload-file-list` must be placed inside `n-upload`.");const{abstractRef:d,mergedClsPrefixRef:u,listTypeRef:f,mergedFileListRef:p,fileListClassRef:v,fileListStyleRef:s,cssVarsRef:c,themeClassRef:g,maxReachedRef:y,showTriggerRef:R,imageGroupPropsRef:B}=l,S=j(()=>f.value==="image-card"),F=()=>p.value.map(($,T)=>o(Ua,{clsPrefix:u.value,key:$.id,file:$,index:T,listType:f.value})),U=()=>S.value?o(wa,Object.assign({},B.value),{default:F}):o(Ft,{group:!0},{default:F});return()=>{const{value:$}=u,{value:T}=d;return o("div",{class:[`${$}-upload-file-list`,S.value&&`${$}-upload-file-list--grid`,T?g==null?void 0:g.value:void 0,v.value],style:[T&&c?c.value:"",s.value]},U(),R.value&&!y.value&&S.value&&o(pn,null,r))}}});var wt=function(e,r,l,d){function u(f){return f instanceof l?f:new l(function(p){p(f)})}return new(l||(l=Promise))(function(f,p){function v(g){try{c(d.next(g))}catch(y){p(y)}}function s(g){try{c(d.throw(g))}catch(y){p(y)}}function c(g){g.done?f(g.value):u(g.value).then(v,s)}c((d=d.apply(e,r||[])).next())})};function ja(e,r,l){const{doChange:d,xhrMap:u}=e;let f=0;function p(s){var c;let g=Object.assign({},r,{status:"error",percentage:f});u.delete(r.id),g=Ae(((c=e.onError)===null||c===void 0?void 0:c.call(e,{file:g,event:s}))||g),d(g,s)}function v(s){var c;if(e.isErrorState){if(e.isErrorState(l)){p(s);return}}else if(l.status<200||l.status>=300){p(s);return}let g=Object.assign({},r,{status:"finished",percentage:f});u.delete(r.id),g=Ae(((c=e.onFinish)===null||c===void 0?void 0:c.call(e,{file:g,event:s}))||g),d(g,s)}return{handleXHRLoad:v,handleXHRError:p,handleXHRAbort(s){const c=Object.assign({},r,{status:"removed",file:null,percentage:f});u.delete(r.id),d(c,s)},handleXHRProgress(s){const c=Object.assign({},r,{status:"uploading"});if(s.lengthComputable){const g=Math.ceil(s.loaded/s.total*100);c.percentage=g,f=g}d(c,s)}}}function Ya(e){const{inst:r,file:l,data:d,headers:u,withCredentials:f,action:p,customRequest:v}=e,{doChange:s}=e.inst;let c=0;v({file:l,data:d,headers:u,withCredentials:f,action:p,onProgress(g){const y=Object.assign({},l,{status:"uploading"}),R=g.percent;y.percentage=R,c=R,s(y)},onFinish(){var g;let y=Object.assign({},l,{status:"finished",percentage:c});y=Ae(((g=r.onFinish)===null||g===void 0?void 0:g.call(r,{file:y}))||y),s(y)},onError(){var g;let y=Object.assign({},l,{status:"error",percentage:c});y=Ae(((g=r.onError)===null||g===void 0?void 0:g.call(r,{file:y}))||y),s(y)}})}function Va(e,r,l){const d=ja(e,r,l);l.onabort=d.handleXHRAbort,l.onerror=d.handleXHRError,l.onload=d.handleXHRLoad,l.upload&&(l.upload.onprogress=d.handleXHRProgress)}function hn(e,r){return typeof e=="function"?e({file:r}):e||{}}function Wa(e,r,l){const d=hn(r,l);d&&Object.keys(d).forEach(u=>{e.setRequestHeader(u,d[u])})}function qa(e,r,l){const d=hn(r,l);d&&Object.keys(d).forEach(u=>{e.append(u,d[u])})}function Ga(e,r,l,{method:d,action:u,withCredentials:f,responseType:p,headers:v,data:s}){const c=new XMLHttpRequest;c.responseType=p,e.xhrMap.set(l.id,c),c.withCredentials=f;const g=new FormData;if(qa(g,s,l),l.file!==null&&g.append(r,l.file),Va(e,l,c),u!==void 0){c.open(d.toUpperCase(),u),Wa(c,v,l),c.send(g);const y=Object.assign({},l,{status:"uploading"});e.doChange(y)}}const Za=Object.assign(Object.assign({},Fe.props),{name:{type:String,default:"file"},accept:String,action:String,customRequest:Function,directory:Boolean,directoryDnd:{type:Boolean,default:void 0},method:{type:String,default:"POST"},multiple:Boolean,showFileList:{type:Boolean,default:!0},data:[Object,Function],headers:[Object,Function],withCredentials:Boolean,responseType:{type:String,default:""},disabled:{type:Boolean,default:void 0},onChange:Function,onRemove:Function,onFinish:Function,onError:Function,onRetry:Function,onBeforeUpload:Function,isErrorState:Function,onDownload:Function,defaultUpload:{type:Boolean,default:!0},fileList:Array,"onUpdate:fileList":[Function,Array],onUpdateFileList:[Function,Array],fileListClass:String,fileListStyle:[String,Object],defaultFileList:{type:Array,default:()=>[]},showCancelButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showDownloadButton:Boolean,showRetryButton:{type:Boolean,default:!0},showPreviewButton:{type:Boolean,default:!0},listType:{type:String,default:"text"},onPreview:Function,shouldUseThumbnailUrl:{type:Function,default:e=>Ma?gn(e):!1},createThumbnailUrl:Function,abstract:Boolean,max:Number,showTrigger:{type:Boolean,default:!0},imageGroupProps:Object,inputProps:Object,triggerClass:String,triggerStyle:[String,Object],renderIcon:Function}),Xa=ne({name:"Upload",props:Za,setup(e){e.abstract&&e.listType==="image-card"&&Ye("upload","when the list-type is image-card, abstract is not supported.");const{mergedClsPrefixRef:r,inlineThemeDisabled:l}=Ne(e),d=Fe("Upload","-upload",Ia,jn,e,r),u=Yn(e),f=Y(e.defaultFileList),p=X(e,"fileList"),v=Y(null),s={value:!1},c=Y(!1),g=new Map,y=Vn(p,f),R=j(()=>y.value.map(Ae)),B=j(()=>{const{max:k}=e;return k!==void 0?R.value.length>=k:!1});function S(){var k;(k=v.value)===null||k===void 0||k.click()}function F(k){const V=k.target;N(V.files?Array.from(V.files).map(E=>({file:E,entry:null,source:"input"})):null,k),V.value=""}function U(k){const{"onUpdate:fileList":V,onUpdateFileList:E}=e;V&&ut(V,k),E&&ut(E,k),f.value=k}const $=j(()=>e.multiple||e.directory),T=(k,V,E={append:!1,remove:!1})=>{const{append:H,remove:K}=E,ae=Array.from(R.value),Z=ae.findIndex(W=>W.id===k.id);if(H||K||~Z){H?ae.push(k):K?ae.splice(Z,1):ae.splice(Z,1,k);const{onChange:W}=e;W&&W({file:k,fileList:ae,event:V}),U(ae)}};function N(k,V){if(!k||k.length===0)return;const{onBeforeUpload:E}=e;k=$.value?k:[k[0]];const{max:H,accept:K}=e;k=k.filter(({file:Z,source:W})=>W==="dnd"&&(K!=null&&K.trim())?Ea(Z.name,Z.type,K):!0),H&&(k=k.slice(0,H-R.value.length));const ae=Ze();Promise.all(k.map(Z=>wt(this,[Z],void 0,function*({file:W,entry:le}){var re;const ge={id:Ze(),batchId:ae,name:W.name,status:"pending",percentage:0,file:W,url:null,type:W.type,thumbnailUrl:null,fullPath:(re=le==null?void 0:le.fullPath)!==null&&re!==void 0?re:`/${W.webkitRelativePath||W.name}`};return!E||(yield E({file:ge,fileList:R.value}))!==!1?ge:null}))).then(Z=>wt(this,void 0,void 0,function*(){let W=Promise.resolve();Z.forEach(le=>{W=W.then(Wn).then(()=>{le&&T(le,V,{append:!0})})}),yield W})).then(()=>{e.defaultUpload&&m()})}function m(k){const{method:V,action:E,withCredentials:H,headers:K,data:ae,name:Z}=e,W=k!==void 0?R.value.filter(re=>re.id===k):R.value,le=k!==void 0;W.forEach(re=>{const{status:ge}=re;(ge==="pending"||ge==="error"&&le)&&(e.customRequest?Ya({inst:{doChange:T,xhrMap:g,onFinish:e.onFinish,onError:e.onError},file:re,action:E,withCredentials:H,headers:K,data:ae,customRequest:e.customRequest}):Ga({doChange:T,xhrMap:g,onFinish:e.onFinish,onError:e.onError,isErrorState:e.isErrorState},Z,re,{method:V,action:E,withCredentials:H,responseType:e.responseType,headers:K,data:ae}))})}function i(k){var V;if(k.thumbnailUrl)return k.thumbnailUrl;const{createThumbnailUrl:E}=e;return E?(V=E(k.file,k))!==null&&V!==void 0?V:k.url||"":k.url?k.url:k.file?La(k.file):""}const C=j(()=>{const{common:{cubicBezierEaseInOut:k},self:{draggerColor:V,draggerBorder:E,draggerBorderHover:H,itemColorHover:K,itemColorHoverError:ae,itemTextColorError:Z,itemTextColorSuccess:W,itemTextColor:le,itemIconColor:re,itemDisabledOpacity:ge,lineHeight:h,borderRadius:a,fontSize:he,itemBorderImageCardError:_e,itemBorderImageCard:ee}}=d.value;return{"--n-bezier":k,"--n-border-radius":a,"--n-dragger-border":E,"--n-dragger-border-hover":H,"--n-dragger-color":V,"--n-font-size":he,"--n-item-color-hover":K,"--n-item-color-hover-error":ae,"--n-item-disabled-opacity":ge,"--n-item-icon-color":re,"--n-item-text-color":le,"--n-item-text-color-error":Z,"--n-item-text-color-success":W,"--n-line-height":h,"--n-item-border-image-card-error":_e,"--n-item-border-image-card":ee}}),w=l?tt("upload",void 0,C,e):void 0;nt(Oe,{mergedClsPrefixRef:r,mergedThemeRef:d,showCancelButtonRef:X(e,"showCancelButton"),showDownloadButtonRef:X(e,"showDownloadButton"),showRemoveButtonRef:X(e,"showRemoveButton"),showRetryButtonRef:X(e,"showRetryButton"),onRemoveRef:X(e,"onRemove"),onDownloadRef:X(e,"onDownload"),mergedFileListRef:R,triggerClassRef:X(e,"triggerClass"),triggerStyleRef:X(e,"triggerStyle"),shouldUseThumbnailUrlRef:X(e,"shouldUseThumbnailUrl"),renderIconRef:X(e,"renderIcon"),xhrMap:g,submit:m,doChange:T,showPreviewButtonRef:X(e,"showPreviewButton"),onPreviewRef:X(e,"onPreview"),getFileThumbnailUrlResolver:i,listTypeRef:X(e,"listType"),dragOverRef:c,openOpenFileDialog:S,draggerInsideRef:s,handleFileAddition:N,mergedDisabledRef:u.mergedDisabledRef,maxReachedRef:B,fileListClassRef:X(e,"fileListClass"),fileListStyleRef:X(e,"fileListStyle"),abstractRef:X(e,"abstract"),acceptRef:X(e,"accept"),cssVarsRef:l?void 0:C,themeClassRef:w==null?void 0:w.themeClass,onRender:w==null?void 0:w.onRender,showTriggerRef:X(e,"showTrigger"),imageGroupPropsRef:X(e,"imageGroupProps"),mergedDirectoryDndRef:j(()=>{var k;return(k=e.directoryDnd)!==null&&k!==void 0?k:e.directory}),onRetryRef:X(e,"onRetry")});const P={clear:()=>{f.value=[]},submit:m,openOpenFileDialog:S};return Object.assign({mergedClsPrefix:r,draggerInsideRef:s,inputElRef:v,mergedTheme:d,dragOver:c,mergedMultiple:$,cssVars:l?void 0:C,themeClass:w==null?void 0:w.themeClass,onRender:w==null?void 0:w.onRender,handleFileInputChange:F},P)},render(){var e,r;const{draggerInsideRef:l,mergedClsPrefix:d,$slots:u,directory:f,onRender:p}=this;if(u.default&&!this.abstract){const s=u.default()[0];!((e=s==null?void 0:s.type)===null||e===void 0)&&e[dn]&&(l.value=!0)}const v=o("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:"file",class:`${d}-upload-file-input`,accept:this.accept,multiple:this.mergedMultiple,onChange:this.handleFileInputChange,webkitdirectory:f||void 0,directory:f||void 0}));return this.abstract?o(je,null,(r=u.default)===null||r===void 0?void 0:r.call(u),o(Hn,{to:"body"},v)):(p==null||p(),o("div",{class:[`${d}-upload`,l.value&&`${d}-upload--dragger-inside`,this.dragOver&&`${d}-upload--drag-over`,this.themeClass],style:this.cssVars},v,this.showTrigger&&this.listType!=="image-card"&&o(pn,null,u),this.showFileList&&o(Ha,null,u)))}}),Ka={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ct=ne({name:"DocumentOutline",render:function(r,l){return ke(),Pe("svg",Ka,l[0]||(l[0]=[I("path",{d:"M416 221.25V416a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V96a48 48 0 0 1 48-48h98.75a32 32 0 0 1 22.62 9.37l141.26 141.26a32 32 0 0 1 9.37 22.62z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),I("path",{d:"M256 56v120a32 32 0 0 0 32 32h120",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Ja={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},xt=ne({name:"DocumentsOutline",render:function(r,l){return ke(),Pe("svg",Ja,l[0]||(l[0]=[I("path",{d:"M336 264.13V436c0 24.3-19.05 44-42.95 44H107c-23.95 0-43-19.7-43-44V172a44.26 44.26 0 0 1 44-44h94.12a24.55 24.55 0 0 1 17.49 7.36l109.15 111a25.4 25.4 0 0 1 7.24 17.77z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),I("path",{d:"M200 128v108a28.34 28.34 0 0 0 28 28h108",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),I("path",{d:"M176 128V76a44.26 44.26 0 0 1 44-44h94a24.83 24.83 0 0 1 17.61 7.36l109.15 111A25.09 25.09 0 0 1 448 168v172c0 24.3-19.05 44-42.95 44H344",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),I("path",{d:"M312 32v108a28.34 28.34 0 0 0 28 28h108",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Qa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},el=ne({name:"StopOutline",render:function(r,l){return ke(),Pe("svg",Qa,l[0]||(l[0]=[I("rect",{x:"96",y:"96",width:"320",height:"320",rx:"24",ry:"24",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),tl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},nl=ne({name:"SyncOutline",render:function(r,l){return ke(),Pe("svg",tl,l[0]||(l[0]=[I("path",{d:"M434.67 285.59v-29.8c0-98.73-80.24-178.79-179.2-178.79a179 179 0 0 0-140.14 67.36m-38.53 82v29.8C76.8 355 157 435 256 435a180.45 180.45 0 0 0 140-66.92",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),I("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M32 256l44-44l46 44"},null,-1),I("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M480 256l-44 44l-46-44"},null,-1)]))}});function ol(e,r){const l=j(()=>{var s;return((s=e.value)==null?void 0:s.filter(c=>c.healthStatus==="Y"))||[]}),d=s=>s.tlsEnabled==="Y"&&s.httpsPort?`${s.bindAddress}:${s.httpsPort}`:`${s.bindAddress}${s.httpPort?`:${s.httpPort}`:""}`;return{onlineInstances:l,tableColumns:[{title:"实例名称",key:"instanceName",width:180,ellipsis:{tooltip:!0}},{title:"描述",key:"instanceDesc",width:200,ellipsis:{tooltip:!0},render:s=>s.instanceDesc||"-"},{title:"服务地址",key:"bindAddress",width:180,render:d},{title:"TLS",key:"tlsEnabled",width:80,render:s=>o(dt,{type:s.tlsEnabled==="Y"?"success":"default",size:"small"},()=>s.tlsEnabled==="Y"?"启用":"禁用")},{title:"状态",key:"healthStatus",width:100,render:s=>o(dt,{type:s.healthStatus==="Y"?"success":"error",size:"small"},{default:()=>s.healthStatus==="Y"?"在线":"离线",icon:()=>o(Se,null,()=>o(s.healthStatus==="Y"?St:kt))})},{title:"最大连接数",key:"maxConnections",width:120,render:s=>s.maxConnections.toLocaleString()},{title:"最后心跳",key:"lastHeartbeatTime",width:160,render:s=>s.lastHeartbeatTime||"-"},{title:"操作",key:"actions",width:280,fixed:"right",render:s=>{const c=o(Ie,{trigger:"hover"},{trigger:()=>o(ve,{size:"small",type:"primary",secondary:!0,onClick:()=>r("config",s)},{icon:()=>o(Se,null,()=>o(qn))}),default:()=>"配置管理"}),g=o(Ie,{trigger:"hover"},{trigger:()=>o(ve,{size:"small",type:s.healthStatus==="Y"?"warning":"success",secondary:!0,onClick:()=>s.healthStatus==="Y"?r("stop",s):r("start",s)},{icon:()=>o(Se,null,()=>o(s.healthStatus==="Y"?el:yn))}),default:()=>s.healthStatus==="Y"?"停止实例":"启动实例"}),y=o(Ie,{trigger:"hover"},{trigger:()=>o(ve,{size:"small",onClick:()=>r("edit",s)},()=>"编辑"),default:()=>"编辑实例"}),R=o(Ie,{trigger:"hover"},{trigger:()=>o(ve,{size:"small",type:"error",secondary:!0,onClick:()=>r("delete",s)},{icon:()=>o(Se,null,()=>o(wn))}),default:()=>"删除实例"}),B=o(Ie,{trigger:"hover"},{trigger:()=>o(ve,{size:"small",type:"primary",secondary:!0,onClick:()=>r("reload",s)},{icon:()=>o(Se,null,()=>o(nl))}),default:()=>"网关重载"});return o(Ve,{size:"small"},()=>[c,g,y,R,B])}}],formatServiceAddress:d}}const al={class:"gateway-instance-table"},ll={class:"table-header"},rl={class:"header-left"},il={class:"header-actions"},sl=ne({__name:"GatewayInstanceTable",props:{instances:{},loading:{type:Boolean}},emits:["create","edit","delete","start","stop","config","refresh","reload"],setup(e,{emit:r}){const l=e,d=r,{instances:u}=Gn(l),{onlineInstances:f,tableColumns:p}=ol(u,d);return(v,s)=>{const c=Ot,g=Se,y=ve,R=Ve,B=ro;return ke(),Pe("div",al,[I("div",ll,[t(R,{justify:"space-between"},{default:n(()=>[I("div",rl,[s[1]||(s[1]=I("h3",null,"网关实例列表",-1)),t(c,{depth:"3"},{default:n(()=>[z("共 "+Te(A(u).length)+" 个实例，"+Te(A(f).length)+" 个在线",1)]),_:1})]),I("div",il,[t(y,{onClick:s[0]||(s[0]=S=>v.$emit("refresh"))},{icon:n(()=>[t(g,null,{default:n(()=>[t(A(bn))]),_:1})]),default:n(()=>[s[2]||(s[2]=z(" 刷新 "))]),_:1})])]),_:1})]),t(B,{columns:A(p),data:A(u),loading:v.loading,bordered:!1,size:"medium","flex-height":"",style:{height:"600px"}},null,8,["columns","data","loading"])])}}}),ul=ot(sl,[["__scopeId","data-v-765d85a3"]]);function dl(){const e=Lt(),r=Y(null),l=Y(!1),d=Y(!1),u=Y([]),f=Y([]),p=Y([]),v={instanceName:{required:!0,message:"请输入实例名称",trigger:["input","blur"]},bindAddress:{required:!0,message:"请输入绑定地址",trigger:["input","blur"]},httpPort:{required:!1,type:"number",message:"请输入有效的HTTP端口号",trigger:["input","blur"]},httpsPort:{required:!1,type:"number",message:"请输入有效的HTTPS端口号",trigger:["input","blur"]}},s=T=>new Promise((N,m)=>{const i=new FileReader;i.onload=C=>{var w;return N((w=C.target)==null?void 0:w.result)},i.onerror=m,i.readAsText(T)});return{formRef:r,visible:l,showCertContent:d,certFileList:u,keyFileList:f,certChainFileList:p,formRules:v,handleCertFileChange:async(T,N)=>{const{file:m}=T;if(m.file)try{if(m.file.size>10*1024*1024){e.error("证书文件不能超过10MB");return}const i=await s(m.file);N.certContent=i,u.value=[m],e.success("证书文件上传成功")}catch(i){e.error("证书文件读取失败"),console.error("Error reading cert file:",i)}},handleCertFileRemove:T=>{u.value=[],T.certContent="",e.info("已移除证书文件")},handleKeyFileChange:async(T,N)=>{const{file:m}=T;if(m.file)try{if(m.file.size>10*1024*1024){e.error("私钥文件不能超过10MB");return}const i=await s(m.file);N.keyContent=i,f.value=[m],e.success("私钥文件上传成功")}catch(i){e.error("私钥文件读取失败"),console.error("Error reading key file:",i)}},handleKeyFileRemove:T=>{f.value=[],T.keyContent="",e.info("已移除私钥文件")},handleCertChainFileChange:async(T,N)=>{const{file:m}=T;if(m.file)try{if(m.file.size>10*1024*1024){e.error("证书链文件不能超过10MB");return}const i=await s(m.file);N.certChainContent=i,p.value=[m],e.success("证书链文件上传成功")}catch(i){e.error("证书链文件读取失败"),console.error("Error reading cert chain file:",i)}},handleCertChainFileRemove:T=>{p.value=[],T.certChainContent="",e.info("已移除证书链文件")},resetFileUploadState:()=>{u.value=[],f.value=[],p.value=[],d.value=!1},syncEditFileState:T=>{T.certContent?u.value=[{id:"existing-cert",name:"已上传的证书文件",status:"finished",type:"application/x-pem-file"}]:u.value=[],T.keyContent?f.value=[{id:"existing-key",name:"已上传的私钥文件",status:"finished",type:"application/x-pem-file"}]:f.value=[],T.certChainContent?p.value=[{id:"existing-chain",name:"已上传的证书链文件",status:"finished",type:"application/x-pem-file"}]:p.value=[]},validateForm:async()=>{var T;try{return await((T=r.value)==null?void 0:T.validate()),!0}catch{return e.error("请检查表单输入"),!1}}}}const cl={class:"modal-header"},fl={class:"header-content"},gl={class:"modal-title"},pl={class:"modal-content"},hl={class:"cert-upload-section"},ml={class:"upload-content"},vl={class:"upload-content"},bl={class:"upload-content"},yl={class:"cert-content-section"},wl={key:0,class:"log-output-config"},Cl={class:"modal-footer"},xl=ne({__name:"GatewayInstanceDialog",props:{show:{type:Boolean},isEditing:{type:Boolean},formData:{},submitting:{type:Boolean}},emits:["update:show","submit"],setup(e,{emit:r}){const l=e,d=r,{formRef:u,visible:f,certFileList:p,keyFileList:v,certChainFileList:s,formRules:c,handleCertFileChange:g,handleCertFileRemove:y,handleKeyFileChange:R,handleKeyFileRemove:B,handleCertChainFileChange:S,handleCertChainFileRemove:F,resetFileUploadState:U,syncEditFileState:$,validateForm:T}=dl(),N=[{label:"TLS 1.0",value:"1.0"},{label:"TLS 1.1",value:"1.1"},{label:"TLS 1.2",value:"1.2"},{label:"TLS 1.3",value:"1.3"}],m=[{label:"文件存储",value:"FILE"},{label:"数据库存储",value:"DATABASE"}],i=[{label:"JSON格式",value:"JSON"},{label:"文本格式",value:"TEXT"},{label:"CSV格式",value:"CSV"}],C=[{label:"文件输出",value:"FILE"},{label:"数据库输出",value:"DATABASE"},{label:"MongoDB输出",value:"MONGODB"},{label:"Elasticsearch输出",value:"ELASTICSEARCH"},{label:"ClickHouse输出",value:"CLICKHOUSE"}],w=[{label:"替换为*",value:"****"},{label:"替换为[MASKED]",value:"[MASKED]"},{label:"保留前后字符",value:"KEEP_EDGE"},{label:"自定义规则",value:"CUSTOM"}],P=j(()=>l.formData.tlsEnabled==="Y"),k=j(()=>l.formData.tlsEnabled==="Y"&&l.formData.certStorageType==="FILE"),V=j(()=>l.formData.tlsEnabled==="Y"&&l.formData.certStorageType==="DATABASE"),E=j(()=>{var h,a;return((a=(h=l.formData.logConfig)==null?void 0:h.outputTargets)==null?void 0:a.includes("FILE"))||!1});Ge(()=>l.show,h=>{f.value=h,h&&l.isEditing?$(l.formData):h||U()}),Ge(f,h=>{d("update:show",h)});const H=()=>{f.value=!1},K=async()=>{await T()&&d("submit",l.formData)},ae=h=>g(h,l.formData),Z=()=>y(l.formData),W=h=>R(h,l.formData),le=()=>B(l.formData),re=h=>S(h,l.formData),ge=()=>F(l.formData);return(h,a)=>{const he=Se,_e=ve,ee=Ot,te=$t,ie=Qn,M=Jn,O=Yt,se=so,ce=uo,ue=jt,me=io,x=Ve,L=cn,_=Xa,q=Mt,G=Nt,de=Vt,fe=co,pe=At,ye=Kn,mn=Xn,vn=Ut;return ke(),Zn(vn,{show:A(f),"onUpdate:show":a[44]||(a[44]=b=>Et(f)?f.value=b:null),"mask-closable":!1,"close-on-esc":!1,"transform-origin":"center"},{default:n(()=>[t(q,{style:{width:"1000px"},bordered:!1,size:"huge",role:"dialog","aria-modal":"true",class:"instance-modal"},{header:n(()=>[I("div",cl,[t(he,{size:"24",class:"modal-icon"},{default:n(()=>[t(A(Je))]),_:1}),I("div",fl,[I("h3",gl,Te(h.isEditing?"编辑网关实例":"新建网关实例"),1),a[45]||(a[45]=I("p",{class:"modal-subtitle"},"配置网关实例的基本信息、TLS证书、性能参数等",-1))])])]),"header-extra":n(()=>[t(_e,{quaternary:"",circle:"",onClick:H,class:"close-btn"},{icon:n(()=>[t(he,{size:"18"},{default:n(()=>[t(A(_t))]),_:1})]),_:1})]),footer:n(()=>[I("div",Cl,[t(x,{justify:"end"},{default:n(()=>[t(_e,{onClick:H,size:"medium"},{default:n(()=>a[89]||(a[89]=[z("取消")])),_:1}),t(_e,{type:"primary",loading:h.submitting,onClick:K,size:"medium"},{default:n(()=>[z(Te(h.isEditing?"更新":"创建"),1)]),_:1},8,["loading"])]),_:1})])]),default:n(()=>[t(mn,{style:{"max-height":"70vh"},trigger:"hover","x-scrollable":!1},{default:n(()=>[I("div",pl,[t(ye,{ref_key:"formRef",ref:u,model:h.formData,rules:A(c),"label-placement":"left","label-width":"160px","require-mark-placement":"right-hanging",class:"instance-form"},{default:n(()=>[t(pe,{type:"line",animated:""},{default:n(()=>[t(G,{name:"instance",tab:"实例配置"},{default:n(()=>[t(te,{"title-placement":"left"},{default:n(()=>[t(ee,{class:"section-title"},{default:n(()=>a[46]||(a[46]=[z("基本信息")])),_:1})]),_:1}),t(ue,{cols:2,"x-gap":24,"y-gap":20},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"实例名称",path:"instanceName"},{default:n(()=>[t(ie,{value:h.formData.instanceName,"onUpdate:value":a[0]||(a[0]=b=>h.formData.instanceName=b),placeholder:"请输入实例名称"},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"绑定地址",path:"bindAddress"},{default:n(()=>[t(ie,{value:h.formData.bindAddress,"onUpdate:value":a[1]||(a[1]=b=>h.formData.bindAddress=b),placeholder:"如: 0.0.0.0"},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"HTTP端口",path:"httpPort"},{default:n(()=>[t(se,{value:h.formData.httpPort,"onUpdate:value":a[2]||(a[2]=b=>h.formData.httpPort=b),min:1,max:65535,placeholder:"如: 8080",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"HTTPS端口",path:"httpsPort"},{default:n(()=>[t(se,{value:h.formData.httpsPort,"onUpdate:value":a[3]||(a[3]=b=>h.formData.httpsPort=b),min:1,max:65535,placeholder:"如: 8443",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"自动启动",path:"activeFlag"},{default:n(()=>[t(ce,{value:h.formData.activeFlag,"onUpdate:value":a[4]||(a[4]=b=>h.formData.activeFlag=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[47]||(a[47]=[z("启用")])),unchecked:n(()=>a[48]||(a[48]=[z("禁用")])),_:1},8,["value"])]),_:1})]),_:1}),t(O,{span:2},{default:n(()=>[t(M,{label:"实例描述",path:"instanceDesc"},{default:n(()=>[t(ie,{value:h.formData.instanceDesc,"onUpdate:value":a[5]||(a[5]=b=>h.formData.instanceDesc=b),type:"textarea",placeholder:"请输入实例描述",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(te,{"title-placement":"left"},{default:n(()=>[t(ee,{class:"section-title"},{default:n(()=>a[49]||(a[49]=[z("TLS安全配置")])),_:1})]),_:1}),t(ue,{cols:2,"x-gap":24,"y-gap":20},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"启用TLS",path:"tlsEnabled"},{default:n(()=>[t(ce,{value:h.formData.tlsEnabled,"onUpdate:value":a[6]||(a[6]=b=>h.formData.tlsEnabled=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[50]||(a[50]=[z("启用")])),unchecked:n(()=>a[51]||(a[51]=[z("禁用")])),_:1},8,["value"])]),_:1})]),_:1}),xe(t(O,null,{default:n(()=>[t(M,{label:"证书存储类型",path:"certStorageType"},{default:n(()=>[t(me,{value:h.formData.certStorageType,"onUpdate:value":a[7]||(a[7]=b=>h.formData.certStorageType=b),options:m,placeholder:"选择证书存储方式"},null,8,["value"])]),_:1})]),_:1},512),[[Re,P.value]]),xe(t(O,null,{default:n(()=>[t(M,{label:"证书文件路径",path:"certFilePath"},{default:n(()=>[t(ie,{value:h.formData.certFilePath,"onUpdate:value":a[8]||(a[8]=b=>h.formData.certFilePath=b),placeholder:"/path/to/cert.pem"},null,8,["value"])]),_:1})]),_:1},512),[[Re,k.value]]),xe(t(O,null,{default:n(()=>[t(M,{label:"私钥文件路径",path:"keyFilePath"},{default:n(()=>[t(ie,{value:h.formData.keyFilePath,"onUpdate:value":a[9]||(a[9]=b=>h.formData.keyFilePath=b),placeholder:"/path/to/key.pem"},null,8,["value"])]),_:1})]),_:1},512),[[Re,k.value]])]),_:1}),xe(I("div",hl,[t(ue,{cols:3,"x-gap":16,"y-gap":16},{default:n(()=>[t(O,null,{default:n(()=>[t(q,{size:"small",class:"upload-card"},{header:n(()=>[t(x,{align:"center"},{default:n(()=>[t(he,{size:"16",color:"#18a058"},{default:n(()=>[t(A(Ct))]),_:1}),a[52]||(a[52]=I("span",null,"证书文件",-1))]),_:1})]),default:n(()=>[t(_,{"file-list":A(p),max:1,"on-change":ae,"on-remove":Z,accept:".crt,.pem,.cer","show-file-list":!0,"custom-request":()=>{},class:"cert-upload"},{default:n(()=>[t(L,null,{default:n(()=>[I("div",ml,[t(he,{size:"32",depth:"3"},{default:n(()=>[t(A(Ct))]),_:1}),t(ee,{depth:"3"},{default:n(()=>a[53]||(a[53]=[z("点击或拖拽上传证书")])),_:1}),t(ee,{depth:"3",style:{"font-size":"12px"}},{default:n(()=>a[54]||(a[54]=[z("支持 .crt, .pem, .cer")])),_:1})])]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(q,{size:"small",class:"upload-card"},{header:n(()=>[t(x,{align:"center"},{default:n(()=>[t(he,{size:"16",color:"#f0a020"},{default:n(()=>[t(A(ct))]),_:1}),a[55]||(a[55]=I("span",null,"私钥文件",-1))]),_:1})]),default:n(()=>[t(_,{"file-list":A(v),max:1,"on-change":W,"on-remove":le,accept:".key,.pem","show-file-list":!0,"custom-request":()=>{},class:"cert-upload"},{default:n(()=>[t(L,null,{default:n(()=>[I("div",vl,[t(he,{size:"32",depth:"3"},{default:n(()=>[t(A(ct))]),_:1}),t(ee,{depth:"3"},{default:n(()=>a[56]||(a[56]=[z("点击或拖拽上传私钥")])),_:1}),t(ee,{depth:"3",style:{"font-size":"12px"}},{default:n(()=>a[57]||(a[57]=[z("支持 .key, .pem")])),_:1})])]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(q,{size:"small",class:"upload-card"},{header:n(()=>[t(x,{align:"center"},{default:n(()=>[t(he,{size:"16",color:"#2080f0"},{default:n(()=>[t(A(xt))]),_:1}),a[58]||(a[58]=I("span",null,"证书链(可选)",-1))]),_:1})]),default:n(()=>[t(_,{"file-list":A(s),max:1,"on-change":re,"on-remove":ge,accept:".crt,.pem,.cer","show-file-list":!0,"custom-request":()=>{},class:"cert-upload"},{default:n(()=>[t(L,null,{default:n(()=>[I("div",bl,[t(he,{size:"32",depth:"3"},{default:n(()=>[t(A(xt))]),_:1}),t(ee,{depth:"3"},{default:n(()=>a[59]||(a[59]=[z("点击或拖拽上传证书链")])),_:1}),t(ee,{depth:"3",style:{"font-size":"12px"}},{default:n(()=>a[60]||(a[60]=[z("支持 .crt, .pem, .cer")])),_:1})])]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1})]),_:1}),xe(I("div",yl,[t(ue,{cols:1,"y-gap":16,style:{"margin-top":"16px"}},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"证书内容(PEM格式)",path:"certContent"},{default:n(()=>[t(ie,{value:h.formData.certContent,"onUpdate:value":a[10]||(a[10]=b=>h.formData.certContent=b),type:"textarea",placeholder:"通过上传文件自动填充",rows:4},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"私钥内容(PEM格式)",path:"keyContent"},{default:n(()=>[t(ie,{value:h.formData.keyContent,"onUpdate:value":a[11]||(a[11]=b=>h.formData.keyContent=b),type:"textarea",placeholder:"通过上传文件自动填充",rows:4},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"证书链内容(PEM格式，可选)",path:"certChainContent"},{default:n(()=>[t(ie,{value:h.formData.certChainContent,"onUpdate:value":a[12]||(a[12]=b=>h.formData.certChainContent=b),type:"textarea",placeholder:"通过上传文件自动填充",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1})],512),[[Re,!1]])],512),[[Re,V.value]]),xe(I("div",null,[t(ue,{cols:2,"x-gap":24,"y-gap":20},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"TLS版本",path:"tlsVersion"},{default:n(()=>[t(me,{value:h.formData.tlsVersion,"onUpdate:value":a[13]||(a[13]=b=>h.formData.tlsVersion=b),multiple:"",options:N,placeholder:"选择支持的TLS版本","max-tag-count":2},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"启用HTTP/2",path:"enableHttp2"},{default:n(()=>[t(ce,{value:h.formData.enableHttp2,"onUpdate:value":a[14]||(a[14]=b=>h.formData.enableHttp2=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[61]||(a[61]=[z("启用")])),unchecked:n(()=>a[62]||(a[62]=[z("禁用")])),_:1},8,["value"])]),_:1})]),_:1}),t(O,{span:2},{default:n(()=>[t(M,{label:"TLS密码套件",path:"tlsCipherSuites"},{default:n(()=>[t(ie,{value:h.formData.tlsCipherSuites,"onUpdate:value":a[15]||(a[15]=b=>h.formData.tlsCipherSuites=b),placeholder:"多个密码套件用逗号分隔，如: TLS_AES_256_GCM_SHA384,TLS_CHACHA20_POLY1305_SHA256，留空使用默认配置",clearable:""},null,8,["value"])]),_:1})]),_:1})]),_:1})],512),[[Re,P.value]]),t(te,{"title-placement":"left"},{default:n(()=>[t(ee,{class:"section-title"},{default:n(()=>a[63]||(a[63]=[z("性能配置")])),_:1})]),_:1}),t(ue,{cols:2,"x-gap":24,"y-gap":20},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"最大连接数",path:"maxConnections"},{default:n(()=>[t(se,{value:h.formData.maxConnections,"onUpdate:value":a[16]||(a[16]=b=>h.formData.maxConnections=b),min:100,max:1e5,placeholder:"10000",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"最大工作协程数",path:"maxWorkers"},{default:n(()=>[t(se,{value:h.formData.maxWorkers,"onUpdate:value":a[17]||(a[17]=b=>h.formData.maxWorkers=b),min:100,max:1e4,placeholder:"1000",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"读取超时(ms)",path:"readTimeoutMs"},{default:n(()=>[t(se,{value:h.formData.readTimeoutMs,"onUpdate:value":a[18]||(a[18]=b=>h.formData.readTimeoutMs=b),min:1e3,max:3e5,placeholder:"30000",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"写入超时(ms)",path:"writeTimeoutMs"},{default:n(()=>[t(se,{value:h.formData.writeTimeoutMs,"onUpdate:value":a[19]||(a[19]=b=>h.formData.writeTimeoutMs=b),min:1e3,max:3e5,placeholder:"30000",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"空闲超时(ms)",path:"idleTimeoutMs"},{default:n(()=>[t(se,{value:h.formData.idleTimeoutMs,"onUpdate:value":a[20]||(a[20]=b=>h.formData.idleTimeoutMs=b),min:1e3,max:6e5,placeholder:"60000",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"最大请求头大小(字节)",path:"maxHeaderBytes"},{default:n(()=>[t(se,{value:h.formData.maxHeaderBytes,"onUpdate:value":a[21]||(a[21]=b=>h.formData.maxHeaderBytes=b),min:1024,max:10485760,placeholder:"1048576",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(te,{"title-placement":"left"},{default:n(()=>[t(ee,{class:"section-title"},{default:n(()=>a[64]||(a[64]=[z("Keep-Alive配置")])),_:1})]),_:1}),t(ue,{cols:2,"x-gap":24,"y-gap":20},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"HTTP Keep-Alive",path:"keepAliveEnabled"},{default:n(()=>[t(x,{vertical:""},{default:n(()=>[t(ce,{value:h.formData.keepAliveEnabled,"onUpdate:value":a[22]||(a[22]=b=>h.formData.keepAliveEnabled=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[65]||(a[65]=[z("启用")])),unchecked:n(()=>a[66]||(a[66]=[z("禁用")])),_:1},8,["value"]),t(ee,{depth:"3",style:{"font-size":"12px"}},{default:n(()=>a[67]||(a[67]=[z(" HTTP层复用连接，减少建立连接开销 ")])),_:1})]),_:1})]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"TCP Keep-Alive",path:"tcpKeepAliveEnabled"},{default:n(()=>[t(x,{vertical:""},{default:n(()=>[t(ce,{value:h.formData.tcpKeepAliveEnabled,"onUpdate:value":a[23]||(a[23]=b=>h.formData.tcpKeepAliveEnabled=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[68]||(a[68]=[z("启用")])),unchecked:n(()=>a[69]||(a[69]=[z("禁用")])),_:1},8,["value"]),t(ee,{depth:"3",style:{"font-size":"12px"}},{default:n(()=>a[70]||(a[70]=[z(" TCP层检测死连接，及时清理资源 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(te,{"title-placement":"left"},{default:n(()=>[t(ee,{class:"section-title"},{default:n(()=>a[71]||(a[71]=[z("备注信息")])),_:1})]),_:1}),t(M,{label:"备注",path:"noteText"},{default:n(()=>[t(ie,{value:h.formData.noteText,"onUpdate:value":a[24]||(a[24]=b=>h.formData.noteText=b),type:"textarea",placeholder:"请输入备注信息",rows:3},null,8,["value"])]),_:1})]),_:1}),t(G,{name:"log",tab:"日志配置"},{default:n(()=>[t(de,{type:"info",style:{"margin-bottom":"20px"}},{default:n(()=>a[72]||(a[72]=[z(" 配置网关实例的日志记录策略，包括日志格式、输出目标、轮转策略等。 ")])),_:1}),t(ue,{cols:2,"x-gap":24,"y-gap":20},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"日志配置名称",path:"logConfig.configName"},{default:n(()=>[t(ie,{value:h.formData.logConfig.configName,"onUpdate:value":a[25]||(a[25]=b=>h.formData.logConfig.configName=b),placeholder:"请输入日志配置名称"},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"日志格式",path:"logConfig.logFormat"},{default:n(()=>[t(me,{value:h.formData.logConfig.logFormat,"onUpdate:value":a[26]||(a[26]=b=>h.formData.logConfig.logFormat=b),options:i,placeholder:"选择日志格式"},null,8,["value"])]),_:1})]),_:1}),t(O,{span:2},{default:n(()=>[t(M,{label:"日志配置描述",path:"logConfig.configDesc"},{default:n(()=>[t(ie,{value:h.formData.logConfig.configDesc,"onUpdate:value":a[27]||(a[27]=b=>h.formData.logConfig.configDesc=b),type:"textarea",placeholder:"请输入日志配置描述",rows:2},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(te,{"title-placement":"left",style:{margin:"24px 0"}},{default:n(()=>[t(ee,{style:{"font-size":"14px",color:"#666"}},{default:n(()=>a[73]||(a[73]=[z("日志内容控制")])),_:1})]),_:1}),t(ue,{cols:2,"x-gap":24,"y-gap":20},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"记录请求体",path:"logConfig.recordRequestBody"},{default:n(()=>[t(ce,{value:h.formData.logConfig.recordRequestBody,"onUpdate:value":a[28]||(a[28]=b=>h.formData.logConfig.recordRequestBody=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[74]||(a[74]=[z("启用")])),unchecked:n(()=>a[75]||(a[75]=[z("禁用")])),_:1},8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"记录响应体",path:"logConfig.recordResponseBody"},{default:n(()=>[t(ce,{value:h.formData.logConfig.recordResponseBody,"onUpdate:value":a[29]||(a[29]=b=>h.formData.logConfig.recordResponseBody=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[76]||(a[76]=[z("启用")])),unchecked:n(()=>a[77]||(a[77]=[z("禁用")])),_:1},8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"记录请求头",path:"logConfig.recordHeaders"},{default:n(()=>[t(ce,{value:h.formData.logConfig.recordHeaders,"onUpdate:value":a[30]||(a[30]=b=>h.formData.logConfig.recordHeaders=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[78]||(a[78]=[z("启用")])),unchecked:n(()=>a[79]||(a[79]=[z("禁用")])),_:1},8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"最大报文大小(字节)",path:"logConfig.maxBodySizeBytes"},{default:n(()=>[t(se,{value:h.formData.logConfig.maxBodySizeBytes,"onUpdate:value":a[31]||(a[31]=b=>h.formData.logConfig.maxBodySizeBytes=b),min:0,placeholder:"1048576",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(te,{"title-placement":"left",style:{margin:"24px 0"}},{default:n(()=>[t(ee,{style:{"font-size":"14px",color:"#666"}},{default:n(()=>a[80]||(a[80]=[z("日志输出目标")])),_:1})]),_:1}),t(ue,{cols:1,"y-gap":20},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"输出目标",path:"logConfig.outputTargets"},{default:n(()=>[t(me,{value:h.formData.logConfig.outputTargets,"onUpdate:value":a[32]||(a[32]=b=>h.formData.logConfig.outputTargets=b),options:C,placeholder:"选择日志输出目标"},null,8,["value"])]),_:1})]),_:1})]),_:1}),E.value?(ke(),Pe("div",wl,[t(q,{title:"文件输出配置",size:"small",style:{margin:"16px 0"}},{default:n(()=>[t(ue,{cols:2,"x-gap":16,"y-gap":16},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"文件路径"},{default:n(()=>[t(ie,{value:h.formData.logConfig.fileConfig.filePath,"onUpdate:value":a[33]||(a[33]=b=>h.formData.logConfig.fileConfig.filePath=b),placeholder:"./logs/gateway.log"},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"文件保留天数"},{default:n(()=>[t(se,{value:h.formData.logConfig.logRetentionDays,"onUpdate:value":a[34]||(a[34]=b=>h.formData.logConfig.logRetentionDays=b),min:1,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})])):eo("",!0),t(te,{"title-placement":"left",style:{margin:"24px 0"}},{default:n(()=>[t(ee,{style:{"font-size":"14px",color:"#666"}},{default:n(()=>a[81]||(a[81]=[z("异步和批量处理")])),_:1})]),_:1}),t(ue,{cols:3,"x-gap":24,"y-gap":20},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"启用异步日志",path:"logConfig.enableAsyncLogging"},{default:n(()=>[t(ce,{value:h.formData.logConfig.enableAsyncLogging,"onUpdate:value":a[35]||(a[35]=b=>h.formData.logConfig.enableAsyncLogging=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[82]||(a[82]=[z("启用")])),unchecked:n(()=>a[83]||(a[83]=[z("禁用")])),_:1},8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"异步队列大小",path:"logConfig.asyncQueueSize"},{default:n(()=>[t(se,{value:h.formData.logConfig.asyncQueueSize,"onUpdate:value":a[36]||(a[36]=b=>h.formData.logConfig.asyncQueueSize=b),min:1,placeholder:"10000",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"批处理大小",path:"logConfig.batchSize"},{default:n(()=>[t(se,{value:h.formData.logConfig.batchSize,"onUpdate:value":a[37]||(a[37]=b=>h.formData.logConfig.batchSize=b),min:1,placeholder:"100",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"异步刷新间隔(ms)",path:"logConfig.asyncFlushIntervalMs"},{default:n(()=>[t(se,{value:h.formData.logConfig.asyncFlushIntervalMs,"onUpdate:value":a[38]||(a[38]=b=>h.formData.logConfig.asyncFlushIntervalMs=b),min:100,max:6e4,placeholder:"5000",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"启用批量处理",path:"logConfig.enableBatchProcessing"},{default:n(()=>[t(ce,{value:h.formData.logConfig.enableBatchProcessing,"onUpdate:value":a[39]||(a[39]=b=>h.formData.logConfig.enableBatchProcessing=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[84]||(a[84]=[z("启用")])),unchecked:n(()=>a[85]||(a[85]=[z("禁用")])),_:1},8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"批处理超时(ms)",path:"logConfig.batchTimeoutMs"},{default:n(()=>[t(se,{value:h.formData.logConfig.batchTimeoutMs,"onUpdate:value":a[40]||(a[40]=b=>h.formData.logConfig.batchTimeoutMs=b),min:1e3,max:3e5,placeholder:"30000",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(te,{"title-placement":"left",style:{margin:"24px 0"}},{default:n(()=>[t(ee,{style:{"font-size":"14px",color:"#666"}},{default:n(()=>a[86]||(a[86]=[z("敏感数据处理")])),_:1})]),_:1}),t(ue,{cols:2,"x-gap":24,"y-gap":20},{default:n(()=>[t(O,null,{default:n(()=>[t(M,{label:"启用敏感数据脱敏",path:"logConfig.enableSensitiveDataMasking"},{default:n(()=>[t(ce,{value:h.formData.logConfig.enableSensitiveDataMasking,"onUpdate:value":a[41]||(a[41]=b=>h.formData.logConfig.enableSensitiveDataMasking=b),"checked-value":"Y","unchecked-value":"N"},{checked:n(()=>a[87]||(a[87]=[z("启用")])),unchecked:n(()=>a[88]||(a[88]=[z("禁用")])),_:1},8,["value"])]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(M,{label:"脱敏模式",path:"logConfig.maskingPattern"},{default:n(()=>[t(me,{value:h.formData.logConfig.maskingPattern,"onUpdate:value":a[42]||(a[42]=b=>h.formData.logConfig.maskingPattern=b),options:w,placeholder:"选择脱敏模式"},null,8,["value"])]),_:1})]),_:1}),t(O,{span:2},{default:n(()=>[t(M,{label:"敏感字段",path:"logConfig.sensitiveFields"},{default:n(()=>[t(fe,{value:h.formData.logConfig.sensitiveFields,"onUpdate:value":a[43]||(a[43]=b=>h.formData.logConfig.sensitiveFields=b),placeholder:"添加敏感字段"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1})]),_:1})]),_:1},8,["show"])}}}),Sl=ot(xl,[["__scopeId","data-v-2c2ed8fe"]]),Le=to("/gateway/hub0020");async function kl(e){return Le.post("/queryGatewayInstances",e)}async function _l(e){return Le.post("/addGatewayInstance",e)}async function Rl(e){return Le.post("/editGatewayInstance",e)}async function Tl(e,r){return Le.post("/deleteGatewayInstance",{gatewayInstanceId:e,tenantId:r})}async function Dl(e,r,l){return Le.post("/updateHealthStatus",{gatewayInstanceId:e,tenantId:r,healthStatus:l})}async function Pl(e,r){return Le.post("/reloadGatewayInstance",{gatewayInstanceId:e,tenantId:r})}const Me=ao("GatewayInstance");function zl(){const e=Lt(),r=Y([]),l=Y(!1),d=Y({totalInstances:0,onlineInstances:0,offlineInstances:0,totalConfigs:0,activeConfigs:0}),u=no({instanceName:"",instanceDesc:"",bindAddress:"0.0.0.0",httpPort:8080,httpsPort:8443,tlsEnabled:"N",certStorageType:"DATABASE",certFilePath:"",keyFilePath:"",certContent:"",keyContent:"",certChainContent:"",certPassword:"",maxConnections:1e4,readTimeoutMs:3e4,writeTimeoutMs:3e4,idleTimeoutMs:6e4,maxHeaderBytes:1048576,maxWorkers:1e3,keepAliveEnabled:"Y",tcpKeepAliveEnabled:"Y",gracefulShutdownTimeoutMs:3e4,enableHttp2:"Y",tlsVersion:["1.2"],tlsCipherSuites:"",disableGeneralOptionsHandler:"N",logConfigId:"",healthStatus:"Y",noteText:"",activeFlag:"Y",logConfig:{configName:"网关日志",configDesc:"",logFormat:"JSON",recordRequestBody:"N",recordResponseBody:"N",recordHeaders:"Y",maxBodySizeBytes:1048576,outputTargets:"DATABASE",fileConfig:{enabled:!1,filePath:"./logs/gateway.log",maxSize:"100MB",maxBackups:7,maxAge:30},databaseConfig:{enabled:!1,connectionString:"",tableName:"gateway_access_log",batchSize:100},mongoConfig:{enabled:!1,connectionString:"",database:"gateway_logs",collection:"access_log",batchSize:100},elasticsearchConfig:{enabled:!1,endpoints:[],indexName:"gateway-logs",batchSize:100},clickhouseConfig:{enabled:!1,dsn:"",tableName:"gateway_access_log",batchSize:100},enableAsyncLogging:"Y",asyncQueueSize:1e3,asyncFlushIntervalMs:5e3,enableBatchProcessing:"Y",batchSize:100,batchTimeoutMs:1e3,logRetentionDays:30,enableFileRotation:"Y",maxFileSizeMB:100,maxFileCount:10,rotationPattern:"DAILY",enableSensitiveDataMasking:"N",sensitiveFields:["password","token","key","secret"],maskingPattern:"****",bufferSize:65536,flushThreshold:1e3,configPriority:0,activeFlag:"Y",noteText:""}}),f=Y(!1),p=Y(!1),v=Y(""),s=Y(!1),c=async(m="TENANT_001")=>{try{l.value=!0;const i=await kl({tenantId:m}),C=oo(i,[]);r.value=Array.isArray(C)?C:[],g()}catch(i){Me.error("获取网关实例列表失败",i),e.error("获取网关实例列表失败")}finally{l.value=!1}},g=()=>{const m=r.value||[],i=m.length,C=m.filter(P=>P.healthStatus==="Y").length,w=i-C;d.value={totalInstances:i,onlineInstances:C,offlineInstances:w,totalConfigs:0,activeConfigs:0}},y=j(()=>r.value.filter(m=>m.healthStatus==="Y")),R=j(()=>r.value.filter(m=>m.healthStatus==="N")),B=()=>{N(),p.value=!1,f.value=!0},S=m=>{Object.assign(u,{instanceName:m.instanceName||"",instanceDesc:m.instanceDesc||"",bindAddress:m.bindAddress||"0.0.0.0",httpPort:m.httpPort??8080,httpsPort:m.httpsPort??8443,tlsEnabled:m.tlsEnabled||"N",certStorageType:m.certStorageType||"DATABASE",certFilePath:m.certFilePath||"",keyFilePath:m.keyFilePath||"",certContent:m.certContent||"",keyContent:m.keyContent||"",certChainContent:m.certChainContent||"",certPassword:m.certPassword||"",maxConnections:m.maxConnections??1e4,readTimeoutMs:m.readTimeoutMs??3e4,writeTimeoutMs:m.writeTimeoutMs??3e4,idleTimeoutMs:m.idleTimeoutMs??6e4,maxHeaderBytes:m.maxHeaderBytes??1048576,maxWorkers:m.maxWorkers??1e3,keepAliveEnabled:m.keepAliveEnabled||"Y",tcpKeepAliveEnabled:m.tcpKeepAliveEnabled||"Y",gracefulShutdownTimeoutMs:m.gracefulShutdownTimeoutMs??3e4,enableHttp2:m.enableHttp2||"Y",tlsVersion:m.tlsVersion?m.tlsVersion.split(",").filter(i=>i.trim()):["1.2"],tlsCipherSuites:m.tlsCipherSuites||"",disableGeneralOptionsHandler:m.disableGeneralOptionsHandler||"N",logConfigId:m.logConfigId||"",healthStatus:m.healthStatus||"Y",noteText:m.noteText||"",activeFlag:m.activeFlag||"Y",logConfig:m.logConfig?(()=>{try{const i=typeof m.logConfig=="string"?JSON.parse(m.logConfig):m.logConfig;return{configName:i.configName||"网关日志",configDesc:i.configDesc||"",logFormat:i.logFormat||"JSON",recordRequestBody:i.recordRequestBody||"N",recordResponseBody:i.recordResponseBody||"N",recordHeaders:i.recordHeaders||"Y",maxBodySizeBytes:i.maxBodySizeBytes??1048576,outputTargets:i.outputTargets||"DATABASE",fileConfig:i.fileConfig?(()=>{try{return typeof i.fileConfig=="string"?JSON.parse(i.fileConfig):i.fileConfig}catch(C){return console.warn("Failed to parse fileConfig JSON:",C),{enabled:!1,filePath:"./logs/gateway.log",maxSize:"100MB",maxBackups:7,maxAge:30}}})():{enabled:!1,filePath:"./logs/gateway.log",maxSize:"100MB",maxBackups:7,maxAge:30},databaseConfig:i.databaseConfig?(()=>{try{return typeof i.databaseConfig=="string"?JSON.parse(i.databaseConfig):i.databaseConfig}catch(C){return console.warn("Failed to parse databaseConfig JSON:",C),{enabled:!1,connectionString:"",tableName:"gateway_access_log",batchSize:100}}})():{enabled:!1,connectionString:"",tableName:"gateway_access_log",batchSize:100},mongoConfig:i.mongoConfig?(()=>{try{return typeof i.mongoConfig=="string"?JSON.parse(i.mongoConfig):i.mongoConfig}catch(C){return console.warn("Failed to parse mongoConfig JSON:",C),{enabled:!1,connectionString:"",database:"gateway_logs",collection:"access_log",batchSize:100}}})():{enabled:!1,connectionString:"",database:"gateway_logs",collection:"access_log",batchSize:100},elasticsearchConfig:i.elasticsearchConfig?(()=>{try{return typeof i.elasticsearchConfig=="string"?JSON.parse(i.elasticsearchConfig):i.elasticsearchConfig}catch(C){return console.warn("Failed to parse elasticsearchConfig JSON:",C),{enabled:!1,endpoints:[],indexName:"gateway-logs",batchSize:100}}})():{enabled:!1,endpoints:[],indexName:"gateway-logs",batchSize:100},clickhouseConfig:i.clickhouseConfig?(()=>{try{return typeof i.clickhouseConfig=="string"?JSON.parse(i.clickhouseConfig):i.clickhouseConfig}catch(C){return console.warn("Failed to parse clickhouseConfig JSON:",C),{enabled:!1,dsn:"",tableName:"gateway_access_log",batchSize:100}}})():{enabled:!1,dsn:"",tableName:"gateway_access_log",batchSize:100},enableAsyncLogging:i.enableAsyncLogging||"Y",asyncQueueSize:i.asyncQueueSize??1e3,asyncFlushIntervalMs:i.asyncFlushIntervalMs??5e3,enableBatchProcessing:i.enableBatchProcessing||"Y",batchSize:i.batchSize??100,batchTimeoutMs:i.batchTimeoutMs??1e3,logRetentionDays:i.logRetentionDays??30,enableFileRotation:i.enableFileRotation||"Y",maxFileSizeMB:i.maxFileSizeMB??100,maxFileCount:i.maxFileCount??10,rotationPattern:i.rotationPattern||"DAILY",enableSensitiveDataMasking:i.enableSensitiveDataMasking||"N",sensitiveFields:i.sensitiveFields?typeof i.sensitiveFields=="string"?i.sensitiveFields.split(","):i.sensitiveFields:["password","token","key","secret"],maskingPattern:i.maskingPattern||"****",bufferSize:i.bufferSize??65536,flushThreshold:i.flushThreshold??1e3,configPriority:i.configPriority??0,activeFlag:i.activeFlag||"Y",noteText:i.noteText||""}}catch(i){return console.warn("Failed to parse logConfig JSON:",i),{configName:"网关日志",configDesc:"",logFormat:"JSON",recordRequestBody:"N",recordResponseBody:"N",recordHeaders:"Y",maxBodySizeBytes:1048576,outputTargets:"DATABASE",fileConfig:{enabled:!1,filePath:"./logs/gateway.log",maxSize:"100MB",maxBackups:7,maxAge:30},databaseConfig:{enabled:!1,connectionString:"",tableName:"gateway_access_log",batchSize:100},mongoConfig:{enabled:!1,connectionString:"",database:"gateway_logs",collection:"access_log",batchSize:100},elasticsearchConfig:{enabled:!1,endpoints:[],indexName:"gateway-logs",batchSize:100},clickhouseConfig:{enabled:!1,dsn:"",tableName:"gateway_access_log",batchSize:100},enableAsyncLogging:"Y",asyncQueueSize:1e3,asyncFlushIntervalMs:5e3,enableBatchProcessing:"Y",batchSize:100,batchTimeoutMs:1e3,logRetentionDays:30,enableFileRotation:"Y",maxFileSizeMB:100,maxFileCount:10,rotationPattern:"DAILY",enableSensitiveDataMasking:"N",sensitiveFields:["password","token","key","secret"],maskingPattern:"****",bufferSize:65536,flushThreshold:1e3,configPriority:0,activeFlag:"Y",noteText:""}}})():{configName:"",configDesc:"",logFormat:"JSON",recordRequestBody:"N",recordResponseBody:"N",recordHeaders:"N",maxBodySizeBytes:1048576,outputTargets:"DATABASE",fileConfig:{enabled:!1,filePath:"./logs/gateway.log",maxSize:"100MB",maxBackups:7,maxAge:30},databaseConfig:{enabled:!1,connectionString:"",tableName:"gateway_access_log",batchSize:100},mongoConfig:{enabled:!1,connectionString:"",database:"gateway_logs",collection:"access_log",batchSize:100},elasticsearchConfig:{enabled:!1,endpoints:[],indexName:"gateway-logs",batchSize:100},clickhouseConfig:{enabled:!1,dsn:"",tableName:"gateway_access_log",batchSize:100},enableAsyncLogging:"Y",asyncQueueSize:1e4,asyncFlushIntervalMs:5e3,enableBatchProcessing:"Y",batchSize:100,batchTimeoutMs:1e3,logRetentionDays:30,enableFileRotation:"Y",maxFileSizeMB:100,maxFileCount:10,rotationPattern:"DAILY",enableSensitiveDataMasking:"Y",sensitiveFields:["password","token","key","secret"],maskingPattern:"****",bufferSize:65536,flushThreshold:1e3,configPriority:0,activeFlag:"Y",noteText:""}}),v.value=m.gatewayInstanceId,p.value=!0,f.value=!0},F=async()=>{try{s.value=!0;const m="TENANT_001",i={...u,tlsVersion:Array.isArray(u.tlsVersion)?u.tlsVersion.join(","):u.tlsVersion};if(i.logConfig){const w={...i.logConfig};Array.isArray(w.sensitiveFields)&&(w.sensitiveFields=w.sensitiveFields.join(",")),w.fileConfig=JSON.stringify(w.fileConfig),w.databaseConfig=JSON.stringify(w.databaseConfig),w.mongoConfig=JSON.stringify(w.mongoConfig),w.elasticsearchConfig=JSON.stringify(w.elasticsearchConfig),w.clickhouseConfig=JSON.stringify(w.clickhouseConfig),i.logConfig=JSON.stringify(w)}let C;if(p.value?C=await Rl({...i,tenantId:m,gatewayInstanceId:v.value}):C=await _l({...i,tenantId:m}),Ee(C)){const w=Ce(C,p.value?"网关实例更新成功":"网关实例创建成功");e.success(w),f.value=!1,await c(m),g()}else{const w=Ce(C,p.value?"更新失败":"创建失败");e.error(w)}}catch(m){Me.error(p.value?"更新网关实例失败":"创建网关实例失败",m),e.error(p.value?"更新失败":"创建失败")}finally{s.value=!1}},U=async m=>{try{const i=await Tl(m.gatewayInstanceId,m.tenantId);if(Ee(i)){const C=Ce(i,"网关实例删除成功");e.success(C),await c(m.tenantId)}else{const C=Ce(i,"删除失败");e.error(C)}}catch(i){Me.error("删除网关实例失败",i),e.error("删除失败")}},$=async(m,i)=>{try{const C=i==="start"?"Y":"N",w=await Dl(m.gatewayInstanceId,m.tenantId,C);if(Ee(w)){const P=Ce(w,`实例${i==="start"?"启动":"停止"}成功`);e.success(P),await c(m.tenantId)}else{const P=Ce(w,`${i==="start"?"启动":"停止"}失败`);e.error(P)}}catch(C){Me.error(`${i==="start"?"启动":"停止"}实例失败`,C),e.error(`${i==="start"?"启动":"停止"}失败`)}},T=async m=>{try{const i=await Pl(m.gatewayInstanceId,m.tenantId);if(Ee(i)){const C=Ce(i,"网关重载成功");e.success(C),await c(m.tenantId)}else{const C=Ce(i,"网关重载失败");e.error(C)}}catch(i){Me.error("网关重载失败",i),e.error("网关重载失败")}},N=()=>{Object.assign(u,{instanceName:"",instanceDesc:"",bindAddress:"0.0.0.0",httpPort:8080,httpsPort:8443,tlsEnabled:"N",certStorageType:"DATABASE",certFilePath:"",keyFilePath:"",certContent:"",keyContent:"",certChainContent:"",certPassword:"",maxConnections:1e4,readTimeoutMs:3e4,writeTimeoutMs:3e4,idleTimeoutMs:6e4,maxHeaderBytes:1048576,maxWorkers:1e3,keepAliveEnabled:"Y",tcpKeepAliveEnabled:"Y",gracefulShutdownTimeoutMs:3e4,enableHttp2:"Y",tlsVersion:["1.2"],tlsCipherSuites:"",disableGeneralOptionsHandler:"N",logConfigId:"",healthStatus:"Y",noteText:"",activeFlag:"Y",logConfig:{configName:"网关日志",configDesc:"",logFormat:"JSON",recordRequestBody:"N",recordResponseBody:"N",recordHeaders:"Y",maxBodySizeBytes:1048576,outputTargets:"DATABASE",fileConfig:{enabled:!1,filePath:"./logs/gateway.log",maxSize:"100MB",maxBackups:7,maxAge:30},databaseConfig:{enabled:!1,connectionString:"",tableName:"gateway_access_log",batchSize:100},mongoConfig:{enabled:!1,connectionString:"",database:"gateway_logs",collection:"access_log",batchSize:100},elasticsearchConfig:{enabled:!1,endpoints:[],indexName:"gateway-logs",batchSize:100},clickhouseConfig:{enabled:!1,dsn:"",tableName:"gateway_access_log",batchSize:100},enableAsyncLogging:"Y",asyncQueueSize:1e3,asyncFlushIntervalMs:5e3,enableBatchProcessing:"Y",batchSize:100,batchTimeoutMs:1e3,logRetentionDays:30,enableFileRotation:"Y",maxFileSizeMB:100,maxFileCount:10,rotationPattern:"DAILY",enableSensitiveDataMasking:"N",sensitiveFields:["password","token","key","secret"],maskingPattern:"****",bufferSize:65536,flushThreshold:1e3,configPriority:0,activeFlag:"Y",noteText:""}}),v.value=""};return Xe(()=>{c()}),{instances:r,loading:l,statistics:d,onlineInstances:y,offlineInstances:R,instanceForm:u,showInstanceModal:f,isEditing:p,submitting:s,fetchInstances:c,showCreateModal:B,showEditModal:S,submitForm:F,deleteInstance:U,toggleInstanceStatus:$,reloadInstance:T,resetForm:N}}const Il={class:"gateway-instance-manager"},Bl={class:"page-header"},Fl={class:"title"},Ol={class:"actions"},Ll={class:"stat-content"},Ml={class:"stat-number"},Al={class:"stat-icon"},Nl={class:"stat-content"},$l={class:"stat-number"},El={class:"stat-icon"},Ul={class:"stat-content"},Hl={class:"stat-number"},jl={class:"stat-icon"},Yl={style:{padding:"16px"}},Vl={style:{padding:"16px"}},Wl={style:{padding:"16px"}},ql={style:{padding:"16px"}},Gl=ne({__name:"GatewayInstanceManager",setup(e){const{instances:r,loading:l,statistics:d,instanceForm:u,showInstanceModal:f,isEditing:p,submitting:v,fetchInstances:s,showCreateModal:c,showEditModal:g,submitForm:y,deleteInstance:R,toggleInstanceStatus:B,reloadInstance:S}=zl(),F=lo(),U=Y(!1),$=Y(""),T=w=>{F.warning({title:"确认删除",content:`确定要删除实例"${w.instanceName}"吗？此操作不可恢复。`,positiveText:"确定删除",negativeText:"取消",onPositiveClick:()=>{R(w)}})},N=w=>{F.info({title:"确认启动",content:`确定要启动实例"${w.instanceName}"吗？`,positiveText:"确定启动",negativeText:"取消",onPositiveClick:()=>{B(w,"start")}})},m=w=>{F.warning({title:"确认停止",content:`确定要停止实例"${w.instanceName}"吗？停止后将无法处理请求。`,positiveText:"确定停止",negativeText:"取消",onPositiveClick:()=>{B(w,"stop")}})},i=w=>{$.value=w.gatewayInstanceId,U.value=!0},C=w=>{F.info({title:"确认网关重载",content:`确定要对实例"${w.instanceName}"执行网关重载操作吗？`,positiveText:"确定重载",negativeText:"取消",onPositiveClick:()=>{S(w)}})};return(w,P)=>{const k=Se,V=ve,E=Mt,H=Yt,K=jt,ae=$t,Z=Vt,W=Ve,le=Nt,re=At,ge=Ut;return ke(),Pe("div",Il,[t(E,null,{header:n(()=>[I("div",Bl,[I("div",Fl,[t(k,{size:"24",class:"icon"},{default:n(()=>[t(A(Je))]),_:1}),P[3]||(P[3]=I("h2",{class:"header-title"},"网关实例配置中心",-1))]),I("div",Ol,[t(V,{type:"primary",onClick:A(c)},{icon:n(()=>[t(k,null,{default:n(()=>[t(A(Cn))]),_:1})]),default:n(()=>[P[4]||(P[4]=z(" 新建实例 "))]),_:1},8,["onClick"])])])]),default:n(()=>[t(K,{cols:3,"x-gap":16,"y-gap":16,class:"stats-grid"},{default:n(()=>[t(H,null,{default:n(()=>[t(E,{class:"stat-card"},{default:n(()=>[I("div",Ll,[I("div",Ml,Te(A(d).totalInstances),1),P[5]||(P[5]=I("div",{class:"stat-label"},"总实例数",-1))]),I("div",Al,[t(k,{size:"32",color:"#18a058"},{default:n(()=>[t(A(Je))]),_:1})])]),_:1})]),_:1}),t(H,null,{default:n(()=>[t(E,{class:"stat-card"},{default:n(()=>[I("div",Nl,[I("div",$l,Te(A(d).onlineInstances),1),P[6]||(P[6]=I("div",{class:"stat-label"},"在线实例",-1))]),I("div",El,[t(k,{size:"32",color:"#2080f0"},{default:n(()=>[t(A(St))]),_:1})])]),_:1})]),_:1}),t(H,null,{default:n(()=>[t(E,{class:"stat-card"},{default:n(()=>[I("div",Ul,[I("div",Hl,Te(A(d).offlineInstances),1),P[7]||(P[7]=I("div",{class:"stat-label"},"离线实例",-1))]),I("div",jl,[t(k,{size:"32",color:"#d03050"},{default:n(()=>[t(A(kt))]),_:1})])]),_:1})]),_:1})]),_:1}),t(ae),t(ul,{instances:A(r),loading:A(l),onCreate:A(c),onEdit:A(g),onDelete:T,onStart:N,onStop:m,onConfig:i,onReload:C,onRefresh:A(s)},null,8,["instances","loading","onCreate","onEdit","onRefresh"]),t(Sl,{show:A(f),"onUpdate:show":P[0]||(P[0]=h=>Et(f)?f.value=h:null),"is-editing":A(p),"form-data":A(u),submitting:A(v),onSubmit:A(y)},null,8,["show","is-editing","form-data","submitting","onSubmit"]),t(ge,{show:U.value,"onUpdate:show":P[2]||(P[2]=h=>U.value=h),"mask-closable":!1},{default:n(()=>[t(E,{style:{width:"1400px"},title:"实例配置管理",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{"header-extra":n(()=>[t(V,{quaternary:"",circle:"",onClick:P[1]||(P[1]=h=>U.value=!1)},{icon:n(()=>[t(k,null,{default:n(()=>[t(A(_t))]),_:1})]),_:1})]),default:n(()=>[t(re,{type:"line",animated:""},{default:n(()=>[t(le,{name:"security",tab:"安全配置"},{default:n(()=>[I("div",Yl,[t(W,{vertical:"",size:"large"},{default:n(()=>[t(Z,{type:"info"},{default:n(()=>P[8]||(P[8]=[z(" 配置实例级的安全策略，包括IP访问控制、User-Agent过滤、API访问控制等。 ")])),_:1}),t(A(fo),{"gateway-instance-id":$.value},null,8,["gateway-instance-id"])]),_:1})])]),_:1}),t(le,{name:"cors",tab:"跨域配置"},{default:n(()=>[I("div",Vl,[t(W,{vertical:"",size:"large"},{default:n(()=>[t(Z,{type:"info"},{default:n(()=>P[9]||(P[9]=[z(" 配置跨域资源共享(CORS)策略，允许的源、方法、头信息等。 ")])),_:1}),t(go,{"gateway-instance-id":$.value},null,8,["gateway-instance-id"])]),_:1})])]),_:1}),t(le,{name:"auth",tab:"认证配置"},{default:n(()=>[I("div",Wl,[t(W,{vertical:"",size:"large"},{default:n(()=>[t(Z,{type:"info"},{default:n(()=>P[10]||(P[10]=[z(" 配置认证策略，支持JWT、API Key、OAuth2.0、Basic Auth等认证方式。 ")])),_:1}),t(po,{"gateway-instance-id":$.value},null,8,["gateway-instance-id"])]),_:1})])]),_:1}),t(le,{name:"rateLimit",tab:"限流配置"},{default:n(()=>[I("div",ql,[t(W,{vertical:"",size:"large"},{default:n(()=>[t(Z,{type:"info"},{default:n(()=>P[11]||(P[11]=[z(" 配置流量控制策略，包括全局限流、IP限流、用户限流等。 ")])),_:1}),t(ho,{"gateway-instance-id":$.value},null,8,["gateway-instance-id"])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])]),_:1})])}}}),lr=ot(Gl,[["__scopeId","data-v-0a528be8"]]);export{lr as default};
