import{d as ce,c as ve,o as W,a as M,$ as De,b as _e,r as S,g as Q,f as ye,a0 as z,a2 as B,a1 as de,R as ue,q as Z,w as a,n as e,cr as Ie,co as Ue,m as t,B as he,M as Pe,t as le,A as Ee,E as be,bR as pe,J as k,cz as Ce,H as Re,I as j,x as ne,_ as ke,cT as ze,h as He,cD as Be,a8 as c,W as Oe,aM as te,v as K,a3 as ae,cQ as Ge,cE as Me,V as Le,C as Fe,cU as ge,Y as $e,U as Ae}from"./index-Bm8WTrgo.js";import{_ as Ye}from"./Grid-BszSwIPR.js";import{_ as Ve}from"./FormItemGridItem-B5vUm4-s.js";import{_ as we,b as qe,a as We}from"./RadioGroup-DeGnoaYt.js";import{N as Ke}from"./InputNumber-Da0ADIUs.js";import{u as je}from"./usePagination-CRp--1tI.js";import{C as Se}from"./CheckmarkCircleOutline-zm_tlaJ3.js";import{C as Te}from"./CloseCircleOutline-DFAgdDO-.js";import{C as Je}from"./CreateOutline-B_iFUquS.js";import{T as xe}from"./TrashOutline-lFSebtJX.js";import{R as me}from"./RefreshOutline-BMOJJPWL.js";import{A as Xe}from"./AddOutline-Crq49hC7.js";import{_ as Ze}from"./DataTable-C88L71Mp.js";import"./index-C9U1NGvg.js";const Qe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},et=ce({name:"EyeOutline",render:function(s,d){return W(),ve("svg",Qe,d[0]||(d[0]=[M("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),M("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),U=De("/gateway/hub0040"),tt=async l=>U.post("/queryServiceGroups",l),at=async l=>U.post("/getServiceGroup",{serviceGroupId:l}),ot=async l=>U.post("/createServiceGroup",l),lt=async l=>U.post("/updateServiceGroup",l),nt=async l=>U.post("/deleteServiceGroup",{serviceGroupId:l}),st=async l=>U.post("/batchDeleteServiceGroups",{serviceGroupIds:l}),rt=async l=>U.post("/enableServiceGroup",{serviceGroupId:l}),it=async l=>U.post("/disableServiceGroup",{serviceGroupId:l}),ut=async l=>U.post("/batchEnableServiceGroups",{serviceGroupIds:l}),ct=async l=>U.post("/batchDisableServiceGroups",{serviceGroupIds:l}),dt=async l=>U.post("/searchUsers",{keyword:l}),pt=()=>({groupName:[{required:!0,message:"请输入命名空间名称",trigger:["input","blur"]},{min:2,max:50,message:"命名空间名称长度应在2-50个字符之间",trigger:["input","blur"]},{pattern:/^[a-zA-Z][a-zA-Z0-9_-]*$/,message:"命名空间名称必须以字母开头，只能包含字母、数字、下划线和连字符",trigger:["input","blur"]}],groupType:[{required:!0,message:"请选择命名空间类型",trigger:["change","blur"]}],groupDescription:[{max:500,message:"描述长度不能超过500个字符",trigger:["input","blur"]}],defaultProtocolType:[{required:!0,message:"请选择默认协议类型",trigger:["change","blur"]}],defaultLoadBalanceStrategy:[{required:!0,message:"请选择默认负载均衡策略",trigger:["change","blur"]}],defaultHealthCheckUrl:[{required:!0,message:"请输入默认健康检查URL",trigger:["input","blur"]},{pattern:/^\/.*$/,message:"健康检查URL必须以/开头",trigger:["input","blur"]}],defaultHealthCheckIntervalSeconds:[{required:!0,type:"number",min:5,max:300,message:"健康检查间隔应在5-300秒之间",trigger:["input","blur"]}],noteText:[{max:500,message:"备注长度不能超过500个字符",trigger:["input","blur"]}]}),Ne=[{label:"业务类型",value:"BUSINESS",description:"用于业务相关的服务分组"},{label:"系统类型",value:"SYSTEM",description:"用于系统基础设施相关的服务分组"},{label:"测试类型",value:"TEST",description:"用于测试环境的服务分组"}],gt=[{label:"HTTP",value:"HTTP",description:"HTTP协议"},{label:"HTTPS",value:"HTTPS",description:"HTTPS协议"},{label:"TCP",value:"TCP",description:"TCP协议"},{label:"UDP",value:"UDP",description:"UDP协议"}],mt=[{label:"轮询",value:"ROUND_ROBIN",description:"按顺序轮询所有可用实例"},{label:"加权轮询",value:"WEIGHTED_ROUND_ROBIN",description:"根据权重进行轮询"},{label:"最少连接",value:"LEAST_CONNECTIONS",description:"选择连接数最少的实例"},{label:"随机",value:"RANDOM",description:"随机选择可用实例"},{label:"IP哈希",value:"IP_HASH",description:"根据客户端IP进行哈希选择"}],ft=[{label:"启用",value:"Y",description:"启用访问控制，只有授权用户可以访问"},{label:"禁用",value:"N",description:"禁用访问控制，所有用户都可以访问"}],vt=[{label:"活动",value:"Y",description:"命名空间处于活动状态"},{label:"非活动",value:"N",description:"命名空间处于非活动状态"}],oe=()=>({groupName:"",groupDescription:"",groupType:"BUSINESS",adminUserIds:[],readUserIds:[],accessControlEnabled:"N",defaultProtocolType:"HTTP",defaultLoadBalanceStrategy:"ROUND_ROBIN",defaultHealthCheckUrl:"/health",defaultHealthCheckIntervalSeconds:30,noteText:"",extProperty:{}}),fe=()=>({groupName:"",groupType:void 0,ownerUserId:"",activeFlag:void 0,accessControlEnabled:void 0}),_t=()=>{const l=_e(),s=S(!1),d=S("create"),b=Q(()=>({create:"创建命名空间",edit:"编辑命名空间",view:"查看命名空间详情",permission:"权限管理",config:"默认配置"})[d.value]),u=ye(oe()),x=pt(),C=S(),w=S(null),i=S(!1),P=S(!1),g=Q(()=>d.value==="view"),L=()=>{d.value="create",w.value=null,Object.assign(u,oe()),s.value=!0},F=async v=>{d.value="edit",w.value=v,await E(v.serviceGroupId),s.value=!0},h=async v=>{d.value="view",w.value=v,await E(v.serviceGroupId),s.value=!0},E=async v=>{try{i.value=!0;const m=await at(v);if(z(m)){const p=de(m,{});if(p.serviceGroupId){const T=r=>Array.isArray(r)?r:typeof r=="string"&&r?r.split(",").filter(Boolean):[],R=T(p.adminUserIds),Y=T(p.readUserIds);Object.assign(u,{groupName:p.groupName||"",groupDescription:p.groupDescription||"",groupType:p.groupType||"BUSINESS",adminUserIds:R,readUserIds:Y,accessControlEnabled:p.accessControlEnabled||"N",defaultProtocolType:p.defaultProtocolType||"HTTP",defaultLoadBalanceStrategy:p.defaultLoadBalanceStrategy||"ROUND_ROBIN",defaultHealthCheckUrl:p.defaultHealthCheckUrl||"/health",defaultHealthCheckIntervalSeconds:p.defaultHealthCheckIntervalSeconds||30,noteText:p.noteText||"",extProperty:p.extProperty||{}}),console.log("加载的命名空间数据:",p),console.log("表单数据:",u)}else l.error("记录数据格式错误"),console.error("无效的记录数据:",p)}else l.error(B(m,"加载详情失败"))}catch(m){console.error("加载记录详情失败:",m),l.error("加载详情失败，请稍后重试")}finally{i.value=!1}},O=()=>new Promise(v=>{var m;(m=C.value)==null||m.validate(p=>{v(!p)})}),$=async()=>{if(g.value)return H(),!0;if(!await O())return!1;try{P.value=!0;let m;if(d.value==="create")m=await ot(u);else{const p={...w.value,groupName:u.groupName,groupDescription:u.groupDescription,groupType:u.groupType,adminUserIds:u.adminUserIds,readUserIds:u.readUserIds,accessControlEnabled:u.accessControlEnabled,defaultProtocolType:u.defaultProtocolType,defaultLoadBalanceStrategy:u.defaultLoadBalanceStrategy,defaultHealthCheckUrl:u.defaultHealthCheckUrl,defaultHealthCheckIntervalSeconds:u.defaultHealthCheckIntervalSeconds,noteText:u.noteText,extProperty:u.extProperty};m=await lt(p)}return z(m)?(l.success(d.value==="create"?"创建成功":"更新成功"),H(),!0):(l.error(B(m,"操作失败")),!1)}catch(m){return console.error("提交表单失败:",m),l.error("操作失败，请稍后重试"),!1}finally{P.value=!1}},H=()=>{s.value=!1,w.value=null,Object.assign(u,oe()),setTimeout(()=>{var v;(v=C.value)==null||v.restoreValidation()},100)};return{dialogVisible:s,dialogType:d,dialogTitle:b,formData:u,formRules:x,formRef:C,currentRecord:w,loading:i,submitting:P,readonly:g,openCreateDialog:L,openEditDialog:F,openViewDialog:h,loadRecordDetail:E,validateForm:O,handleSubmit:$,handleCancel:H,handleReset:()=>{var v;d.value==="create"?Object.assign(u,oe()):w.value&&E(w.value.serviceGroupId),(v=C.value)==null||v.restoreValidation()}}},yt=ce({__name:"NamespaceDialog",props:{visible:{type:Boolean}},emits:["update:visible","success"],setup(l,{expose:s,emit:d}){const b=l,u=d,{dialogVisible:x,dialogType:C,dialogTitle:w,formData:i,formRules:P,formRef:g,loading:L,submitting:F,readonly:h,handleSubmit:E,handleCancel:O,handleReset:$,openCreateDialog:H,openEditDialog:A,openViewDialog:v}=_t(),m=S([]),p=S(!1);ue(()=>b.visible,r=>{x.value=r},{immediate:!0}),ue(x,r=>{u("update:visible",r)});const T=async r=>{if(!r.trim()){m.value=[];return}try{p.value=!0;const o=await dt(r);if(z(o)){const _=de(o,[]);m.value=_.map(n=>({label:`${n.realName} (${n.userName})`,value:n.userId}))}}catch(o){console.error("搜索用户失败:",o),m.value=[]}finally{p.value=!1}},R=async()=>{await E()&&u("success")},Y=()=>{O()};return s({openCreateDialog:H,openEditDialog:A,openViewDialog:v}),(r,o)=>{const _=be,n=Ve,f=we,N=We,ee=pe,V=qe,q=Ce,I=Ye,G=Ee,se=Ke,J=Pe,re=he,ie=Re,X=j,D=Ue;return W(),Z(D,{show:e(x),"onUpdate:show":o[11]||(o[11]=y=>Ie(x)?x.value=y:null),title:e(w),preset:"dialog",style:{width:"800px"},closable:!0,"mask-closable":!1,"show-icon":!1},{action:a(()=>[t(ee,null,{default:a(()=>[t(X,{onClick:Y},{default:a(()=>[k(ne(e(h)?"关闭":"取消"),1)]),_:1}),e(h)?le("",!0):(W(),Z(X,{key:0,onClick:e($)},{default:a(()=>o[17]||(o[17]=[k("重置")])),_:1},8,["onClick"])),e(h)?le("",!0):(W(),Z(X,{key:1,type:"primary",loading:e(F),onClick:R},{default:a(()=>[k(ne(e(C)==="create"?"创建":"保存"),1)]),_:1},8,["loading"]))]),_:1})]),default:a(()=>[t(ie,{show:e(L)},{default:a(()=>[t(re,{ref_key:"formRef",ref:g,model:e(i),rules:e(P),"label-width":120,"label-align":"left",size:"medium",disabled:e(h)},{default:a(()=>[t(J,{type:"line",size:"medium"},{default:a(()=>[t(G,{name:"basic",tab:"基本信息"},{default:a(()=>[t(I,{cols:24,"x-gap":16,"y-gap":8},{default:a(()=>[t(n,{span:12,label:"命名空间名称",path:"groupName"},{default:a(()=>[t(_,{value:e(i).groupName,"onUpdate:value":o[0]||(o[0]=y=>e(i).groupName=y),placeholder:"请输入命名空间名称",maxlength:50,"show-count":""},null,8,["value"])]),_:1}),t(n,{span:12,label:"类型",path:"groupType"},{default:a(()=>[t(f,{value:e(i).groupType,"onUpdate:value":o[1]||(o[1]=y=>e(i).groupType=y),options:e(Ne),placeholder:"请选择类型"},null,8,["value","options"])]),_:1}),t(n,{span:24,label:"描述",path:"groupDescription"},{default:a(()=>[t(_,{value:e(i).groupDescription,"onUpdate:value":o[2]||(o[2]=y=>e(i).groupDescription=y),type:"textarea",placeholder:"请输入描述信息",maxlength:500,"show-count":"",rows:3},null,8,["value"])]),_:1}),t(n,{span:12,label:"访问控制",path:"accessControlEnabled"},{feedback:a(()=>[t(q,{depth:"3",style:{"font-size":"12px"}},{default:a(()=>o[14]||(o[14]=[k(" 启用后只有授权用户可以访问此命名空间 ")])),_:1})]),default:a(()=>[t(V,{value:e(i).accessControlEnabled,"onUpdate:value":o[3]||(o[3]=y=>e(i).accessControlEnabled=y)},{default:a(()=>[t(ee,null,{default:a(()=>[t(N,{value:"N"},{default:a(()=>o[12]||(o[12]=[k("禁用")])),_:1}),t(N,{value:"Y"},{default:a(()=>o[13]||(o[13]=[k("启用")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(G,{name:"config",tab:"默认配置"},{default:a(()=>[t(I,{cols:24,"x-gap":16,"y-gap":8},{default:a(()=>[t(n,{span:12,label:"默认协议",path:"defaultProtocolType"},{default:a(()=>[t(f,{value:e(i).defaultProtocolType,"onUpdate:value":o[4]||(o[4]=y=>e(i).defaultProtocolType=y),options:e(gt),placeholder:"请选择默认协议"},null,8,["value","options"])]),_:1}),t(n,{span:12,label:"负载均衡策略",path:"defaultLoadBalanceStrategy"},{default:a(()=>[t(f,{value:e(i).defaultLoadBalanceStrategy,"onUpdate:value":o[5]||(o[5]=y=>e(i).defaultLoadBalanceStrategy=y),options:e(mt),placeholder:"请选择负载均衡策略"},null,8,["value","options"])]),_:1}),t(n,{span:12,label:"健康检查URL",path:"defaultHealthCheckUrl"},{default:a(()=>[t(_,{value:e(i).defaultHealthCheckUrl,"onUpdate:value":o[6]||(o[6]=y=>e(i).defaultHealthCheckUrl=y),placeholder:"请输入健康检查URL"},null,8,["value"])]),_:1}),t(n,{span:12,label:"检查间隔(秒)",path:"defaultHealthCheckIntervalSeconds"},{default:a(()=>[t(se,{value:e(i).defaultHealthCheckIntervalSeconds,"onUpdate:value":o[7]||(o[7]=y=>e(i).defaultHealthCheckIntervalSeconds=y),placeholder:"请输入检查间隔",min:5,max:300,step:5,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i).accessControlEnabled==="Y"?(W(),Z(G,{key:0,name:"permission",tab:"权限配置"},{default:a(()=>[t(I,{cols:24,"x-gap":16,"y-gap":8},{default:a(()=>[t(n,{span:24,label:"管理员用户"},{feedback:a(()=>[t(q,{depth:"3",style:{"font-size":"12px"}},{default:a(()=>o[15]||(o[15]=[k(" 管理员拥有命名空间的完全控制权限 ")])),_:1})]),default:a(()=>[t(f,{value:e(i).adminUserIds,"onUpdate:value":o[8]||(o[8]=y=>e(i).adminUserIds=y),multiple:"",filterable:"",remote:"",options:m.value,loading:p.value,placeholder:"请选择管理员用户","on-search":T,clearable:""},null,8,["value","options","loading"])]),_:1}),t(n,{span:24,label:"只读用户"},{feedback:a(()=>[t(q,{depth:"3",style:{"font-size":"12px"}},{default:a(()=>o[16]||(o[16]=[k(" 只读用户仅能查看命名空间信息，无法修改 ")])),_:1})]),default:a(()=>[t(f,{value:e(i).readUserIds,"onUpdate:value":o[9]||(o[9]=y=>e(i).readUserIds=y),multiple:"",filterable:"",remote:"",options:m.value,loading:p.value,placeholder:"请选择只读用户","on-search":T,clearable:""},null,8,["value","options","loading"])]),_:1})]),_:1})]),_:1})):le("",!0),t(G,{name:"other",tab:"其他配置"},{default:a(()=>[t(I,{cols:24,"x-gap":16,"y-gap":8},{default:a(()=>[t(n,{span:24,label:"备注信息",path:"noteText"},{default:a(()=>[t(_,{value:e(i).noteText,"onUpdate:value":o[10]||(o[10]=y=>e(i).noteText=y),type:"textarea",placeholder:"请输入备注信息",maxlength:500,"show-count":"",rows:4},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","disabled"])]),_:1},8,["show"])]),_:1},8,["show","title"])}}}),ht=ke(yt,[["__scopeId","data-v-3a4d1ef4"]]),bt=()=>{const l=_e(),s=ze(),d=S(!1),b=S([]),u=S(0),x=ye(fe()),{naiveConfig:C,queryParams:w,setTotal:i,resetPagination:P}=je({initialPage:1,initialPageSize:20,onPageChange:r=>{h()},onPageSizeChange:(r,o)=>{h()}}),g=S([]),L=Q(()=>g.value.length>0),F=Q(()=>g.value.length),h=async()=>{try{d.value=!0;const r={...x,pageNum:w.value.pageIndex,pageSize:w.value.pageSize},o=await tt(r);if(z(o)){const _=de(o,[]);b.value=_||[];let n=0;try{n=Be(o).totalCount||0}catch(f){console.warn("解析分页信息失败:",f)}u.value=n,i(n)}else l.error(B(o,"加载数据失败")),b.value=[],u.value=0,i(0)}catch(r){console.error("加载表格数据失败:",r),l.error("加载数据失败，请稍后重试"),b.value=[],u.value=0,i(0)}finally{d.value=!1}},E=()=>{P(),h()},O=()=>{Object.assign(x,fe()),P(),h()},$=()=>{h()},H=r=>{g.value=r},A=async r=>{try{const o=await rt(r);z(o)?(l.success("启用成功"),h()):l.error(B(o,"启用失败"))}catch(o){console.error("启用命名空间失败:",o),l.error("启用失败，请稍后重试")}},v=async r=>{try{const o=await it(r);z(o)?(l.success("禁用成功"),h()):l.error(B(o,"禁用失败"))}catch(o){console.error("禁用命名空间失败:",o),l.error("禁用失败，请稍后重试")}},m=async(r,o)=>new Promise((_,n)=>{s.warning({title:"确认删除",content:`确定要删除命名空间 "${o}" 吗？此操作不可恢复。`,positiveText:"确定删除",negativeText:"取消",onPositiveClick:async()=>{try{const f=await nt(r);if(z(f))l.success("删除成功"),h(),_();else{const N=B(f,"删除失败");l.error(N),n(new Error(N))}}catch(f){console.error("删除命名空间失败:",f),l.error("删除失败，请稍后重试"),n(f)}},onNegativeClick:()=>{n(new Error("用户取消"))}})}),p=async()=>{if(g.value.length===0){l.warning("请选择要启用的命名空间");return}try{const r=await ut(g.value);z(r)?(l.success(`成功启用 ${g.value.length} 个命名空间`),g.value=[],h()):l.error(B(r,"批量启用失败"))}catch(r){console.error("批量启用失败:",r),l.error("批量启用失败，请稍后重试")}},T=async()=>{if(g.value.length===0){l.warning("请选择要禁用的命名空间");return}try{const r=await ct(g.value);z(r)?(l.success(`成功禁用 ${g.value.length} 个命名空间`),g.value=[],h()):l.error(B(r,"批量禁用失败"))}catch(r){console.error("批量禁用失败:",r),l.error("批量禁用失败，请稍后重试")}},R=async()=>{if(g.value.length===0){l.warning("请选择要删除的命名空间");return}return new Promise((r,o)=>{s.warning({title:"确认批量删除",content:`确定要删除选中的 ${g.value.length} 个命名空间吗？此操作不可恢复。`,positiveText:"确定删除",negativeText:"取消",onPositiveClick:async()=>{try{const _=await st(g.value);if(z(_))l.success(`成功删除 ${g.value.length} 个命名空间`),g.value=[],h(),r();else{const n=B(_,"批量删除失败");l.error(n),o(new Error(n))}}catch(_){console.error("批量删除失败:",_),l.error("批量删除失败，请稍后重试"),o(_)}},onNegativeClick:()=>{o(new Error("用户取消"))}})})},Y=async(r,o)=>{switch(r){case"enable":await A(o.serviceGroupId);break;case"disable":await v(o.serviceGroupId);break;case"delete":await m(o.serviceGroupId,o.groupName);break}};return He(()=>{h()}),ue(u,r=>{i(r)}),{loading:d,tableData:b,searchForm:x,naiveConfig:C,checkedRowKeys:g,total:u,hasSelection:L,selectedCount:F,loadTableData:h,handleSearch:E,handleReset:O,handleRefresh:$,handleCheck:H,handleEnable:A,handleDisable:v,handleDelete:m,handleBatchEnable:p,handleBatchDisable:T,handleBatchDelete:R,handleTableAction:Y}},Ct=l=>[{type:"selection",width:50,fixed:"left"},{title:"分组ID",key:"serviceGroupId",width:180,ellipsis:{tooltip:!0},render:s=>c("span",{class:"text-secondary cursor-pointer",style:{fontFamily:"monospace",fontSize:"12px"}},s.serviceGroupId)},{title:"命名空间名称",key:"groupName",width:160,fixed:"left",ellipsis:{tooltip:!0},render:s=>c("span",{class:s.activeFlag==="Y"?"text-success font-bold":"text-error font-bold"},s.groupName)},{title:"类型",key:"groupType",width:100,render:s=>{const b={BUSINESS:{text:"业务",color:"success"},SYSTEM:{text:"系统",color:"warning"},TEST:{text:"测试",color:"info"}}[s.groupType];return c(te,{type:b.color,size:"small"},()=>b.text)}},{title:"描述",key:"groupDescription",width:200,ellipsis:{tooltip:!0},render:s=>s.groupDescription?c("span",{class:"text-default"},s.groupDescription):c("span",{class:"text-placeholder"},"-")},{title:"所有者",key:"ownerUserName",width:100,render:s=>c("span",{class:"text-default"},s.ownerUserName||s.ownerUserId||"-")},{title:"访问控制",key:"accessControlEnabled",width:90,render:s=>c(te,{type:s.accessControlEnabled==="Y"?"success":"default",size:"small"},()=>s.accessControlEnabled==="Y"?"已启用":"未启用")},{title:"默认协议",key:"defaultProtocolType",width:90,render:s=>c(te,{type:"info",size:"small"},()=>s.defaultProtocolType)},{title:"负载均衡",key:"defaultLoadBalanceStrategy",width:120,ellipsis:{tooltip:!0},render:s=>({ROUND_ROBIN:"轮询",WEIGHTED_ROUND_ROBIN:"加权轮询",LEAST_CONNECTIONS:"最少连接",RANDOM:"随机",IP_HASH:"IP哈希"})[s.defaultLoadBalanceStrategy]||s.defaultLoadBalanceStrategy},{title:"健康检查",key:"defaultHealthCheckUrl",width:130,ellipsis:{tooltip:!0},render:s=>c("div",[c("div",{style:{fontSize:"12px"}},s.defaultHealthCheckUrl),c("div",{style:{fontSize:"11px",color:"#999",marginTop:"2px"}},`${s.defaultHealthCheckIntervalSeconds}s`)])},{title:"服务数",key:"serviceCount",width:80,render:s=>{var d;return c("span",{class:"text-primary font-bold"},((d=s.serviceCount)==null?void 0:d.toString())||"0")}},{title:"实例数",key:"instanceCount",width:80,render:s=>{var d;return c("span",{class:"text-success font-bold"},((d=s.instanceCount)==null?void 0:d.toString())||"0")}},{title:"状态",key:"activeFlag",width:80,render:s=>c(te,{type:s.activeFlag==="Y"?"success":"error",size:"small"},{icon:()=>c(K,{component:s.activeFlag==="Y"?Se:Te}),default:()=>s.activeFlag==="Y"?"活动":"非活动"})},{title:"创建时间",key:"addTime",width:140,render:s=>Oe(s.addTime,"YYYY-MM-DD HH:mm")},{title:"创建人",key:"addWhoName",width:90,render:s=>c("span",{class:"text-default"},s.addWhoName||s.addWho||"-")},{title:"操作",key:"actions",width:260,fixed:"right",render:s=>c(pe,{size:"small"},()=>[c(ae,{trigger:"hover"},{trigger:()=>c(j,{size:"small",type:"info",secondary:!0,onClick:()=>l("view",s)},{icon:()=>c(K,{component:et})}),default:()=>"查看详情"}),c(ae,{trigger:"hover"},{trigger:()=>c(j,{size:"small",type:"primary",secondary:!0,onClick:()=>l("edit",s)},{icon:()=>c(K,{component:Je})}),default:()=>"编辑"}),c(ae,{trigger:"hover"},{trigger:()=>c(j,{size:"small",type:"default",secondary:!0,onClick:()=>l("config",s)},{icon:()=>c(K,{component:Ge})}),default:()=>"默认配置"}),c(Me,{size:"small"},()=>[c(ae,{trigger:"hover"},{trigger:()=>c(j,{type:"error",secondary:!0,onClick:()=>l("delete",s)},{icon:()=>c(K,{component:xe})}),default:()=>"删除命名空间"})])])}],kt=l=>({columns:Q(()=>Ct(l)),tableConfig:{bordered:!1,striped:!0,size:"medium",scrollX:2e3,maxHeight:600,virtualScroll:!0,rowKey:u=>u.serviceGroupId},emptyConfig:{description:"暂无命名空间数据",showDescription:!0,showIcon:!0,size:"medium"}}),wt={class:"namespace-management"},St={class:"search-header"},Tt={class:"toolbar-content"},xt={class:"toolbar-left"},Nt={class:"toolbar-right"},Dt={class:"table-header"},It=ce({__name:"NamespaceManagement",setup(l){const s=S(),d=S(),b=S(!1),{loading:u,tableData:x,searchForm:C,naiveConfig:w,checkedRowKeys:i,total:P,hasSelection:g,selectedCount:L,loadTableData:F,handleSearch:h,handleReset:E,handleRefresh:O,handleCheck:$,handleBatchEnable:H,handleBatchDisable:A,handleBatchDelete:v,handleTableAction:m}=bt(),{columns:p,tableConfig:T,emptyConfig:R}=kt(Y);async function Y(_,n){var f,N;switch(_){case"view":await((f=s.value)==null?void 0:f.openViewDialog(n)),b.value=!0;break;case"edit":await((N=s.value)==null?void 0:N.openEditDialog(n)),b.value=!0;break;case"config":console.log("配置管理",n);break;default:await m(_,n);break}}const r=()=>{var _;(_=s.value)==null||_.openCreateDialog(),b.value=!0},o=()=>{F()};return(_,n)=>{const f=K,N=Ce,ee=be,V=Fe,q=we,I=j,G=pe,se=he,J=Le,re=$e,ie=Ae,X=Ze;return W(),ve("div",wt,[t(J,{class:"search-card",size:"small"},{header:a(()=>[M("div",St,[t(f,{size:"18",color:"#18a058"},{default:a(()=>[t(e(ge))]),_:1}),n[7]||(n[7]=M("span",null,"查询条件",-1)),t(N,{depth:"3",style:{"margin-left":"8px","font-size":"12px"}},{default:a(()=>n[6]||(n[6]=[k(" 支持按名称、类型、状态等条件筛选 ")])),_:1})])]),default:a(()=>[t(se,{model:e(C),"label-width":"80",size:"small",inline:""},{default:a(()=>[t(V,{label:"名称"},{default:a(()=>[t(ee,{value:e(C).groupName,"onUpdate:value":n[0]||(n[0]=D=>e(C).groupName=D),placeholder:"请输入英文命名空间名称",clearable:"",style:{width:"200px"}},null,8,["value"])]),_:1}),t(V,{label:"类型"},{default:a(()=>[t(q,{value:e(C).groupType,"onUpdate:value":n[1]||(n[1]=D=>e(C).groupType=D),placeholder:"请选择类型",clearable:"",options:e(Ne),style:{width:"150px"}},null,8,["value","options"])]),_:1}),t(V,{label:"状态"},{default:a(()=>[t(q,{value:e(C).activeFlag,"onUpdate:value":n[2]||(n[2]=D=>e(C).activeFlag=D),placeholder:"请选择状态",clearable:"",options:e(vt),style:{width:"120px"}},null,8,["value","options"])]),_:1}),t(V,{label:"访问控制"},{default:a(()=>[t(q,{value:e(C).accessControlEnabled,"onUpdate:value":n[3]||(n[3]=D=>e(C).accessControlEnabled=D),placeholder:"请选择",clearable:"",options:e(ft),style:{width:"120px"}},null,8,["value","options"])]),_:1}),t(V,null,{default:a(()=>[t(G,null,{default:a(()=>[t(I,{type:"primary",onClick:e(h)},{icon:a(()=>[t(f,null,{default:a(()=>[t(e(ge))]),_:1})]),default:a(()=>[n[8]||(n[8]=k(" 查询 "))]),_:1},8,["onClick"]),t(I,{onClick:e(E)},{icon:a(()=>[t(f,null,{default:a(()=>[t(e(me))]),_:1})]),default:a(()=>[n[9]||(n[9]=k(" 重置 "))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(J,{class:"toolbar-card",size:"small"},{default:a(()=>[M("div",Tt,[M("div",xt,[t(G,null,{default:a(()=>[t(I,{type:"primary",onClick:r},{icon:a(()=>[t(f,null,{default:a(()=>[t(e(Xe))]),_:1})]),default:a(()=>[n[10]||(n[10]=k(" 新建命名空间 "))]),_:1}),t(re,{vertical:""}),t(I,{type:"success",secondary:"",disabled:!e(g),onClick:e(H)},{icon:a(()=>[t(f,null,{default:a(()=>[t(e(Se))]),_:1})]),default:a(()=>[n[11]||(n[11]=k(" 批量启用 "))]),_:1},8,["disabled","onClick"]),t(I,{type:"warning",secondary:"",disabled:!e(g),onClick:e(A)},{icon:a(()=>[t(f,null,{default:a(()=>[t(e(Te))]),_:1})]),default:a(()=>[n[12]||(n[12]=k(" 批量禁用 "))]),_:1},8,["disabled","onClick"]),t(I,{type:"error",secondary:"",disabled:!e(g),onClick:e(v)},{icon:a(()=>[t(f,null,{default:a(()=>[t(e(xe))]),_:1})]),default:a(()=>[n[13]||(n[13]=k(" 批量删除 "))]),_:1},8,["disabled","onClick"])]),_:1})]),M("div",Nt,[t(G,null,{default:a(()=>[e(g)?(W(),Z(N,{key:0,depth:"3"},{default:a(()=>[k(" 已选择 "+ne(e(L))+" 项 ",1)]),_:1})):le("",!0),t(I,{circle:"",quaternary:"",onClick:e(O),title:"刷新数据"},{icon:a(()=>[t(f,null,{default:a(()=>[t(e(me))]),_:1})]),_:1},8,["onClick"])]),_:1})])])]),_:1}),t(J,{class:"table-card"},{header:a(()=>[M("div",Dt,[t(N,{strong:""},{default:a(()=>n[14]||(n[14]=[k("命名空间列表")])),_:1}),t(N,{depth:"3",style:{"margin-left":"8px","font-size":"12px"}},{default:a(()=>[k(" 共 "+ne(e(P))+" 条记录 ",1)]),_:1})])]),default:a(()=>[t(X,{ref_key:"tableRef",ref:d,columns:e(p),data:e(x),loading:e(u),pagination:e(w),"checked-row-keys":e(i),"row-key":e(T).rowKey,"scroll-x":e(T).scrollX,"max-height":e(T).maxHeight,bordered:e(T).bordered,striped:e(T).striped,size:e(T).size,"onUpdate:checkedRowKeys":n[4]||(n[4]=D=>e($)(D)),remote:""},{empty:a(()=>[t(ie,{description:e(R).description,"show-description":e(R).showDescription,"show-icon":e(R).showIcon,size:e(R).size},null,8,["description","show-description","show-icon","size"])]),_:1},8,["columns","data","loading","pagination","checked-row-keys","row-key","scroll-x","max-height","bordered","striped","size"])]),_:1}),t(ht,{visible:b.value,"onUpdate:visible":n[5]||(n[5]=D=>b.value=D),onSuccess:o,ref_key:"dialogRef",ref:s},null,8,["visible"])])}}}),Yt=ke(It,[["__scopeId","data-v-df1b7052"]]);export{Yt as default};
