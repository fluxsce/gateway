import{c1 as N,d6 as L,d7 as U,cw as W,cv as K,O as $,P as j,d as M,T as o,bV as _,aO as E,G,J as H,ay as J,ck as Y,V as Z,a$ as q,b0 as Q,W as k,r as v,Y as X,Z as ee,j as V,M as te,a1 as B,d8 as ae,a3 as ne}from"./index-talhFt-3.js";import{s as se}from"./prop-NnGblK-3.js";const ie=N({name:"DynamicTags",common:$,peers:{Input:K,Button:W,Tag:U,Space:L},self(){return{inputWidth:"64px"}}}),le=j("dynamic-tags",[j("input",{minWidth:"var(--n-input-width)"})]),ue=Object.assign(Object.assign(Object.assign({},k.props),ae),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),de=M({name:"DynamicTags",props:ue,slots:Object,setup(t){const{mergedClsPrefixRef:y,inlineThemeDisabled:d}=Z(t),{localeRef:c}=q("DynamicTags"),m=Q(t),{mergedDisabledRef:s}=m,g=v(""),p=v(!1),h=v(!0),C=v(null),b=k("DynamicTags","-dynamic-tags",le,ie,t,y),T=v(t.defaultValue),O=ne(t,"value"),l=X(O,T),F=V(()=>c.value.add),D=V(()=>se(t.size)),z=V(()=>s.value||!!t.max&&l.value.length>=t.max);function I(e){const{onChange:a,"onUpdate:value":n,onUpdateValue:r}=t,{nTriggerFormInput:P,nTriggerFormChange:x}=m;a&&B(a,e),r&&B(r,e),n&&B(n,e),T.value=e,P(),x()}function R(e){const a=l.value.slice(0);a.splice(e,1),I(a)}function w(e){switch(e.key){case"Enter":u()}}function u(e){const a=e??g.value;if(a){const n=l.value.slice(0);n.push(t.onCreate(a)),I(n)}p.value=!1,h.value=!0,g.value=""}function A(){u()}function S(){p.value=!0,te(()=>{var e;(e=C.value)===null||e===void 0||e.focus(),h.value=!1})}const f=V(()=>{const{self:{inputWidth:e}}=b.value;return{"--n-input-width":e}}),i=d?ee("dynamic-tags",void 0,f,t):void 0;return{mergedClsPrefix:y,inputInstRef:C,localizedAdd:F,inputSize:D,inputValue:g,showInput:p,inputForceFocused:h,mergedValue:l,mergedDisabled:s,triggerDisabled:z,handleInputKeyDown:w,handleAddClick:S,handleInputBlur:A,handleCloseClick:R,handleInputConfirm:u,mergedTheme:b,cssVars:d?void 0:f,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){const{mergedTheme:t,cssVars:y,mergedClsPrefix:d,onRender:c,renderTag:m}=this;return c==null||c(),o(_,{class:[`${d}-dynamic-tags`,this.themeClass],size:"small",style:y,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagClass:g,tagStyle:p,type:h,round:C,size:b,color:T,closable:O,mergedDisabled:l,showInput:F,inputValue:D,inputClass:z,inputStyle:I,inputSize:R,inputForceFocused:w,triggerDisabled:u,handleInputKeyDown:A,handleInputBlur:S,handleAddClick:f,handleCloseClick:i,handleInputConfirm:e,$slots:a}=this;return this.mergedValue.map((n,r)=>m?m(n,r):o(E,{key:r,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,class:g,style:p,type:h,round:C,size:b,color:T,closable:O,disabled:l,onClose:()=>{i(r)}},{default:()=>typeof n=="string"?n:n.label})).concat(F?a.input?a.input({submit:e,deactivate:S}):o(G,Object.assign({placeholder:"",size:R,style:I,class:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:D,onUpdateValue:n=>{this.inputValue=n},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeydown:A,onBlur:S,internalForceFocus:w})):a.trigger?a.trigger({activate:f,disabled:u}):o(H,{dashed:!0,disabled:u,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:R,onClick:f},{icon:()=>o(J,{clsPrefix:d},{default:()=>o(Y,null)})}))}})}});export{de as N};
