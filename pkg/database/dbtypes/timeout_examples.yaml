# 数据库超时配置示例
# 展示如何为不同数据库类型配置超时参数

database:
  default: "mysql_main"
  
  connections:
    # MySQL数据库配置示例
    mysql_main:
      enabled: true
      driver: "mysql"
      connection:
        host: "localhost"
        port: 3306
        username: "root"
        password: "password"
        database: "myapp"
        charset: "utf8mb4"
        parse_time: true
        loc: "Local"
        # MySQL超时配置
        mysql_connect_timeout: 10    # 连接超时10秒
        mysql_read_timeout: 30       # 读取超时30秒  
        mysql_write_timeout: 30      # 写入超时30秒
      pool:
        max_open_conns: 100
        max_idle_conns: 25
        conn_max_lifetime: 3600
        conn_max_idle_time: 1800
      log:
        enable: true
        slow_threshold: 200

    # PostgreSQL数据库配置示例
    postgres_main:
      enabled: true
      driver: "postgres"
      connection:
        host: "localhost"
        port: 5432
        username: "postgres"
        password: "password"
        database: "myapp"
        sslmode: "disable"
        # PostgreSQL超时配置
        postgres_connect_timeout: 15    # 连接超时15秒
        postgres_statement_timeout: 60  # 语句超时60秒
      pool:
        max_open_conns: 100
        max_idle_conns: 25
      log:
        enable: true
        slow_threshold: 200

    # SQLite数据库配置示例
    sqlite_main:
      enabled: true
      driver: "sqlite"
      connection:
        database: "./data/app.db"
        # SQLite超时配置
        busy_timeout: 10000          # 忙等待超时10秒(毫秒)
        journal_mode: "WAL"
        synchronous_mode: "NORMAL"
        cache_mode: "shared"
        connection_mode: "rwc"
        cache_size: -64000           # 64MB缓存
        foreign_keys: true
      pool:
        max_open_conns: 10           # SQLite建议较小的连接数
        max_idle_conns: 5
      log:
        enable: true
        slow_threshold: 100

    # Oracle数据库配置示例
    oracle_main:
      enabled: true
      driver: "oracle"
      connection:
        host: "oracle.example.com"
        port: 1521
        username: "app_user"
        password: "app_password"
        database: "ORCL"             # 服务名
        # Oracle超时配置
        oracle_connection_timeout: 30  # 连接超时30秒
        oracle_read_timeout: 60        # 读取超时60秒
        oracle_write_timeout: 60       # 写入超时60秒
        # Oracle其他配置
        service_name: "ORCL"
        nls_lang: "AMERICAN_AMERICA.UTF8"
        auto_commit: false
        prefetch_rows: 500
        lob_prefetch_size: 4096
      pool:
        max_open_conns: 50
        max_idle_conns: 25
        conn_max_lifetime: 3600
        conn_max_idle_time: 1800
      log:
        enable: true
        slow_threshold: 300

    # 高性能MySQL配置示例
    mysql_high_performance:
      enabled: true
      driver: "mysql"
      connection:
        host: "mysql-cluster.internal"
        port: 3306
        username: "app_user"
        password: "strong_password"
        database: "high_perf_db"
        charset: "utf8mb4"
        parse_time: true
        loc: "UTC"
        # 高性能环境的超时配置
        mysql_connect_timeout: 5     # 快速连接超时
        mysql_read_timeout: 15       # 较短的读取超时
        mysql_write_timeout: 10      # 较短的写入超时
      pool:
        max_open_conns: 200          # 更多连接
        max_idle_conns: 50
        conn_max_lifetime: 1800      # 30分钟
        conn_max_idle_time: 600      # 10分钟
      log:
        enable: true
        slow_threshold: 100          # 100ms慢查询阈值

    # 开发环境SQLite配置
    sqlite_dev:
      enabled: true
      driver: "sqlite"
      connection:
        database: ":memory:"         # 内存数据库用于测试
        busy_timeout: 5000           # 开发环境较短超时
        foreign_keys: true
      pool:
        max_open_conns: 1            # 内存数据库只需要1个连接
        max_idle_conns: 1
      log:
        enable: true
        slow_threshold: 50           # 开发环境更严格的慢查询检测 