# éš§é“ç®¡ç†åŠŸèƒ½æ¶æ„è®¾è®¡æ–¹æ¡ˆ

## ğŸ¯ **è®¾è®¡ç›®æ ‡**

å‚è€ƒèŠ±ç”Ÿå£³ã€frpã€ngrokç­‰ä¸šç•Œæˆç†Ÿçš„å†…ç½‘ç©¿é€å·¥å…·ï¼Œè®¾è®¡ä¸€ä¸ªä¸“æ³¨äºéš§é“æ ¸å¿ƒåŠŸèƒ½çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œå®ç°ï¼š

- **éš§é“æœåŠ¡ç«¯**: é«˜æ€§èƒ½çš„éš§é“æœåŠ¡å™¨ï¼Œæ”¯æŒå¤šåè®®ä»£ç†è½¬å‘
- **éš§é“å®¢æˆ·ç«¯**: è½»é‡çº§å®¢æˆ·ç«¯ï¼Œæ”¯æŒè‡ªåŠ¨é‡è¿å’Œå¤šåè®®é€‚é…
- **å®æ—¶ç›‘æ§**: éš§é“çŠ¶æ€ã€æµé‡ã€æ€§èƒ½çš„å®æ—¶ç›‘æ§å’Œå‘Šè­¦
- **æ•°æ®åº“é…ç½®**: æ‰€æœ‰é…ç½®ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨åœ¨æ•°æ®åº“ä¸­
- **å®‰å…¨é€šä¿¡**: ç«¯åˆ°ç«¯TLSåŠ å¯†å’Œèº«ä»½è®¤è¯æœºåˆ¶

## ğŸ—ï¸ **æ•´ä½“æ¶æ„è®¾è®¡**

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Tunnel Core System                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Client Side   â”‚   Server Side   â”‚   Database      â”‚  Monitor  â”‚
â”‚   Components    â”‚   Components    â”‚   Storage       â”‚  & Alert  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Tunnel Client â”‚ â€¢ Tunnel Server â”‚ â€¢ Config Store  â”‚ â€¢ Health  â”‚
â”‚ â€¢ Auto Reconnectâ”‚ â€¢ Session Mgmt  â”‚ â€¢ User Store    â”‚ â€¢ Metrics â”‚
â”‚ â€¢ Protocol Adaptâ”‚ â€¢ Load Balance  â”‚ â€¢ Tunnel Store  â”‚ â€¢ Alert   â”‚
â”‚ â€¢ Local Proxy   â”‚ â€¢ Data Forward  â”‚ â€¢ Log Store     â”‚ â€¢ Log     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶è®¾è®¡

> **æ¶æ„åŸåˆ™**: ä¸“æ³¨éš§é“æ ¸å¿ƒåŠŸèƒ½å®ç°ï¼Œé…ç½®ç®¡ç†é€šè¿‡æ•°æ®åº“æŒä¹…åŒ–ï¼Œå‰ç«¯ç•Œé¢ç”±ç‹¬ç«‹å·¥ç¨‹è´Ÿè´£ã€‚

## ğŸ“¦ **æ¨¡å—æ¶æ„**

### 1. **å®¢æˆ·ç«¯æ¨¡å— (Client Side)**

```
internal/tunnel/client/
â”œâ”€â”€ core/                    # å®¢æˆ·ç«¯æ ¸å¿ƒ
â”‚   â”œâ”€â”€ client.go           # éš§é“å®¢æˆ·ç«¯ä¸»ä½“
â”‚   â”œâ”€â”€ connection.go       # è¿æ¥ç®¡ç†
â”‚   â””â”€â”€ heartbeat.go        # å¿ƒè·³æœºåˆ¶
â”œâ”€â”€ proxy/                  # æœ¬åœ°ä»£ç†
â”‚   â”œâ”€â”€ http_proxy.go       # HTTPä»£ç†
â”‚   â”œâ”€â”€ tcp_proxy.go        # TCPä»£ç†
â”‚   â””â”€â”€ udp_proxy.go        # UDPä»£ç†
â””â”€â”€ config/                 # å®¢æˆ·ç«¯é…ç½®
    â””â”€â”€ config.go           # é…ç½®ç®¡ç†
```

**æ ¸å¿ƒåŠŸèƒ½**:
- **æŒä¹…è¿æ¥**: ä¸æœåŠ¡ç«¯å»ºç«‹é•¿è¿æ¥
- **è‡ªåŠ¨é‡è¿**: ç½‘ç»œæ–­å¼€æ—¶è‡ªåŠ¨é‡è¿
- **æœ¬åœ°ä»£ç†**: åœ¨æœ¬åœ°å¯åŠ¨ä»£ç†æœåŠ¡
- **åè®®é€‚é…**: æ”¯æŒå¤šç§åè®®çš„æœ¬åœ°ç›‘å¬

### 2. **æœåŠ¡ç«¯æ¨¡å— (Server Side)**

```
internal/tunnel/server/
â”œâ”€â”€ core/                   # æœåŠ¡ç«¯æ ¸å¿ƒ
â”‚   â”œâ”€â”€ server.go          # éš§é“æœåŠ¡ç«¯ä¸»ä½“
â”‚   â”œâ”€â”€ tunnel_manager.go  # éš§é“ç®¡ç†å™¨
â”‚   â””â”€â”€ session_manager.go # ä¼šè¯ç®¡ç†å™¨
â”œâ”€â”€ handler/               # è¯·æ±‚å¤„ç†å™¨
â”‚   â”œâ”€â”€ http_handler.go    # HTTPè¯·æ±‚å¤„ç†
â”‚   â”œâ”€â”€ tcp_handler.go     # TCPè¿æ¥å¤„ç†
â”‚   â””â”€â”€ udp_handler.go     # UDPæ•°æ®å¤„ç†
â””â”€â”€ proxy/                 # ä»£ç†è½¬å‘
    â”œâ”€â”€ forwarder.go       # æ•°æ®è½¬å‘å™¨
    â””â”€â”€ multiplexer.go     # å¤šè·¯å¤ç”¨å™¨
```

**æ ¸å¿ƒåŠŸèƒ½**:
- **éš§é“ç®¡ç†**: ç®¡ç†æ‰€æœ‰æ´»è·ƒçš„éš§é“è¿æ¥
- **è¯·æ±‚è·¯ç”±**: æ ¹æ®ç«¯å£è·¯ç”±åˆ°å¯¹åº”éš§é“
- **ä¼šè¯ä¿æŒ**: ç»´æŠ¤å®¢æˆ·ç«¯ä¼šè¯çŠ¶æ€
- **æ•°æ®è½¬å‘**: é«˜æ•ˆçš„æ•°æ®è½¬å‘æœºåˆ¶

### 3. **æ•°æ®å­˜å‚¨æ¨¡å— (Database Storage)**

```
internal/tunnel/storage/
â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ tunnel.go          # éš§é“é…ç½®æ¨¡å‹
â”‚   â”œâ”€â”€ user.go            # ç”¨æˆ·ä¿¡æ¯æ¨¡å‹
â”‚   â”œâ”€â”€ session.go         # ä¼šè¯ä¿¡æ¯æ¨¡å‹
â”‚   â””â”€â”€ metrics.go         # ç›‘æ§æŒ‡æ ‡æ¨¡å‹
â”œâ”€â”€ dao/                    # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ tunnel_dao.go      # éš§é“é…ç½®DAO
â”‚   â”œâ”€â”€ session_dao.go     # ä¼šè¯ç®¡ç†DAO
â”‚   â””â”€â”€ metrics_dao.go     # ç›‘æ§æ•°æ®DAO
â”œâ”€â”€ migration/              # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ init.sql           # åˆå§‹åŒ–è„šæœ¬
â””â”€â”€ cache/                  # ç¼“å­˜ç®¡ç†
    â”œâ”€â”€ local_cache.go     # æœ¬åœ°ç¼“å­˜å®ç°
    â””â”€â”€ cache_manager.go   # ç¼“å­˜ç®¡ç†å™¨
```

**æ ¸å¿ƒåŠŸèƒ½**:
- **é…ç½®æŒä¹…åŒ–**: éš§é“é…ç½®ä¿¡æ¯æ•°æ®åº“å­˜å‚¨
- **ç”¨æˆ·ç®¡ç†**: ç”¨æˆ·è®¤è¯ä¿¡æ¯å’Œæƒé™ç®¡ç†
- **ä¼šè¯è·Ÿè¸ª**: å®¢æˆ·ç«¯è¿æ¥ä¼šè¯çŠ¶æ€ç®¡ç†
- **ç›‘æ§æ•°æ®**: éš§é“è¿è¡ŒæŒ‡æ ‡å’Œæ—¥å¿—å­˜å‚¨
- **ç¼“å­˜ä¼˜åŒ–**: é«˜é¢‘è®¿é—®æ•°æ®æœ¬åœ°ç¼“å­˜


### 4. **ç›‘æ§æ¨¡å— (Monitor)**

```
internal/tunnel/monitor/
â”œâ”€â”€ metrics/                # æŒ‡æ ‡æ”¶é›†
â”‚   â”œâ”€â”€ collector.go       # æŒ‡æ ‡æ”¶é›†å™¨
â”‚   â””â”€â”€ storage.go         # æŒ‡æ ‡å­˜å‚¨
â”œâ”€â”€ health/                 # å¥åº·æ£€æŸ¥
â”‚   â”œâ”€â”€ checker.go         # å¥åº·æ£€æŸ¥å™¨
â”‚   â””â”€â”€ detector.go        # æ•…éšœæ£€æµ‹
â””â”€â”€ log/                    # æ—¥å¿—ç®¡ç†
    â”œâ”€â”€ access_log.go      # è®¿é—®æ—¥å¿—
    â””â”€â”€ error_log.go       # é”™è¯¯æ—¥å¿—
```

**æ ¸å¿ƒåŠŸèƒ½**:
- **å®æ—¶ç›‘æ§**: éš§é“è¿æ¥çŠ¶æ€ã€æµé‡ã€å»¶è¿Ÿç›‘æ§
- **å¥åº·æ£€æŸ¥**: å®šæœŸæ£€æŸ¥éš§é“å¥åº·çŠ¶æ€
- **æ•…éšœæ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹éš§é“æ•…éšœ
- **æ—¥å¿—è®°å½•**: è®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—è®°å½•

## ğŸ”§ **æŠ€æœ¯æ¶æ„è®¾è®¡**

### åè®®æ ˆè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application Layer                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         HTTP/HTTPS    â”‚    TCP Raw    â”‚    UDP Raw         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Tunnel Protocol                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Control Channel      â”‚      Data Channel              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Transport Layer                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      TCP/TLS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### éš§é“åè®®è®¾è®¡

#### 1. **æ§åˆ¶åè®® (Control Protocol)**
```json
{
  "type": "control",
  "action": "create_tunnel|destroy_tunnel|heartbeat",
  "tunnel_id": "unique_id",
  "config": {
    "protocol": "http|tcp|udp",
    "local_port": 8080,
    "remote_port": 80,
    "domain": "example.com",
    "auth": {...}
  }
}
```

#### 2. **æ•°æ®åè®® (Data Protocol)**
```
+--------+--------+--------+--------+
| Magic  | Type   | Length | Data   |
+--------+--------+--------+--------+
| 4 bytes| 1 byte | 4 bytes| N bytes|
```

#### 3. **å¿ƒè·³åè®® (Heartbeat Protocol)**
```json
{
  "type": "heartbeat",
  "timestamp": 1640995200,
  "status": "online"
}
```

### å®‰å…¨è®¾è®¡

#### 1. **ä¼ è¾“å®‰å…¨**
- **TLS 1.3**: æ‰€æœ‰é€šä¿¡ä½¿ç”¨TLS 1.3åŠ å¯†
- **è¯ä¹¦éªŒè¯**: æ”¯æŒè‡ªç­¾åå’ŒCAç­¾åè¯ä¹¦
- **å¯†é’¥è½®æ¢**: å®šæœŸè½®æ¢åŠ å¯†å¯†é’¥

#### 2. **èº«ä»½è®¤è¯**
- **Tokenè®¤è¯**: JWTä»¤ç‰Œè®¤è¯
- **åŒå‘è®¤è¯**: å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŒå‘è®¤è¯
- **APIå¯†é’¥**: æ”¯æŒAPI Keyè®¤è¯

#### 3. **è®¿é—®æ§åˆ¶**
- **å®¢æˆ·ç«¯è®¤è¯**: é™åˆ¶å…è®¸è¿æ¥çš„å®¢æˆ·ç«¯
- **IPç™½åå•**: é™åˆ¶å®¢æˆ·ç«¯IPèŒƒå›´
- **ç«¯å£æ§åˆ¶**: é™åˆ¶å¯ä½¿ç”¨çš„ç«¯å£èŒƒå›´
- **æµé‡é™åˆ¶**: é™åˆ¶éš§é“æµé‡å’Œè¿æ¥æ•°

## ğŸš€ **æ ¸å¿ƒç‰¹æ€§è®¾è®¡**

### æ ¸å¿ƒéš§é“åŠŸèƒ½

#### éš§é“ç±»å‹æ”¯æŒ
- **HTTPéš§é“**: å°†æœ¬åœ°HTTPæœåŠ¡æš´éœ²åˆ°å…¬ç½‘ï¼Œæ”¯æŒè‡ªå®šä¹‰åŸŸåå’ŒSSL
- **TCPéš§é“**: å°†æœ¬åœ°TCPæœåŠ¡æš´éœ²åˆ°å…¬ç½‘ï¼Œæ”¯æŒä»»æ„TCPåè®®
- **UDPéš§é“**: å°†æœ¬åœ°UDPæœåŠ¡æš´éœ²åˆ°å…¬ç½‘ï¼Œæ”¯æŒUDPåè®®è½¬å‘
- **WebSocketéš§é“**: ä¸“é—¨ä¼˜åŒ–çš„WebSocketåè®®æ”¯æŒ

#### éš§é“ç®¡ç†åŠŸèƒ½
- **åŠ¨æ€é…ç½®**: è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹éš§é“é…ç½®
- **çŠ¶æ€ç›‘æ§**: å®æ—¶ç›‘æ§éš§é“è¿æ¥çŠ¶æ€å’Œæµé‡ç»Ÿè®¡
- **è‡ªåŠ¨æ¢å¤**: ç½‘ç»œæ–­å¼€æ—¶è‡ªåŠ¨é‡è¿å’Œæ•…éšœæ¢å¤
- **è´Ÿè½½å‡è¡¡**: å¤šä¸ªç›¸åŒæœåŠ¡çš„éš§é“é—´æ™ºèƒ½è´Ÿè½½åˆ†é…

### 1. **å¤šåè®®æ”¯æŒ**

#### HTTP/HTTPSéš§é“
```yaml
tunnel_type: http
config:
  local_port: 8080
  remote_port: 80
  custom_headers:
    Host: myapp.local
  ssl_cert: auto  # è‡ªåŠ¨ç”³è¯·SSLè¯ä¹¦
```

#### TCPéš§é“
```yaml
tunnel_type: tcp
config:
  local_port: 3306
  remote_port: 33306
  load_balance: round_robin
```

#### UDPéš§é“
```yaml
tunnel_type: udp
config:
  local_port: 53
  remote_port: 5353
  session_timeout: 30s
```

### 2. **è´Ÿè½½å‡è¡¡ç­–ç•¥**

- **è½®è¯¢ (Round Robin)**: è¯·æ±‚è½®æµåˆ†é…åˆ°å„éš§é“
- **æœ€å°‘è¿æ¥ (Least Connections)**: åˆ†é…åˆ°è¿æ¥æ•°æœ€å°‘çš„éš§é“

### 3. **è‡ªåŠ¨åŒ–ç‰¹æ€§**

#### è‡ªåŠ¨é‡è¿æœºåˆ¶
```go
type ReconnectConfig struct {
    MaxRetries      int           `json:"max_retries"`
    InitialDelay    time.Duration `json:"initial_delay"`
    MaxDelay        time.Duration `json:"max_delay"`
    BackoffFactor   float64       `json:"backoff_factor"`
    EnableJitter    bool          `json:"enable_jitter"`
}
```

#### è‡ªåŠ¨SSLè¯ä¹¦
- **Let's Encrypté›†æˆ**: è‡ªåŠ¨ç”³è¯·å’Œç»­æœŸSSLè¯ä¹¦
- **è¯ä¹¦ç®¡ç†**: è‡ªåŠ¨ç®¡ç†è¯ä¹¦ç”Ÿå‘½å‘¨æœŸ

## ğŸ“Š **æ€§èƒ½è®¾è®¡**

### 1. **è¿æ¥å¤ç”¨**
- **å¤šè·¯å¤ç”¨**: å•ä¸ªè¿æ¥æ‰¿è½½å¤šä¸ªéš§é“
- **è¿æ¥æ± **: å¤ç”¨TCPè¿æ¥å‡å°‘æ¡æ‰‹å¼€é”€
- **Keep-Alive**: é•¿è¿æ¥ä¿æŒå‡å°‘é‡è¿

### 2. **æœ¬åœ°ç¼“å­˜è®¾è®¡**
- **ä¼šè¯ç¼“å­˜**: å®¢æˆ·ç«¯è¿æ¥çŠ¶æ€æœ¬åœ°ç¼“å­˜
- **é…ç½®ç¼“å­˜**: éš§é“é…ç½®ä¿¡æ¯å†…å­˜ç¼“å­˜
- **LRUç­–ç•¥**: æœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜æ·˜æ±°ç­–ç•¥
- **TTLæœºåˆ¶**: ç¼“å­˜è¿‡æœŸæ—¶é—´æ§åˆ¶

### 3. **æ•°æ®ä¼˜åŒ–**
- **å‹ç¼©ä¼ è¾“**: æ”¯æŒgzipç­‰å‹ç¼©ç®—æ³•
- **æµå¼ä¼ è¾“**: å¤§æ–‡ä»¶æµå¼ä¼ è¾“

### 4. **å¹¶å‘å¤„ç†**
- **åç¨‹æ± **: ä½¿ç”¨åç¨‹æ± å¤„ç†å¹¶å‘è¿æ¥
- **å¼‚æ­¥I/O**: å¼‚æ­¥éé˜»å¡I/Oæ“ä½œ
- **å†…å­˜æ± **: å¤ç”¨å†…å­˜ç¼“å†²åŒº

## ğŸ” **ç›‘æ§ä¸è¿ç»´**

### 1. **ç›‘æ§æŒ‡æ ‡**

#### ç³»ç»ŸæŒ‡æ ‡
- **è¿æ¥æ•°**: å½“å‰æ´»è·ƒè¿æ¥æ•°
- **ååé‡**: æ•°æ®ä¼ è¾“é€Ÿç‡
- **å»¶è¿Ÿ**: ç«¯åˆ°ç«¯å»¶è¿Ÿç»Ÿè®¡
- **é”™è¯¯ç‡**: è¯·æ±‚é”™è¯¯ç‡ç»Ÿè®¡

#### ä¸šåŠ¡æŒ‡æ ‡
- **éš§é“æ•°é‡**: æ´»è·ƒéš§é“æ•°é‡
- **ç”¨æˆ·æ•°é‡**: åœ¨çº¿ç”¨æˆ·æ•°é‡
- **æµé‡ç»Ÿè®¡**: æŒ‰ç”¨æˆ·/éš§é“çš„æµé‡ç»Ÿè®¡
- **æˆåŠŸç‡**: éš§é“è¿æ¥æˆåŠŸç‡

### 2. **å‘Šè­¦ç­–ç•¥**
```yaml
alerts:
  - name: tunnel_down
    condition: tunnel_status == "disconnected"
    duration: 30s
    severity: critical
    
  - name: high_latency
    condition: avg_latency > 1000ms
    duration: 2m
    severity: warning
    
  - name: high_error_rate
    condition: error_rate > 5%
    duration: 1m
    severity: warning
```

### 3. **æ—¥å¿—ç®¡ç†**
- **ç»“æ„åŒ–æ—¥å¿—**: JSONæ ¼å¼çš„ç»“æ„åŒ–æ—¥å¿—
- **æ—¥å¿—åˆ†çº§**: DEBUGã€INFOã€WARNã€ERRORç­‰çº§åˆ«
- **æ—¥å¿—è½®è½¬**: è‡ªåŠ¨æ—¥å¿—è½®è½¬å’Œæ¸…ç†
- **æ—¥å¿—èšåˆ**: æ”¯æŒELKã€Lokiç­‰æ—¥å¿—èšåˆç³»ç»Ÿ

## ğŸ”§ **é…ç½®ç®¡ç†**

### 1. **æœåŠ¡ç«¯é…ç½®**
```yaml
server:
  bind_port: 7000
  bind_addr: 0.0.0.0
  max_clients: 1000
  
  # TLSé…ç½®
  tls:
    cert_file: server.crt
    key_file: server.key
    
  # è®¤è¯é…ç½®
  auth:
    method: token
    token: "your-auth-token"
    
  # é™åˆ¶é…ç½®
  limits:
    max_tunnels_per_client: 10
    max_bandwidth: "100MB"
```

### 2. **å®¢æˆ·ç«¯é…ç½®**
```yaml
client:
  server_addr: tunnel.example.com
  server_port: 7000
  auth_token: "your-auth-token"
  
  # éš§é“é…ç½®
  tunnels:
    - name: web
      type: http
      local_port: 8080
      remote_port: 80
      
    - name: ssh
      type: tcp
      local_port: 22
      remote_port: 2222
```