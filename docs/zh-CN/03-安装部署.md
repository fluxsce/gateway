# FLUX Gateway - å®‰è£…éƒ¨ç½²

æœ¬æ–‡æ¡£æä¾› FLUX Gateway çš„å®‰è£…éƒ¨ç½²æŒ‡å—ï¼ŒåŒ…æ‹¬ç¯å¢ƒè¦æ±‚ã€å®‰è£…æ–¹å¼ã€ç›®å½•ç»“æ„å’Œéƒ¨ç½²é…ç½®ã€‚

---

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚

#### æœ€ä½é…ç½®
- **æ“ä½œç³»ç»Ÿ**: Linuxã€macOS æˆ– Windows
- **CPU**: 1æ ¸
- **å†…å­˜**: 256MB
- **ç£ç›˜ç©ºé—´**: 10GB
- **ç½‘ç»œ**: æ ¹æ®é…ç½®éœ€è¦å¼€æ”¾ç›¸åº”ç«¯å£

#### æ¨èé…ç½®
- **CPU**: 2æ ¸åŠä»¥ä¸Š
- **å†…å­˜**: 512MB åŠä»¥ä¸Š
- **ç£ç›˜ç©ºé—´**: 20GB åŠä»¥ä¸Š
- **ç½‘ç»œ**: ç¨³å®šçš„ç½‘ç»œè¿æ¥

### è½¯ä»¶ä¾èµ–

#### å¿…éœ€è½¯ä»¶
- **æ•°æ®åº“**ï¼ˆä¸‰é€‰ä¸€ï¼‰:
  - MySQL 5.7+ / 8.0+
  - Oracle 11g+ / 12c+
  - SQLite 3.x

#### å¯é€‰è½¯ä»¶
- **Redis**: 6.0+ ï¼ˆç”¨äºç¼“å­˜å’Œåˆ†å¸ƒå¼é™æµï¼‰
- **MongoDB**: 4.4+ ï¼ˆç”¨äºæ–‡æ¡£å­˜å‚¨ï¼‰
- **ClickHouse**: 21.0+ ï¼ˆç”¨äºæ—¥å¿—åˆ†æï¼‰

---

## ğŸ“¦ è·å–å®‰è£…åŒ…

### æ–¹å¼ä¸€ï¼šä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼ˆæ¨èï¼‰

ä» GitHub Releases ä¸‹è½½å·²ç¼–è¯‘å¥½çš„ç‰ˆæœ¬ï¼š

```bash
# è®¿é—® Releases é¡µé¢
https://github.com/fluxsce/gateway/releases

# ä¸‹è½½å¯¹åº”å¹³å°çš„ç‰ˆæœ¬
# Linux 64ä½
wget https://github.com/fluxsce/gateway/releases/download/v2.0.1/gateway-linux-amd64.tar.gz

# Windows 64ä½
# ä¸‹è½½ gateway-windows-amd64.zip

# macOS 64ä½
wget https://github.com/fluxsce/gateway/releases/download/v2.0.1/gateway-darwin-amd64.tar.gz
```

**è§£å‹å®‰è£…åŒ…**

```bash
# Linux/macOS
tar -xzf gateway-linux-amd64.tar.gz
cd gateway

# Windows
# ä½¿ç”¨è§£å‹å·¥å…·è§£å‹ gateway-windows-amd64.zip
```

### æ–¹å¼äºŒï¼šè‡ªè¡Œç¼–è¯‘

å¦‚æœéœ€è¦è‡ªå®šä¹‰ç¼–è¯‘æˆ–æ”¯æŒ Oracle æ•°æ®åº“ï¼Œè¯·å‚è€ƒ [å¼€å‘æŒ‡å—](./02-å¿«é€Ÿå¼€å§‹.md#ç¼–è¯‘æ„å»º) è¿›è¡Œç¼–è¯‘ã€‚

#### ç¼–è¯‘äº§ç‰©è¯´æ˜

ä½¿ç”¨å®˜æ–¹æ„å»ºè„šæœ¬ç¼–è¯‘åï¼Œä¼šåœ¨ `dist/` ç›®å½•ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦çš„æ„å»ºè„šæœ¬ï¼š

**Windows å¹³å°æ„å»ºè„šæœ¬**

```cmd
# è¿›å…¥æ„å»ºè„šæœ¬ç›®å½•
cd scripts\build

# Windows 10/11 + Oracle æ”¯æŒç‰ˆæœ¬
build-win10-oracle.cmd
# ç”Ÿæˆ: dist\gateway-win10-oracle-amd64.exe

# Windows Server 2008 + Oracle æ”¯æŒç‰ˆæœ¬
build-win2008-oracle.cmd
# ç”Ÿæˆ: dist\gateway-win2008-oracle-amd64.exe

# CentOS 7 å…¼å®¹ç‰ˆæœ¬ï¼ˆäº¤å‰ç¼–è¯‘ï¼‰
build-win10-centos7.cmd
# ç”Ÿæˆ: dist\gateway-centos7-amd64
```

**Linux å¹³å°æ„å»ºè„šæœ¬**

```bash
# è¿›å…¥æ„å»ºè„šæœ¬ç›®å½•
cd scripts/build

# CentOS 7 å…¼å®¹ç‰ˆæœ¬
./build-centos7.sh
# ç”Ÿæˆ: dist/gateway-centos7-amd64

# å¯é€‰ï¼šæŒ‡å®š Go ç‰ˆæœ¬
./build-centos7.sh 1.20
```

> ğŸ’¡ **è¯´æ˜**ï¼š
> - ä»¥ä¸Šè„šæœ¬ç”Ÿæˆçš„æ˜¯å¸¸ç”¨ç‰ˆæœ¬ï¼Œé€‚åˆå¤§å¤šæ•°éƒ¨ç½²åœºæ™¯
> - å¦‚éœ€å…¶ä»–å¹³å°ç‰ˆæœ¬ï¼ˆå¦‚ macOSã€ARM64 ç­‰ï¼‰ï¼Œè¯·ä½¿ç”¨ `build.cmd` äº¤äº’å¼èœå•æˆ– `build-all.ps1` è„šæœ¬è‡ªè¡Œç¼–è¯‘
> - Oracle ç‰ˆæœ¬éœ€è¦é¢„å…ˆå®‰è£… Oracle Instant Clientï¼Œè¯¦è§ [å¼€å‘æŒ‡å—](./02-å¿«é€Ÿå¼€å§‹.md#oracle-æ”¯æŒç¯å¢ƒé…ç½®)

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/fluxsce/gateway.git
cd gateway

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„æ„å»ºè„šæœ¬
ls scripts/build/
```

---

## ğŸ“ æ ‡å‡†ç›®å½•ç»“æ„

æ­£å¸¸çš„ç½‘å…³éƒ¨ç½²ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
gateway/                          # éƒ¨ç½²æ ¹ç›®å½•
â”œâ”€â”€ gateway                       # å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆLinux/macOSï¼‰
â”œâ”€â”€ gateway.exe                   # å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆWindowsï¼‰
â”œâ”€â”€ configs/                      # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ app.yaml                  # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ database.yaml             # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ gateway.yaml              # ç½‘å…³é…ç½®
â”‚   â”œâ”€â”€ logger.yaml               # æ—¥å¿—é…ç½®
â”‚   â””â”€â”€ web.yaml                  # Webæ§åˆ¶å°é…ç½®
â”œâ”€â”€ web/                          # Webèµ„æºç›®å½•
â”‚   â”œâ”€â”€ static/                   # åç«¯é™æ€èµ„æº
â”‚   â””â”€â”€ frontend/                 # Vue3å‰ç«¯é¡¹ç›®
â”‚       â””â”€â”€ dist/                 # å‰ç«¯æ‰“åŒ…åçš„é™æ€èµ„æº
â”‚           â”œâ”€â”€ index.html        # ä¸»é¡µé¢
â”‚           â”œâ”€â”€ favicon.ico       # ç½‘ç«™å›¾æ ‡
â”‚           â””â”€â”€ assets/           # é™æ€èµ„æºï¼ˆCSSã€JSã€å›¾ç‰‡ç­‰ï¼‰
â”œâ”€â”€ logs/                         # æ—¥å¿—ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ debug.log                 # è°ƒè¯•æ—¥å¿—
â”‚   â”œâ”€â”€ info.log                  # ä¿¡æ¯æ—¥å¿—
â”‚   â”œâ”€â”€ warn.log                  # è­¦å‘Šæ—¥å¿—
â”‚   â””â”€â”€ error.log                 # é”™è¯¯æ—¥å¿—
â”œâ”€â”€ backup/                       # å¤‡ä»½ç›®å½•ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ pprof_analysis/               # æ€§èƒ½åˆ†æç›®å½•ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ scripts/                      # è„šæœ¬ç›®å½•ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
â”‚   â”œâ”€â”€ build/                    # æ„å»ºè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ build.cmd             # Windows æ„å»ºèœå•
â”‚   â”‚   â”œâ”€â”€ build-win10-oracle.cmd
â”‚   â”‚   â”œâ”€â”€ build-win2008-oracle.cmd
â”‚   â”‚   â”œâ”€â”€ build-win10-centos7.cmd
â”‚   â”‚   â”œâ”€â”€ build-centos7.sh
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ deploy/                   # éƒ¨ç½²è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ install-service.cmd   # Windows æœåŠ¡å®‰è£…
â”‚   â”‚   â”œâ”€â”€ uninstall-service.cmd # Windows æœåŠ¡å¸è½½
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ db/                       # æ•°æ®åº“è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ frp_tunnel_management.sql         # MySQL
â”‚   â”‚   â”œâ”€â”€ frp_tunnel_management_oracle.sql  # Oracle
â”‚   â”‚   â””â”€â”€ frp_tunnel_management_sqlite.sql  # SQLite
â”‚   â””â”€â”€ test/                     # æµ‹è¯•è„šæœ¬
â””â”€â”€ README.md                     # è¯´æ˜æ–‡æ¡£
```

> ğŸ’¡ **è¯´æ˜**ï¼š
> - `scripts/` ç›®å½•é€šå¸¸åªåœ¨å¼€å‘ç¯å¢ƒä¸­å­˜åœ¨ï¼Œç”Ÿäº§éƒ¨ç½²æ—¶å¯ä»¥ä¸åŒ…å«
> - å¦‚æœä»æºç ç¼–è¯‘ï¼Œå»ºè®®ä¿ç•™ `scripts/deploy/` ç”¨äºæœåŠ¡ç®¡ç†
> - å¦‚æœä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼Œé€šå¸¸åªåŒ…å«å¯æ‰§è¡Œæ–‡ä»¶ã€é…ç½®æ–‡ä»¶å’Œ Web èµ„æº

---

## âš™ï¸ é…ç½®è¯´æ˜

æ•°æ®åº“åˆå§‹åŒ–å’Œé…ç½®æ–‡ä»¶è¯´æ˜è¯·å‚è€ƒ [å¼€å‘æŒ‡å—](./02-å¿«é€Ÿå¼€å§‹.md) ç« èŠ‚ï¼š
- [æ•°æ®åº“åˆå§‹åŒ–](./02-å¿«é€Ÿå¼€å§‹.md#æ•°æ®åº“åˆå§‹åŒ–)
- [é…ç½®æ–‡ä»¶](./02-å¿«é€Ÿå¼€å§‹.md#é…ç½®æ–‡ä»¶)

---

## ğŸš€ éƒ¨ç½²å’Œå¯åŠ¨

| éƒ¨ç½²æ–¹å¼ | é€‚ç”¨åœºæ™¯ | ä¼˜ç‚¹ | æ¨èåº¦ |
|---------|---------|------|--------|
| **ä½¿ç”¨å®‰è£…åŒ…éƒ¨ç½²** | ç”Ÿäº§ç¯å¢ƒã€å¿«é€Ÿéƒ¨ç½² | å¼€ç®±å³ç”¨ã€æ— éœ€ç¼–è¯‘ç¯å¢ƒ | â­â­â­â­â­ |
| è‡ªè¡Œç¼–è¯‘éƒ¨ç½² | å®šåˆ¶åŒ–éœ€æ±‚ã€ç‰¹æ®Šç¯å¢ƒ | çµæ´»é…ç½®ã€æ”¯æŒ Oracle | â­â­â­ |

| å¯åŠ¨æ–¹å¼ | é€‚ç”¨åœºæ™¯ | å¼€æœºè‡ªå¯ | è‡ªåŠ¨é‡å¯ | æ¨èåº¦ |
|---------|---------|---------|---------|--------|
| **æ³¨å†Œä¸ºç³»ç»ŸæœåŠ¡** | ç”Ÿäº§ç¯å¢ƒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | â­â­â­â­â­ |
| ç›´æ¥æ‰§è¡Œæ–‡ä»¶ | å¼€å‘æµ‹è¯• | âŒ ä¸æ”¯æŒ | âŒ ä¸æ”¯æŒ | â­â­ |

---

## ğŸ“¦ æ–¹å¼ä¸€ï¼šä½¿ç”¨å®‰è£…åŒ…éƒ¨ç½²ï¼ˆæ¨èï¼‰

### 1. è§£å‹å®‰è£…åŒ…

```bash
# Linux/macOS
tar -xzf gateway-linux-amd64.tar.gz -C /opt/
cd /opt/gateway

# Windows
# è§£å‹åˆ° C:\gateway
cd C:\gateway
```

è§£å‹åçš„å®Œæ•´ç›®å½•ç»“æ„å·²åŒ…å«æ‰€æœ‰å¿…éœ€æ–‡ä»¶ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€Web èµ„æºã€éƒ¨ç½²è„šæœ¬ï¼‰ã€‚

### 2. é…ç½®æ•°æ®åº“å’Œåº”ç”¨

æ ¹æ®å®é™…ç¯å¢ƒä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè¯¦è§ [å¼€å‘æŒ‡å— - é…ç½®æ–‡ä»¶](./02-å¿«é€Ÿå¼€å§‹.md#é…ç½®æ–‡ä»¶)ã€‚

### 3. å¯åŠ¨åº”ç”¨

#### æ–¹å¼ Aï¼šæ³¨å†Œä¸ºç³»ç»ŸæœåŠ¡å¯åŠ¨ï¼ˆæ¨èï¼‰

**Windows æœåŠ¡**

```cmd
# ä½¿ç”¨å®˜æ–¹éƒ¨ç½²è„šæœ¬
scripts\deploy\install-service.cmd

# Oracle ç‰ˆæœ¬
scripts\deploy\install-service.cmd oracle

# å¯åŠ¨æœåŠ¡
sc start Gateway

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sc query Gateway
```

**Linux Systemd æœåŠ¡**

```bash
# ä½¿ç”¨å®˜æ–¹éƒ¨ç½²è„šæœ¬
sudo scripts/deploy/install-service-linux.sh

# å¯åŠ¨æœåŠ¡
sudo systemctl start gateway

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status gateway.service
```

#### æ–¹å¼ Bï¼šç›´æ¥æ‰§è¡Œæ–‡ä»¶å¯åŠ¨

**Linux/macOS**

```bash
# å‰å°å¯åŠ¨
./gateway

# åå°å¯åŠ¨
nohup ./gateway > logs/app.log 2>&1 &
```

**Windows**

```cmd
REM å‰å°å¯åŠ¨
gateway.exe

REM åå°å¯åŠ¨
start /B gateway.exe
```

---

## ğŸ”¨ æ–¹å¼äºŒï¼šè‡ªè¡Œç¼–è¯‘éƒ¨ç½²

é€‚ç”¨äºéœ€è¦å®šåˆ¶åŒ–ç¼–è¯‘æˆ–æ”¯æŒ Oracle æ•°æ®åº“çš„åœºæ™¯ã€‚

### 1. ç¼–è¯‘åº”ç”¨

å‚è€ƒ [å¼€å‘æŒ‡å— - ç¼–è¯‘æ„å»º](./02-å¿«é€Ÿå¼€å§‹.md#ç¼–è¯‘æ„å»º) è¿›è¡Œç¼–è¯‘ã€‚

### 2. åˆ›å»ºéƒ¨ç½²ç›®å½•

```bash
sudo mkdir -p /opt/gateway/{configs,logs,web/frontend/dist,web/static}
```

### 3. å¤åˆ¶æ–‡ä»¶

```bash
# å¤åˆ¶å¯æ‰§è¡Œæ–‡ä»¶
sudo cp dist/gateway-centos7-amd64 /opt/gateway/gateway
sudo chmod +x /opt/gateway/gateway

# å¤åˆ¶é…ç½®æ–‡ä»¶
sudo cp -r configs/* /opt/gateway/configs/

# å¤åˆ¶ Web èµ„æº
sudo cp -r web/frontend/dist/* /opt/gateway/web/frontend/dist/
sudo cp -r web/static/* /opt/gateway/web/static/

# å¤åˆ¶éƒ¨ç½²è„šæœ¬ï¼ˆå¯é€‰ï¼‰
sudo cp -r scripts /opt/gateway/
```

### 4. é…ç½®æ•°æ®åº“å’Œåº”ç”¨

æ ¹æ®å®é™…ç¯å¢ƒä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè¯¦è§ [å¼€å‘æŒ‡å— - é…ç½®æ–‡ä»¶](./02-å¿«é€Ÿå¼€å§‹.md#é…ç½®æ–‡ä»¶)ã€‚

### 5. å¯åŠ¨åº”ç”¨

#### æ–¹å¼ Aï¼šæ³¨å†Œä¸ºç³»ç»ŸæœåŠ¡å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨å®˜æ–¹éƒ¨ç½²è„šæœ¬
sudo scripts/deploy/install-service-linux.sh
```

#### æ–¹å¼ Bï¼šç›´æ¥æ‰§è¡Œæ–‡ä»¶å¯åŠ¨

```bash
cd /opt/gateway
./gateway
```

---

## âœ… éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥è¿›ç¨‹

```bash
# Linux/macOS
ps aux | grep gateway

# Windows
tasklist | findstr gateway
```

### 2. æ£€æŸ¥ç«¯å£

```bash
# Linux/macOS
netstat -tulpn | grep :8080
netstat -tulpn | grep :12003

# Windows
netstat -ano | findstr :8080
netstat -ano | findstr :12003
```

### 3. è®¿é—® Web æ§åˆ¶å°

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š

- **æ§åˆ¶å°åœ°å€**: http://localhost:12003/gatewayweb
- **é»˜è®¤ç”¨æˆ·å**: `admin`
- **é»˜è®¤å¯†ç **: `123456`

---

## ğŸ“– ä¸‹ä¸€æ­¥

éƒ¨ç½²å®Œæˆåï¼Œå»ºè®®ç»§ç»­é˜…è¯»ï¼š

- [é¡¹ç›®ä»‹ç»](./01-é¡¹ç›®ä»‹ç».md) - äº†è§£é¡¹ç›®æ¶æ„å’Œæ ¸å¿ƒèƒ½åŠ›
- [å¼€å‘æŒ‡å—](./02-å¿«é€Ÿå¼€å§‹.md) - å¼€å‘ç¯å¢ƒæ­å»ºå’Œé…ç½®è¯´æ˜
- [å®¹å™¨åŒ–éƒ¨ç½²](./04-å®¹å™¨åŒ–éƒ¨ç½².md) - Docker å’Œ Kubernetes éƒ¨ç½²

---

## ğŸ¤ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–å¸®åŠ©ï¼š

- ğŸ“§ é‚®ç®±: fluxopensource@flux.com.cn
- ğŸ’¬ GitHub Issues: [æäº¤é—®é¢˜](https://github.com/fluxsce/gateway/issues)
- ğŸ“š æŸ¥çœ‹å®Œæ•´æ–‡æ¡£: [GitHub ä»“åº“](https://github.com/fluxsce/gateway)

---

<div align="center">

**[è¿”å›ç›®å½•](./README.md) â€¢ [ä¸Šä¸€ç« ï¼šå¼€å‘æŒ‡å—](./02-å¿«é€Ÿå¼€å§‹.md) â€¢ [ä¸‹ä¸€ç« ï¼šå®¹å™¨åŒ–éƒ¨ç½²](./04-å®¹å™¨åŒ–éƒ¨ç½².md)**

Made with â¤ï¸ by FLUX Gateway Team

</div>

